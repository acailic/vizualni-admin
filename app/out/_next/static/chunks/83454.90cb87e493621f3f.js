"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[83454],{62326:function(e,t,n){n.d(t,{J:function(){return s},i:function(){return c}});var r=n(91631),o=n(64986),i=n(40624),l=n(80491),a=n(24246);let s=e=>{let{x:t,y:n,color:o=c,focused:l=!1,onClick:s}=e,d=u();return(0,a.jsx)(r.Z,{className:(0,i.Z)(d.wrapper,s&&d.clickable),style:{left:t,top:n,pointerEvents:s?"auto":"none"},onClick:s,children:(0,a.jsx)("div",{className:(0,i.Z)(d.outerCircle,l&&d.focused),children:(0,a.jsx)("div",{className:d.innerCircle,style:{backgroundColor:o}})})})},c="#1F2937",u=(0,o.Z)(e=>({wrapper:{transform:"translate3d(-50%, -50%, 0)",position:"absolute",padding:e.spacing(1)},outerCircle:{width:16,height:16,borderRadius:"50%",backgroundColor:e.palette.background.paper,boxShadow:e.shadows[2]},innerCircle:{transform:"translate3d(-50%, -50%, 0)",position:"absolute",left:"50%",top:"50%",width:8,height:8,borderRadius:"50%"},clickable:{cursor:"pointer"},focused:{outline:`${l.iE}px solid ${l.x_}`}}))},93730:function(e,t,n){n.d(t,{I4:function(){return u},Zz:function(){return f},gf:function(){return d},rY:function(){return p},zm:function(){return m}});var r=n(27378),o=n(81364),i=n(50953),l=n(25390),a=n(4974),s=n(15658),c=n(77167);let u=()=>{let[e]=(0,s.lY)(),{activeField:t}=(0,l.f6)(e);return(0,a.c)(t)&&(0,s.N3)(e)},d=()=>{let[e]=(0,o.X)(),[t]=(0,s.lY)(),n=(0,l.f6)(t),{activeField:i}=n,a=u();return(0,r.useCallback)((t,r)=>{let o,l,{axisComponentId:s,axisValue:c}=r;for(let e of n.annotations)if(f(t,e.targets)){o=e;break}o?.color&&"filled"===o.highlightType&&(l=o.color);let u="annotation"===e.type&&e.visible&&e.observation?.[`${s}/__iri__`]===c,d=n.annotations.some(e=>e.key!==i&&f(t,e.targets)),p=o?.key===i;return{color:l,focused:a&&(u&&!d||p),isActive:p}},[i,n.annotations,e,a])},p=(e,t)=>{let{chartConfig:n,definitiveFilters:r,segment:o}=t,i=Object.entries((0,l.G_)(r)).filter(e=>{let[,t]=e;return t.value!==c.P}).map(e=>{let[t,n]=e;return{componentId:t,value:`${n.value}`}});switch(n.chartType){case"column":case"line":case"area":{let t=n.fields.x.componentId;t&&i.push({componentId:t,value:`${e[`${t}/__iri__`]}`});let r=n.fields.segment?.componentId;if(r&&o){let t=o??e[`${r}/__iri__`]??"";i.push({componentId:r,value:t})}break}case"bar":{let t=n.fields.y.componentId;t&&i.push({componentId:t,value:`${e[`${t}/__iri__`]}`});let r=n.fields.segment?.componentId;if(r&&o){let t=o??e[`${r}/__iri__`]??"";i.push({componentId:r,value:t})}break}case"scatterplot":{let t=n.fields.segment?.componentId;if(t&&o){let n=o??e[`${t}/__iri__`]??"";i.push({componentId:t,value:n})}break}case"pie":{let t=n.fields.segment?.componentId;if(t&&o){let n=o??e[`${t}/__iri__`]??"";i.push({componentId:t,value:n})}break}case"comboLineColumn":case"comboLineDual":case"comboLineSingle":case"map":case"table":break;default:return n}return i},f=(e,t)=>{if(0===t.length)return!1;for(let n of t)if(e[`${n.componentId}/__iri__`]!==n.value)return!1;return!0},m=(e,t,n,r)=>!!((0,i.I3)(n)&&n.fields.segment?.componentId)&&n.annotations.some(o=>{let i=p(e,{chartConfig:n,definitiveFilters:r,segment:t});if(0===o.targets.length||0===i.length)return!1;let l=o.targets.filter(e=>i.some(t=>e.componentId===t.componentId));return 0!==l.length&&l.every(e=>i.some(t=>e.componentId===t.componentId&&e.value===t.value))})},35696:function(e,t,n){n.d(t,{x:function(){return C},u:function(){return j}});var r=n(27378),o=n(62326),i=n(87026),l=n(97901),a=n(64986),s=n(43137),c=n(27686),u=n(48947),d=n(49148),p=n(8788),f=n(81012),m=n(24246);let h=e=>{let{renderAnnotation:{annotation:t,x:n,y:o},closable:a}=e,h=(0,d.bU)(),v=x(),_=(0,p.bI)(e=>e.annotations),k=(0,p.bI)(e=>e.updateAnnotation),y=_[t.key],I=t.text[h],j=(0,r.useRef)(null),{0:C,1:w}=(0,r.useState)({width:0,minWidth:0,height:0});(0,r.useLayoutEffect)(()=>{let{width:e}=(0,f.y)(I,{fontSize:12,width:240,fontWeight:400});if(j.current&&y){let t=j.current.getBoundingClientRect();w({width:t.width,minWidth:e,height:t.height})}},[y,I]);let{bounds:{width:N}}=(0,s.gH)(),{left:Z,top:$}=(0,r.useMemo)(()=>g({x:n,y:o,minWidth:C.minWidth,chartWidth:N}),[n,o,C,N]),T=(0,r.useCallback)(()=>{k(t.key,!1)},[t.key,k]);return y&&I?(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(b,{annotationX:n,annotationY:o}),(0,m.jsxs)("div",{ref:j,className:v.root,style:{left:Z,top:$,minWidth:C.minWidth},children:[(0,m.jsx)(i.Z,{className:v.text,variant:"caption",children:(0,m.jsx)(c.Ln,{children:t.text[h]})}),(0,m.jsx)(l.Z,{className:v.closeButton,onClick:T,disabled:!a,children:(0,m.jsx)(u.JO,{name:"close",size:14})})]})]}):null},g=e=>{let{x:t,y:n,minWidth:r,chartWidth:o}=e,i=t+-24;return i+r>o&&(i=o-r),i<0&&(i=0),{left:i,top:n-12}},b=e=>{let{annotationX:t,annotationY:n}=e,r=x();return(0,m.jsx)("div",{className:r.connector,style:{left:t,top:n-12,height:12}})},x=(0,a.Z)(e=>({root:{zIndex:2,transform:"translate(0%, -100%)",position:"absolute",display:"flex",alignItems:"flex-start",justifyContent:"space-between",gap:e.spacing(2),width:"fit-content",maxWidth:240,padding:e.spacing(3),borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper,wordBreak:"break-word",boxShadow:e.shadows[4]},text:{margin:"auto 0"},closeButton:{transform:"translate(25%, 0)",marginTop:`-${e.spacing(2)}`,padding:e.spacing(1),color:e.palette.text.primary},connector:{zIndex:1,transform:"translateX(-50%)",position:"absolute",width:1,backgroundColor:o.i,pointerEvents:"none"}}));var v=n(93730),_=n(25390),k=n(4974),y=n(15658),I=n(17510);let j=()=>{let e=(0,d.bU)(),[t]=(0,y.lY)(),{activeField:n,annotations:i}=(0,_.f6)(t),{chartData:l,bounds:{width:a,height:c,margins:u},segmentDimension:f,getSegment:g,getAnnotationInfo:b}=(0,s.gH)(),x=(0,v.I4)(),j=(0,p.bI)(e=>e.annotations),C=(0,p.bI)(e=>e.updateAnnotation),w=(0,r.useRef)(null),N=(0,r.useRef)(n),Z=(0,r.useCallback)(e=>{C(e.key,!j[e.key])},[j,C]),$=(0,r.useCallback)((e,t,n,r,o)=>({annotation:e,x:t+u.left,y:n+u.top,color:r,focused:o}),[u.left,u.top]),T=(0,r.useCallback)(e=>l.find(t=>e.targets.some(e=>t[`${e.componentId}/__iri__`]===e.value&&e.componentId!==f?.id)),[l,f?.id]),E=(0,r.useCallback)(e=>{let t=T(e);if(!t)return;let{x:r,y:o,color:i}=b(t,{segment:"",focusingSegment:!1}),l=!!x&&n===e.key;return $(e,r,o,i,l)},[T,b,x,n,$]),A=(0,r.useCallback)(e=>{let t=!!x&&n===e.key;return l.map(n=>{if(!(0,v.Zz)(n,e.targets))return;let r=g(n),{x:o,y:i,color:l}=b(n,{segment:r,focusingSegment:!0}),a=l??("filled"===e.highlightType?e.color:void 0);return $(e,o,i,a,t)})},[x,n,l,g,b,$]),R=(0,r.useMemo)(()=>0===i.length?[]:i.flatMap(e=>!f||e.targets.some(e=>e.componentId===f.id)?A(e):E(e)).filter(I.y),[a,c,i,f,A,E]);return(0,r.useEffect)(()=>{if(!x){w.current=null;return}n&&!j[n]&&w.current!==n&&(C(n,!0),w.current=n)},[n,j,x,C]),(0,r.useEffect)(()=>{let e=N.current;if(e&&(0,k.c)(e)&&e!==n){let t=i.find(t=>t.key===e);t&&!t.defaultOpen&&C(e,!1)}N.current=n},[n,i,C]),(0,m.jsx)(m.Fragment,{children:R.map(t=>{let{annotation:r,x:i,y:l,color:a,focused:s}=t;return(0,m.jsxs)(m.Fragment,{children:[r.text[e]||s?(0,m.jsx)(o.J,{x:i,y:l,color:a,focused:s,onClick:()=>Z(r)},r.key):null,(0,m.jsx)(h,{renderAnnotation:t,closable:!x||r.key!==n})]})})})},C=12},36831:function(e,t,n){n.d(t,{r:function(){return a}});var r=n(62326),o=n(43137),i=n(81364),l=n(24246);let a=()=>{let[e]=(0,i.X)(),{getAnnotationInfo:t,bounds:{margins:n}}=(0,o.gH)();if("annotation"!==e.type||!e.visible||!e.observation)return null;let{x:a,y:s,color:c}=t(e.observation,{segment:e.segment??"",focusingSegment:!!e.focusingSegment});return(0,l.jsx)(r.J,{x:a+n.left,y:s+n.top,color:c,focused:!0})}},71532:function(e,t,n){n.d(t,{E5:function(){return c},Te:function(){return s},ll:function(){return a}});var r=n(87026),o=n(60116),i=n(80750),l=n(24246);let a=e=>{let{xValue:t,segment:n,yValue:o,yError:i}=e;return(0,l.jsxs)("div",{children:[t&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",sx:{fontWeight:"bold",whiteSpace:"wrap"},children:t}),n&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",children:n}),o&&(0,l.jsxs)(r.Z,{component:"div",variant:"caption",children:[o,i??null]})]})},s=e=>{let{xValue:t,segmentValues:n}=e;return(0,l.jsxs)(o.Z,{children:[t&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",sx:{fontWeight:"bold"},children:t}),n.map((e,t)=>(0,l.jsx)(i.YL,{label:`${e.label}: ${e.value}${e.error??""}`,color:e.color,symbol:e.symbol??"square",smaller:!0},t))]})},c=e=>{let{firstLine:t,secondLine:n,thirdLine:i}=e;return(0,l.jsxs)(o.Z,{children:[t&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",sx:{fontWeight:"bold"},children:t}),n&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",children:n}),i&&(0,l.jsx)(r.Z,{component:"div",variant:"caption",children:i})]})}},18984:function(e,t,n){n.d(t,{u:function(){return s}});var r=n(43137),o=n(44830),i=n(71532),l=n(81364),a=n(24246);let s=e=>{let{type:t="single"}=e,[{type:n,visible:r,observation:o}]=(0,l.X)();return"tooltip"===n&&r&&o?(0,a.jsx)(c,{d:o,type:t}):null},c=e=>{let{d:t,type:n}=e,{bounds:l,getTooltipInfo:s}=(0,r.gH)(),{margins:c}=l,{xAnchor:u,yAnchor:d,placement:p,value:f,tooltipContent:m,datum:h,values:g,withTriangle:b}=s(t);return Number.isNaN(d)||void 0===d?null:(0,a.jsx)(o._M,{x:u,y:d,placement:p,withTriangle:b,margins:c,children:m||("multiple"===n&&g?(0,a.jsx)(i.Te,{xValue:f,segmentValues:g}):(0,a.jsx)(i.ll,{xValue:f,segment:h.label,yValue:h.value,yError:h.error}))})}},40907:function(e,t,n){n.d(t,{A:function(){return u}});var r=n(56141),o=n.n(r),i=n(93730),l=n(81364),a=n(25390),s=n(15658),c=n(77142);let u=e=>{let{focusingSegment:t}=e,[,n]=(0,l.X)(),[r,u]=(0,s.lY)(),d=(0,a.f6)(r),{activeField:p,annotations:f}=d,m=(0,a.B6)(),h=(0,i.I4)(),g=f.find(e=>e.key===p);return{onClick:(0,c.z)((e,t)=>{let{segment:n}=t;if(!h||!g||!p)return;let r=(0,i.rY)(e,{chartConfig:d,definitiveFilters:m,segment:n});for(let t of f){let l=t.targets,a=t.key!==p?(0,i.rY)(e,{chartConfig:d,definitiveFilters:m,segment:n}):r;if(o()(l,a))return}u({type:"CHART_ANNOTATION_TARGETS_CHANGE",value:{key:p,targets:r}})}),onHover:(0,c.z)((e,r)=>{let{segment:o}=r;n({type:"INTERACTION_UPDATE",value:{type:h?"annotation":"tooltip",visible:!0,observation:e,focusingSegment:t,segment:o}})}),onHoverOut:(0,c.z)(()=>{n({type:"INTERACTION_HIDE"})})}}}}]);
//# sourceMappingURL=83454.90cb87e493621f3f.js.map