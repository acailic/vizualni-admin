"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[30131],{30131:function(e,t,a){a.r(t),a.d(t,{ChartMapVisualization:function(){return tY}});var r=a(17043),i=a(60116),o=a(27378),l=a(93226),n=a(41502),s=a(38618),c=a(51894),m=a(18581),p=a(71993),u=a(60721),g=a(77142);function y(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?y(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):y(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let b={minZoom:1,maxZoom:13,latitude:46.8182,longitude:8.2275,zoom:5,width:400,height:400},h=e=>{let{width:t,height:a,bbox:r,padding:i=0}=e;if(!r)return;let o=new n.Z(d(d({},b),{},{width:t*(1-i),height:a*(1-i)})).fitBounds(r);return d(d({},b),o)},f=e=>{let{width:t,height:a,lockedBBox:r,featuresBBox:i}=e,l=(0,o.useMemo)(()=>h({width:t,height:a,bbox:r}),[t,a,r]),n=(0,o.useMemo)(()=>h({width:t,height:a,padding:1/4,bbox:i})??b,[t,a,i]),{0:s,1:c}=(0,o.useState)(()=>l??n),m=(0,g.z)(e=>{let{viewState:t}=e;c(e=>d(d({},e),t))});return(0,o.useEffect)(()=>{c(l??n)},[l,n]),{defaultViewState:n,viewState:s,onViewStateChange:m}},x=(e,t)=>{let a,r;if(e){let t=(0,m.Z)(e);t.flat().some(isNaN)||(a=t)}if(t){let e=t.filter(e=>void 0!==e.properties.observation);if(e.length>0){let[t,a]=(0,c.Z)(e,e=>e.coordinates[0]),[i,o]=(0,c.Z)(e,e=>e.coordinates[1]);r=[[t,i],[a,o]]}}if(void 0===a)return r;if(void 0===r)return a;{let[e,t]=[Math.min(a[0][0],r[0][0]),Math.max(a[1][0],r[1][0])],[i,o]=[Math.min(a[0][1],r[0][1]),Math.max(a[1][1],r[1][1])];return[[e,i],[t,o]]}},w=e=>{let{dimensionId:t,topology:a,filters:r,observations:i}=e,o=r?"single"===r.type?[r.value]:"multi"===r.type?Object.keys(r.values):void 0:void 0,l=(0,u.Z)(a,a.objects.shapes);return o&&(l.features=l.features.filter(e=>o.includes(e.properties.iri))),l.features.forEach(e=>{let a=i.find(a=>{let r=a[`${t}/__iri__`],i=a[t];return r?r===e.properties.iri:i===e.properties.label});e.properties=d(d({},e.properties),{},{observation:a})}),l};function v(e){return(0,p.PE)(()=>new s.Z(e)).setProps(e),null}let _=e=>{let{areaDimensionId:t,symbolDimensionId:a,geometries:r,coordinates:i}=e,o=!!(""!==t&&r),l=!!(""!==a&&(i||r));return o||l||!o&&!l&&!!(r||i)};var z=a(15863),k=a(3528),j=a(62720),O=a(12548),S=a(64986),L=a(68049),P=a(87885),I=a(66726),D=a.n(I),C=a(43605),Z=a.n(C),$=a(83766),M=a.n($),E=a(88291),T=a.n(E),N=a(44463),V=a(43922);let R=e=>{let{attribution:t}=e,a=(0,p.Sx)(),r=(0,V.Z)();return(0,o.useEffect)(()=>{let e=a.current;if(!e)return;let i=new(T()).AttributionControl({customAttribution:t?`<span style="color: ${r.palette.error.main}">${t}</span>`:void 0});return e.addControl(i,"bottom-right"),()=>{try{e.removeControl(i)}catch{}}},[t,a,r]),null};class A extends k.Z{getShaders(){let e=super.getShaders();return e.inject={"fs:DECKGL_FILTER_COLOR":`
        float PI = 3.14159265359;
        float angle = atan(geometry.uv.y, geometry.uv.x); 
        float dashPattern = mod(angle * 20.0, PI * 2.0);
        bool isDashed = dashPattern < PI;

        if (!isDashed) {
          discard;
        }
      `},e}}var F=a(15409),B=a.n(F),H=a(16976),U=JSON.parse('{"version":8,"id":"41cf7780-afbe-4e90-a7bf-644cc2b5b623","name":"visualize.grey-theme","sources":{"contours":{"url":"https://api.maptiler.com/tiles/contours-switzerland/tiles.json?key={key}","type":"vector"},"hillshade":{"url":"https://api.maptiler.com/tiles/hillshade/tiles.json?key={key}","tileSize":512,"type":"raster"},"lbm_relief":{"url":"https://api.maptiler.com/tiles/ch-swisstopo-relief/tiles.json?key={key}","tileSize":512,"type":"raster"},"swissmaptiles":{"url":"https://api.maptiler.com/tiles/v3-swisstopo/tiles.json?key={key}","type":"vector"}},"layers":[{"id":"background","type":"background","layout":{"visibility":"visible"},"paint":{"background-color":"rgba(255, 255, 255, 1)"}},{"id":"hillshade","type":"raster","source":"hillshade","minzoom":4,"layout":{"visibility":"visible"},"paint":{"raster-opacity":0.15,"raster-resampling":"linear","raster-brightness-max":0.6,"raster-brightness-min":0.2}},{"id":"lbm_relief","type":"raster","source":"lbm_relief","layout":{"visibility":"none"},"paint":{"raster-opacity":{"stops":[[5,0.15],[15,1],[16.4,0.6],[16.5,1]]}}},{"id":"contour_line","type":"line","source":"swissmaptiles","source-layer":"contour_line","minzoom":13,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":["match",["get","class"],["ice","water"],"rgb(221, 221, 221)",["scree"],"rgb(229, 229, 229)","rgb(219, 219, 219)"],"line-width":["interpolate",["exponential",1],["zoom"],12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],13,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],14,["case",["==",["%",["to-number",["get","ele"]],100],0],1,0],14.5,["case",["==",["%",["to-number",["get","ele"]],100],0],1.5,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],15,["case",["==",["%",["to-number",["get","ele"]],100],0],1.75,["case",["==",["%",["to-number",["get","ele"]],20],0],1,0]],16.5,["case",["==",["%",["to-number",["get","ele"]],100],0],2,["case",["==",["%",["to-number",["get","ele"]],10],0],1,0]]],"line-opacity":["interpolate",["linear"],["zoom"],13,["match",["get","class"],["scree","ice","water"],0.25,0.45],14,["match",["get","class"],["scree","ice","water"],0.3,0.55]]},"metadata":{"maputnik:comment":"color: rgb(191,138,64)"},"filter":["all",["!in","class","rock","ice","water"]]},{"id":"landcover","type":"fill","source":"swissmaptiles","source-layer":"landcover","minzoom":5,"layout":{"visibility":"visible"},"paint":{"fill-color":["match",["get","class"],["forest","wood"],"rgb(229, 229, 229)",["ice","glacier"],"rgb(255, 255, 255)",["wetland"],"rgb(209, 209, 209)",["sand"],"rgb(211, 211, 211)","rgb(236, 236, 236)"],"fill-opacity":["interpolate",["exponential",1.5],["zoom"],5,0,6,["match",["get","class"],["ice","glacier"],0.5,0],10,["match",["get","class"],["ice","glacier"],0.2,0.3],11,["match",["get","class"],["ice","glacier"],0.2,0.3],14,["match",["get","class"],["ice","glacier"],0,0.5]]},"filter":["any",["in","subclass","wood","scrub","recreation_ground","park","golf_course","allotments","plant_nursery","forest","glacier"],["==","class","sand"]]},{"id":"landcover_casing","type":"line","source":"swissmaptiles","source-layer":"landcover","minzoom":10,"layout":{"visibility":"visible"},"paint":{"line-blur":0.5,"line-color":"rgb(186, 199, 172)","line-width":["interpolate",["exponential",1.5],["zoom"],6,0,11,0.25,16,0.75],"line-opacity":["interpolate",["exponential",1.5],["zoom"],12,0,14,1]},"filter":["all",["in","subclass","wood","scrub","recreation_ground","park","golf_course","allotments","plant_nursery","forest"]]},{"id":"landuse","type":"fill","source":"swissmaptiles","source-layer":"landuse","layout":{"visibility":"visible"},"paint":{"fill-color":["match",["get","class"],["pitch"],"rgb(229, 229, 229)",["landfill","quarry"],"rgb(223, 223, 223)",["cemetery","zoo"],"rgb(231, 231, 231)",["parking"],"rgb(255, 255, 255)","rgb(235, 235, 235)"],"fill-opacity":["match",["get","class"],["pitch"],1,0.3]},"filter":["all",["in","class","landfill","cemetery","quarry","zoo","pitch"]]},{"id":"landuse_outline","type":"line","source":"swissmaptiles","source-layer":"landuse","layout":{"visibility":"visible"},"paint":{"line-color":["match",["get","class"],["pitch"],"rgb(130, 130, 130)","rgba(186, 199, 172, 1)"],"line-width":["interpolate",["exponential",1.5],["zoom"],11,0.25,16,0.75],"line-opacity":{"stops":[[14,0],[15,1]]}},"filter":["all",["in","class","cemetery","zoo","pitch"]]},{"id":"water_line_intermittent","type":"line","source":"swissmaptiles","source-layer":"waterway","minzoom":12,"layout":{"visibility":"visible"},"paint":{"line-blur":0,"line-color":"rgba(48, 48, 48, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],13,["match",["to-string",["get","width"]],["10","9","8"],3.5,["7","6","5"],2.5,["4","3"],1.5,["1","2"],1,["match",["get","class"],["river","canal"],3.5,1]],16,["match",["to-string",["get","width"]],"10",5,"9",4.5,"8",4,"7",3.5,["6","5"],3,"4",2.5,"3",2,"2",1.5,"1",1,["match",["get","class"],["river","canal"],5,1.5]],20,["match",["to-string",["get","width"]],"10",10,"9",9.6,"8",8.9,"7",8.2,"6",7.5,"5",6.8,"4",6.1,"3",5.4,"2",4.7,"1",4,["match",["get","class"],["river","canal"],10,4]]],"line-offset":0,"line-opacity":{"stops":[[13,0.25],[16,0.35]]}},"filter":["all",["==","intermittent",1]]},{"id":"water_line","type":"line","source":"swissmaptiles","source-layer":"waterway","minzoom":7,"layout":{"visibility":"visible"},"paint":{"line-blur":0,"line-color":["interpolate",["linear"],["zoom"],10,"rgba(219, 219, 219, 1)",16,["match",["get","class"],["river","canal"],"rgba(209, 209, 209, 1)","rgb(219, 219, 219)"]],"line-width":["interpolate",["exponential",1.5],["zoom"],7,1,10,["match",["to-string",["get","width"]],["10","9","8","7","6"],1.5,["5","4","3","2","1"],1,["match",["get","class"],["river","canal"],1.5,1]],13,["match",["to-string",["get","width"]],["10","9","8"],3.5,["7","6","5"],2.5,["4","3"],1.5,["1","2"],1,["match",["get","class"],["river","canal"],3.5,1]],16,["match",["to-string",["get","width"]],"10",5,"9",4.5,"8",4,"7",3.5,["6","5"],3,"4",2.5,"3",2,"2",1.5,"1",1,["match",["get","class"],["river","canal"],5,1.5]],20,["match",["to-string",["get","width"]],"10",10,"9",9.6,"8",8.9,"7",8.2,"6",7.5,"5",6.8,"4",6.1,"3",5.4,"2",4.7,"1",4,["match",["get","class"],["river","canal"],10,4]]],"line-offset":0,"line-opacity":0.7},"filter":["all",["!=","intermittent",1]]},{"id":"water_polygon","type":"fill","source":"swissmaptiles","source-layer":"water","layout":{"visibility":"visible"},"paint":{"fill-color":["interpolate",["exponential",1.5],["zoom"],4,"rgb(213, 213, 213)",10,"rgb(219, 219, 219)"]}},{"id":"contour_line_water","type":"line","source":"swissmaptiles","source-layer":"contour_line","minzoom":13,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgba(43, 43, 43, 1)","line-width":["interpolate",["exponential",1],["zoom"],12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],13,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],14,["case",["==",["%",["to-number",["get","ele"]],100],0],1,0],14.5,["case",["==",["%",["to-number",["get","ele"]],100],0],1.5,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],16,["case",["==",["%",["to-number",["get","ele"]],100],0],1.75,["case",["==",["%",["to-number",["get","ele"]],20],0],1,0]],16.5,["case",["==",["%",["to-number",["get","ele"]],100],0],2,["case",["==",["%",["to-number",["get","ele"]],10],0],1,0]]],"line-opacity":["interpolate",["linear"],["zoom"],13,["match",["get","class"],["scree","ice","water"],0.25,0.45],14,["match",["get","class"],["scree","ice","water"],0.3,0.55]]},"metadata":{"maputnik:comment":"color: rgb(191,138,64)"},"filter":["all",["in","class","ice","water"]]},{"id":"label_contour_line_20_grey","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":16,"layout":{"text-font":["Noto Sans Italic"],"text-size":12,"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":550,"symbol-z-order":"auto","text-max-angle":40,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(78, 78, 78, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, .8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],20],0],["!=",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["scree"],true,false]]},{"id":"label_contour_line_20_blue","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":16,"layout":{"text-font":["Noto Sans Italic"],"text-size":12,"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":550,"symbol-z-order":"auto","text-max-angle":40,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(110, 110, 111, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, .8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],20],0],["!=",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["ice","water"],true,false]]},{"id":"label_contour_line_20_brown","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":16,"layout":{"text-font":["Noto Sans Italic"],"text-size":12,"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":550,"symbol-z-order":"auto","text-max-angle":40,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(98, 98, 98, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, .8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],20],0],["!=",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["land"],true,false]]},{"id":"label_contour_line_100_grey","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":14,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["exponential",2],["zoom"],14,10.5,16,14],"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":{"stops":[[14,250],[16,450]]},"symbol-z-order":"auto","text-max-angle":35,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(111, 111, 111, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, 0.8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["scree"],true,false]]},{"id":"label_contour_line_100_blue","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":14,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["exponential",2],["zoom"],14,10.5,16,14],"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":{"stops":[[14,250],[16,450]]},"symbol-z-order":"auto","text-max-angle":35,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(98, 98, 98, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, 0.8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["ice","water"],true,false]]},{"id":"label_contour_line_100_brown","type":"symbol","source":"swissmaptiles","source-layer":"contour_line","minzoom":14,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["exponential",2],["zoom"],14,10.5,16,14],"text-field":"{ele} ","visibility":"visible","text-justify":"center","text-padding":["interpolate",["linear"],["zoom"],14,0,15,12,16,80],"symbol-spacing":{"stops":[[14,250],[16,450]]},"symbol-z-order":"auto","text-max-angle":35,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(111, 111, 111, 1)","text-opacity":["step",["zoom"],0,12,["case",["==",["%",["to-number",["get","ele"]],100],0],0.75,0],16,["case",["==",["%",["to-number",["get","ele"]],20],0],0.75,0]],"text-halo-blur":0.5,"text-halo-color":"rgba(238, 238, 238, 0.8)","text-halo-width":2},"filter":["all",["==",["%",["to-number",["get","ele"]],100],0],["match",["get","class"],["land"],true,false]]},{"id":"water_outline","type":"line","source":"swissmaptiles","source-layer":"water","layout":{"visibility":"visible"},"paint":{"line-blur":0.5,"line-color":"rgba(129, 129, 129, 1)","line-width":0.5,"line-opacity":["interpolate",["exponential",1.5],["zoom"],0,0,8,1,14,0]},"filter":["all",["!=","class","ocean"]]},{"id":"pattern_landcover_vineyard","type":"fill","source":"swissmaptiles","source-layer":"landcover","minzoom":13,"layout":{"visibility":"visible"},"paint":{"fill-opacity":["interpolate",["exponential",2],["zoom"],13,0,13.1,0.6,17,1],"fill-pattern":"vinyard_green"},"filter":["all",["==","subclass","vineyard"]]},{"id":"pattern_landcover_wetlands","type":"fill","source":"swissmaptiles","source-layer":"landcover","minzoom":13,"layout":{"visibility":"visible"},"paint":{"fill-color":"#000000","fill-opacity":["interpolate",["exponential",2],["zoom"],13,0,13.2,0.4,17,1],"fill-pattern":"wetland_blue","fill-antialias":true},"filter":["all",["==","class","wetland"]]},{"id":"pattern_landcover_orchard","type":"fill","source":"swissmaptiles","source-layer":"landcover","minzoom":13,"layout":{"visibility":"visible"},"paint":{"fill-opacity":["interpolate",["exponential",2],["zoom"],13,0,13.2,0.8,17,1],"fill-pattern":"orchard_green"},"filter":["all",["==","subclass","orchard"]]},{"id":"park","type":"line","source":"swissmaptiles","source-layer":"park","minzoom":7,"layout":{"visibility":"visible"},"paint":{"line-color":"rgba(191, 191, 191, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],9,1.5,15,8,18,12],"line-opacity":["interpolate",["linear"],["zoom"],7,0,8,1,13,1,14,0.6]},"filter":["all",["in","class","national_park"]]},{"id":"boundary_disputed","type":"line","source":"swissmaptiles","source-layer":"boundary","minzoom":0,"layout":{"line-cap":"square","line-join":"miter","visibility":"visible"},"paint":{"line-blur":1,"line-color":{"stops":[[6,"hsl(300, 55%, 80%)"],[9,"hsl(315, 40%, 85%)"]]},"line-width":["interpolate",["linear"],["zoom"],2,["match",["get","admin_level"],2,1,0],3,["match",["get","admin_level"],2,2,1],7,["match",["get","admin_level"],2,4,1.5],18,["match",["get","admin_level"],2,16,10]],"line-opacity":{"stops":[[13,1],[14,0.7]]},"line-dasharray":[1.5,2.5]},"filter":["all",["in","admin_level",2,4],["!=","maritime",1],["==","disputed",1],["==","$type","LineString"]]},{"id":"boundary","type":"line","source":"swissmaptiles","source-layer":"boundary","minzoom":0,"layout":{"line-cap":["literal","round"],"line-join":["literal","miter"],"visibility":"visible"},"paint":{"line-blur":1,"line-color":{"stops":[[6,"rgba(163, 163, 163, 1)"],[9,"rgba(177, 177, 177, 1)"]]},"line-width":["interpolate",["linear"],["zoom"],2,["match",["get","admin_level"],2,1,0],3,["match",["get","admin_level"],2,2,1],7,["match",["get","admin_level"],2,3,1],18,["match",["get","admin_level"],2,16,10]],"line-opacity":{"stops":[[13,1],[14,0.8]]}},"filter":["all",["in","admin_level",2,4],["!=","maritime",1],["!=","disputed",1],["==","$type","LineString"],["!=","adm0_l","CHE"],["!=","adm0_r","CHE"]]},{"id":"tunnel_public_transport","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":8,"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],18,0.4],"line-color":{"stops":[[7,"rgba(100, 100, 100, 1)"],[15,"rgba(83, 83, 83, 1)"]]},"line-width":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.2,0.75],0.2],0.2],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.1,1.25],1],["cable_car"],1,0.75],18,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],1,2],2],["cable_car"],2,1.5]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,9,["match",["get","class"],["rail"],0.8,0],13,["match",["get","subclass"],["rail","subway","funicular","narrow_gauge"],0.8,0],14,["match",["get","subclass"],["rail","narrow_gauge","funicular","subway"],["match",["get","service"],["yard","siding"],0,0.8],0],14.5,0.8],"line-dasharray":[4,4]},"filter":["all",["==","brunnel","tunnel"],["in","class","rail","transit","cable_car","gondola"],["==","$type","LineString"]]},{"id":"tunnel_road","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":7,"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],7,["literal",3],8,["literal",1],9,["match",["get","class"],["motorway","trunk","primary"],0.4,3],10,["match",["get","class"],["motorway","trunk","primary","secondary"],0.4,3],11,["match",["get","class"],["motorway","trunk","primary","secondary"],0.4,3],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],0.4,3],13,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],0.4,["minor"],1,3],15,0.4],"line-color":"rgba(170, 170, 170, 1)","line-width":["interpolate",["linear"],["zoom"],7,["literal",0],8,["match",["get","class"],["motorway","trunk","primary"],1,0],9,["match",["get","class"],["motorway","trunk","primary"],1.1,0],10,["match",["get","class"],["motorway","trunk","primary","secondary"],1.2,0],11,["match",["get","class"],["motorway","trunk","primary","secondary"],1.3,0],12,["match",["get","class"],["motorway","trunk","primary","secondary","tertiary"],1.4,0],13,["match",["get","class"],["motorway","trunk"],1.5,["primary","secondary","tertiary","minor"],1,0],14,["match",["get","class"],["motorway","trunk"],2,["primary","secondary","tertiary","minor"],1.5,0],15,["match",["get","class"],["motorway","trunk"],3,2],20,["match",["get","class"],["motorway","trunk"],5,2.5]],"line-offset":0,"line-opacity":1,"line-dasharray":[4,4]},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",["==","brunnel","tunnel"],["!in","class","rail","ferry","transit","cable_car","gondola","path"],["==","$type","LineString"]]},{"id":"tunnel_road_path","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":6,"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgba(140, 140, 140, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],15,1.1,20,3],"line-offset":0,"line-opacity":{"stops":[[14,0],[15,1]]}},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",["==","brunnel","tunnel"],["==","class","path"],["==","$type","LineString"]]},{"id":"construct_line","type":"line","source":"swissmaptiles","source-layer":"construct","minzoom":14,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"hsl(220, 10%, 67%)","line-width":{"stops":[[15,1],[18,4]]},"line-opacity":{"stops":[[14,0],[15,1]]}},"filter":["all",["==","class","lock"]]},{"id":"construct","type":"fill","source":"swissmaptiles","source-layer":"construct","minzoom":13,"layout":{"visibility":"visible"},"paint":{"fill-color":["interpolate",["exponential",1],["zoom"],13,["match",["get","class"],"weir","rgb(230, 230,230)","rgb(220, 220,220)"],17,["match",["get","class"],"weir","rgb(230, 230,230)","dam","rgb(210, 210,210)","rgb(220, 220,220)"]],"fill-opacity":["interpolate",["exponential",1],["zoom"],12,0,13,["match",["get","class"],"dam",1,0],14,["match",["get","class"],"dam",1,0],15,1]},"filter":["all",["!=","class","lock"]]},{"id":"aeroway_polygon_casing","type":"line","source":"swissmaptiles","source-layer":"aeroway","minzoom":11,"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgb(190, 190, 190)","line-width":{"base":1.5,"stops":[[13,3],[15,4],[17,5]]},"line-opacity":1},"filter":["all",["in","class","runway","taxiway","apron","runway_grass"],["==","$type","Polygon"]]},{"id":"aeroway_line_casing","type":"line","source":"swissmaptiles","source-layer":"aeroway","minzoom":11,"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgba(110, 110, 110, 1)","line-width":["interpolate",["exponential",2],["zoom"],11.5,0,12,2.3,15,11.25,20,153],"line-opacity":1},"filter":["all",["==","$type","LineString"]]},{"id":"road_via_ferrata","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"bevel","visibility":"visible"},"paint":{"line-blur":{"stops":[[15,0.1],[20,0.4]]},"line-color":{"stops":[[15,"rgba(20, 20, 20, 1)"],[18,"rgba(90, 90, 90, 1)"]]},"line-width":["interpolate",["exponential",1.5],["zoom"],15,1.1,20,3],"line-opacity":{"stops":[[14,0],[15,1]]}},"metadata":{"maputnik:comment":"cannot be in the same layer as road_casings because dasharray doesn\'t support expressions"},"filter":["all",["in","class","via_ferrata"],["!in","brunnel","bridge","tunnel"],["==","$type","LineString"]]},{"id":"road_path","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"bevel","visibility":"visible"},"paint":{"line-blur":{"stops":[[15,0.1],[20,0.4]]},"line-color":"rgba(115, 115, 115, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],15,1.1,20,3],"line-opacity":{"stops":[[14,0],[15,1]]}},"metadata":{"maputnik:comment":"cannot be in the same layer as road_casings because dasharray doesn\'t support expressions"},"filter":["all",["match",["get","class"],["path"],true,false],["match",["get","brunnel"],["bridge","tunnel"],["match",["get","subclass"],"covered_bridge",true,false],true],["==",["geometry-type"],"LineString"]]},{"id":"building_ln","type":"line","source":"swissmaptiles","source-layer":"building_ln","minzoom":13,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":["match",["get","class"],"weir","rgb(139,139,139)","rgb(100, 100, 100)"],"line-width":{"stops":[[13,0],[16,2],[18,3]]},"line-opacity":["match",["get","class"],"weir",0.2,1]}},{"id":"road_casing","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":7,"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-blur":{"stops":[[7,3],[8,0.4]]},"line-color":["interpolate",["exponential",1.7],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(149, 149, 149)","rgb(201, 201, 201)"],15,["match",["get","class"],["motorway","trunk"],"rgb(109, 109, 109)","rgb(90, 90, 90)"]],"line-width":["interpolate",["exponential",2],["zoom"],7,["literal",0],8,["match",["get","ramp"],1,1.5,3],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,4],["trunk"],4,3],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,5],["trunk"],["match",["get","oneway"],1,5,5],["primary"],5,["secondary"],4.5,["tertiary"],3.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,3.5,5.5],["trunk"],["match",["get","oneway"],1,5.5,5.5],["primary"],5.5,["secondary"],5,["tertiary"],4,["minor"],3,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,6.5,8],["trunk"],["match",["get","oneway"],1,8,9],["primary"],9,["secondary"],8,["tertiary"],7,["minor"],5,["track"],1.1,4],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,10,12],["trunk"],["match",["get","oneway"],1,12,15],["primary"],15,["secondary"],13,["tertiary"],11,["minor"],9,["track"],1.1,8],20,["match",["get","class"],["motorway","trunk","primary","rail"],120,["secondary"],115,["tertiary"],110,["minor"],100,["track"],3,95]],"line-offset":0},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",["match",["get","class"],["cable_car","car_ferry","chair_lift","ferry","gondola","path","rail","transit","via_ferrata"],false,true],["match",["get","brunnel"],["bridge","tunnel"],["match",["get","subclass"],"covered_bridge",true,false],true],["==",["geometry-type"],"LineString"]]},{"id":"landuse_parking","type":"fill","source":"swissmaptiles","source-layer":"landuse","layout":{"visibility":"visible"},"paint":{"fill-color":"rgba(255, 255, 255, 1)","fill-opacity":{"stops":[[14,0],[15,1]]}},"filter":["all",["in","class","parking"]]},{"id":"landuse_parking_outline","type":"line","source":"swissmaptiles","source-layer":"landuse","layout":{"visibility":"visible"},"paint":{"line-color":"rgba(130, 130, 130, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],11,0.25,16,0.75],"line-opacity":{"stops":[[14,0],[15,1]]}},"filter":["all",["in","class","parking"]]},{"id":"road_fill","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":7,"layout":{"line-cap":"round","line-join":"round","visibility":"visible"},"paint":{"line-blur":{"stops":[[8,0.4],[14,0.1]]},"line-color":["interpolate",["exponential",1],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(219, 219, 219)","rgb(255,255,255)"],15,["match",["get","class"],["motorway","trunk"],"rgb(209, 209, 209)","rgb(255,255,255)"]],"line-width":["interpolate",["exponential",2],["zoom"],7,["literal",0],8,["match",["get","ramp"],1,0.5,2],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,2.75],["trunk"],2.75,2],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,3.75],["trunk"],["match",["get","oneway"],1,3.75,3.75],["primary"],3.75,["secondary"],3.25,["tertiary"],2.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.75,4.25],["trunk"],["match",["get","oneway"],1,4.25,4.25],["primary"],4.25,["secondary"],3.75,["tertiary"],2.75,["minor"],1.75,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,5,6.5],["trunk"],["match",["get","oneway"],1,6.5,7.5],["primary"],7.5,["secondary"],6.5,["tertiary","rail"],5.5,["minor"],3.5,2.5],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,8.5,10.5],["trunk"],["match",["get","oneway"],1,10.5,13.5],["primary"],13.5,["secondary"],11.5,["tertiary","rail"],9.5,["minor"],7.5,6.5],20,["match",["get","class"],["motorway","trunk","primary","rail"],117,["secondary"],112,["tertiary"],107,["minor"],97,92]]},"filter":["all",["match",["get","class"],["cable_car","car_ferry","chair_lift","ferry","gondola","path","rail","track","transit","via_ferrata"],false,true],["match",["get","brunnel"],["bridge","tunnel"],["match",["get","subclass"],"covered_bridge",true,false],true],["==",["geometry-type"],"LineString"]]},{"id":"aeroway_line_fill","type":"line","source":"swissmaptiles","source-layer":"aeroway","minzoom":11,"layout":{"line-cap":"butt","line-join":"miter","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":["match",["get","class"],["runway_grass"],"rgb(224,234,221)","rgb(255, 255, 255)"],"line-width":["interpolate",["exponential",2],["zoom"],11,0,12,2,15,10,20,150],"line-opacity":1},"filter":["all",["==","$type","LineString"]]},{"id":"aeroway_polygon_fill","type":"fill","source":"swissmaptiles","source-layer":"aeroway","minzoom":11,"layout":{"visibility":"visible"},"paint":{"fill-color":["match",["get","class"],["runway_grass"],"rgb(224,234,221)","rgb(255, 255, 255)"],"fill-opacity":1,"fill-antialias":true},"filter":["all",["in","class","runway","taxiway","apron","runway_grass"],["==","$type","Polygon"]]},{"id":"car_ferry","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":9,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgba(148, 148, 148, 1)","line-width":{"stops":[[8,0.4],[14,1],[18,2]]},"line-opacity":["interpolate",["linear"],["zoom"],9,0,11,["match",["get","class"],["car_ferry"],1,0],12,["match",["get","class"],["car_ferry"],1,0],13,1]},"filter":["all",["==","class","car_ferry"]]},{"id":"ferry","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":12,"layout":{"visibility":"visible"},"paint":{"line-blur":0.4,"line-color":"rgba(139, 139, 139, 1)","line-width":{"stops":[[8,0.4],[14,1],[18,2]]},"line-opacity":{"stops":[[12,0],[13,1]]}},"filter":["all",["==","class","ferry"]]},{"id":"public_transport","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":8,"layout":{"visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],18,0.4],"line-color":"rgba(22, 22, 22, 1)","line-width":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.2,0.5],0.2],0.2],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.2,1],1],["cable_car"],1,0.75],18,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],1.5,2],2],1.5]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,9,["match",["get","class"],["rail"],1,0],12,["match",["get","class"],["rail"],1,0],13,["match",["get","class"],["rail"],1,0],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge","funicular"],["match",["get","service"],["yard","siding"],0,1],0],0],14.5,1]},"filter":["all",["in","class","rail","transit"],["!in","brunnel","bridge","tunnel"]]},{"id":"sinkhole","type":"symbol","source":"swissmaptiles","source-layer":"spot_elevation","minzoom":14,"layout":{"icon-size":1,"text-size":16,"icon-image":["match",["get","class"],"sinkhole","arrow_brown",["sinkhole_rock","sinkhole_scree"],"arrow_grey",["sinkhole_ice","sinkhole_water"],"arrow_blue",""],"visibility":"visible","icon-anchor":"bottom","icon-offset":[0,0],"icon-rotate":15,"text-anchor":"center","icon-padding":30,"icon-optional":false,"text-optional":false,"symbol-placement":"point","text-keep-upright":false,"text-allow-overlap":false,"text-ignore-placement":false},"paint":{"icon-color":"#000000","text-color":"#000000","icon-opacity":{"stops":[[14,0],[15,0.6]]},"text-opacity":1,"text-halo-blur":1,"text-halo-width":0},"filter":["all",["in","class","sinkhole","sinkhole_rock","sinkhole_scree","sinkhole_water","sinkhole_ice"]]},{"id":"building_2d","type":"fill","source":"swissmaptiles","source-layer":"building","minzoom":13,"layout":{"visibility":"visible"},"paint":{"fill-color":{"stops":[[13,"rgba(206, 206, 206, 1)"],[18,"rgba(158, 158, 158, 1)"]]},"fill-opacity":{"stops":[[13,0],[13.5,1]]}}},{"id":"building_2d_casing","type":"line","source":"swissmaptiles","source-layer":"building","minzoom":15,"layout":{"visibility":"visible"},"paint":{"line-color":"hsl(220, 10%, 67%)","line-width":["interpolate",["linear"],["zoom"],15,0.2,18,1.2],"line-opacity":["interpolate",["linear"],["zoom"],15,0,16,0.5,19,1]}},{"id":"lake_elevation","type":"symbol","source":"swissmaptiles","source-layer":"spot_elevation","minzoom":12,"layout":{"icon-size":1,"text-font":["Noto Sans Italic"],"text-size":["interpolate",["linear"],["zoom"],14,10.5,18,13],"icon-image":["case",["has","lake_depth"],"arrow_line_blue",["==",["length",["to-string",["get","ele"]]],3],"line_blue_short","line_blue_long"],"text-field":"{lake_depth}","visibility":"visible","icon-offset":[0,0],"text-anchor":"center","text-offset":["case",["has","lake_depth"],["literal",[0.35,-0.5]],["literal",[0,-0.5]]],"text-justify":"center","icon-optional":false,"text-optional":false,"symbol-placement":"point","text-line-height":1,"text-keep-upright":false,"icon-allow-overlap":true,"text-allow-overlap":false,"text-radial-offset":0,"text-pitch-alignment":"auto","icon-ignore-placement":true,"text-ignore-placement":false,"text-rotation-alignment":"auto"},"paint":{"icon-color":"#000000","text-color":"rgba(73, 73, 73, 1)","icon-opacity":1,"text-opacity":1,"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],12,1,18,2]},"filter":["all",["==","class","lake_elevation"]]},{"id":"bridge-l1_road_casing","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":["interpolate",["exponential",1.7],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(170, 136, 30)","rgb(80, 80, 80)"],15,["match",["get","class"],["motorway","trunk"],"rgb(139, 107, 63)","rgb(90, 90, 90)"]],"line-width":["interpolate",["exponential",2],["zoom"],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,4],["trunk"],4,3],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,5],["trunk"],["match",["get","oneway"],1,5,5],["primary"],5,["secondary"],4.5,["tertiary"],3.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,3.5,5.5],["trunk"],["match",["get","oneway"],1,5.5,5.5],["primary"],5.5,["secondary"],5,["tertiary"],4,["minor"],3,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,6.5,8],["trunk"],["match",["get","oneway"],1,8,9],["primary"],9,["secondary"],8,["tertiary"],7,["minor"],5,["track"],1.1,4],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,10,12],["trunk"],["match",["get","oneway"],1,12,15],["primary"],15,["secondary"],13,["tertiary"],11,["minor"],9,["track"],1.1,8],20,["match",["get","class"],["motorway","trunk","primary","rail"],120,["secondary"],115,["tertiary"],110,["minor"],100,["track"],3,95]],"line-offset":0,"line-opacity":1},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",["==","layer",1],["!in","class","rail","ferry","path","transit","cable_car","gondola"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l1_fill","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":{"stops":[[8,0.4],[14,0.1]]},"line-color":["interpolate",["exponential",1],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(219, 219, 219)",["rail","path","track"],["match",["get","subclass"],"funicular","rgba(243,243,246,0)","rgb(243,243,246)"],"rgb(255,255,255)","rgb(243,243,246)","rgb(255,255,255)"],15,["match",["get","class"],["motorway","trunk"],"rgb(209, 209, 209)",["rail","path","track"],["match",["get","subclass"],"funicular","rgba(243,243,246,0)","rgb(243,243,246)"],"rgb(255,255,255)"]],"line-width":["interpolate",["exponential",2],["zoom"],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,2.75],["trunk"],2.75,2],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,3.75],["trunk"],["match",["get","oneway"],1,3.75,3.75],["primary"],3.75,["secondary"],3.25,["tertiary"],2.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.75,4.25],["trunk"],["match",["get","oneway"],1,4.25,4.25],["primary"],4.25,["secondary"],3.75,["tertiary"],2.75,["minor"],1.75,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,5,6.5],["trunk"],["match",["get","oneway"],1,6.5,7.5],["primary"],7.5,["secondary"],6.5,["tertiary","rail"],5.5,["minor"],3.5,["transit","track","path"],2.5,2.5],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,8.5,10.5],["trunk"],["match",["get","oneway"],1,10.5,13.5],["primary"],13.5,["secondary"],11.5,["tertiary","rail"],9.5,["minor"],7.5,["transit","track","path"],6.5,6.5],20,["match",["get","class"],["motorway","trunk","primary","rail"],117,["secondary"],112,["tertiary"],107,["minor"],97,92]],"line-opacity":1},"filter":["all",["==","layer",1],["!in","class","ferry","cable_car","gondola"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l1_road_track","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],14,3,15,0.4],"line-color":{"stops":[[9,"rgba(80, 80, 80, 1)"],[15,"rgba(90, 90, 90, 1)"]]},"line-width":["interpolate",["exponential",2],["zoom"],14,0,15,1.1,16,1.1,18,2,20,3],"line-offset":0,"line-opacity":1},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",["==","class","track"],["==","layer",1],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l1_road_path","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"bevel","visibility":"visible"},"paint":{"line-blur":{"stops":[[15,0.1],[20,0.4]]},"line-color":"rgba(115, 115, 115, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],15,1.1,20,3],"line-opacity":{"stops":[[14,0],[15,1]]}},"metadata":{"maputnik:comment":"cannot be in the same layer as road_casings because dasharray doesn\'t support expressions"},"filter":["all",["in","class","path"],["==","layer",1],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l1_public_transport","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"round","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],18,0.4],"line-color":{"stops":[[7,"rgba(89, 89, 89, 1)"],[15,"rgba(87, 87, 87, 1)"]]},"line-width":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.2,0.5],0.2],0.2],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.1,1],1],["cable_car"],1,0.75],18,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],1.5,2],2],["cable_car"],2,1.5]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,9,["match",["get","class"],["rail"],1,0],12,["match",["get","class"],["rail"],1,0],13,["match",["get","class"],["rail"],1,0],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge","funicular"],["match",["get","service"],["yard","siding"],0,1],0],0],14.5,1]},"filter":["all",["==","layer",1],["in","class","rail","transit"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l2_road_casing","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":0.4,"line-color":["interpolate",["exponential",1.7],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(149, 149, 149)","rgb(201, 201, 201)"],15,["match",["get","class"],["motorway","trunk"],"rgb(109, 109, 109)","rgb(90, 90, 90)"]],"line-width":["interpolate",["exponential",2],["zoom"],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,4],["trunk"],4,3],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.5,5],["trunk"],["match",["get","oneway"],1,5,5],["primary"],5,["secondary"],4.5,["tertiary"],3.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,3.5,5.5],["trunk"],["match",["get","oneway"],1,5.5,5.5],["primary"],5.5,["secondary"],5,["tertiary"],4,["minor"],3,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,6.5,8],["trunk"],["match",["get","oneway"],1,8,9],["primary"],9,["secondary"],8,["tertiary"],7,["minor"],5,["track"],1.1,4],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,10,12],["trunk"],["match",["get","oneway"],1,12,15],["primary"],15,["secondary"],13,["tertiary"],11,["minor"],9,["track"],1.1,8],20,["match",["get","class"],["motorway","trunk","primary","rail"],120,["secondary"],115,["tertiary"],110,["minor"],100,["track"],3,95]],"line-offset":0,"line-opacity":1},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",[">","layer",1],["!in","class","rail","ferry","path","transit","cable_car","gondola"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l2_fill","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":{"stops":[[8,0.4],[14,0.1]]},"line-color":["interpolate",["exponential",1],["zoom"],9,["match",["get","class"],["motorway","trunk"],"rgb(219, 219, 219)",["rail","path","track"],["match",["get","subclass"],"funicular","rgba(243,243,246,0)","rgb(243,243,246)"],"rgb(255,255,255)","rgb(243,243,246)","rgb(255,255,255)"],15,["match",["get","class"],["motorway","trunk"],"rgb(209, 209, 209)",["rail","path","track"],["match",["get","subclass"],"funicular","rgba(243,243,246,0)","rgb(243,243,246)"],"rgb(255,255,255)"]],"line-width":["interpolate",["exponential",2],["zoom"],10,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,2.75],["trunk"],2.75,2],12,["match",["get","class"],["motorway"],["match",["get","ramp"],1,1.5,3.75],["trunk"],["match",["get","oneway"],1,3.75,3.75],["primary"],3.75,["secondary"],3.25,["tertiary"],2.25,0],13,["match",["get","class"],["motorway"],["match",["get","ramp"],1,2.75,4.25],["trunk"],["match",["get","oneway"],1,4.25,4.25],["primary"],4.25,["secondary"],3.75,["tertiary"],2.75,["minor"],1.75,0],15,["match",["get","class"],["motorway"],["match",["get","ramp"],1,5,6.5],["trunk"],["match",["get","oneway"],1,6.5,7.5],["primary"],7.5,["secondary"],6.5,["tertiary","rail"],5.5,["minor"],3.5,["transit","track","path"],2.5,2.5],16,["match",["get","class"],["motorway"],["match",["get","ramp"],1,8.5,10.5],["trunk"],["match",["get","oneway"],1,10.5,13.5],["primary"],13.5,["secondary"],11.5,["tertiary","rail"],9.5,["minor"],7.5,["transit","track","path"],6.5,6.5],20,["match",["get","class"],["motorway","trunk","primary","rail"],117,["secondary"],112,["tertiary"],107,["minor"],97,92]],"line-opacity":1},"filter":["all",[">","layer",1],["!in","class","ferry","cable_car","gondola"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l2_road_track","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"round","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],14,3,15,0.4],"line-color":{"stops":[[9,"rgba(80, 80, 80, 1)"],[15,"rgba(90, 90, 90, 1)"]]},"line-width":["interpolate",["exponential",2],["zoom"],14,0,15,1.1,16,1.1,18,2,20,3],"line-offset":0,"line-opacity":1},"metadata":{"maputnik:comment":"casing color for motorway is brown"},"filter":["all",[">","layer",1],["==","class","track"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l2_road_path","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":14,"layout":{"line-cap":"butt","line-join":"bevel","visibility":"visible"},"paint":{"line-blur":{"stops":[[15,0.1],[20,0.4]]},"line-color":"rgba(115, 115, 115, 1)","line-width":["interpolate",["exponential",1.5],["zoom"],15,1.1,20,3],"line-opacity":{"stops":[[14,0],[15,1]]}},"metadata":{"maputnik:comment":"cannot be in the same layer as road_casings because dasharray doesn\'t support expressions"},"filter":["all",[">","layer",1],["in","class","path"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"bridge-l2_public_transport","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":10,"layout":{"line-cap":"round","visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],18,0.4],"line-color":{"stops":[[7,"rgba(75, 75, 75, 1)"],[15,"rgba(69, 69, 69, 1)"]]},"line-width":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.2,0.5],0.2],0.2],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],0.1,1],1],["cable_car"],1,0.75],18,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],1.5,2],2],["cable_car"],2,1.5]],"line-opacity":["interpolate",["linear"],["zoom"],8,0,9,["match",["get","class"],["rail"],1,0],12,["match",["get","class"],["rail"],1,0],13,["match",["get","class"],["rail"],1,0],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge","funicular"],["match",["get","service"],["yard","siding"],0,1],0],0],14.5,1]},"filter":["all",[">","layer",1],["in","class","rail","transit","cable_car","gondola"],["==","$type","LineString"],["!=","subclass","covered_bridge"]]},{"id":"spot_elevation","type":"symbol","source":"swissmaptiles","source-layer":"spot_elevation","minzoom":14,"layout":{"icon-size":1,"text-font":["Noto Sans Regular"],"text-size":["interpolate",["linear"],["zoom"],14,10.5,18,13],"icon-image":["match",["get","class"],"spot_elevation","dot_dark_grey_3",""],"text-field":"{ele}","visibility":"visible","icon-offset":[0,0],"icon-rotate":0,"text-anchor":"center","icon-padding":30,"icon-optional":false,"text-optional":false,"symbol-placement":"point","text-line-height":0.9,"text-keep-upright":false,"text-allow-overlap":false,"text-radial-offset":0.3,"text-variable-anchor":["literal",["bottom-left","top-left","bottom-right","top-right"]],"text-ignore-placement":false},"paint":{"icon-color":"#000000","text-color":"rgba(80, 80, 80, 1)","icon-opacity":0.8,"text-opacity":["literal",1],"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],12,1.5,18,3]},"filter":["all",["!in","class","lake_elevation","sinkhole","sinkhole_rock","sinkhole_scree","sinkhole_water","sinkhole_ice"]]},{"id":"water_name_point_label","type":"symbol","source":"swissmaptiles","source-layer":"water_name","layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["linear"],["zoom"],10,10.5,16,16],"text-field":"{name:latin}","visibility":"visible","symbol-spacing":350,"symbol-z-order":"auto","text-max-width":1000,"symbol-placement":"point","text-keep-upright":true,"text-allow-overlap":false,"text-letter-spacing":0.05,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"viewport"},"paint":{"text-color":"rgba(106, 106, 106, 1)","text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.7)","text-halo-width":1},"filter":["all",["==","$type","Point"],["==","class","lake"]]},{"id":"waterway_line_label","type":"symbol","source":"swissmaptiles","source-layer":"waterway","minzoom":9,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["exponential",1.5],["zoom"],10,10.5,16,["match",["to-string",["get","width"]],["9","10"],18,["7","8"],17,["5","6"],16,"4",15,"3",14,"2",13,"1",12,["match",["get","class"],["river","canal"],18,14]]],"text-field":"{name:latin}","visibility":"visible","text-padding":0,"symbol-spacing":650,"symbol-z-order":"auto","text-max-width":9999,"symbol-placement":"line","text-keep-upright":true,"text-allow-overlap":false,"text-letter-spacing":["interpolate",["linear"],["zoom"],8,0.1,12,["match",["get","class"],["river"],0.4,0.2]],"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":["match",["get","intermittent"],1,"rgba(111, 111, 111, 1)","rgba(106, 106, 106, 1)"],"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":2},"filter":["all",["==","$type","LineString"],["!=","intermittent",1]]},{"id":"transportation_label","type":"symbol","source":"swissmaptiles","source-layer":"transportation_name","minzoom":13,"layout":{"text-font":["Noto Sans Condensed Regular"],"text-size":["interpolate",["exponential",1.5],["zoom"],14,["match",["get","class"],["motorway","trunk"],11,10.5],18,["match",["get","class"],["motorway","trunk"],18,16]],"text-field":"{name:latin}","visibility":"visible","text-anchor":"center","text-offset":[0,0],"text-padding":2,"symbol-spacing":["interpolate",["linear"],["zoom"],15,200,18,400],"symbol-z-order":"auto","text-max-angle":40,"text-transform":"none","symbol-placement":"line","text-keep-upright":true,"symbol-avoid-edges":true,"text-letter-spacing":0.1,"text-pitch-alignment":"map","text-rotation-alignment":"map"},"paint":{"text-color":["match",["get","class"],["rail","transit","cable_car","gondola","chair_lift"],"rgba(10, 10, 10, 1)","rgba(20, 20, 20, 1)"],"text-halo-blur":0.2,"text-halo-color":["match",["get","class"],["rail","transit","cable_car","gondola","chair_lift","motorway","trunk"],"rgba(255, 255, 255, 0.6)","rgba(255, 255, 255, 0.8)"],"text-halo-width":["interpolate",["linear"],["zoom"],14,["match",["get","class"],["rail","transit","cable_car","gondola","chair_lift"],1,1.5],20,3]},"filter":["all",["==","$type","LineString"]]},{"id":"aerialway","type":"line","source":"swissmaptiles","source-layer":"transportation","minzoom":12,"layout":{"visibility":"visible"},"paint":{"line-blur":["interpolate",["linear"],["zoom"],8,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],14,["match",["get","class"],["rail"],["match",["get","subclass"],["rail","narrow_gauge"],["match",["get","service"],["yard","siding"],2.5,0.6],0.6],0.6],18,0.4],"line-color":{"stops":[[7,"rgba(40, 40, 40, 1)"],[15,"rgba(22, 22, 22, 1)"]]},"line-width":["interpolate",["linear"],["zoom"],8,0.2,14,["match",["get","class"],["cable_car"],1,0.75],18,["match",["get","class"],["cable_car"],2,1.5]],"line-opacity":["interpolate",["linear"],["zoom"],12,0,13,["match",["get","class"],["cable_car","gondola"],1,0],14,["match",["get","class"],["cable_car","gondola","chair_lift"],1,0]]},"filter":["all",["in","class","cable_car","gondola","chair_lift"]]},{"id":"road_number","type":"symbol","source":"swissmaptiles","source-layer":"transportation_name","minzoom":11,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Bold"],"text-size":10.5,"text-field":"{ref}","visibility":"visible","icon-offset":[0,-1.3],"text-anchor":"center","icon-padding":2,"text-justify":"center","icon-optional":false,"icon-text-fit":"none","text-optional":false,"symbol-spacing":["step",["zoom"],300,10,600,14,800],"symbol-z-order":"auto","symbol-placement":"line","icon-keep-upright":false,"text-keep-upright":true,"icon-allow-overlap":false,"symbol-avoid-edges":false,"text-letter-spacing":0,"icon-pitch-alignment":"viewport","text-pitch-alignment":"viewport","icon-ignore-placement":false,"icon-rotation-alignment":"viewport","text-rotation-alignment":"viewport"},"paint":{"text-color":"rgba(64, 64, 64, 1)","icon-opacity":1,"text-opacity":1,"text-halo-blur":0,"text-halo-color":"rgba(0, 0, 0, 0)","text-halo-width":0},"filter":["all",["in","class","motorway","trunk","primary"],["has","ref"],["<=","ref_length",12],["==","$type","LineString"]]},{"id":"area_name_glacier_point_label","type":"symbol","source":"swissmaptiles","source-layer":"area_name","minzoom":14,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["linear"],["zoom"],10,11,16,20],"text-field":"{name:latin}","visibility":"visible","symbol-spacing":{"stops":[[12,250],[14,550]]},"symbol-z-order":"auto","text-max-width":99999,"symbol-placement":"point","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":0.15,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(100, 100, 100, 1)","text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":1},"filter":["all",["==","$type","Point"],["in","subclass","glacier"]]},{"id":"area_name_glacier_line_label","type":"symbol","source":"swissmaptiles","source-layer":"area_name","minzoom":12,"layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["linear"],["zoom"],10,11,16,20],"text-field":"{name:latin}","visibility":"visible","symbol-spacing":{"stops":[[12,250],[14,550]]},"symbol-z-order":"auto","text-max-width":99999,"symbol-placement":"line-center","text-keep-upright":true,"symbol-avoid-edges":true,"text-allow-overlap":false,"text-letter-spacing":{"stops":[[10,0.15],[12,0.3]]},"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(141, 141, 141, 1)","text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":1},"filter":["all",["==","$type","LineString"],["in","subclass","glacier"]]},{"id":"poi_rank3","type":"symbol","source":"swissmaptiles","source-layer":"poi","minzoom":15,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Regular"],"text-size":["interpolate",["linear"],["zoom"],14,12,18,18],"icon-image":["match",["get","subclass"],["tram_stop","bus_stop","halt","station","subway_entrance"],"dot_red","waterfall","waterfall_blue","observation","observation_tower_grey","survey_point","dot_dark_grey_4",""],"text-field":"{name:latin}","visibility":"visible","icon-rotate":["to-number",["get","direction"]],"text-anchor":["match",["get","subclass"],["halt","tram_stop","bus_stop","station","subway_entrance","survey_point"],"bottom-left",["waterfall","observation"],"left","center"],"text-offset":["match",["get","subclass"],"observation",["literal",[0.5,0.2]],"waterfall",["literal",[0.5,0.1]],["literal",[0.4,0.1]]],"text-justify":"left","text-padding":2,"icon-optional":false,"text-optional":false,"text-max-width":10,"icon-allow-overlap":false,"icon-ignore-placement":false,"icon-rotation-alignment":"map"},"paint":{"text-color":["match",["get","subclass"],["halt","tram_stop","bus_stop","station","subway_entrance"],"rgba(5, 5, 5, 1)","waterfall","rgba(219, 219, 219,1)","rgba(48, 48, 48, 1)"],"icon-opacity":["case",["has","name"],1,0],"text-opacity":["step",["zoom"],0,15,["match",["get","class"],"college",0,1],16,1],"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],14,1,17,2]},"filter":["all",["match",["get","class"],["allottments","attraction","aerialway","bus","building","cave","entrance","garden","museum","place_of_worship","railway","survey_point","tower","wastewater_plant","waterfall"],true,false],["match",["get","subclass"],["allottments","attraction","bus_stop","cave","building","garden","halt","museum","observation","station","subway_entrance","survey_point","tram_stop","wastewater_plant","waterfall",""],true,false]]},{"id":"poi_rank2","type":"symbol","source":"swissmaptiles","source-layer":"poi","minzoom":13,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Regular"],"text-size":["interpolate",["linear"],["zoom"],14,12,18,18],"icon-image":["step",["zoom"],["match",["get","subclass"],"church_tower","dot_circle_dark_grey_8",["golf_course","golf"],"golf_grey","ferry_terminal","dot_blue","funicular_stop","dot_red","wind_turbine","windturbine_grey","communications_tower","communications_tower_grey",""],15,["match",["get","subclass"],["camp_site","caravan_site"],"camping_grey","church_tower","dot_circle_dark_grey_10",["golf_course","golf"],"golf_grey","ferry_terminal","dot_blue","funicular_stop","dot_red","wind_turbine","windturbine_grey","communications_tower","communications_tower_grey",""],16,["match",["get","subclass"],["camp_site","caravan_site"],"camping_grey","church_tower","dot_circle_dark_grey_12",["golf_course","golf"],"golf_grey","ferry_terminal","dot_blue","funicular_stop","dot_red","hospital","hospital_grey","wind_turbine","windturbine_grey","communications_tower","communications_tower_grey",""]],"text-field":"{name:latin}","visibility":"visible","icon-offset":[0,0],"text-anchor":["match",["get","class"],["monastery"],"left",["match",["get","subclass"],["caravan_site","camp_site","church_tower","golf_course","golf","hospital","communications_tower"],"left",["ferry_terminal","funicular_stop"],"bottom-left","center"]],"text-offset":["match",["get","subclass"],["ferry_terminal","funicular_stop"],["literal",[0.4,0.1]],["literal",[0.8,0.1]]],"text-justify":"left","icon-optional":false,"text-optional":true,"text-max-width":10,"icon-allow-overlap":false,"text-letter-spacing":["match",["get","class"],["park"],0.05,0],"icon-ignore-placement":false},"paint":{"text-color":["match",["get","subclass"],"ferry_terminal","rgba(19, 19, 19, 1)","funicular_stop","rgba(5, 5, 5, 1)","weir","rgba(10, 10, 10, 1)","rgba(12, 12, 12, 1)"],"icon-opacity":["step",["zoom"],0,13,["match",["get","subclass"],"wind_turbine",0,0],14,["match",["get","class"],["place_of_worship"],1,["match",["get","subclass"],["wind_turbine","caravan_site","camp_site","ferry_terminal","funicular_stop","golf_course","golf","cemetery","stadium","park"],1,0]],15,1],"text-opacity":["step",["zoom"],0,14,["match",["get","class"],["ferry_terminal","funicular","golf","golf_course","cemetery","ruins","stadium","park","pitch"],1,0],15,["match",["get","class"],["campsite","ferry_terminal","funicular","golf","golf_course","cemetery","stadium","park","pitch","place_of_worship","sports_centre","zoo"],1,0],16,["match",["get","class"],["campsite","ferry_terminal","funicular","golf","golf_course","cemetery","stadium","park","pitch","place_of_worship","sports_centre","zoo"],1,0],17,1],"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],14,1,17,2]},"filter":["any",["match",["get","class"],["cemetery","tower","dam","ferry_terminal","funicular","attraction","fuel","golf","golf_course","horse_racing","military","monastery","park","pitch","prison","ruins","sports_centre","stadium","swimming_pool","power","weir","zoo"],true,false],["match",["get","subclass"],"camp_site",true,false]]},{"id":"peaks_other","type":"symbol","source":"swissmaptiles","source-layer":"mountain_peak","minzoom":15,"maxzoom":24,"layout":{"icon-size":1,"text-font":["Noto Sans Regular"],"text-size":["interpolate",["linear"],["zoom"],10,["case",["<=",4000,["get","ele"]],14,["<=",3000,["get","ele"]],13,["<=",2000,["get","ele"]],12,11],18,["case",["<=",4000,["get","ele"]],23,["<=",3000,["get","ele"]],22,["<=",2000,["get","ele"]],21,20]],"icon-image":"dot_dark_grey_3","text-field":"{name:latin}  {ele}  ","visibility":"visible","icon-anchor":"center","icon-offset":[0,0],"text-anchor":"center","text-offset":[0,0],"icon-padding":0,"text-justify":"auto","text-padding":2,"icon-optional":false,"text-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":4,"symbol-placement":"point","text-line-height":1.15,"icon-allow-overlap":false,"text-allow-overlap":false,"text-radial-offset":0.3,"text-letter-spacing":0.025,"icon-pitch-alignment":"auto","text-variable-anchor":["literal",["bottom-left","top-left","bottom-right","top-right"]],"icon-ignore-placement":false,"text-ignore-placement":false,"icon-rotation-alignment":"auto"},"paint":{"icon-color":"rgba(0, 0, 0, 1)","text-color":"rgba(48, 48, 48, 1)","icon-opacity":1,"text-opacity":1,"icon-halo-blur":0,"text-halo-blur":1,"icon-halo-color":"rgba(255, 255, 255, 1)","icon-halo-width":0,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],12,1.5,18,3]},"filter":["match",["get","class"],["rocky_knoll","saddle"],true,false]},{"id":"peaks_rank3+","type":"symbol","source":"swissmaptiles","source-layer":"mountain_peak","minzoom":14,"maxzoom":24,"layout":{"icon-size":1,"text-font":["Noto Sans Regular"],"text-size":["interpolate",["linear"],["zoom"],10,["case",["<=",4000,["get","ele"]],14,["<=",3000,["get","ele"]],13,["<=",2000,["get","ele"]],12,11],18,["case",["<=",4000,["get","ele"]],23,["<=",3000,["get","ele"]],22,["<=",2000,["get","ele"]],21,20]],"icon-image":["step",["zoom"],"",10,"dot_dark_grey_4",14,"dot_dark_grey_6",18,"dot_dark_grey_8"],"text-field":"{name:latin}  {ele}  ","visibility":"visible","icon-anchor":"center","icon-offset":[0,0],"text-anchor":"bottom-left","text-offset":[0,0],"icon-padding":0,"text-justify":"auto","text-padding":2,"icon-optional":false,"text-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":4,"symbol-placement":"point","text-line-height":1.15,"icon-allow-overlap":false,"text-allow-overlap":false,"text-radial-offset":0.3,"text-letter-spacing":0.025,"icon-pitch-alignment":"auto","icon-ignore-placement":false,"text-ignore-placement":false,"icon-rotation-alignment":"auto"},"paint":{"icon-color":"rgba(0, 0, 0, 1)","text-color":"rgba(48, 48, 48, 1)","icon-opacity":1,"text-opacity":1,"icon-halo-blur":0,"text-halo-blur":1,"icon-halo-color":"rgba(255, 255, 255, 1)","icon-halo-width":0,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["linear"],["zoom"],12,1.5,18,3]},"filter":["all",[">=","rank",3],["!in","class","rocky_knoll","saddle","mountain_pass"]]},{"id":"place_other","type":"symbol","source":"swissmaptiles","source-layer":"place","minzoom":11,"maxzoom":24,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Medium"],"text-size":["interpolate",["cubic-bezier",0.5,0.1,0.7,1],["zoom"],4,6,16,20],"text-field":"{name:latin}","visibility":"visible","text-anchor":"center","text-offset":["literal",[0.3,0.2]],"text-justify":"auto","text-padding":20,"icon-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":10,"text-transform":"none","symbol-sort-key":["to-number",["get","rank"]],"text-letter-spacing":0.025},"paint":{"text-color":"rgba(100, 100, 100, .7)","icon-opacity":["step",["zoom"],0,11,["case",[">",18,["get","rank"]],1,0],13,1,14,0],"text-opacity":["step",["zoom"],0,11,["case",[">",18,["get","rank"]],1,0],13,1],"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["cubic-bezier",0,0.75,0.25,1],["zoom"],12,0,16,2]},"filter":["all",["!in","class","continent","country","state","city","town","village","hamlet","isolated_dwelling"]]},{"id":"poi_rank1","type":"symbol","source":"swissmaptiles","source-layer":"poi","minzoom":14,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Regular"],"text-size":["interpolate",["linear"],["zoom"],13,13,18,20],"icon-image":["match",["get","subclass"],"station","square_red","castle","castle_grey",""],"text-field":"{name:latin}","visibility":"visible","text-anchor":["match",["get","subclass"],["castle"],"left","station","bottom-left","center"],"text-offset":["match",["get","subclass"],"station",["literal",[0.5,0.15]],["literal",[0.8,0.15]]],"text-justify":"left","text-padding":10,"text-optional":false,"text-max-width":10,"symbol-avoid-edges":true},"paint":{"text-color":["match",["get","subclass"],"station","rgba(5, 5, 5, 1)","rgba(28, 28, 28, 1)"],"text-opacity":1,"text-halo-blur":0,"text-halo-color":"rgba(255, 255, 255, 1)","text-halo-width":["interpolate",["linear"],["zoom"],14,1,17,2]},"filter":["all",["in","subclass","castle","station"],["in","class","castle","railway"]]},{"id":"place_village","type":"symbol","source":"swissmaptiles","source-layer":"place","minzoom":7,"maxzoom":18,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Medium"],"text-size":["interpolate",["cubic-bezier",0.5,0.1,0.7,1],["zoom"],4,6,10,16,16,18],"icon-image":["step",["zoom"],"circle_dark_grey_4",6,"circle_dark_grey_4",8,"circle_dark_grey_6",10,"circle_dark_grey_8",12,"circle_dark_grey_10"],"text-field":"{name:latin}","visibility":"visible","text-anchor":["literal","bottom-left"],"text-offset":["literal",[0.4,0.2]],"text-justify":"auto","text-padding":20,"icon-optional":false,"text-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":10,"text-transform":"none","symbol-sort-key":["to-number",["get","rank"]],"text-letter-spacing":0.025},"paint":{"text-color":"rgba(100,100,100,0.7)","icon-opacity":["step",["zoom"],1,13,0],"text-opacity":1,"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["cubic-bezier",0,0.75,0.25,1],["zoom"],12,0,16,2]},"filter":["all",["==","class","village"]]},{"id":"water_name_line_label","type":"symbol","source":"swissmaptiles","source-layer":"water_name","layout":{"text-font":["Noto Sans Italic"],"text-size":["interpolate",["linear"],["zoom"],10,14,16,24],"text-field":"{name:latin}","visibility":"visible","text-padding":2,"symbol-spacing":{"stops":[[10,250],[13,950]]},"symbol-z-order":"auto","text-max-width":99999,"symbol-placement":"line-center","text-keep-upright":true,"symbol-avoid-edges":false,"text-allow-overlap":false,"text-letter-spacing":0.15,"text-pitch-alignment":"map","text-ignore-placement":false,"text-rotation-alignment":"map"},"paint":{"text-color":"rgba(106, 106, 106, 1)","text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":1},"filter":["all",["==","$type","LineString"],["!=","class","lake_part"]]},{"id":"place_town","type":"symbol","source":"swissmaptiles","source-layer":"place","minzoom":6,"maxzoom":16,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Bold"],"text-size":["interpolate",["cubic-bezier",0.5,0.1,0.7,1],["zoom"],4,8,16,24],"icon-image":["step",["zoom"],"circle_dark_grey_4",6,"circle_dark_grey_6",8,"circle_dark_grey_8",10,"circle_dark_grey_10",12,"circle_dark_grey_12"],"text-field":"{name:latin}","visibility":"visible","text-anchor":["literal","bottom-left"],"text-offset":["literal",[0.35,0.1]],"text-justify":"auto","text-padding":10,"icon-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":10,"text-transform":"uppercase","symbol-sort-key":["to-number",["get","rank"]],"symbol-placement":"point","text-letter-spacing":0.025},"paint":{"text-color":"rgba(100,100,100,0.7)","icon-opacity":["step",["zoom"],1,12,0],"text-opacity":1,"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["cubic-bezier",0,0.75,0.25,1],["zoom"],12,0,16,3]},"filter":["all",["==","class","town"]]},{"id":"park_label","type":"symbol","source":"swissmaptiles","source-layer":"park","minzoom":8,"layout":{"text-font":["Noto Sans Regular"],"text-size":["interpolate",["cubic-bezier",0.5,0.1,0.7,1],["zoom"],8,14,16,28],"text-field":"{name:latin}","visibility":"visible","text-padding":["interpolate",["linear"],["zoom"],10,2,14,10],"symbol-z-order":["literal","auto"]},"paint":{"text-color":"rgba(90, 90, 90, 1)","text-halo-blur":1,"text-halo-color":"rgba(255, 255, 255, 0.8)","text-halo-width":1},"filter":["all",["in","class","national_park"],["==","$type","Point"]]},{"id":"place_city","type":"symbol","source":"swissmaptiles","source-layer":"place","minzoom":2,"maxzoom":14,"layout":{"icon-size":1,"text-font":["Noto Sans Condensed Bold"],"text-size":["interpolate",["cubic-bezier",0.5,0.1,0.7,1],["zoom"],1,11,4,12,16,34],"icon-image":["step",["zoom"],"dot_circle_dark_grey_6",6,"dot_circle_dark_grey_8",8,"circle_circle_dark_grey_10",10,"circle_circle_dark_grey_12",12,"circle_circle_dark_grey_12"],"text-field":"{name:latin}","visibility":"visible","text-anchor":"bottom-left","text-offset":["literal",[0.35,0.1]],"text-justify":"auto","text-padding":10,"icon-optional":false,"symbol-z-order":["literal","auto"],"text-max-width":10,"text-transform":"uppercase","symbol-sort-key":["to-number",["get","rank"]],"text-letter-spacing":0.025},"paint":{"text-color":"rgba(100, 100, 100, 0.7)","icon-opacity":["step",["zoom"],1,11,0],"text-opacity":1,"text-halo-blur":1,"text-halo-color":"rgba(242, 242, 242, 0.6)","text-halo-width":["interpolate",["cubic-bezier",0,0.75,0.25,1],["zoom"],12,0,16,3]},"filter":["all",["==","class","city"]]},{"id":"place_country","type":"symbol","source":"swissmaptiles","source-layer":"place","minzoom":0,"maxzoom":7,"layout":{"text-font":["Noto Sans Condensed Regular"],"text-size":["interpolate",["linear"],["zoom"],1,12,6,16],"text-field":"{name:latin}","visibility":"visible","text-max-width":10,"text-transform":"uppercase","text-letter-spacing":0.12},"paint":{"text-color":"rgba(121, 121, 121, 0.9)","text-opacity":["interpolate",["linear"],["zoom"],6,1,7,0],"text-halo-blur":1,"text-halo-color":"rgba(255, 255, 255, 0.8)","text-halo-width":1},"filter":["all",["in","class","country"]]}],"metadata":{"maputnik:renderer":"mbgljs","maptiler:copyright":"This style was generated on MapTiler Cloud. Usage outside of MapTiler Cloud or MapTiler Server requires valid MapTiler Data package: https://www.maptiler.com/data/ -- please contact us.","openmaptiles:version":"3.x"},"glyphs":"https://api.maptiler.com/fonts/{fontstack}/{range}.pbf?key={key}","sprite":"https://api.maptiler.com/maps/41cf7780-afbe-4e90-a7bf-644cc2b5b623/sprite?key={key}","bearing":0,"pitch":0,"center":[8.185402190500099,47.03081126705533],"zoom":8.516301285940449,"transition":{}}'),q=a(25389),W=a.n(q);function K(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function X(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?K(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):K(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let G=(e,t)=>{if(!e)return e;let a=e;for(let[e,r]of Object.entries(t))a=a.replace(e,r);return a},Y=(e,t)=>X(X({},e),{},{layers:e.layers.map(e=>e?t(e):void 0)}),J={"{key}":H.Kc,"<BASE_VECTOR_TILE>":H.Yw},Q=X(X({},U),{},{sources:W()(U.sources,e=>X(X({},e),{},{url:Object.prototype.hasOwnProperty.call(e,"url")?G(e.url,J):void 0})),glyphs:G(U.glyphs,J),sprite:G(U.sprite,J)}),ee={version:8,name:"Empty",metadata:{"mapbox:autocomposite":!0},sources:{},glyphs:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",layers:[{id:"background",type:"background",paint:{"background-color":"rgba(0,0,0,0)"}}]},et=e=>{let{locale:t,showLabels:a}=e,r=`name:${"en"===t?"latin":t}`,i=a?1:0,o=a?"visible":"none";return Y(Q,e=>Object.prototype.hasOwnProperty.call(e,"layout")?e.layout["text-field"]?B()(e,{paint:{"text-opacity":i},layout:{"text-field":`{${r}}`,visibility:o}}):e:void 0)},ea=e=>{let{locale:t,showBaseLayer:a,showLabels:r}=e;return(0,o.useMemo)(()=>a?et({locale:t,showLabels:r}):ee,[t,a,r])};var er=a(87026),ei=a(92201),eo=a(43137),el=a(51514),en=a(44830),es=a(18185),ec=a(81364),em=a(17510),ep=a(41494),eu=a(24246);function eg(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function ey(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eg(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eg(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let ed=(0,o.createContext)(void 0),eb=()=>{let e=(0,o.useContext)(ed);if(void 0===e)throw Error("You need to wrap your component in <MapTooltipProvider /> to useMapTooltip()");return e},eh=e=>{let{children:t}=e,{0:a,1:r}=(0,o.useState)("area");return(0,eu.jsx)(ed.Provider,{value:[a,r],children:t})},ef=e=>null!==e&&("number"!=typeof e||!isNaN(e)),ex=()=>{let[e]=eb(),[t]=(0,ec.X)(),{identicalLayerComponentIds:a,areaLayer:r,symbolLayer:l}=(0,eo.gH)(),n=(0,ep.D2)(),{getFormattedError:s}=l??{},c=(0,es.c)({dimensions:[r?.colors.type==="continuous"?null:r?.colors.component].filter(em.y),measures:[r?.colors.type==="continuous"?r?.colors.component:null,l?.measureDimension].filter(em.y)}),m=(0,o.useMemo)(()=>{if(r&&t.observation){let{colors:i}=r,o=i.getValue(t.observation);if(ef(o)){let r=a||"area"===e,l=(0,el.ZT)(i.getColor(t.observation)),s=ev(l);return{show:r,value:"number"==typeof o?(0,ep._1)(o,c[i.component.id]??n,i.component.unit):o,error:"continuous"===i.type?i.getFormattedError?.(t.observation):null,componentId:i.component.id,label:i.component.label,color:l,textColor:s}}}},[t.observation,r,a,e,c,n]),p=(0,o.useMemo)(()=>{let{observation:r}=t;if(l&&r){let{colors:t}=l,i=l.getValue(r);if(ef(i)){let o;let m=a||"symbol"===e,p=(0,el.ZT)(t.getColor(r)),u=ev(p);if("fixed"===t.type)o={type:"fixed",color:p,textColor:u,sameAsValue:!1,error:null};else if("categorical"===t.type)o={type:"categorical",component:t.component,value:t.getValue(r),error:null,color:p,textColor:u,sameAsValue:!1};else{let e=r[t.component.id],a=t.getFormattedError?.(r);o={type:"continuous",component:t.component,value:(0,ep._1)(e,n,t.component.unit),error:a,color:p,textColor:u,sameAsValue:t.component.id===l.measureDimension?.id}}return{value:(0,ep._1)(i,l.measureDimension?.id?c[l.measureDimension.id]??n:n,l.measureDimension?.unit),error:s?.(r),measureDimension:l.measureDimension,show:m,color:p,textColor:u,colors:o}}}},[t,l,a,e,s,c,n]),u=m?.show,g=p?.show&&(!u||m.componentId!==p.measureDimension?.id),y=p&&"fixed"!==p.colors.type&&(g?p.measureDimension?.id!==p.colors.component?.id:u&&m.componentId!==p.colors.component?.id);return(0,eu.jsx)(eu.Fragment,{children:"tooltip"===t.type&&t.mouse&&t.observation&&(0,eu.jsx)(en._M,{x:t.mouse.x,y:t.mouse.y-20,placement:{x:"center",y:"top"},margins:{bottom:0,left:0,right:0,top:0},children:(0,eu.jsxs)(i.Z,{sx:{minWidth:200},children:[(0,eu.jsx)(er.Z,{component:"div",variant:"caption",sx:{fontWeight:"bold"},children:"area"===e?r?.getLabel(t.observation):l?.getLabel(t.observation)}),(0,eu.jsx)(i.Z,{display:"grid",sx:{mt:1,width:"100%",gridTemplateColumns:"1fr auto",gap:1,alignItems:"center"},children:(0,eu.jsxs)(eu.Fragment,{children:[m&&u&&(0,eu.jsx)(ew,{title:m.label,background:m.color,color:m.textColor,value:m.value,error:m.error}),p&&g&&(0,eu.jsx)(ew,ey(ey({title:p.measureDimension?.label||""},"fixed"===p.colors.type?{background:p.color,border:void 0,color:p.textColor}:{background:"#fff",border:"1px solid #ccc",color:"#000"}),{},{value:p.value,error:p.error})),p&&y&&(0,eu.jsx)(ew,{title:p.colors.component?.label||"",background:p.color,color:p.textColor,value:p.colors.value??"",error:p.colors.error})]})})]})})})},ew=e=>{let{title:t,background:a,color:r,value:o,error:l,border:n="none"}=e;return(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)(er.Z,{component:"div",variant:"caption",children:t}),(0,eu.jsx)(i.Z,{style:{display:"inline-block",border:n,borderRadius:9999,background:a,color:r,textAlign:"center"},sx:{px:2},children:(0,eu.jsxs)(er.Z,{component:"div",variant:"caption",children:[o,l]})})]})},ev=e=>(0,ei.Uc)(e).l<55?"#fff":"#000";var e_=a(20925),ez=a(37136),ek=a(38746),ej=a(1713),eO=a(71238),eS=a(48947),eL=a(49148),eP=a(71171);function eI(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function eD(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?eI(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):eI(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}a(21002);let eC=eD(eD({},T()),{},{supported:j.Z}),eZ=(0,S.Z)(e=>({controlButtons:{zIndex:13,position:"absolute",bottom:32,right:16,display:"flex",flexDirection:"column"},controlButton:{display:"flex",justifyContent:"center",alignItems:"center",minWidth:0,minHeight:0,width:32,height:32,border:"1px solid",borderColor:e.palette.divider,borderBottom:0,borderRadius:0,color:e.palette.grey[700],backgroundColor:e.palette.grey[100],padding:0,"&:hover":{backgroundColor:e.palette.grey[200]},"&:first-of-type":{borderTopRightRadius:3,borderTopLeftRadius:3},"&:last-of-type":{borderBottom:"1px solid",borderBottomColor:e.palette.divider,borderBottomRightRadius:3,borderBottomLeftRadius:3}}})),e$=D()((e,t)=>{e.resize(),e.fitBounds(t,{duration:0})},0),eM=e=>{let{limits:t,customLayers:a,value:r}=e,i=eZ(),l=(0,eL.bU)(),{wmsEndpoints:n,wmtsEndpoints:s}=(0,o.useMemo)(()=>{let e=(0,eO.NR)(a),t=(0,eO.EA)(a);return{wmsEndpoints:M()(e.map(e=>e.endpoint??ez.oC)),wmtsEndpoints:M()(t.map(e=>e.endpoint??ej.WE))}},[a]),{data:c}=(0,ek.p8)([...n,...s]),{byKey:m}=c??{wms:[],wmts:[]},u=(0,o.useMemo)(()=>Array.from(new Set(a.map(e=>m?.[ek.iu(e)]?.attribution))).join(", "),[a,m]),{behindAreaCustomLayers:y,afterAreaCustomLayers:d}=(0,o.useMemo)(()=>{let e=(e,t)=>{let a=m?.[ek.iu(e)];switch(e.type){case"wms":return(0,ez.k3)({wmsLayer:a,customLayer:e,beforeId:t});case"wmts":return(0,ej.oG)({wmtsLayer:a,customLayer:e,beforeId:t,value:r});default:return e}};return{behindAreaCustomLayers:a.filter(e=>e.isBehindAreaLayer).map(t=>e(t,"areaLayer")),afterAreaCustomLayers:a.filter(e=>!e.isBehindAreaLayer).map(t=>e(t))}},[a,m,r]),[h,x]=(0,ec.X)(),[,w]=eb(),{showBaseLayer:_,locked:j,features:O,identicalLayerComponentIds:S,areaLayer:I,symbolLayer:D,bounds:{width:C,height:$},lockedBBox:E,featuresBBox:T}=(0,eo.gH)(),{defaultViewState:V,viewState:F,onViewStateChange:B}=f({width:C,height:$,lockedBBox:E,featuresBBox:T}),H=(0,o.useRef)(j);(0,o.useEffect)(()=>{H.current=j},[j]);let U=(0,g.z)(()=>{if(!H.current){let{longitude:e,latitude:t,zoom:a}=V,r={center:[e,t],zoom:a,duration:N.g8,essential:!0};e_.F()?.flyTo(r)}});(0,o.useEffect)(()=>{U()},[V]);let q=(0,g.z)(()=>{let e={center:[F.longitude,F.latitude],zoom:Math.min(F.zoom+1,b.maxZoom),duration:N.Q9,essential:!0};e_.F()?.flyTo(e)}),W=(0,g.z)(()=>{let e={center:[F.longitude,F.latitude],zoom:Math.max(F.zoom-1,b.minZoom),duration:N.Q9,essential:!0};e_.F()?.flyTo(e)}),K=ea({locale:l,showBaseLayer:_,showLabels:!I}),X=(0,g.z)(e=>{let{type:t,x:a,y:r,object:i}=e;if(i){let{observation:e}=i.properties;w(t),x({type:"INTERACTION_UPDATE",value:{type:"tooltip",visible:!0,observation:e,mouse:{x:a,y:r}}})}else x({type:"INTERACTION_HIDE"})}),G=(0,o.useMemo)(()=>{let e=Z()(O.areaLayer?.shapes?.features,P.ZP,"desc");return eD(eD({},O.areaLayer?.shapes),{},{features:e})},[O.areaLayer?.shapes]),Y=(0,o.useMemo)(()=>{if(!I?.colors)return;let e=e=>{let{observation:t}=e.properties;return t&&null!==I.colors.getValue(t)?I.colors.getColor(t):N.Dp};return new z.Z({id:"areaLayer",beforeId:_?"water_polygon":void 0,data:G,pickable:!0,parameters:{depthTest:!1},extruded:!1,filled:!0,stroked:!0,lineWidthMinPixels:.8,getLineColor:[255,255,255],getFillColor:e,onHover:e=>{let{x:t,y:a,object:r}=e;return X({type:"area",x:t,y:a,object:r})},updateTriggers:{getFillColor:e}})},[I?.colors,G,X,_]),J=(0,o.useMemo)(()=>{if(!h.visible||!G||!I)return;let e=G.features.find(e=>e.properties.observation===h.observation);if(e)return new z.Z({id:"hoverLayer",beforeId:d.length?d[0]?.props.id:void 0,data:e,filled:!0,stroked:!0,lineWidthMinPixels:2,getFillColor:e=>{let{observation:t}=e.properties;return t&&null!==I.colors.getValue(t)?I.colors.getColor(t):N.Dp}})},[d,I,h.observation,h.visible,G]),Q=(0,o.useMemo)(()=>{if(!D)return[];let e=e=>{let{properties:{observation:t}}=e;return t?D.colors.getColor(t):N.Dp},a=e=>{let{coordinates:t}=e;return t},r=e=>{let{properties:{observation:t}}=e,a=t?D.getValue(t):null;return D.radiusScale(a)??0},[i,o]=D.radiusScale.range(),l=O.symbolLayer?.points,n=l?Z()(l,r,"desc"):[];return[new k.Z({id:"symbolLayer",pickable:!S||!I,autoHighlight:!0,filled:!0,stroked:!0,lineWidthMinPixels:.8,data:n,getPosition:a,getRadius:r,radiusUnits:"pixels",radiusMinPixels:i,radiusMaxPixels:o,getFillColor:e,onHover:e=>{let{x:t,y:a,object:r}=e;return X({type:"symbol",x:t,y:a,object:r})},updateTriggers:{getFillColor:e,getPosition:a,getRadius:r,onHover:X}}),...t.limits.map((e,t)=>{let{configLimit:r,measureLimit:i}=e,o=(0,L.a7)(r.color),l={filled:!1,stroked:!0,getLineColor:[o.r,o.g,o.b,255],lineWidthMinPixels:.8,data:n,getPosition:a,radiusUnits:"pixels"},s=e=>t=>{let{properties:{observation:a}}=t;return a?D.radiusScale(e):0};switch(i.type){case"single":case"time-range":return[new A(eD({id:`symbolLayerLimit-${t}`,getRadius:s(i.value)},l))];case"value-range":return[new A(eD({id:`symbolLayerLimit-${t}-from`,getRadius:s(i.min)},l)),new A(eD({id:`symbolLayerLimit-${t}-to`,getRadius:s(i.max)},l))];default:return i}})]},[t,I,O.symbolLayer,S,X,D]),ee=O.areaLayer??O.symbolLayer??(void 0===I&&void 0===D),et=(0,g.z)(()=>{let e=(0,e_.F)();if(!e)return;let t=E??e.getBounds().toArray();e$(e,t)}),er=(0,g.z)(e=>{e.originalEvent&&et()}),{0:ei,1:el}=(0,o.useState)(!1);return(0,eu.jsxs)(eu.Fragment,{children:[j?null:(0,eu.jsxs)("div",eD(eD({className:i.controlButtons},eP.nT),{},{children:[(0,eu.jsx)(eE,{iconName:"refresh",onClick:U}),(0,eu.jsx)(eE,{iconName:"plus",onClick:q}),(0,eu.jsx)(eE,{iconName:"minus",onClick:W})]})),ee&&C>1&&$>1?(0,eu.jsxs)(p.ZP,eD(eD({initialViewState:V,mapLib:eC,mapStyle:K,preserveDrawingBuffer:!0,style:{position:"absolute",left:0,top:0,width:"100%",height:"100%"},dragPan:!j,scrollZoom:!j,doubleClickZoom:!j,dragRotate:!1,touchZoomRotate:!j,onData:e=>{"source"!==e.dataType||e.isSourceLoaded||el(!1)},onIdle:()=>{el(!0)},onRemove:()=>{el(!1),(0,e_.R)(null)},onLoad:e=>{(0,e_.R)(e.target),et()},onMove:B,onResize:er,attributionControl:!1},F),{},{children:[(0,eu.jsx)("div",{"data-map-loaded":ei}),(0,eu.jsx)(v,{interleaved:!0,layers:[...y,Y,J,...d,...Q]}),(0,eu.jsx)(R,{attribution:u})]})):null]})},eE=e=>{let{iconName:t,onClick:a}=e,r=eZ();return(0,eu.jsx)(O.Z,{className:r.controlButton,variant:"contained",onClick:a,children:(0,eu.jsx)(eS.JO,{name:t,size:24})})};var eT=a(38579),eN=a.n(eT),eV=a(17899),eR=a(67018),eA=a(35904);let eF=e=>{let{width:t,height:a,maxWidth:r,maxHeight:i}=e,o=t/a;return t>r&&(t=r,a=Math.round(r/o)),a>i&&(a=i,t=Math.round(i*o)),{width:t,height:a}},eB=e=>{let{chartConfig:t,value:a}=e,{data:r,error:o}=eW({customLayers:t.baseLayer.customLayers}),l=(0,V.Z)();return o?(0,eu.jsx)(eV.jj,{children:o.message}):r?(0,eu.jsx)(eu.Fragment,{children:r.map(e=>{let{remoteLayer:t,configLayer:r,dataUrl:o,width:n,height:s}=e;if(!r)return null;let c="wmts"===r.type&&t?(0,ej.em)({availableDimensionValues:t.availableDimensionValues??[],defaultDimensionValue:t.defaultDimensionValue??"",customLayer:r,value:a}):void 0,{width:m,height:p}=eF({width:n,height:s,maxWidth:400,maxHeight:400});return(0,eu.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:1},children:[(0,eu.jsxs)(i.Z,{sx:{display:"flex",alignItems:"center",gap:1},children:[(0,eu.jsxs)(er.Z,{component:"p",variant:"caption",children:[t.title," ",c?`(${c})`:""]}),t.description?(0,eu.jsx)(eR.o,{title:(0,eu.jsx)(i.Z,{sx:{"& > *":{fontSize:`${l.typography.caption.fontSize} !important`}},dangerouslySetInnerHTML:{__html:t.description}}),sx:{width:"fit-content"}}):null]}),(0,eu.jsx)(eN(),{src:o,alt:t.title,width:m,height:p})]},o)})}):(0,eu.jsx)(eV.lS,{})},eH={},eU=async e=>{if(!e?.legendUrl)return;let t=await fetch(e.legendUrl).then(e=>e.blob()),a=await createImageBitmap(t),{width:r,height:i}=a;return a.close(),{dataUrl:URL.createObjectURL(t),width:r,height:i}},eq=async e=>{if(!e?.legendUrl)return;let t=eH[e.legendUrl];if(t)return t;let a=eU(e);return eH[e.legendUrl]=a,a},eW=e=>{let{customLayers:t}=e,a=(0,eL.bU)(),r=t.filter(e=>"wms"===e.type),i=t.filter(e=>"wmts"===e.type),o=M()(i.map(e=>e.endpoint??ej.WE)),l=M()(r.map(e=>e.endpoint??ez.oC)),{data:n,error:s}=(0,ek.p8)([...o,...l]),{wms:c,wmts:m,byKey:p}=n??{wms:[],wmts:[],byKey:{}},{data:u,error:g}=(0,eA.$5)({queryKey:["custom-layers-legends",t.map(e=>e.id),c?.map(e=>e.id),m?.map(e=>e.id),a,1],queryFn:async()=>(await Promise.all(t.map(async e=>{let t=p[(0,ek.iu)(e)],a=await eq(t);if(!a)return;let{width:r,height:i,dataUrl:o}=a;return{remoteLayer:t,configLayer:e,dataUrl:o,width:r,height:i}}))).filter(em.y),options:{pause:!c||!m}});return{data:u,error:s??g}};var eK=a(81469),eX=a(27454),eG=a(47626),eY=a(59245),eJ=a(80750),eQ=a(3663),e0=a(93477),e1=a(53082),e2=a(45214),e5=a(41282),e4=a(87358);let e3={top:6,right:4,bottom:6,left:4},e8=()=>Math.min((0,e0.tH)().width,204),e6=(e,t)=>{let{axisLabelFontSize:a,fontFamily:r,formatNumber:i,labelColor:o,scale:l,thresholds:n}=t;e.call((0,eX.LL)(l).tickValues(n).tickSizeInner(-10).tickFormat(i)),e.select("path.domain").remove(),e.selectAll(".tick line").attr("stroke",o),e.selectAll(".tick text").attr("font-size",a).attr("font-family",r).attr("fill",o).attr("transform","rotate(45)").attr("text-anchor","start")},e9=e=>{let{chartConfig:t,observations:a,limits:r}=e,{areaLayer:o,symbolLayer:l}=(0,eo.gH)(),n=o&&o.data.length>1&&"continuous"===o.colors.type&&("linear"===o.colors.interpolationType||o.colors.scale.range().length>1),s=[o?.colors.component,l?.measureDimension,l?.colors.type==="continuous"?l.colors.component:void 0].filter(em.y),c=(0,ep.sz)(s),m=o?.colors.component.unit,p=l?.measureDimension?.unit,u=l?.colors.type==="continuous"?l?.colors.component.unit:void 0;return(0,eu.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"column",gap:3},children:[(0,eu.jsxs)(e1.k,{sx:{flexWrap:"wrap",gap:4},children:[o&&n&&(0,eu.jsxs)(i.Z,{children:[(0,eu.jsxs)(er.Z,{component:"div",variant:"caption",sx:{marginLeft:`${e3.left}px`},children:[o.colors.component.label,m?` (${m})`:""]}),"continuous"===o.colors.type?"linear"===o.colors.interpolationType?(0,eu.jsx)(ts,{paletteId:o.colors.paletteId,domain:o.colors.domain,getValue:o.colors.getValue,valueFormatter:c[o.colors.component.id]}):"quantize"===o.colors.interpolationType?(0,eu.jsx)(tn,{colorScale:o.colors.scale,domain:o.colors.domain,getValue:o.colors.getValue}):"quantile"===o.colors.interpolationType?(0,eu.jsx)(tl,{colorScale:o.colors.scale,domain:o.colors.domain,getValue:o.colors.getValue}):"jenks"===o.colors.interpolationType?(0,eu.jsx)(to,{colorScale:o.colors.scale,domain:o.colors.domain,getValue:o.colors.getValue}):null:null]}),l&&(0,eu.jsxs)(e1.k,{sx:{gap:4},children:["continuous"===l.colors.type&&(0,eu.jsxs)(i.Z,{children:[(0,eu.jsxs)(er.Z,{component:"div",variant:"caption",children:[l.colors.component.label,u?` (${u})`:""]}),"linear"===l.colors.interpolationType?(0,eu.jsx)(ts,{paletteId:l.colors.paletteId,domain:l.colors.domain,getValue:e=>e[l.colors.component.iri],valueFormatter:c[l.colors.component.id]}):"quantize"===l.colors.interpolationType?(0,eu.jsx)(tn,{colorScale:l.colors.scale,domain:l.colors.domain,getValue:l.colors.getValue}):"quantile"===l.colors.interpolationType?(0,eu.jsx)(tl,{colorScale:l.colors.scale,domain:l.colors.domain,getValue:l.colors.getValue}):"jenks"===l.colors.interpolationType?(0,eu.jsx)(to,{colorScale:l.colors.scale,domain:l.colors.domain,getValue:l.colors.getValue}):null]}),l.measureDimension&&(0,eu.jsxs)(i.Z,{children:[(0,eu.jsxs)(er.Z,{component:"div",variant:"caption",children:[l.measureLabel,p?` (${p})`:""]}),(0,eu.jsx)(te,{valueFormatter:c[l.measureDimension.id]})]})]}),r.map(e=>{let{configLimit:t,measureLimit:a,limitUnit:r}=e;switch(a.type){case"single":case"time-range":return(0,eu.jsxs)(i.Z,{children:[(0,eu.jsxs)(er.Z,{component:"div",variant:"caption",children:[a.name,r?` (${r})`:""]}),(0,eu.jsx)(tt,{maxValue:a.value,color:t.color})]});case"value-range":return(0,eu.jsxs)(i.Z,{children:[(0,eu.jsx)(er.Z,{component:"div",variant:"caption",children:a.name}),(0,eu.jsx)(tt,{minValue:a.min,maxValue:a.max,color:t.color})]});default:return a}})]}),o?.colors.type==="categorical"&&(0,eu.jsx)(eJ.eV,{chartConfig:t,component:o.colors.component,getColor:o.colors.getColor,useAbbreviations:o.colors.useAbbreviations,observations:a}),l?.colors.type==="categorical"&&l.colors.component.id!==o?.colors.component.id&&(0,eu.jsx)(eJ.eV,{chartConfig:t,component:l.colors.component,getColor:l.colors.getColor,useAbbreviations:l.colors.useAbbreviations,observations:a})]})},e7=e=>{let{value:t,label:a,fill:r,stroke:i,radius:o,maxRadius:l,fontSize:n,showLine:s=!0,dashed:c,center:m}=e,p=m?-l+o:0;return(0,eu.jsxs)("g",{transform:`translate(0, ${l-o})`,children:[(0,eu.jsx)("circle",{cx:0,cy:p,r:o,fill:r,stroke:i,strokeDasharray:c?"4 4":0,fillOpacity:.1}),s&&(0,eu.jsxs)(eu.Fragment,{children:[(0,eu.jsx)("line",{x1:0,y1:p-o,x2:l+4,y2:p-o,stroke:"black"}),(0,eu.jsxs)("text",{x:l+6,y:p-o,dy:5,textAnchor:"start",fontSize:n,paintOrder:"stroke",stroke:"white",strokeWidth:2,children:[t," ",a]})]})]})},te=e=>{let{valueFormatter:t}=e,a=e8(),[r]=(0,ec.X)(),{labelColor:i}=(0,eQ.$)(),{symbolLayer:l}=(0,eo.gH)(),{data:n,dataDomain:s,getLabel:c,getValue:m,colors:{getColor:p},radiusScale:u}=l,g=r.observation&&m(r.observation),y="number"==typeof g?g:void 0,d=u(y),b=u.range()[1],h=r.observation?(0,el.ZT)(p(r.observation)):void 0,f=(0,o.useMemo)(()=>s.map(e=>n.find(t=>m(t)===e)),[n,s,m]);return(0,eu.jsx)("svg",{width:a,height:60,children:(0,eu.jsxs)("g",{transform:`translate(${e3.left+b}, ${e3.top+b})`,children:[s.map((e,a)=>{let o=f[a];if(o){let l=c(o),n=u(e);return(0,eu.jsx)(e7,{value:t(e),label:l,fill:"none",stroke:i,radius:n,maxRadius:b,fontSize:10,showLine:!r.visible},a)}}),r.observation&&r.visible&&void 0!==y&&void 0!==d&&void 0!==h&&(0,eu.jsx)(e7,{value:t(y),label:c(r.observation),fill:h,stroke:i,radius:d,maxRadius:b,fontSize:10})]})})},tt=e=>{let{minValue:t,maxValue:a,color:r}=e,i=(0,ep.D2)({decimals:"auto"}),o=e8(),{symbolLayer:l}=(0,eo.gH)(),{radiusScale:n}=l,s=n(t??0),c=n(a);return(0,eu.jsx)("svg",{width:o,height:2*c+e3.top+e3.bottom,children:(0,eu.jsxs)("g",{transform:`translate(${c+e3.left}, ${c+e3.top})`,children:[(0,eu.jsx)(e7,{value:i(a),label:"",fill:"none",stroke:r,radius:c,maxRadius:c,fontSize:10,showLine:!0,dashed:!0}),void 0!==t?(0,eu.jsx)(e7,{value:i(t),label:"",fill:"none",stroke:r,radius:s,maxRadius:c,fontSize:10,showLine:!0,dashed:!0,center:!0}):null]})})},ta=(e,t)=>{let{formatNumber:a,fontSize:r}=t,i=(0,e4.m)(a(e),{fontSize:r}),o=Math.PI/180*45;return Math.abs(i*Math.sin(o))+Math.abs(12*Math.cos(o))},tr=(e,t)=>{let{formatNumber:a,fontSize:r}=t;return Math.max(...e.map(e=>ta(e,{formatNumber:a,fontSize:r})))},ti=(e,t)=>{let{formatNumber:a,fontSize:r}=t;return Math.max(40,16+(0,o.useMemo)(()=>tr(e,{formatNumber:a,fontSize:r}),[e,a,r]))},to=e=>{let{colorScale:t,domain:a,getValue:r}=e,i=e8(),l=(0,o.useRef)(null),{axisLabelFontSize:n,labelColor:s,fontFamily:c}=(0,eQ.$)(),m=(0,ep.pN)(),p=t.domain(),[u,g]=a,y=(0,eG.Z)().domain((0,eK.Z)(t.range().length+1)).range([u||0,...p,g||100]),d=(0,eG.Z)().domain([u||0,g||1e4]).range([e3.left,i-e3.right]),b=p.splice(0,p.length-1);(0,o.useEffect)(()=>e6((0,eY.Z)(l.current),{axisLabelFontSize:n,fontFamily:c,formatNumber:m,labelColor:s,scale:d,thresholds:b}),[n,c,m,s,d,b]);let h=ti(y.range(),{formatNumber:m,fontSize:n});return(0,eu.jsxs)("svg",{width:i,height:h,children:[(0,eu.jsx)("g",{children:(0,eu.jsx)(tm,{scale:d,getValue:r})}),(0,eu.jsx)("g",{transform:`translate(0, ${e3.top})`,children:t.range().map((e,t)=>(0,eu.jsx)("rect",{x:d(y(t)),y:0,width:d(y(t+1))-d(y(t)),height:10,fill:e},t))}),(0,eu.jsx)("g",{ref:l,transform:`translate(0, ${10+e3.top})`},"legend-axis")]})},tl=e=>{let{colorScale:t,domain:a,getValue:r}=e,i=e8(),l=(0,o.useRef)(null),{axisLabelFontSize:n,labelColor:s,fontFamily:c}=(0,eQ.$)(),m=(0,ep.pN)(),p=t.quantiles(),[u,g]=a,y=(0,eG.Z)().domain((0,eK.Z)(t.range().length+1)).range([u,...p,g]),d=(0,eG.Z)().domain([u||0,g||1e4]).range([e3.left,i-e3.right]);(0,o.useEffect)(()=>e6((0,eY.Z)(l.current),{axisLabelFontSize:n,fontFamily:c,formatNumber:m,labelColor:s,scale:d,thresholds:p}),[n,c,m,s,d,p]);let b=ti(y.range(),{formatNumber:m,fontSize:n});return(0,eu.jsxs)("svg",{width:i,height:b,children:[(0,eu.jsx)("g",{children:(0,eu.jsx)(tm,{scale:d,getValue:r})}),(0,eu.jsx)("g",{transform:`translate(0, ${e3.top})`,children:t.range().map((e,t)=>(0,eu.jsx)("rect",{x:d(y(t)),y:0,width:d(y(t+1))-d(y(t)),height:10,fill:e},t))}),(0,eu.jsx)("g",{ref:l,transform:`translate(0, ${10+e3.top})`},"legend-axis")]})},tn=e=>{let{colorScale:t,domain:a,getValue:r}=e,i=e8(),l=(0,o.useRef)(null),{axisLabelFontSize:n,labelColor:s,fontFamily:c}=(0,eQ.$)(),m=(0,ep.pN)(),p=(0,eG.Z)().domain([0,t.range().length]).range([e3.left,i-e3.right]),u=(0,eG.Z)().domain(a).range([e3.left,i-e3.right]),g=t.thresholds();(0,o.useEffect)(()=>e6((0,eY.Z)(l.current),{axisLabelFontSize:n,fontFamily:c,formatNumber:m,labelColor:s,scale:u,thresholds:g}),[n,c,m,s,u,g]);let y=ti(g,{formatNumber:m,fontSize:n});return(0,eu.jsxs)("svg",{width:i,height:y,children:[(0,eu.jsx)("g",{children:(0,eu.jsx)(tm,{scale:u,getValue:r})}),(0,eu.jsx)("g",{transform:`translate(0, ${e3.top})`,children:t.range().map((e,a)=>(0,eu.jsx)("rect",{x:p(a),width:(i-e3.left-e3.right)/t.range().length,height:10,fill:e},a))}),(0,eu.jsx)("g",{ref:l,transform:`translate(0, ${10+e3.top})`},"legend-axis")]})},ts=e=>{let{paletteId:t,domain:a,getValue:r,valueFormatter:i}=e,o=e8(),{labelColor:l,fontFamily:n}=(0,eQ.$)(),s=(0,eG.Z)().domain(a).range([e3.left,o-e3.right]),[c,m]=a;return(0,eu.jsxs)("svg",{width:o,height:40,children:[(0,eu.jsx)("g",{children:(0,eu.jsx)(tm,{scale:s,getValue:r})}),(0,eu.jsx)("foreignObject",{x:e3.left,y:-1,width:o-e3.left-e3.right,height:10,style:{display:"flex"},children:(0,eu.jsx)(e2.E,{width:o-e3.left-e3.right,height:10,colorInterpolator:(0,e5.d5)(t),nSteps:o-e3.left-e3.right,rx:0})}),(0,eu.jsxs)("g",{transform:`translate(${e3.left}, ${e3.top+10+14})`,fontFamily:n,fontSize:10,fill:l,children:[(0,eu.jsx)("text",{textAnchor:"start",fontSize:10,children:i(c)}),(0,eu.jsx)("text",{x:o-e3.right-e3.left,textAnchor:"end",children:i(m)})]})]})},tc=(0,S.Z)(e=>({root:{transition:`transform ${e.transitions.duration.shorter}ms ease`}})),tm=e=>{let{scale:t,getValue:a}=e,[{visible:r,observation:i}]=(0,ec.X)(),{labelColor:o}=(0,eQ.$)(),l=tc();return(0,eu.jsx)(eu.Fragment,{children:i&&r&&!isNaN(a(i)??NaN)&&(0,eu.jsx)("polygon",{fill:o,points:"-4,0 4,0 0,4",className:l.root,style:{transform:`translate(${t(a(i)??0)}px, 0)`}})})};var tp=a(90089),tu=a(66666),tg=a(19254),ty=a(75841),td=a(39454),tb=a(8854),th=a(83864),tf=a.n(th),tx=a(16364),tw=a(99324),tv=a(97091),t_=a(25390),tz=a(64103);function tk(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function tj(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tk(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tk(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let tO=e=>{let{chartConfig:t,observations:a,dimensions:r}=e,{fields:i}=t,{areaLayer:o,symbolLayer:l}=i,n=(0,eo.Ck)(t),s=r.find(e=>e.id===o?.componentId);if(s&&!(0,tz.sS)(s))throw Error(`Dimension <${s.id}> is not geo shapes dimension!`);let c=r.find(e=>e.id===l?.componentId);if(c&&!(0,tz.C_)(c))throw Error(`Dimension <${c.id}> is not geo dimension!`);let{getValue:m,getLabel:p}=(0,tv.eB)(c,{observations:a,field:l});return tj(tj({},n),{},{areaLayerDimension:s,symbolLayerDimension:c,getSymbol:m,getSymbolLabel:p})},tS=(e,t)=>{let{chartConfig:a,observations:r,shapes:i,coordinates:l}=e,{areaLayerDimension:n,symbolLayerDimension:s,getSymbol:c,getSymbolLabel:m}=t,p=(0,t_.In)(a),u=(0,tv.Tq)(r,{}),g=(0,eo.q1)(u,{chartConfig:a,timeRangeDimensionId:void 0}),y=(0,o.useMemo)(()=>{let e=n?.id;if(!(e&&i))return;let{topology:t}=i;return{shapes:w({dimensionId:e,topology:t,filters:p[e],observations:g.chartData})}},[n?.id,i,p,g.chartData]),d=(0,o.useMemo)(()=>{if((0,tz.fx)(s)&&l){let e=[],t=tf()(l,e=>e.label);return g.chartData.forEach(a=>{let r=c(a),i=m(r),o=t[r]??t[i];if(o){let{iri:t,label:r,latitude:i,longitude:l}=o;e.push({coordinates:[l,i],properties:{iri:t,label:r,observation:a}})}}),{points:e}}if((0,tz.sS)(s)&&i){let{topology:e}=i,t=s.id,{features:a}=w({dimensionId:t,topology:e,filters:p[t],observations:g.chartData});return{points:a.map(e=>tj(tj({},e),{},{coordinates:(0,tw.Z)(e)}))}}},[s,c,m,g.chartData,i,l,p]);return tj(tj({},g),{},{features:{areaLayer:y,symbolLayer:d}})};var tL=a(54312);let tP=["children"],tI=["children"];function tD(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function tC(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tD(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tD(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let tZ=(e,t,a)=>{let{width:r}=(0,e0.tH)(),{chartConfig:i,measures:l,dimensions:n}=e,{chartData:s,scalesData:c,allData:m,features:p}=a,{fields:u,baseLayer:g}=i,{areaLayer:y,symbolLayer:d}=u,b=tR({componentId:u.areaLayer?.componentId,measureId:u.areaLayer?.color.componentId,data:c,features:p,dimensions:n,measures:l}),h=tN({color:y?.color,data:b.data,dimensions:n,measures:l}),f=(0,o.useMemo)(()=>{if(y?.componentId!==void 0)return{data:b.data,dataDomain:b.dataDomain,getLabel:b.getLabel,colors:h}},[h,y,b]),w=tR({componentId:d?.componentId,measureId:d?.measureId,data:c,features:p,dimensions:n,measures:l}),v=tN({color:d?.color,data:w.data,dimensions:n,measures:l}),_=(0,o.useMemo)(()=>{if(void 0===w.dataDomain[1])return(0,tu._b)().range([0,12]).unknown(12);let e=(0,tu._b)().domain([0,w.dataDomain[1]]).range([0,24]),t=t=>null==t||0===t?0:Math.max(2,e(t));return Object.assign(t,e),t},[w.dataDomain]),z=(0,o.useMemo)(()=>{if(d?.componentId!==void 0)return tC(tC({},w),{},{colors:v,radiusScale:_})},[d?.componentId,w,_,v]),k=y?.componentId!==void 0&&d?.componentId!==void 0&&y.componentId===d.componentId,j=.5*r,O=(0,o.useMemo)(()=>x(y?.componentId!==void 0?tA(p.areaLayer?.shapes,e=>!!e?.properties?.observation):void 0,d?.componentId!==void 0?p.symbolLayer?.points.filter(e=>!!e?.properties?.observation):void 0),[y?.componentId,p.areaLayer?.shapes,d?.componentId,p.symbolLayer?.points]);return tC({chartType:"map",chartData:s,allData:m,bounds:{width:r,height:j,aspectRatio:j/r,margins:{top:0,right:0,bottom:0,left:0},chartWidth:r,chartHeight:.5*r},features:p,showBaseLayer:g.show,locked:g.locked||!1,lockedBBox:g.bbox,featuresBBox:O,identicalLayerComponentIds:k,areaLayer:f,symbolLayer:z},t)},t$=e=>{let{color:t,getValue:a,data:r,dataDomain:i}=e,o=(0,tL.Jl)({color:t},e5.d5);switch(t.scaleType){case"continuous":if("linear"===t.interpolationType)return(0,tg.ZP)(o).domain(i);case"discrete":let l=Array.from({length:t.nbClass},(e,a)=>o(a/(t.nbClass-1)));switch(t.interpolationType){case"jenks":let n=(0,tx.Pf)(r.map(e=>a(e)??null).filter(em.y),Math.min(t.nbClass,r.length)).map(e=>e.pop()||0);return(0,ty.Z)().domain(n).range(l);case"quantile":return(0,td.Z)().domain(r.map(e=>a(e))).range(l);case"quantize":return(0,tb.Z)().domain(i).range(l)}default:return t}},tM=e=>(0,o.useMemo)(()=>{if(e?.type!=="fixed")return;let t=(0,el.CH)(e.value,2.55*e.opacity);return{type:"fixed",getColor:()=>t}},[e]),tE=(e,t)=>{let{dimensions:a,measures:r}=t;return(0,o.useMemo)(()=>{if(e?.type!=="categorical")return;let t=[...a,...r].find(t=>t.id===e.componentId),i=tf()(t.values,e=>e.label),o=tf()(t.values,e.useAbbreviations?e=>e.alternateName??e.label:e=>e.label),l=t.values.map(e=>`${e.value}`)??[],n=W()(e.colorMapping,t=>(0,el.CH)(t,2.55*e.opacity)),s=t=>{let a=t[e.componentId];return o[a]??i[a]};return{type:"categorical",paletteId:e.paletteId,component:t,domain:l,getValue:e.useAbbreviations?e=>{let t=s(e);return t.alternateName||t.label}:e=>s(e).label,getColor:e=>n[s(e).value],useAbbreviations:e.useAbbreviations??!1}},[e,a,r])},tT=(e,t)=>{let{data:a,dimensions:r,measures:i}=t,l=e?.type==="numerical"?e.componentId:"",n=(0,o.useCallback)(e=>null!==e[l]?Number(e[l]):null,[l]),{getFormattedYUncertainty:s}=(0,eo.Xg)({componentId:l},{getValue:n,dimensions:r,measures:i});return(0,o.useMemo)(()=>{if(e?.type!=="numerical")return;let t=i.find(e=>e.id===l),r=(0,c.Z)(a.map(n).filter(em.y)),o=t$({color:e,getValue:n,data:a,dataDomain:r});return{type:"continuous",paletteId:e.paletteId,component:t,scale:o,interpolationType:e.interpolationType,getValue:n,getColor:t=>{let a=n(t);if(null!==a){let t=o(a);if(t)return(0,el.CH)(t,2.55*e.opacity)}return[0,0,0,25.5]},getFormattedError:s,domain:r}},[e,l,a,s,n,i])},tN=e=>{let{color:t,data:a,dimensions:r,measures:i}=e,o=tM(t),l=tE(t,{dimensions:r,measures:i}),n=tT(t,{data:a,dimensions:r,measures:i});if(t)switch(t.type){case"fixed":return o;case"categorical":return l;case"numerical":return n;default:return t}},tV=e=>{let{geoDimensionId:t,getLabel:a,data:r,dimensions:i,features:l}=e;return(0,o.useMemo)(()=>{if(""===t)return[];let e=i.find(e=>e.id===t);if((0,tz.sS)(e)&&l.areaLayer?.shapes?.features){let e=l.areaLayer.shapes.features.map(e=>e.properties.label);return r.filter(t=>e.includes(a(t)))}return r},[t,a,r,i,l.areaLayer?.shapes.features])},tR=e=>{let{componentId:t="",measureId:a="",data:r,features:i,dimensions:l,measures:n}=e,s=(0,tv.Ym)(t),m=(0,tv.DK)(a),p=n.find(e=>e.id===a),{showYUncertainty:u,getFormattedYUncertainty:g}=(0,eo.Xg)({componentId:a},{getValue:m,dimensions:l,measures:n}),y=tV({geoDimensionId:t,getLabel:s,data:r,dimensions:l,features:i}),d=(0,o.useMemo)(()=>(0,c.Z)(y,e=>m(e))||[0,100],[m,y]);return{data:y,dataDomain:d,measureDimension:p,measureLabel:p?.label||"",getLabel:s,getValue:m,getFormattedError:u?g:null}},tA=(e,t)=>e?tC(tC({},e),{},{features:e.features.filter(t)}):e,tF=e=>{let{children:t}=e,a=(0,tp.Z)(e,tP),r=tO(a),i=tS(a,r),o=tZ(a,r,i);return(0,eu.jsx)(eo._M.Provider,{value:o,children:t})},tB=e=>{let{children:t}=e,a=(0,tp.Z)(e,tI);return(0,eu.jsx)(ec.o,{children:(0,eu.jsx)(tF,tC(tC({},a),{},{children:(0,eu.jsx)(eh,{children:t})}))})};var tH=a(83001),tU=a(4148),tq=a(80207),tW=a(50726),tK=a(45298);function tX(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function tG(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?tX(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):tX(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let tY=e=>{let{dataSource:t,chartConfig:a,componentIds:r}=e,{fields:i}=a,n=(0,eL.bU)(),[s]=(0,tq.k$)({chartConfig:a,variables:{sourceType:t.type,sourceUrl:t.url,locale:n,cubeFilters:a.cubes.map(e=>({iri:e.iri,componentIds:r,joinBy:e.joinBy,loadValues:!0}))},keepPreviousData:!0}),c=(0,o.useCallback)(e=>{let t=i[e];if(t){let e=s.data?.dataCubesComponents.dimensions.find(e=>e.id===t.componentId)?.cubeIri,r=a.cubes.find(t=>t.iri===e);return(0,tW.BG)(t.componentId)?{dimensionId:(0,tW.Tl)(r,t.componentId)??t.componentId,cubeIri:r.iri}:{dimensionId:t.componentId,cubeIri:e}}return{dimensionId:"",cubeIri:a.cubes[0].iri}},[a.cubes,s.data,i]),{dimensionId:m,cubeIri:p}=(0,o.useMemo)(()=>c("areaLayer"),[c]),{dimensionId:u,cubeIri:g}=(0,o.useMemo)(()=>c("symbolLayer"),[c]),[{data:y,error:d,fetching:b}]=(0,tq.k$)({chartConfig:a,variables:{cubeFilters:[{iri:g,componentIds:[u],loadValues:!0}],sourceType:t.type,sourceUrl:t.url,locale:n},pause:!u||!g}),h=y?.dataCubesComponents.dimensions[0].values,f=(0,o.useMemo)(()=>h?(0,tz.E)(h):void 0,[h]),x=m||u,[{data:w,error:v,fetching:z}]=(0,tK.kT)({variables:{sourceType:t.type,sourceUrl:t.url,locale:n,cubeFilter:{iri:p,dimensionId:x}},pause:!x||!p}),k=w?.dataCubeDimensionGeoShapes,j=k?.topology?.objects?.shapes?.geometries;return _({areaDimensionId:m,symbolDimensionId:u,geometries:j,coordinates:f})&&(""===m||""!==m&&j?.length===0)&&(""===u||""!==u&&j?.length===0&&f?.length===0)&&m!==u?(0,eu.jsx)(eV.wq,{}):(0,eu.jsx)(l.F,tG(tG({},e),{},{error:d||v,fetching:b||z,Component:tJ,ComponentProps:{shapes:k,coordinates:f}}))},tJ=(0,o.memo)(e=>{let{chartConfig:t,dimensions:a,measures:r,observations:o}=e,{fields:l}=t,n=(0,t_.In)(t),s=(0,t_.LC)({dimensions:a}),c=(0,t_.sH)({chartConfig:t,dimensions:a,measures:r});return(0,eu.jsxs)(tB,tG(tG({},e),{},{children:[(0,eu.jsxs)(tH.BO,{children:[(0,eu.jsx)(eM,{limits:c,customLayers:t.baseLayer.customLayers,value:s?+s:void 0}),(0,eu.jsx)(ex,{})]}),(0,eu.jsxs)(tH.dt,{sx:{mt:6},children:[l.animation&&(0,eu.jsx)(tU.j,tG({filters:n,dimensions:a},l.animation)),(0,eu.jsxs)(i.Z,{sx:{display:"flex",flexDirection:"row",gap:4,flexWrap:"wrap"},children:[(0,eu.jsx)(e9,{chartConfig:t,observations:o,limits:c.limits}),(0,eu.jsx)(eB,{chartConfig:t,value:s?+s:void 0})]})]})]}))})},18185:function(e,t,a){a.d(t,{c:function(){return o}});var r=a(27378),i=a(41494);let o=e=>{let{dimensions:t,measures:a}=e,o=(0,r.useMemo)(()=>[...t,...a],[t,a]);return(0,i.sz)(o)}},4148:function(e,t,a){a.d(t,{j:function(){return Z}});var r=a(17043),i=a(60116),o=a(87026),l=a(12548),n=a(56125),s=a(64986),c=a(40624),m=a(43605),p=a.n(m),u=a(27378),g=a(70644),y=a(43137),d=a(99990),b=a(10359),h=a(15658),f=a(64103),x=a(17510),w=a(41494),v=a(48947),_=a(27102),z=a(8788),k=a(7378),j=a(7673),O=a(77142),S=a(71171),L=a(24246);function P(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,r)}return a}function I(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach(function(t){(0,r.Z)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):P(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}let D=(0,u.createContext)(void 0),C=()=>{let e=(0,u.useContext)(D);if(!e)throw Error("useTimeline must be called inside a TimelineContext.Provider!");return(0,g.useSyncExternalStore)(e.subscribe,e.getUpdateKey),e},Z=e=>{let{componentId:t,showPlayButton:a,type:r,duration:i,filters:o,dimensions:l}=e,[n]=(0,_.lY)(h.Sc),s=(0,u.useMemo)(()=>l.find(e=>e.id===t),[t,l]),c=(0,f.fF)(s),m=(0,f.eP)(s),g=(0,f.a6)(s);if(!(c||m||g))throw Error("You can only use TimeSlider with temporal dimensions!");let d=(0,w.z6)(),v="timeUnit"in s?s.timeUnit:void 0,z=(0,y.gH)(),O=o[s.id],S=(0,u.useMemo)(()=>{let e={animationType:r,msDuration:1e3*i},t=Array.from(new Set(z.allData.map(e=>e[s.id]).filter(x.y)));if(c)return I({type:"interval",msValues:t.map(e=>(0,b.sG)(e).getTime()),formatValue:e=>d(new Date(e),v)},e);{let a={sortingType:"byAuto",sortingOrder:"asc"},r=(0,j.tf)(s,{dimensionFilter:O,sorting:a}),i=(0,j.jS)(r,a);return I({type:"ordinal",sortedData:p()(t,r,i)},e)}},[r,i,z.allData,c,s,d,v,O]),P=(0,u.useMemo)(()=>new k.T(S),[S]);return n.dashboardFilters?.timeRange.active?null:(0,L.jsx)(D.Provider,{value:P,children:(0,L.jsx)($,{showPlayButton:a})})},$=e=>{let{showPlayButton:t}=e,[a,r]=C().formattedExtent;return(0,L.jsxs)(i.Z,I(I({},S.nT),{},{sx:{display:"flex",alignItems:"center",gap:5,mb:5,mr:2.5},children:[t&&(0,L.jsx)(M,{}),(0,L.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,L.jsx)(T,{}),(0,L.jsx)(o.Z,{variant:"caption",sx:{position:"absolute",left:0,mt:2},children:a}),(0,L.jsx)(o.Z,{variant:"caption",sx:{position:"absolute",right:0,mt:2},children:r})]})]}))},M=()=>{let e=C(),t=(0,O.z)(()=>{e.playing?e.stop():e.start()});return(0,L.jsx)(l.Z,{onClick:t,variant:"outlined",style:{minHeight:32,minWidth:32,padding:0,borderRadius:"50%"},children:(0,L.jsx)(v.JO,{name:e.playing?"pause":"play",size:16})})},E=(0,s.Z)(()=>({root:{width:"100%",[`& .${n.Z.root}`]:{height:"6px",[`& .${n.Z.thumb}`]:{width:"16px",height:"16px"}}},playing:{[`& .${n.Z.thumb}`]:{transition:"none"},[`& .${n.Z.track}`]:{transition:"none"}}})),T=()=>{let e=C(),t=(0,z.bI)(e=>e.timeSlider),a=(0,z.bI)(e=>e.setTimeSlider),r=E(),i=(0,u.useMemo)(()=>e.domain.map(e=>({value:e}))??[],[e.domain]),o=(0,O.z)(t=>{e.setProgress(+t.target.value)}),l=(0,O.z)(()=>{e.stop()});return(0,u.useEffect)(()=>{e.type!==t.type&&a({type:e.type,value:void 0}),"interval"===e.type&&"interval"===t.type&&t.value?.getTime()!==e.value&&a({type:"interval",value:new Date(e.value)}),"ordinal"===e.type&&"ordinal"===t.type&&t?.value!==e.value&&a({type:"ordinal",value:e.value})},[e.value,e.type,t.type,t.value,a]),(0,L.jsx)(d.iR,{name:"time-slider",renderTextInput:!1,min:0,max:1,step:null,marks:i,value:e.progress,onChange:o,onClick:l,valueLabelDisplay:"on",valueLabelFormat:e.formattedValue,className:(0,c.Z)(r.root,e.playing&&r.playing)})}}}]);
//# sourceMappingURL=30131.20ca50b88505185e.js.map