"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[61127],{70778:function(e,t,r){r.r(t),r.d(t,{ChartLinesVisualization:function(){return ev}});var n=r(17043),i=r(27378),o=r(93226),s=r(62196),l=r(43137),a=r(83540),u=r(80491),c=r(26006),f=r(3663),h=r(17510),d=r(80733),p=r(24246);function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function g(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let b=()=>{let{getX:e,getY:t,getYErrorPresent:r,getYErrorRange:n,chartData:o,yScale:s,xScale:a,showYUncertainty:c,colors:f,getSegment:h,bounds:m}=(0,l.gH)(),{margins:g}=m,b=(0,i.useRef)(null),y=(0,d.K)(e=>e.enable),x=(0,d.K)(e=>e.duration),j=(0,i.useMemo)(()=>n&&c?o.filter(r).map((r,i)=>{let o=a(e(r)),l=h(r),u=t(r),[c,d]=n(r);return{key:`${i}`,x:o-7.5,y:s(u),y1:s(c),y2:s(d),width:15,fill:f(l),renderMiddleCircle:!0}}):[],[o,f,h,e,t,r,n,c,a,s]);return(0,i.useEffect)(()=>{b.current&&(0,u.sS)(b.current,{id:"lines-error-whiskers",transform:`translate(${g.left} ${g.top})`,transition:{enable:y,duration:x},render:(e,t)=>(0,u.c7)(e,j,t)})},[y,g.left,g.top,j,x]),(0,p.jsx)("g",{ref:b})},y=e=>{let{dotSize:t}=e,{getX:r,xScale:n,getY:o,yScale:h,grouped:d,colors:m,bounds:b}=(0,l.gH)(),{margins:y}=b,{labelFontSize:j,fontFamily:v}=(0,f.$)(),_=(0,i.useRef)(null),$=(0,s.Z)().defined(e=>{let t=o(e);return null!==t&&!isNaN(t)}).x(e=>n(r(e))).y(e=>h(o(e))),w=(0,c.ND)();return(0,i.useEffect)(()=>{_.current&&(0,u.sS)(_.current,{id:"lines-value-labels",transform:"translate(0, 0)",transition:{enable:!1,duration:0},render:(e,t)=>(0,a.HD)(e,w,g(g({},t),{},{rotate:!1,fontFamily:v,fontSize:j}))})},[y.left,y.top,w,j,v]),(0,p.jsxs)("g",{transform:`translate(${y.left} ${y.top})`,children:[Array.from(d).map((e,t)=>(0,p.jsx)(i.Fragment,{children:(0,p.jsx)(x,{path:$(e[1]),color:m(e[0])},t)},e[0])),(0,p.jsx)(O,{dotSize:t}),(0,p.jsx)("g",{ref:_})]})},x=(0,i.memo)(function(e){let{path:t,color:r}=e;return(0,p.jsx)("path",{"data-testid":"chart-line",d:t,stroke:r,fill:"none"})}),j=e=>{switch(e){case"Small":case void 0:return 2;case"Medium":return 3;case"Large":return 4;default:return e}},O=e=>{let{dotSize:t}=e,{getX:r,xScale:n,getY:o,yScale:s,bounds:a,chartData:u,getSegment:c,colors:f}=(0,l.gH)(),{chartHeight:d,width:m}=a,g=(0,i.useMemo)(()=>u.map(e=>{let t=n(r(e)),i=o(e);if(!Number.isNaN(i)&&null!==i)return{x:t,y:s(i),fill:f(c(e))}}).filter(h.y),[m,d,n,s,o,a.chartWidth,u,r]);if(!t)return null;let b=j(t);return(0,p.jsx)("g",{children:g.map((e,t)=>{let{x:r,y:n,fill:i}=e;return(0,p.jsx)("circle",{cx:r,cy:n,r:b,fill:i},t)})})};var v=r(90089),_=r(23175),$=r(51894),w=r(49951),P=r(9787),M=r(47626),Z=r(36890),N=r(67291),k=r(43605),S=r.n(k),D=r(60090),T=r(97091);function E(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?E(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let A=e=>{let{chartConfig:t,observations:r,dimensions:n,dimensionsById:o,measures:s,measuresById:a,limits:u}=e,{fields:c}=t,{x:f,y:h,segment:d}=c,p=(0,l.Ck)(t),m=(0,l.KJ)(f,{dimensionsById:o}),g=(0,l.rl)("line",h,{measuresById:a}),b=(0,l.Xg)(h,{getValue:g.getY,dimensions:n,measures:s}),y=(0,l.HR)(d,{dimensionsById:o,observations:r}),x=(0,l.SU)(t.interactiveFiltersConfig,{dimensionsById:o}),j=(0,l.m$)(u),{getX:O}=m,v=(0,i.useCallback)(e=>[...e].sort((e,t)=>(0,D.Z)(O(e),O(t))),[O]);return C(C(C(C(C(C(C({},p),{},{sortData:v},m),g),b),y),x),j)},H=(e,t)=>{let{chartConfig:r,observations:n,limits:i}=e,{sortData:o,xDimension:s,getX:a,getY:u,getSegmentAbbreviationOrLabel:c,getTimeRangeDate:f}=t,h=(0,T.Tq)(n,{getY:u});return(0,l.q1)(h,{sortData:o,chartConfig:r,axisDimensionId:s.id,limits:i.limits.map(e=>e.measureLimit),timeRangeDimensionId:s.id,getAxisValueAsDate:a,getSegmentAbbreviationOrLabel:c,getTimeRangeDate:f})};var I=r(62326),L=r(86932),z=r(44830),R=r(91160),F=r(18185),K=r(81364),X=r(93477),V=r(41494),q=r(41282),U=r(63122),W=r(7673),Y=r(98016);let B=["yOffset"],G=["children"];function J(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?J(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):J(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ee=(e,t,r)=>{let{chartConfig:n,dimensions:o,measures:s}=e,{xDimension:l,getX:a,getXAsString:u,yMeasure:f,getY:h,getYErrorRange:d,getFormattedYUncertainty:p,getMinY:m,xAxisLabel:g,segmentDimension:b,segmentsByAbbreviationOrLabel:y,getSegment:x,getSegmentAbbreviationOrLabel:j,getSegmentLabel:O,yAxisLabel:k,minLimitValue:D,maxLimitValue:E}=t,{chartData:C,scalesData:A,segmentData:H,timeRangeData:K,paddingData:G,allData:J}=r,{fields:ee,interactiveFiltersConfig:et}=n,{y:er}=ee,{width:en,height:ei}=(0,X.tH)(),eo=(0,V.D2)({decimals:"auto"}),es=(0,V.z6)(),el=(0,F.c)(e),ea=l.id,eu=(0,i.useMemo)(()=>new Map((b?.values||[]).map(e=>[e.value,e])),[b?.values]),ec=(0,i.useMemo)(()=>(0,_.ZP)(C,x),[C,x]),ef=(0,i.useMemo)(()=>(0,_.ZP)(C,u),[C,u]),eh=(0,T.gS)({dataGrouped:ef,key:ea,getAxisValue:h,getSegment:x}),ed=(0,$.Z)(C,e=>a(e)),ep=(0,P.Z)().domain(ed),em=(0,i.useMemo)(()=>(0,$.Z)(K,e=>a(e)),[K,a]),eg=(0,P.Z)().domain(em),eb=(0,M.Z)(),ey=(0,M.Z)();if(er.customDomain)eb.domain(er.customDomain),ey.domain(er.customDomain);else{let e=m(A,e=>d?.(e)[0]??h(e)),t=(0,w.Z)(A,e=>d?.(e)[1]??h(e))??0;eb.domain([void 0!==D?Math.min(D,e):e,void 0!==E?Math.max(E,t):t]).nice();let r=m(G,e=>d?.(e)[0]??h(e)),n=(0,w.Z)(G,e=>d?.(e)[1]??h(e))??0;ey.domain([void 0!==D?Math.min(D,r):r,void 0!==E?Math.max(E,n):n]).nice()}let ex=b?.id?n.cubes.find(e=>e.iri===b.cubeIri)?.filters[b.id]:void 0,{allSegments:ej,segments:eO}=(0,i.useMemo)(()=>{let e=Array.from(new Set(H.map(x))),t=Array.from(new Set(A.map(x))),r=ee?.segment?.sorting,n=(0,W.tf)(b,{sorting:r,useAbbreviations:ee.segment?.useAbbreviations,dimensionFilter:ex}),i=S()(e,n,(0,W.jS)(n,ee.segment?.sorting));return{allSegments:i,segments:i.filter(e=>t.includes(e))}},[b,x,ee.segment?.sorting,ee.segment?.useAbbreviations,H,A,ex]),ev=(0,Z.Z)();if(ee.segment&&b&&ee.color){let e=ej.map(e=>{let t=y.get(e)?.value||eu.get(e)?.value||"";return{label:e,color:"segment"===ee.color.type?ee.color.colorMapping[t]??N.Z[0]:N.Z[0]}});ev.domain(e.map(e=>e.label)),ev.range(e.map(e=>e.color))}else ev.domain(ej),ev.range((0,q.XN)({paletteId:ee.color?.paletteId,colorField:ee.color}));let{top:e_,left:e$,bottom:ew}=(0,L.u8)({xLabelPresent:!!g,yScale:ey,width:en,height:ei,interactiveFiltersConfig:et,formatNumber:eo}),eP=(0,L.vG)({width:en,left:e$,right:40});ep.range([0,eP]),eg.range([0,eP]);let eM=(0,L.Ti)({label:k,width:en}),eZ=(0,L.Ti)({label:g,width:en}),eN=(0,c.II)(er,{dimensions:o,measures:s,segment:ee.segment}),{yOffset:ek}=eN,eS=(0,v.Z)(eN,B),eD={top:R.L+e_+eM.offset+ek,right:40,bottom:ew,left:e$},eT=(0,L.dE)({width:en,chartWidth:eP,height:ei,margins:eD}),{chartHeight:eE}=eT;eb.range([eE,0]);let eC=(0,Y.d)(),eA=(0,i.useCallback)(e=>({x:ep(a(e)),y:eb(h(e)??0),color:I.i}),[a,h,ep,eb]);return Q(Q({chartType:"line",bounds:eT,chartData:C,allData:J,xScale:ep,xScaleTimeRange:eg,yScale:eb,segments:eO,colors:ev,getColorLabel:O,grouped:ec,chartWideData:eh,xKey:ea,getAnnotationInfo:eA,getTooltipInfo:e=>{let t=a(e),r=C.filter(e=>a(e).getTime()===t.getTime()),n=(0,U.h)({data:r,order:eO,getCategory:x,sortingOrder:"asc"}),i=ep(t),o=r.map(h),[s,u]=(0,$.Z)(o,e=>e??0),c=eC?eE:eb((s+u)*.5),d=eC?z.h0:(0,z.Y7)({chartWidth:eP,xAnchor:i,topAnchor:!ee.segment}),m=e=>(0,V._1)(e,el[f.id]??eo,f.unit);return{xAnchor:i,yAnchor:c,placement:d,value:es(a(e),l.timeUnit),datum:{label:ee.segment&&j(e),value:m(h(e)),error:p(e),color:ev(x(e))},values:n.map(e=>{let t=x(e);return{hide:null===h(e),label:j(e),value:m(h(e)),axis:"y",axisOffset:eb(h(e)??0),symbol:"line",color:ev(t)}})}},leftAxisLabelSize:eM,leftAxisLabelOffsetTop:e_,bottomAxisLabelSize:eZ},eS),t)},et=e=>{let{children:t}=e,r=(0,v.Z)(e,G),n=A(r),i=H(r,n),o=ee(r,n,i);return(0,p.jsx)(l._M.Provider,{value:o,children:t})},er=e=>(0,p.jsx)(K.o,{children:(0,p.jsx)(et,Q({},e))});var en=r(93730),ei=r(35696),eo=r(48660),es=r(43334),el=r(50057),ea=r(50051),eu=r(83001),ec=r(36831),ef=r(68807),eh=r(83002),ed=r(18984),ep=r(80750),em=r(38671),eg=r(12273),eb=r(62500),ey=r(25390),ex=r(15658);function ej(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eO(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ej(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ej(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ev=e=>(0,p.jsx)(o.F,eO(eO({},e),{},{Component:e_})),e_=(0,i.memo)(e=>{let{chartConfig:t,dimensions:r,measures:n,dimensionsById:i}=e,{fields:o,interactiveFiltersConfig:s}=t,[{dashboardFilters:l}]=(0,ex.lY)(ex.Sc),a=(0,ey.sH)({chartConfig:t,dimensions:r,measures:n}),u=(0,en.I4)();return(0,p.jsxs)(er,eO(eO({},e),{},{limits:a,children:[(0,p.jsxs)(eu.BO,{children:[(0,p.jsxs)(eu.ST,{children:[(0,p.jsx)(eo.aP,{}),(0,p.jsx)(es.p,{}),(0,p.jsx)(el._,{}),(0,p.jsx)(el.C,{}),(0,p.jsx)(y,{dotSize:"showDots"in t.fields.y&&"showDotsSize"in t.fields.y&&t.fields.y.showDots?t.fields.y.showDotsSize:void 0}),(0,p.jsx)(b,{}),(0,p.jsx)(em.x,eO({},a)),u?(0,p.jsx)(eb.w,{}):(0,p.jsx)(eg.g,{}),(0,ea.O)(s,l?.timeRange)&&(0,p.jsx)(ea.j,{})]}),(0,p.jsx)(eh.x,{}),u?(0,p.jsx)(ec.r,{}):(0,p.jsx)(ef.N,{}),(0,p.jsx)(ed.u,{type:o.segment?"multiple":"single"})]}),(0,p.jsx)(ei.u,{}),(o.segment||a.limits.length>0)&&(0,p.jsx)(eu.dt,{children:(0,p.jsx)(ep.Ek,{dimensionsById:i,chartConfig:t,symbol:"line",interactive:s.legend.active,showTitle:o.segment?.showTitle,limits:a})})]}))})},50057:function(e,t,r){r.d(t,{C:function(){return p},_:function(){return d}});var n=r(27454),i=r(27378),o=r(86932),s=r(43137),l=r(80491),a=r(3663),u=r(97358),c=r(41494),f=r(80733),h=r(24246);let d=()=>{let e=(0,i.useRef)(null),t=(0,f.K)(e=>e.enable),r=(0,f.K)(e=>e.duration),d=(0,c.iJ)(),{xScale:p,yScale:m,bounds:g,xDimension:b,xAxisLabel:y,bottomAxisLabelSize:x}=(0,s.gH)(),{chartHeight:j,chartWidth:O,margins:v}=g,{labelColor:_,gridColor:$,domainColor:w,labelFontSize:P,fontFamily:M,axisLabelFontSize:Z}=(0,a.$)(),N=(0,o.Fc)(),k=m.domain()[0]<0,S=g.chartWidth/90;return(0,i.useEffect)(()=>{if(e.current){let i=(0,n.LL)(p).ticks(S).tickSizeInner(k?-j:6).tickPadding(k?6:3).tickFormat(e=>d(e)),o=(0,l.sS)(e.current,{id:"axis-width-time",transform:`translate(${v.left} ${j+v.top})`,transition:{enable:t,duration:r},render:e=>e.call(i),renderUpdate:(e,t)=>(0,l.u5)(e,{transition:t.transition,s:e=>e.call(i)})});o.select(".domain").remove(),o.selectAll(".tick line").attr("stroke",k?$:w),o.selectAll(".tick text").attr("font-size",P).attr("font-family",M).attr("fill",_)}},[j,w,t,M,d,$,k,_,P,v.left,v.top,S,r,p]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("foreignObject",{x:v.left+O/2-x.width/2,y:v.top+j+N,width:O,height:x.height,style:{display:"flex"},children:(0,h.jsx)(u.K,{component:b,children:(0,h.jsx)("span",{style:{fontSize:Z,lineHeight:1.5},children:y})})}),(0,h.jsx)("g",{ref:e})]})},p=()=>{let e=(0,i.useRef)(null),t=(0,f.K)(e=>e.enable),r=(0,f.K)(e=>e.duration),{xScale:o,yScale:u,bounds:c}=(0,s.gH)(),{chartHeight:d,margins:p}=c,{domainColor:m}=(0,a.$)();return(0,i.useEffect)(()=>{if(e.current){let i=(0,n.LL)(o).tickSizeOuter(0),s=(0,l.sS)(e.current,{id:"axis-width-time-domain",transform:`translate(${p.left} ${d+p.top})`,transition:{enable:t,duration:r},render:e=>e.call(i),renderUpdate:(e,t)=>(0,l.u5)(e,{transition:t.transition,s:e=>e.call(i)})});s.selectAll(".tick line").remove(),s.selectAll(".tick text").remove(),s.select(".domain").attr("transform",`translate(0, -${c.chartHeight-u(0)})`).attr("stroke",m).attr("stroke-linecap","round")}}),(0,h.jsx)("g",{ref:e})}},68807:function(e,t,r){r.d(t,{N:function(){return l}});var n=r(64986),i=r(43137),o=r(81364),s=r(24246);let l=()=>{let[{type:e,visible:t,observation:r}]=(0,o.X)();return(0,s.jsx)(s.Fragment,{children:"tooltip"===e&&t&&r&&(0,s.jsx)(u,{d:r})})},a=(0,n.Z)(e=>({dot:{position:"absolute",width:6,height:6,borderRadius:"50%",borderStyle:"solid",borderWidth:1,borderColor:e.palette.grey[100],transform:"translate3d(-50%, -50%, 0)",pointerEvents:"none"}})),u=e=>{let{d:t}=e,{getTooltipInfo:r,bounds:{margins:n}}=(0,i.gH)(),o=a(),{xAnchor:l,values:u}=r(t);return(0,s.jsx)(s.Fragment,{children:u&&u.map((e,t)=>!e.hide&&"y"===e.axis&&void 0!==e.axisOffset&&(0,s.jsx)("div",{className:o.dot,style:{backgroundColor:e.color,left:l+n.left,top:e.axisOffset+n.top}},t))})}},83002:function(e,t,r){r.d(t,{x:function(){return a}});var n=r(64986),i=r(43137),o=r(81364),s=r(98016),l=r(24246);let a=e=>{let{rotate:t=!1}=e,[{type:r,visible:n,observation:i}]=(0,o.X)();return(0,l.jsx)(l.Fragment,{children:"tooltip"===r&&n&&i&&(0,l.jsx)(u,{d:i,rotate:t})})},u=e=>{let{d:t,rotate:r}=e,{getTooltipInfo:n,bounds:o}=(0,i.gH)(),{xAnchor:s,value:a,datum:u,placement:c,values:h}=n(t);return(0,l.jsx)(f,{rotate:r,xValue:a,values:h,chartHeight:o.chartHeight,margins:o.margins,xAnchor:s,datum:u,placement:c})},c=(0,n.Z)(e=>({left:{width:0,position:"absolute",borderWidth:.5,borderStyle:"solid",borderColor:e.palette.cobalt[50],pointerEvents:"none",transform:"translateX(-50%)"},right:{position:"absolute",fontWeight:"bold",backgroundColor:e.palette.background.paper,transform:e=>{let{rotate:t}=e;return t?"translateX(-50%) translateY(50%) rotate(90deg)":"translateX(-50%)"},paddingLeft:e.spacing(1),paddingRight:e.spacing(1),fontSize:"0.875rem"}})),f=e=>{let{rotate:t,xValue:r,chartHeight:n,margins:i,xAnchor:o}=e,a=c({rotate:t}),u=(0,s.d)();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:a.left,style:{height:n,left:o+i.left,top:i.top}}),!u&&(0,l.jsx)("div",{className:a.right,style:{left:o+i.left,top:n+i.top+6},children:r})]})}},38671:function(e,t,r){r.d(t,{x:function(){return u}});var n=r(17043),i=r(27378),o=r(43137),s=r(40964),l=r(24246);function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let u=e=>{let t=(0,o.gH)(),r=(0,i.useMemo)(()=>(0,s.x)({isHorizontal:!1,getChartState:()=>t}),[t]);return(0,l.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))};u.displayName="VerticalLimits"},12273:function(e,t,r){r.d(t,{g:function(){return c}});var n=r(99714),i=r(28810),o=r(27378),s=r(43137),l=r(81364),a=r(77142),u=r(24246);let c=(0,o.memo)(function(){let{chartData:e,chartWideData:t,xScale:r,getX:c,getTooltipInfo:f,bounds:{chartWidth:h,chartHeight:d,margins:p}}=(0,s.gH)(),[m,g]=(0,l.X)(),b=(0,o.useRef)(null),y=(0,a.z)(()=>{g({type:"INTERACTION_HIDE"})}),x=(0,o.useCallback)(o=>{if(!b.current)return;let[s,l]=(0,i.Z)(o,b.current),a=(0,n.Z)((e,t)=>c(e).getTime()-t.getTime()).left,u=r.invert(s),h=a(t,u,1),d=t[h-1],p=t[h]??d,x=u.getTime()-c(d).getTime()>c(p).getTime()-u.getTime()?p:d,j=x?f(x).yAnchor:void 0;if(!x||Number.isNaN(j)||void 0===j){m.visible&&y();return}let O=c(x).getTime(),v=e.find(e=>O===c(e).getTime());m.observation&&O===c(m.observation).getTime()&&m.visible||g({type:"INTERACTION_UPDATE",value:{type:"tooltip",visible:!0,observation:v,mouse:{x:s,y:l}}})},[e,t,g,f,c,y,m.observation,m.visible,r]);return(0,u.jsx)("g",{ref:b,transform:`translate(${p.left} ${p.top})`,children:(0,u.jsx)("rect",{width:h,height:d,fillOpacity:0,onMouseOut:y,onMouseOver:x,onMouseMove:x})})})},62500:function(e,t,r){r.d(t,{w:function(){return u}});var n=r(16315),i=r(28810),o=r(27378),s=r(43137),l=r(40907),a=r(24246);let u=(0,o.memo)(function(e){let{debug:t}=e,r=(0,o.useRef)(null),u=(0,s.gH)(),{bounds:{chartWidth:h,chartHeight:d,margins:p},getSegment:m,colors:g}=u,{onClick:b,onHover:y,onHoverOut:x}=(0,l.A)({focusingSegment:!0}),j=(0,o.useMemo)(()=>c(u),[u]),O=(0,o.useMemo)(()=>n.Z.from(j,e=>e.x,e=>e.y),[j]),v=(0,o.useMemo)(()=>O.voronoi([0,0,f(h),f(d)]),[h,d,O]),_=(0,o.useCallback)(e=>{if(!r.current)return;let[t,n]=(0,i.Z)(e,r.current);return j[O.find(t,n)]},[j,O]),$=(0,o.useCallback)(e=>{let t=_(e);t&&y(t.observation,{segment:t.segment})},[_,y]),w=(0,o.useCallback)(e=>{let t=_(e);t&&b(t.observation,{segment:t.segment})},[_,b]);return(0,a.jsxs)("g",{ref:r,transform:`translate(${p.left} ${p.top})`,children:[t&&j.map((e,t)=>{let{observation:r}=e;return(0,a.jsx)("path",{d:v.renderCell(t),stroke:"white",strokeOpacity:1,fill:g(m(r)),fillOpacity:.2},t)}),(0,a.jsx)("rect",{width:h,height:d,fillOpacity:0,onMouseOver:$,onMouseMove:$,onMouseOut:x,onClick:w})]})}),c=e=>{let{chartData:t,xScale:r,getX:n,yScale:i,getY:o,getSegment:s}=e;switch(e.chartType){case"area":{let{series:t}=e;return t.flatMap(e=>{let o=e.key;return e.map(e=>{let s=e.data;return{x:r(n(s)??NaN),y:i(1===t.length?e[0]:(e[0]+e[1])*.5),observation:s,segment:o}}).filter(e=>!Number.isNaN(e.x)&&!Number.isNaN(e.y))})}case"line":case"scatterplot":return t.map(e=>{let t=s(e);return{observation:e,x:r(n(e)??NaN),y:i(o(e)??NaN),segment:t}}).filter(e=>!Number.isNaN(e.x)&&!Number.isNaN(e.y));default:return e}},f=e=>e<0?0:e},4405:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(28810),i=r(41084);function o(e,t){return e.target&&(e=(0,i.Z)(e),void 0===t&&(t=e.currentTarget),e=e.touches||[e]),Array.from(e,e=>(0,n.Z)(e,t))}},91648:function(e,t,r){function n(e){return"object"==typeof e&&"length"in e?e:Array.from(e)}r.d(t,{Z:function(){return n}}),Array.prototype.slice},1058:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){return function(){return e}}},22428:function(e,t,r){function n(e){this._context=e}function i(e){return new n(e)}r.d(t,{Z:function(){return i}}),n.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}}},62196:function(e,t,r){r.d(t,{Z:function(){return a}});var n=r(91648),i=r(1058),o=r(22428),s=r(46604),l=r(21029);function a(e,t){var r=(0,i.Z)(!0),a=null,u=o.Z,c=null,f=(0,s.d)(h);function h(i){var o,s,l,h=(i=(0,n.Z)(i)).length,d=!1;for(null==a&&(c=u(l=f())),o=0;o<=h;++o)!(o<h&&r(s=i[o],o,i))===d&&((d=!d)?c.lineStart():c.lineEnd()),d&&c.point(+e(s,o,i),+t(s,o,i));if(l)return c=null,l+""||null}return e="function"==typeof e?e:void 0===e?l.x:(0,i.Z)(e),t="function"==typeof t?t:void 0===t?l.y:(0,i.Z)(t),h.x=function(t){return arguments.length?(e="function"==typeof t?t:(0,i.Z)(+t),h):e},h.y=function(e){return arguments.length?(t="function"==typeof e?e:(0,i.Z)(+e),h):t},h.defined=function(e){return arguments.length?(r="function"==typeof e?e:(0,i.Z)(!!e),h):r},h.curve=function(e){return arguments.length?(u=e,null!=a&&(c=u(a)),h):u},h.context=function(e){return arguments.length?(null==e?a=c=null:c=u(a=e),h):a},h}},46604:function(e,t,r){r.d(t,{d:function(){return a}});let n=Math.PI,i=2*n,o=i-1e-6;function s(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}class l{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?s:function(e){let t=Math.floor(e);if(!(t>=0))throw Error(`invalid digits: ${e}`);if(t>15)return s;let r=10**t;return function(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=Math.round(arguments[t]*r)/r+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,r,n){this._append`Q${+e},${+t},${this._x1=+r},${this._y1=+n}`}bezierCurveTo(e,t,r,n,i,o){this._append`C${+e},${+t},${+r},${+n},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,r,i,o){if(e=+e,t=+t,r=+r,i=+i,(o=+o)<0)throw Error(`negative radius: ${o}`);let s=this._x1,l=this._y1,a=r-e,u=i-t,c=s-e,f=l-t,h=c*c+f*f;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>1e-6){if(Math.abs(f*a-u*c)>1e-6&&o){let d=r-s,p=i-l,m=a*a+u*u,g=Math.sqrt(m),b=Math.sqrt(h),y=o*Math.tan((n-Math.acos((m+h-(d*d+p*p))/(2*g*b)))/2),x=y/b,j=y/g;Math.abs(x-1)>1e-6&&this._append`L${e+x*c},${t+x*f}`,this._append`A${o},${o},0,0,${+(f*d>c*p)},${this._x1=e+j*a},${this._y1=t+j*u}`}else this._append`L${this._x1=e},${this._y1=t}`}}arc(e,t,r,s,l,a){if(e=+e,t=+t,a=!!a,(r=+r)<0)throw Error(`negative radius: ${r}`);let u=r*Math.cos(s),c=r*Math.sin(s),f=e+u,h=t+c,d=1^a,p=a?s-l:l-s;null===this._x1?this._append`M${f},${h}`:(Math.abs(this._x1-f)>1e-6||Math.abs(this._y1-h)>1e-6)&&this._append`L${f},${h}`,r&&(p<0&&(p=p%i+i),p>o?this._append`A${r},${r},0,1,${d},${e-u},${t-c}A${r},${r},0,1,${d},${this._x1=f},${this._y1=h}`:p>1e-6&&this._append`A${r},${r},0,${+(p>=n)},${d},${this._x1=e+r*Math.cos(l)},${this._y1=t+r*Math.sin(l)}`)}rect(e,t,r,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${r=+r}v${+n}h${-r}Z`}toString(){return this._}}function a(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(null==r)t=null;else{let e=Math.floor(r);if(!(e>=0))throw RangeError(`invalid digits: ${r}`);t=e}return e},()=>new l(t)}l.prototype},21029:function(e,t,r){function n(e){return e[0]}function i(e){return e[1]}r.d(t,{x:function(){return n},y:function(){return i}})}}]);
//# sourceMappingURL=61127.ee8826d20de30097.js.map