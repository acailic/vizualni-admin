{"version":3,"file":"static/chunks/23731.55c5a7edb96ba07f.js","mappings":"49BA4BA,IAAMA,EAA0BA,KAC9B,IAAMC,EAA6BC,CAAAA,EAAAA,EAAAA,EAAAA,IAEnC,MACEC,CAAAA,EAAAA,EAAAA,IAAAA,EAAAC,EAAAA,QAAA,EAAAC,SAAA,CACEC,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACC,UAAU,KAAKC,QAAQ,KAAKC,GAAI,CAAEC,GAAI,EAAGC,MAAO,UAAW,EAAEP,SAAC,2BAE1E,GACAC,CAAAA,EAAAA,EAAAA,GAAAA,EAACO,EAAAA,CAAG,EAACH,GAAI,CAAEI,EAAG,CAAE,EAAET,SAChBC,CAAAA,EAAAA,EAAAA,GAAAA,EAACS,EAAAA,EAAS,EACRC,YAAa,EACbC,KAAMhB,IACNiB,MAAO,EAAM,EACb,GACE,EAGZ,EAEMC,EAAeC,IAQf,GARgB,CACpBC,WAAAA,CAAU,CACVC,WAAAA,CAAU,CACVC,YAAAA,CAAAA,CAKD,CAAAH,EACOI,EAASC,CAAAA,EAAAA,EAAAA,EAAAA,IACT,GAACC,CAAQ,GAAEC,CAAAA,CAAW,CAAIC,CAAAA,EAAAA,EAAAA,QAAAA,EAAS,IACnC,CAAC,CAAEX,KAAAA,CAAI,CAAEY,SAAAA,CAAAA,CAAU,CAAC,CAAGC,CAAAA,EAAAA,EAAAA,EAAAA,EAA4B,CACvDP,YAAAA,EACAQ,UAAW,CACTC,WAAYV,EAAWW,IAAI,CAC3BC,UAAWZ,EAAWa,GAAG,CACzBX,OAAAA,EACAY,YAAa,CAAC,CAAEC,IAAKhB,CAAW,EAAC,EAEnCiB,MAAO,CAACZ,CACV,GACMa,EAA2CC,CAAAA,EAAAA,EAAAA,CAAAA,EAAS,CAACC,EAAKf,IAC9DC,EAAYD,IAGd,MACEpB,CAAAA,EAAAA,EAAAA,GAAAA,EAACoC,EAAAA,CAAK,EAACC,UAAU,MAAMC,QAAS,EAAEvC,SAChCF,CAAAA,EAAAA,EAAAA,IAAAA,EAAC0C,EAAAA,CAAS,EAACC,SAAUP,EAAcb,SAAUA,EAASrB,SAAA,CACpDF,CAAAA,EAAAA,EAAAA,IAAAA,EAAC4C,EAAAA,CAAgB,EAAA1C,SAAA,CACfC,CAAAA,EAAAA,EAAAA,GAAAA,EAAC0C,EAAAA,EAAI,EAACC,KAAK,SAASC,QAAQ,SAASC,KAAM,EAAG,GAAI,IAClD7C,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACE,QAAQ,QAAOJ,SAAC,YAAU,GAAa,GAErDF,CAAAA,EAAAA,EAAAA,IAAAA,EAACiD,EAAAA,CAAgB,EAAA/C,SAAA,CACdwB,EAAWvB,CAAAA,EAAAA,EAAAA,GAAAA,EAAC+C,EAAAA,CAAgB,EAACF,KAAM,GAAIvC,MAAM,WAAW,GAAM,KAE9Dc,GAAYT,GAAMqC,oBACjBhD,CAAAA,EAAAA,EAAAA,GAAAA,EAACS,EAAAA,EAAS,EACRE,KAAMsC,OAAOC,WAAW,CAAC,CACvB,IACKvC,EAAKqC,mBAAmB,CAACG,UAAU,IACnCxC,EAAKqC,mBAAmB,CAACI,QAAQ,CACrC,CAACC,GAAG,CAAEC,GAAM,CAACA,EAAEC,KAAK,CAAED,EAAE,EAC1B,EACD1C,MAAO,EAAM,GAEb,KAAI,GACS,EACT,EAGlB,EAEM4C,EAAoBA,KACxB,GAAM,CAACC,EAAkB,CAAGC,CAAAA,EAAAA,EAAAA,EAAAA,IACtBzC,EAAc0C,CAAAA,EAAAA,EAAAA,EAAAA,EAAeF,GAC7BG,EAAkBC,CAAAA,EAAAA,EAAAA,EAAAA,EACtBJ,EAAkBzC,UACpB,EAEA,MACEnB,CAAAA,EAAAA,EAAAA,IAAAA,EAAAC,EAAAA,QAAA,EAAAC,SAAA,CACEC,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACC,UAAU,KAAKC,QAAQ,KAAKC,GAAI,CAAEC,GAAI,EAAGC,MAAO,UAAW,EAAEP,SAAC,YAE1E,GACCkB,EAAY6C,KAAK,CAACT,GAAG,CAAEU,GACtBlE,CAAAA,EAAAA,EAAAA,IAAAA,EAACuC,EAAAA,CAAK,EAAgBE,QAAS,EAAGlC,GAAI,CAAE4D,GAAI,EAAGC,GAAI,CAAE,EAAElE,SAAA,CACrDC,CAAAA,EAAAA,EAAAA,GAAAA,EAACkE,EAAAA,CAAM,EACLhE,UAAU,IACVI,MAAM,UACNH,QAAQ,OACR0C,KAAK,KACLsB,KAAO,+CAA8CC,mBACnDX,EAAkBzC,UAAU,CAACa,GAC/B,EAAE,qCAAqCuC,mBACrCL,EAAKhC,GACP,EAAE,CAAE,CACJsC,OAAO,SACPC,IAAI,sBACJC,UAAWvE,CAAAA,EAAAA,EAAAA,GAAAA,EAAC0C,EAAAA,EAAI,EAACC,KAAK,qBAAqBE,KAAM,EAAG,GAAI9C,SAExDC,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACE,QAAQ,QAAOJ,SAAC,qBAAmB,EAAa,GAE9DC,CAAAA,EAAAA,EAAAA,GAAAA,EAACkE,EAAAA,CAAM,EACLhE,UAAU,IACVI,MAAM,UACNH,QAAQ,OACR0C,KAAK,KACLsB,KAAO,GAAEP,EAAgB,SAASQ,mBAC/B;;yBAEf,EAA2BL,EAAKhC,GAAI,GACxB,EAAE,oBAAqB,CACvBsC,OAAO,SACPC,IAAI,sBACJC,UAAWvE,CAAAA,EAAAA,EAAAA,GAAAA,EAAC0C,EAAAA,EAAI,EAACC,KAAK,qBAAqBE,KAAM,EAAG,GAAI9C,SAExDC,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACE,QAAQ,QAAOJ,SAAC,qBAAmB,EAAa,GAE9DC,CAAAA,EAAAA,EAAAA,GAAAA,EAACa,EAAY,CACXE,WAAYgD,EAAKhC,GAAI,CACrBf,WAAYyC,EAAkBzC,UAAW,CACzCC,YAAaA,CAAY,GACzB,EArCQ8C,EAAKhC,GAsCV,GAETlC,CAAAA,EAAAA,EAAAA,IAAAA,EAACI,EAAAA,CAAU,EACTC,UAAU,KACVC,QAAQ,KACRC,GAAI,CAAEC,GAAI,EAAGuC,QAAS,OAAQ4B,WAAY,SAAUlE,MAAO,UAAW,EAAEP,SAAA,CACzE,qBACoB,IACnBC,CAAAA,EAAAA,EAAAA,GAAAA,EAACkE,EAAAA,CAAM,EACLhE,UAAU,OACVC,QAAQ,OACR0C,KAAK,KACL4B,QAASA,KACPC,QAAQC,GAAG,CAAClB,EACd,EAAE1D,SACH,mBAED,GAAS,GAEXC,CAAAA,EAAAA,EAAAA,GAAAA,EAACO,EAAAA,CAAG,EAACH,GAAI,CAAEI,EAAG,CAAE,EAAET,SAChBC,CAAAA,EAAAA,EAAAA,GAAAA,EAACS,EAAAA,EAAS,EAACC,YAAa,EAAGC,KAAM8C,EAAmB7C,MAAO,EAAM,EAAG,GAChE,EAGZ,EAOMgE,EAAYC,CAAAA,EAAAA,EAAAA,CAAAA,EAAYC,GAAkB,EAC9CC,WAAY,CACVC,OAAQ,CAACF,EAAMxC,OAAO,CAAC,GACvB2C,UAAWH,EAAMxC,OAAO,CAAC,GACzB4C,gBAAiBJ,EAAMK,OAAO,CAACC,UAAU,CAACC,OAAO,CACjDC,eAAgB,QAChBC,YAAaT,EAAMK,OAAO,CAACK,OAAO,CAClCC,YAAa,EAEb,CAAE,KAAIC,EAAAA,CAAY,CAACC,IAAK,EAAC,EAAG,CAC1BC,UAAW,MACb,CACF,EACAC,WAAY,CACVvF,MAAOwE,EAAMK,OAAO,CAACW,OAAO,CAACC,IAAAA,CAEjC,IAEaC,EAAcC,IACzB,GAAM,CAAEC,aAAAA,EAAe,EAAK,CAAEC,mBAAAA,EAAqB,GAAO,CAAGF,EACvDG,EAAUxB,IAEhB,MACE/E,CAAAA,EAAAA,EAAAA,IAAAA,EAAC0C,EAAAA,CAAS,CAAA8D,EAAAA,EAAA,CACRC,eAAc,GACdC,UAAWH,EAAQrB,UAAW,CAC9ByB,OAAM,IACFC,EAAAA,EAAuB,MAAA1G,SAAA,CAE3BC,CAAAA,EAAAA,EAAAA,GAAAA,EAACyC,EAAAA,CAAgB,EACfiE,WACE1G,CAAAA,EAAAA,EAAAA,GAAAA,EAACO,EAAAA,CAAG,EAACC,EAAG,EAAET,SACRC,CAAAA,EAAAA,EAAAA,GAAAA,EAAC2G,EAAAA,CAAiB,EAACC,MAAM,MAAMC,OAAO,MAAMC,SAAU,OAAQ,EAAG,GAEpE/G,SAEDC,CAAAA,EAAAA,EAAAA,GAAAA,EAACC,EAAAA,CAAU,EAACC,UAAU,KAAKC,QAAQ,KAAKoG,UAAWH,EAAQP,UAAW,CAAA9F,SAAC,uCAEvE,EAAa,GAEfF,CAAAA,EAAAA,EAAAA,IAAAA,EAACiD,EAAAA,CAAgB,EAAA/C,SAAA,CACdmG,EAAelG,CAAAA,EAAAA,EAAAA,GAAAA,EAACwD,EAAiB,IAAM,KACvC2C,EAAqBnG,CAAAA,EAAAA,EAAAA,GAAAA,EAACN,EAAuB,IAAM,KAAI,GACvC,GAGzB","sources":["webpack://_N_E/./components/debug-panel/debug-panel.tsx"],"sourcesContent":["import {\n  Accordion,\n  AccordionDetails,\n  AccordionProps,\n  AccordionSummary,\n  Box,\n  Button,\n  CircularProgress,\n  paperClasses,\n  Stack,\n  Theme,\n  Typography,\n} from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { useState } from \"react\";\nimport { Inspector } from \"react-inspector\";\n\nimport { getChartConfig } from \"@/config-utils\";\nimport { ChartConfig, DataSource, useConfiguratorState } from \"@/configurator\";\nimport { dataSourceToSparqlEditorUrl } from \"@/domain/data-source\";\nimport { useDataCubesComponentsQuery } from \"@/graphql/hooks\";\nimport { Icon } from \"@/icons\";\nimport SvgIcChevronRight from \"@/icons/components/IcChevronRight\";\nimport { useLocale } from \"@/locales/use-locale\";\nimport { useInteractiveFiltersGetState } from \"@/stores/interactive-filters\";\nimport { useEvent } from \"@/utils/use-event\";\nimport { DISABLE_SCREENSHOT_ATTR } from \"@/utils/use-screenshot\";\n\nconst DebugInteractiveFilters = () => {\n  const getInteractiveFiltersState = useInteractiveFiltersGetState();\n\n  return (\n    <>\n      <Typography component=\"h3\" variant=\"h4\" sx={{ px: 5, color: \"grey.700\" }}>\n        Interactive Filters State\n      </Typography>\n      <Box sx={{ p: 5 }}>\n        <Inspector\n          expandLevel={3}\n          data={getInteractiveFiltersState()}\n          table={false}\n        />\n      </Box>\n    </>\n  );\n};\n\nconst CubeMetadata = ({\n  datasetIri,\n  dataSource,\n  chartConfig,\n}: {\n  datasetIri: string;\n  dataSource: DataSource;\n  chartConfig: ChartConfig;\n}) => {\n  const locale = useLocale();\n  const [expanded, setExpanded] = useState(false);\n  const [{ data, fetching }] = useDataCubesComponentsQuery({\n    chartConfig,\n    variables: {\n      sourceType: dataSource.type,\n      sourceUrl: dataSource.url,\n      locale,\n      cubeFilters: [{ iri: datasetIri }],\n    },\n    pause: !expanded,\n  });\n  const handleChange: AccordionProps[\"onChange\"] = useEvent((_ev, expanded) =>\n    setExpanded(expanded)\n  );\n\n  return (\n    <Stack direction=\"row\" spacing={2}>\n      <Accordion onChange={handleChange} expanded={expanded}>\n        <AccordionSummary>\n          <Icon name=\"column\" display=\"inline\" size={16} />{\" \"}\n          <Typography variant=\"body2\">Dimensions</Typography>\n        </AccordionSummary>\n        <AccordionDetails>\n          {fetching ? <CircularProgress size={12} color=\"secondary\" /> : null}\n\n          {expanded && data?.dataCubesComponents ? (\n            <Inspector\n              data={Object.fromEntries([\n                [\n                  ...data.dataCubesComponents.dimensions,\n                  ...data.dataCubesComponents.measures,\n                ].map((d) => [d.label, d]),\n              ])}\n              table={false}\n            />\n          ) : null}\n        </AccordionDetails>\n      </Accordion>\n    </Stack>\n  );\n};\n\nconst DebugConfigurator = () => {\n  const [configuratorState] = useConfiguratorState();\n  const chartConfig = getChartConfig(configuratorState);\n  const sparqlEditorUrl = dataSourceToSparqlEditorUrl(\n    configuratorState.dataSource\n  );\n\n  return (\n    <>\n      <Typography component=\"h3\" variant=\"h4\" sx={{ px: 5, color: \"grey.700\" }}>\n        Cube Tools\n      </Typography>\n      {chartConfig.cubes.map((cube) => (\n        <Stack key={cube.iri} spacing={2} sx={{ pl: 5, py: 3 }}>\n          <Button\n            component=\"a\"\n            color=\"primary\"\n            variant=\"text\"\n            size=\"sm\"\n            href={`https://cube-viewer.zazuko.com/?endpointUrl=${encodeURIComponent(\n              configuratorState.dataSource.url\n            )}&user=&password=&sourceGraph=&cube=${encodeURIComponent(\n              cube.iri\n            )}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            startIcon={<Icon name=\"legacyLinkExternal\" size={16} />}\n          >\n            <Typography variant=\"body2\">Open in Cube Viewer</Typography>\n          </Button>\n          <Button\n            component=\"a\"\n            color=\"primary\"\n            variant=\"text\"\n            size=\"sm\"\n            href={`${sparqlEditorUrl}#query=${encodeURIComponent(\n              `#pragma describe.strategy cbd\n\n               DESCRIBE <${cube.iri}>`\n            )}&requestMethod=POST`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            startIcon={<Icon name=\"legacyLinkExternal\" size={16} />}\n          >\n            <Typography variant=\"body2\">Cube Metadata Query</Typography>\n          </Button>\n          <CubeMetadata\n            datasetIri={cube.iri}\n            dataSource={configuratorState.dataSource}\n            chartConfig={chartConfig}\n          />\n        </Stack>\n      ))}\n      <Typography\n        component=\"h3\"\n        variant=\"h4\"\n        sx={{ px: 5, display: \"flex\", alignItems: \"center\", color: \"grey.700\" }}\n      >\n        Configurator State{\" \"}\n        <Button\n          component=\"span\"\n          variant=\"text\"\n          size=\"sm\"\n          onClick={() => {\n            console.log(configuratorState);\n          }}\n        >\n          (dump to console)\n        </Button>\n      </Typography>\n      <Box sx={{ p: 5 }}>\n        <Inspector expandLevel={3} data={configuratorState} table={false} />\n      </Box>\n    </>\n  );\n};\n\nexport type DebugPanelProps = {\n  configurator?: Boolean;\n  interactiveFilters?: Boolean;\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  debugPanel: {\n    margin: -theme.spacing(5),\n    marginTop: theme.spacing(5),\n    backgroundColor: theme.palette.background.default,\n    borderTopStyle: \"solid\",\n    borderColor: theme.palette.divider,\n    borderWidth: 1,\n\n    [`&.${paperClasses.root}`]: {\n      boxShadow: \"none\",\n    },\n  },\n  debugTitle: {\n    color: theme.palette.warning.main,\n  },\n}));\n\nexport const DebugPanel = (props: DebugPanelProps) => {\n  const { configurator = false, interactiveFilters = false } = props;\n  const classes = useStyles();\n\n  return (\n    <Accordion\n      disableGutters\n      className={classes.debugPanel}\n      square\n      {...DISABLE_SCREENSHOT_ATTR}\n    >\n      <AccordionSummary\n        expandIcon={\n          <Box p={2}>\n            <SvgIcChevronRight width=\"2em\" height=\"2em\" fontSize={\"0.5em\"} />\n          </Box>\n        }\n      >\n        <Typography component=\"h3\" variant=\"h5\" className={classes.debugTitle}>\n          ðŸš§ Debug Panel ðŸš§\n        </Typography>\n      </AccordionSummary>\n      <AccordionDetails>\n        {configurator ? <DebugConfigurator /> : null}\n        {interactiveFilters ? <DebugInteractiveFilters /> : null}\n      </AccordionDetails>\n    </Accordion>\n  );\n};\n"],"names":["DebugInteractiveFilters","getInteractiveFiltersState","useInteractiveFiltersGetState","_jsxs","_Fragment","children","_jsx","Typography","component","variant","sx","px","color","Box","p","Inspector","expandLevel","data","table","CubeMetadata","_ref","datasetIri","dataSource","chartConfig","locale","useLocale","expanded","setExpanded","useState","fetching","useDataCubesComponentsQuery","variables","sourceType","type","sourceUrl","url","cubeFilters","iri","pause","handleChange","useEvent","_ev","Stack","direction","spacing","Accordion","onChange","AccordionSummary","Icon","name","display","size","AccordionDetails","CircularProgress","dataCubesComponents","Object","fromEntries","dimensions","measures","map","d","label","DebugConfigurator","configuratorState","useConfiguratorState","getChartConfig","sparqlEditorUrl","dataSourceToSparqlEditorUrl","cubes","cube","pl","py","Button","href","encodeURIComponent","target","rel","startIcon","alignItems","onClick","console","log","useStyles","makeStyles","theme","debugPanel","margin","marginTop","backgroundColor","palette","background","default","borderTopStyle","borderColor","divider","borderWidth","paperClasses","root","boxShadow","debugTitle","warning","main","DebugPanel","props","configurator","interactiveFilters","classes","_objectSpread","disableGutters","className","square","DISABLE_SCREENSHOT_ATTR","expandIcon","SvgIcChevronRight","width","height","fontSize"],"sourceRoot":""}