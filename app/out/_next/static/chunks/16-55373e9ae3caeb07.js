"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[16],{34712:function(e,t,i){i.d(t,{MM:function(){return U},Wg:function(){return T},X_:function(){return K},H2:function(){return F}});var r=i(90089),n=i(17043),o=i(96338),a=i(19914),s=i(62033),c=i(19365),l=i(60116),d=i(12548),p=i(50714),h=i(971),m=i(52936),u=i(87026),x=i(85492),b=i(381),f=i(64189),j=i(97901),g=i(86677),v=i(27378),y=i(93477),w=i(3834),k=i(64986),O=i(38600),C=i(53082),Z=i(48947),_=i(24246);let $=(0,k.Z)(e=>({actionTooltip:{position:"absolute",bottom:"100%",left:"50%",transform:"translate3d(-50%, 0, 0)",backgroundColor:e.palette.grey[700],borderRadius:1.5,color:e.palette.grey[100],fontSize:"0.625rem",textAlign:"center",whiteSpace:"nowrap",padding:`${e.spacing(1)} ${e.spacing(2)}`,marginBottom:"calc(0.5rem + 2px)",zIndex:13,pointerEvents:"none",filter:"0 3px 5px 0 rgba(0,0,0,0.90)","&::after":{content:"''",position:"absolute",width:0,height:0,border:"0.5rem solid transparent",borderTopColor:e.palette.grey[700],left:"50%",top:"100%",zIndex:-1,transform:"translateX(-50%)"}}})),S=(0,k.Z)(e=>({button:{backgroundColor:e.palette.cobalt[100],position:"relative",width:42,minWidth:42,cursor:"pointer","&:hover":{backgroundColor:e.palette.cobalt[200]},"&:active":{backgroundColor:e.palette.cobalt[300]}}})),z=e=>{let{children:t}=e,i=$();return(0,_.jsx)("div",{className:i.actionTooltip,children:t})},P=e=>{let{content:t}=e,{0:i,1:r}=(0,v.useState)(!1),{0:n,1:a}=(0,v.useState)((0,_.jsx)(o.cC,{id:"button.hint.click.to.copy"})),s=(e,t)=>{e.preventDefault(),O.nx(t)},c=S();return(0,_.jsxs)(C.k,{sx:{gap:1},children:[(0,_.jsx)(w.Z,{size:"sm",value:t,readOnly:!0,sx:{"& .MuiInput-input":{pr:0,overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"}}}),(0,_.jsxs)(d.Z,{variant:"text",onMouseOver:()=>r(!0),onMouseUp:()=>a((0,_.jsx)(o.cC,{id:"button.hint.copied"})),onMouseLeave:()=>{r(!1),a((0,_.jsx)(o.cC,{id:"button.hint.click.to.copy"}))},onClick:e=>s(e,t),className:c.button,children:[(0,_.jsx)(Z.JO,{name:"copy",size:20}),i&&(0,_.jsx)(z,{children:n})]})]})};var M=i(41053),E=i(99990),I=i(77142),D=i(66963),J=i(82395);let R=["infoMessage"],W=["infoMessage","label"];function B(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,r)}return i}function L(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?B(Object(i),!0).forEach(function(t){(0,n.Z)(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):B(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}let T=e=>(0,_.jsxs)(s.Z,{direction:"row",spacing:2,children:[(0,_.jsx)(A,L({},e)),(0,_.jsx)(q,L({},e))]}),F=e=>{let{children:t,renderTrigger:i,popoverProps:r,trigger:n}=e,{0:o,1:a}=(0,v.useState)();(0,v.useEffect)(()=>{a(n)},[n]);let[s,d,p]=(0,J.y)();return(0,_.jsxs)(_.Fragment,{children:[i&&i(a),(0,_.jsx)(c.ZP,L(L({open:!!o,anchorEl:o},r),{},{anchorPosition:r.anchorPosition?{top:r.anchorPosition?.top-p/2,left:r.anchorPosition?.left-d}:void 0,elevation:4,onClose:()=>a(void 0),children:(0,_.jsx)(l.Z,{ref:s,children:t})}))]})},q=e=>{let{chartWrapperRef:t,configKey:i,locale:r}=e,{0:n,1:a}=(0,v.useState)(0),s=(0,I.z)(()=>{t?.current&&a(Math.ceil(t.current.getBoundingClientRect().height))});return(0,_.jsx)(F,{popoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:-4,horizontal:"right"},onClick:s},renderTrigger:e=>(0,_.jsx)(d.Z,{size:"sm",startIcon:(0,_.jsx)(Z.JO,{name:"embed",size:20}),onClick:t=>e(t.currentTarget),children:(0,_.jsx)(o.cC,{id:"button.embed"})}),children:(0,_.jsx)(U,{iframeHeight:n,configKey:i,locale:r})})},H=e=>{let{infoMessage:t}=e,i=(0,r.Z)(e,R);return(0,_.jsxs)(C.k,{sx:{alignItems:"center",gap:1},children:[(0,_.jsx)(E.Y8,L({},i)),t&&(0,_.jsx)(p.Z,{arrow:!0,title:t,PopperProps:{sx:{width:190,p:0}},children:(0,_.jsx)("div",{style:{fontSize:0},children:(0,_.jsx)(Z.JO,{name:"infoCircle",size:16})})})]})},N=e=>{let{infoMessage:t,label:i}=e,n=(0,r.Z)(e,W);return(0,_.jsxs)(C.k,{sx:{alignItems:"center",gap:1},children:[(0,_.jsx)(h.Z,{control:(0,_.jsx)(m.Z,L({},n)),label:(0,_.jsx)(u.Z,{variant:"body3",children:i}),sx:{mr:0}}),t&&(0,_.jsx)(p.Z,{arrow:!0,title:t,PopperProps:{sx:{width:190,p:0}},children:(0,_.jsx)("div",{style:{fontSize:0},children:(0,_.jsx)(Z.JO,{name:"infoCircle",size:16})})})]})},A=e=>{let{configKey:t,locale:i}=e;return(0,_.jsx)(F,{popoverProps:{anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:-4,horizontal:"right"}},renderTrigger:e=>(0,_.jsx)(d.Z,{size:"sm",onClick:t=>{e(t.target)},startIcon:(0,_.jsx)(Z.JO,{name:"share",size:20}),children:(0,_.jsx)(o.cC,{id:"button.share"})}),children:(0,_.jsx)(K,{configKey:t,locale:i})})},U=e=>{let{locale:t,configKey:i,iframeHeight:r}=e,n=(0,g.useRouter)(),{0:s,1:c}=(0,v.useState)(""),{0:l,1:d}=(0,v.useState)(""),{embedParams:p,setEmbedQueryParam:h}=(0,M.lR)(),{0:m,1:j}=(0,v.useState)(!0);return(0,v.useEffect)(()=>{let{origin:e}=window.location,r=Object.entries(p).filter(e=>{let[t,i]=e;return i}).map(e=>{let[t]=e;return`${t}=true`}).join("&"),o=`${i}${r?`?${r}`:""}`;if(c(`${e}/${t}/embed/${o}`),d(`${e}/api/embed-aem-ext/${t}/${o}`),n.isReady){let e=L(L({},Object.fromEntries(Object.entries(n.query).filter(e=>{let[t]=e;return!(0,M.Rx)(t)}))),Object.fromEntries(Object.entries(p).filter(e=>{let[t,i]=e;return i}).map(e=>{let[t]=e;return[t,"true"]})));new URLSearchParams(n.query).toString()!==new URLSearchParams(e).toString()&&n.replace({pathname:n.pathname,query:e},void 0,{shallow:!0})}},[i,t,p,n]),(0,_.jsxs)(C.k,{sx:{flexDirection:"column",gap:4,p:4},children:[(0,_.jsxs)(C.k,{sx:{flexDirection:"column",gap:2},children:[(0,_.jsx)(u.Z,{variant:"h6",component:"div",sx:{fontWeight:700},children:(0,_.jsx)(o.cC,{id:"publication.embed.iframe"})}),(0,_.jsx)(u.Z,{variant:"body3",children:(0,_.jsx)(o.cC,{id:"publication.embed.iframe.caption"})}),(0,_.jsxs)(C.k,{sx:{alignItems:"center",gap:4,mt:3,mb:2},children:[(0,_.jsx)(H,{value:"responsive",checked:m,onChange:()=>j(!0),label:a.ag._({id:"publication.embed.iframe.responsive"}),infoMessage:a.ag._({id:"publication.embed.iframe.responsive.warn"})}),(0,_.jsx)(H,{value:"static",checked:!m,onChange:()=>j(!1),label:a.ag._({id:"publication.embed.iframe.static"}),infoMessage:a.ag._({id:"publication.embed.iframe.static.warn"})})]}),(0,_.jsxs)(x.Z,{defaultExpanded:Object.values(p).some(e=>e),sx:{boxShadow:0,"&::before":{display:"none"}},children:[(0,_.jsx)(b.Z,{sx:{width:"fit-content",gap:1,minHeight:0,color:"primary.main",transition:"color 0.2s ease","&:hover":{color:"primary.dark"},"& > .MuiAccordionSummary-content":{m:0,p:0},"& svg":{color:"primary.main"}},children:(0,_.jsx)(u.Z,{variant:"h6",component:"p",children:(0,_.jsx)(o.cC,{id:"publication.embed.advanced-settings"})})}),(0,_.jsxs)(f.Z,{sx:{pt:3},children:[(0,_.jsx)(N,{checked:p.removeBorder,onChange:(e,t)=>{h("removeBorder",t)},label:a.ag._({id:"publication.embed.iframe.remove-border"}),infoMessage:a.ag._({id:"publication.embed.iframe.remove-border.warn"})}),(0,_.jsx)(N,{checked:p.optimizeSpace,onChange:(e,t)=>{h("optimizeSpace",t)},label:a.ag._({id:"publication.embed.iframe.optimize-space"})}),(0,_.jsx)(N,{checked:p.removeMoreOptionsButton,onChange:(e,t)=>{h("removeMoreOptionsButton",t)},label:a.ag._({id:"publication.embed.iframe.remove-more-options-button"})}),(0,_.jsx)(N,{checked:p.removeLabelsInteractivity,onChange:(e,t)=>{h("removeLabelsInteractivity",t)},label:a.ag._({id:"publication.embed.iframe.remove-axis-labels-interactivity"})}),(0,_.jsx)(N,{checked:p.removeFootnotes,onChange:(e,t)=>{h("removeFootnotes",t)},label:a.ag._({id:"publication.embed.iframe.remove-legend"})}),(0,_.jsx)(N,{checked:p.removeFilters,onChange:(e,t)=>{h("removeFilters",t)},label:a.ag._({id:"publication.embed.iframe.remove-filters"})})]})]})]}),(0,_.jsx)(P,{content:`<iframe src="${s}" width="100%" style="${m?"":`height: ${r||640}px; `}border: 0px #ffffff none;"  name="visualize.admin.ch"></iframe>${m?`<script type="text/javascript">!function(){window.addEventListener("message", function (e) { if (e.data.type === "${y.m2}") { document.querySelectorAll("iframe").forEach((iframe) => { if (iframe.contentWindow === e.source) { iframe.style.height = e.data.height + "px"; } }); } })}();</script>`:""}`}),(0,_.jsxs)(C.k,{sx:{flexDirection:"column",gap:2},children:[(0,_.jsx)(u.Z,{variant:"h6",component:"div",sx:{fontWeight:700},children:(0,_.jsx)(o.cC,{id:"publication.embed.external-application"})}),(0,_.jsx)(u.Z,{variant:"body3",children:(0,_.jsx)(o.cC,{id:"publication.embed.external-application.caption"})}),(0,_.jsx)(P,{content:l})]})]})},K=e=>{let{configKey:t,locale:i}=e,{0:r,1:n}=(0,v.useState)(""),a=(0,D.Q)();return(0,v.useEffect)(()=>{n(`${window.location.origin}/${i}/v/${t}`)},[t,i]),(0,_.jsxs)(C.k,{sx:{flexDirection:"column",gap:2,p:4},children:[(0,_.jsxs)(C.k,{sx:{justifyContent:"space-between",alignItems:"center"},children:[(0,_.jsx)(u.Z,{variant:"h6",component:"div",sx:{fontWeight:700},children:(0,_.jsx)(o.cC,{id:"publication.popup.share"})}),(0,_.jsxs)(C.k,{children:[(0,_.jsx)(j.Z,{title:a._(a._({id:"publication.share.linktitle.facebook"})),href:`https://www.facebook.com/sharer/sharer.php?u=${r}`,children:(0,_.jsx)(Z.JO,{name:"facebook"})}),(0,_.jsx)(j.Z,{title:a._(a._({id:"publication.share.linktitle.twitter"})),href:`https://twitter.com/intent/tweet?url=${r}&via=bafuCH`,children:(0,_.jsx)(Z.JO,{name:"twitter"})}),(0,_.jsx)(j.Z,{title:a._(a._({id:"publication.share.linktitle.mail"})),href:`mailto:?subject=${a._(a._({id:"publication.share.mail.subject"}))}&body=${a._(a._({id:"publication.share.mail.body"}))}: ${r}`,children:(0,_.jsx)(Z.JO,{name:"envelope"})})]})]}),(0,_.jsxs)("div",{children:[(0,_.jsx)(u.Z,{variant:"h6",component:"div",sx:{mb:1,fontWeight:700},children:(0,_.jsx)(o.cC,{id:"publication.share.chart.url"})}),(0,_.jsx)(P,{content:r})]})]})}},66056:function(e,t,i){i.d(t,{M:function(){return a}});var r=i(90089),n=i(27668);let o=["_superjson"],a=e=>{let{_superjson:t}=e,i=(0,r.Z)(e,o);return n.ZP.deserialize({json:i,meta:t})}}}]);
//# sourceMappingURL=16-55373e9ae3caeb07.js.map