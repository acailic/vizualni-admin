"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[14502],{14502:function(e,t,r){r.r(t),r.d(t,{ChartColumnsVisualization:function(){return e5}});var n=r(17043),o=r(27378),i=r(93226),a=r(11626),s=r(43137),l=r(17510);let u=()=>{let{bounds:{width:e,height:t},showValues:r,getValueOffset:n,renderEveryNthValue:i,chartData:a,getRenderingKey:u,xScale:c,getX:d,yScale:m,getY:f,valueLabelFormatter:p}=(0,s.gH)(),g=c.bandwidth();return(0,o.useMemo)(()=>r&&e&&t?a.map((e,t)=>{if(t%i!=0)return null;let r=u(e),o=f(e),a=c(d(e)),s=null===o||isNaN(o)?0:o;return{key:r,x:a+g/2,y:m(Math.max(s,0))+n(e),valueLabel:p(s)}}).filter(l.y):[],[r,e,t,a,i,u,f,c,d,m,g,p,n])};var c=r(93730),d=r(83540),m=r(80491),f=r(3663),p=r(80733),g=r(24246);function b(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function h(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?b(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let y=()=>{let{getX:e,getY:t,getYErrorPresent:r,getYErrorRange:n,chartData:i,yScale:a,xScale:l,showYUncertainty:u,bounds:c}=(0,s.gH)(),{margins:d,width:f,height:b}=c,h=(0,o.useRef)(null),y=(0,p.K)(e=>e.enable),j=(0,p.K)(e=>e.duration),O=l.bandwidth(),x=(0,o.useMemo)(()=>n&&u?i.filter(r).map((r,o)=>{let i=l(e(r)),s=Math.min(O,15),u=t(r),[c,d]=n(r);return{key:`${o}`,x:i+O/2-s/2,y:a(u),y1:a(c),y2:a(d),width:s}}):[],[n,u,i,r,l,e,O,a,f,b]);return(0,o.useEffect)(()=>{h.current&&(0,m.sS)(h.current,{id:"columns-error-whiskers",transform:`translate(${d.left} ${d.top})`,transition:{enable:y,duration:j},render:(e,t)=>(0,m.c7)(e,x,t)})},[y,d.left,d.top,x,j]),(0,g.jsx)("g",{ref:h})},j=()=>{let{chartData:e,bounds:{margins:t},xDimension:r,getX:n,xScale:i,getY:l,yScale:b,getRenderingKey:y,colors:j,rotateValues:O}=(0,s.gH)(),{labelFontSize:x,fontFamily:v}=(0,f.$)(),w=(0,o.useRef)(null),P=(0,p.K)(e=>e.enable),Z=(0,p.K)(e=>e.duration),D=i.bandwidth(),S=b(0),k=(0,c.gf)(),M=(0,o.useMemo)(()=>e.map(e=>{let t=y(e),o=l(e),a=n(e),s=i(a),u=null===o||isNaN(o)?0:o,c=b(u),d=b(Math.max(u,0)),m=Math.max(0,Math.abs(c-S)),{color:f,focused:p}=k(e,{axisComponentId:r.id,axisValue:a});return{key:t,x:s,y:d,width:D,height:m,color:f??j.copy()(t),focused:p,observation:e}}),[e,y,l,n,i,b,S,k,r.id,D,j]),A=u();return(0,o.useEffect)(()=>{let e=w.current;if(e){let r={id:"columns",transform:`translate(${t.left} ${t.top})`,transition:{enable:P,duration:Z}};(0,m.sS)(e,h(h({},r),{},{render:(e,t)=>(0,a.M)(e,M,h(h({},t),{},{y0:S}))})),(0,m.sS)(e,h(h({},r),{},{render:(e,t)=>(0,d.HD)(e,A,h(h({},t),{},{rotate:O,fontFamily:v,fontSize:x}))}))}},[P,t.left,t.top,M,Z,S,A,x,O,v]),(0,g.jsx)("g",{ref:w})};function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let v=()=>{let{bounds:e,xScale:t,xScaleIn:r,getY:n,getYErrorRange:i,getYErrorPresent:a,yScale:l,getSegment:u,grouped:c,showYUncertainty:d}=(0,s.gH)(),{margins:f,width:b,height:h}=e,y=(0,o.useRef)(null),j=(0,p.K)(e=>e.enable),O=(0,p.K)(e=>e.duration),x=(0,o.useMemo)(()=>{if(!i||!d)return[];let e=r.bandwidth();return c.filter(e=>e[1].some(a)).flatMap(o=>{let[a,s]=o;return s.map(o=>{let s=r(u(o)),c=Math.min(e,15),d=n(o),[m,f]=i(o);return{key:`${a}-${u(o)}`,x:t(a)+s+e/2-c/2,y:l(d),y1:l(m),y2:l(f),width:c}})})},[u,n,i,a,c,d,t,r,l,b,h]);return(0,o.useEffect)(()=>{y.current&&(0,m.sS)(y.current,{id:"columns-grouped-error-whiskers",transform:`translate(${f.left} ${f.top})`,transition:{enable:j,duration:O},render:(e,t)=>(0,m.c7)(e,x,t)})},[j,f.left,f.top,x,O]),(0,g.jsx)("g",{ref:y})},w=()=>{let{bounds:e,xScale:t,xScaleIn:r,getY:n,yScale:i,getSegment:l,colors:u,grouped:c,getRenderingKey:d}=(0,s.gH)(),f=(0,o.useRef)(null),b=(0,p.K)(e=>e.enable),h=(0,p.K)(e=>e.duration),{margins:y,height:j}=e,O=r.bandwidth(),v=i(0),w=(0,o.useMemo)(()=>c.flatMap(e=>{let[o,a]=e;return a.map(e=>{let a=l(e),s=n(e);return{key:d(e,a),x:t(o)+r(a),y:i(Math.max(s,0)),width:O,height:Math.max(0,Math.abs(i(s)-v)),color:u(a),observation:e}})}),[u,l,O,n,c,r,t,i,v,d,j]);return(0,o.useEffect)(()=>{f.current&&(0,m.sS)(f.current,{id:"columns-grouped",transform:`translate(${y.left} ${y.top})`,transition:{enable:b,duration:h},render:(e,t)=>(0,a.M)(e,w,x(x({},t),{},{y0:v}))})},[b,y.left,y.top,w,h,v]),(0,g.jsx)("g",{ref:f})};var P=r(90089),Z=r(23175),D=r(50228),S=r(51894),k=r(49951),M=r(36890),A=r(81829),E=r(9787),I=r(47626),C=r(67291),T=r(43605),$=r.n(T),L=r(60090),H=r(97091),V=r(25390),z=r(64103),F=r(63122);function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let K=e=>{let{chartConfig:t,observations:r,dimensions:n,dimensionsById:i,measures:a,measuresById:l}=e,{fields:u,interactiveFiltersConfig:c}=t,{x:d,y:f,segment:p,animation:g}=u,b=i[d.componentId],h=(0,V.In)(t),y=(0,s.Ck)(t),j=(0,s.rV)(d,{dimensionsById:i,observations:r}),O=(0,s.rl)("column",f,{measuresById:l}),x=(0,s.Xg)(f,{getValue:O.getY,dimensions:n,measures:a}),v=(0,s.HR)(p,{dimensionsById:i,observations:r}),w=(0,s.SU)(c,{dimensionsById:i}),{getX:P,getXAsDate:S}=j,{getY:k}=O,M=(0,o.useCallback)(e=>{let{sortingOrder:t,sortingType:r}=d.sorting??{},n=(0,z.eP)(b)?e=>S(e).getTime().toString():P,o=[...(0,Z.jJ)(e,e=>(0,D.Z)(e,e=>k(e)),e=>n(e))].sort((e,t)=>(0,L.Z)(e[1],t[1])).map(e=>e[0]);return"byDimensionLabel"===r?$()(e,n,t):"byMeasure"===r?(0,F.h)({data:e,order:o,getCategory:n,sortingOrder:t}):$()(e,n,"asc")},[P,S,k,d.sorting,b]),A=(0,m.Tw)(n,h,g);return N(N(N(N(N(N(N({},y),{},{sortData:M},j),O),x),v),w),{},{getRenderingKey:A})},B=(e,t)=>{let{chartConfig:r,observations:n}=e,{sortData:o,xDimension:i,getXAsDate:a,getY:l,getSegmentAbbreviationOrLabel:u,getTimeRangeDate:c}=t,d=(0,H.Tq)(n,{getY:l});return(0,s.q1)(d,{sortData:o,chartConfig:r,timeRangeDimensionId:i.id,getAxisValueAsDate:a,getSegmentAbbreviationOrLabel:u,getTimeRangeDate:c})};var _=r(93352),X=r(86932),G=r(44830),q=r(91160),U=r(18185),Y=r(81364),J=r(93477),W=r(41494),Q=r(41282),ee=r(7673),et=r(98016);let er=["children"];function en(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eo(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?en(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):en(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ei=(e,t,r)=>{let{chartConfig:n}=e,{xDimension:i,getX:a,getXAsDate:s,getXAbbreviationOrLabel:l,getXLabel:u,formatXDate:c,yMeasure:d,getY:m,getMinY:f,getYErrorRange:p,getFormattedYUncertainty:g,segmentDimension:b,segmentsByAbbreviationOrLabel:h,getSegment:y,getSegmentAbbreviationOrLabel:j,getSegmentLabel:O,xAxisLabel:x,yAxisLabel:v}=t,{chartData:w,scalesData:P,segmentData:T,timeRangeData:L,paddingData:H,allData:V}=r,{fields:R,interactiveFiltersConfig:N}=n,{y:K}=R,{width:B,height:Y}=(0,J.tH)(),er=(0,W.D2)({decimals:"auto"}),en=(0,U.c)(e),ei=(0,o.useMemo)(()=>new Map((b?.values||[]).map(e=>[e.value,e])),[b?.values]),ea=R.segment?.sorting?.sortingOrder,es=(0,o.useMemo)(()=>Object.fromEntries((0,Z.jJ)(T,e=>(0,D.Z)(e,e=>m(e)),e=>y(e))),[T,m,y]),el=b?.id?n.cubes.find(e=>e.iri===b.cubeIri)?.filters[b.id]:void 0,{allSegments:eu,segments:ec}=(0,o.useMemo)(()=>{let e=Array.from(new Set(T.map(e=>y(e)))),t=Array.from(new Set(P.map(e=>y(e)))),r=R?.segment?.sorting,n=(0,ee.tf)(b,{sorting:r,sumsBySegment:es,useAbbreviations:R.segment?.useAbbreviations,dimensionFilter:el}),o=$()(e,n,(0,ee.jS)(n,r));return{allSegments:o,segments:o.filter(e=>t.includes(e))}},[P,T,b,R.segment?.sorting,R.segment?.useAbbreviations,es,el,y]),ed=n.cubes.find(e=>e.iri===i.cubeIri)?.filters[i.id],em=(0,o.useMemo)(()=>Object.fromEntries((0,Z.jJ)(w,e=>(0,D.Z)(e,e=>m(e)),e=>a(e))),[w,a,m]),{xTimeRangeDomainLabels:ef,colors:ep,yScale:eg,paddingYScale:eb,xScaleTimeRange:eh,xScale:ey,xScaleIn:ej,xScaleInteraction:eO}=(0,o.useMemo)(()=>{let e=(0,M.Z)();if(R.segment&&b&&R.color?.type==="segment"){let t=R.color,r=eu.map(e=>{let r=h.get(e)?.value||ei.get(e)?.value||"";return{label:e,color:t.colorMapping[r]??C.Z[0]}});e.domain(r.map(e=>e.label)),e.range(r.map(e=>e.color))}else e.domain(eu),e.range((0,Q.XN)({paletteId:R.color?.paletteId,colorField:R.color}));e.unknown(()=>void 0);let t=[...new Set(P.map(a))],r=[...new Set(L.map(a))],n=R.x?.sorting,o=(0,ee.tf)(i,{sorting:n,useAbbreviations:R.x?.useAbbreviations,measureBySegment:em,dimensionFilter:ed}),l=$()(t,o,(0,ee.jS)(o,n)),c=r.map(u),d=(0,A.Z)().domain(l).paddingInner(_.BW).paddingOuter(_.D1),g=(0,A.Z)().domain(l).paddingInner(0).paddingOuter(0),y=(0,A.Z)().domain(ec).padding(_.es),j=(0,S.Z)(L,e=>s(e)),O=(0,E.Z)().domain(j),x=(0,I.Z)(),v=(0,I.Z)();if(K.customDomain)x.domain(K.customDomain),v.domain(K.customDomain);else{let e=f(P,e=>p?.(e)[0]??m(e)),t=Math.max((0,k.Z)(P,e=>p?.(e)[1]??m(e))??0,0);x.domain([e,t]).nice();let r=f(H,e=>p?.(e)[0]??m(e)),n=Math.max((0,k.Z)(H,e=>p?.(e)[1]??m(e))??0,0);v.domain([r,n]).nice()}return{colors:e,yScale:x,paddingYScale:v,xScaleTimeRange:O,xScale:d,xScaleIn:y,xScaleInteraction:g,xTimeRangeDomainLabels:c}},[R.segment,R.color,R.x?.sorting,R.x?.useAbbreviations,b,P,a,i,em,ed,u,ec,L,H,eu,h,ei,s,p,m,f,K.customDomain]),ex=(0,o.useMemo)(()=>{let e=ey.domain(),t=(0,Z.ZP)(w,a);return(t.size<e.length?e.map(e=>t.has(e)?[e,t.get(e)]:[e,[]]):[...t]).map(e=>{let[t,r]=e;return[t,(0,F.h)({data:r,order:ec,getCategory:y,sortingOrder:ea})]})},[y,a,w,ea,ec,ey]),{top:ev,left:ew,bottom:eP}=(0,X.u8)({xLabelPresent:!!x,yScale:eb,width:B,height:Y,interactiveFiltersConfig:N,formatNumber:er,bandDomain:ef.every(e=>void 0===e)?ey.domain():ef}),eZ=(0,X.Ti)({label:v,width:B}),eD=(0,X.Ti)({label:x,width:B}),eS={top:q.L+ev+eZ.offset,right:40,bottom:eP,left:ew},ek=(0,X.vG)({width:B,left:ew,right:40}),eM=(0,X.dE)({width:B,chartWidth:ek,height:Y,margins:eS}),{chartHeight:eA}=eM;ey.range([0,ek]),eO.range([0,ek]),ej.range([0,ey.bandwidth()]),eh.range([0,ek]),eg.range([eA,0]);let eE=(0,et.d)(),eI=(0,o.useCallback)(e=>(0,z.fF)(i)?c(e):u(e),[i,c,u]);return eo({chartType:"column",bounds:eM,chartData:w,allData:V,xScale:ey,xScaleInteraction:eO,xScaleIn:ej,xScaleTimeRange:eh,yScale:eg,segments:ec,colors:ep,getColorLabel:O,grouped:ex,getTooltipInfo:e=>{let t;let r=ey.bandwidth(),n=a(e),o=w.filter(e=>a(e)===n),i=o.map(m),s=(0,F.h)({data:o,order:ec,getCategory:y,sortingOrder:"asc"}),u=ey(n)+.5*r,[c,f]=(0,S.Z)(i,e=>e??0),p=eE?eA:eg((c+f)*.5),b=eE?G.h0:(0,G.Y7)({chartWidth:ek,xAnchor:u,topAnchor:!R.segment}),h=l(e);return{xAnchor:u+("right"===b.x?.5:-.5)*r,yAnchor:p,placement:b,value:eI(h),datum:{label:R.segment&&j(e),value:(t=m(e),(0,W._1)(t,en[d.id]??er,d.unit)),error:g(e),color:ep(y(e))},values:s.map(e=>{let t=y(e);return{label:j(e),value:d.unit?`${er(m(e))}â€‰${d.unit}`:er(m(e)),axis:"y",axisOffset:eg(m(e)??0),error:g(e),color:ep(t)}})}},leftAxisLabelSize:eZ,leftAxisLabelOffsetTop:ev,bottomAxisLabelSize:eD,formatXAxisTick:eI},t)},ea=e=>{let{children:t}=e,r=(0,P.Z)(e,er),n=K(r),o=B(r,n),i=ei(r,n,o);return(0,g.jsx)(s._M.Provider,{value:i,children:t})},es=e=>(0,g.jsx)(Y.o,{children:(0,g.jsx)(ea,eo({},e))});function el(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eu(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?el(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):el(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ec=()=>{let e=(0,o.useRef)(null),t=(0,p.K)(e=>e.enable),r=(0,p.K)(e=>e.duration),{bounds:{height:n,margins:i},yScale:l,series:u}=(0,s.gH)(),c=(0,a.z)(),d=(0,o.useMemo)(()=>u.flatMap(c),[c,u,n]),f=l(0);return(0,o.useEffect)(()=>{e.current&&(0,m.sS)(e.current,{id:"columns-stacked",transform:`translate(${i.left} ${i.top})`,transition:{enable:t,duration:r},render:(e,t)=>(0,a.M)(e,d,eu(eu({},t),{},{y0:f}))})},[t,i.left,i.top,d,r,f]),(0,g.jsx)("g",{ref:e})};var ed=r(70585),em=r(82965),ef=r(91597),ep=r(8379),eg=r(26088),eb=r(40499);function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ey(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ej=e=>{let{chartConfig:t,observations:r,dimensions:n,dimensionsById:i,measuresById:a}=e,{fields:l,interactiveFiltersConfig:u}=t,{x:c,y:d,segment:f,animation:p}=l,g=i[c.componentId],b=(0,V.In)(t),h=(0,s.Ck)(t),y=(0,s.rV)(c,{dimensionsById:i,observations:r}),j=(0,s.rl)("column",d,{measuresById:a}),O=(0,s.HR)(f,{dimensionsById:i,observations:r}),x=(0,s.SU)(u,{dimensionsById:i}),{getX:v,getXAsDate:w}=y,P=(0,o.useCallback)((e,t)=>{let{plottableDataWide:r}=t,{sortingOrder:n,sortingType:o}=c.sorting??{},i=(0,z.eP)(g)?e=>w(e).getTime().toString():v,a=r.sort((e,t)=>(0,L.Z)(e.total??void 0,t.total??void 0)).map(i);return"desc"===n&&"byDimensionLabel"===o?[...e].sort((e,t)=>(0,eb.Z)(i(e),i(t))):"asc"===n&&"byDimensionLabel"===o?[...e].sort((e,t)=>(0,L.Z)(i(e),i(t))):"byMeasure"===o?(0,F.h)({data:e,order:a,getCategory:i,sortingOrder:n}):[...e].sort((e,t)=>(0,L.Z)(i(e),i(t)))},[v,w,c.sorting,g]),Z=(0,m.Tw)(n,b,p);return ey(ey(ey(ey(ey(ey({},h),{},{sortData:P},y),j),O),x),{},{getRenderingKey:Z})},eO=(e,t)=>{let{chartConfig:r,observations:n}=e,{fields:i}=r,{x:a}=i,{sortData:l,xDimension:u,getX:c,getXAsDate:d,getY:m,getSegment:f,getSegmentAbbreviationOrLabel:p,getTimeRangeDate:g}=t,b=(0,H.Tq)(n,{getY:m}),h=(0,o.useMemo)(()=>{let e=(0,Z.ZP)(b,c);return(0,H.gS)({dataGrouped:e,key:a.componentId,getAxisValue:m,getSegment:f})},[b,c,a.componentId,m,f]),y=(0,o.useCallback)(e=>l(e,{plottableDataWide:h}),[h,l]);return ey(ey({},(0,s.q1)(b,{sortData:y,chartConfig:r,timeRangeDimensionId:u.id,getAxisValueAsDate:d,getSegmentAbbreviationOrLabel:p,getTimeRangeDate:g})),{},{plottableDataWide:h})};var ex=r(35696),ev=r(26006),ew=r(70022),eP=r(8788);let eZ=["children"];function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eS(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ek=(e,t,r)=>{let{chartConfig:n,dimensions:i,measures:a}=e,{xDimension:s,getX:l,getXAsDate:u,getXAbbreviationOrLabel:c,getXLabel:d,formatXDate:m,yMeasure:f,getY:p,segmentDimension:g,segmentsByAbbreviationOrLabel:b,getSegment:h,getSegmentAbbreviationOrLabel:y,getSegmentLabel:j,xAxisLabel:O,yAxisLabel:x}=t,v=(0,H.wu)(f.id),{chartData:w,scalesData:P,segmentData:k,timeRangeData:T,paddingData:L,allData:V}=r,{fields:R,interactiveFiltersConfig:N}=n,{y:K}=R,{width:B,height:Y}=(0,J.tH)(),er=(0,W.D2)({decimals:"auto"}),en=(0,U.c)(e),eo=(0,eP.bI)(e=>e.calculation.type),ei=R.x.componentId,ea=(0,o.useMemo)(()=>new Map((g?.values||[]).map(e=>[e.value,e])),[g?.values]),es=(0,o.useMemo)(()=>Object.fromEntries((0,Z.jJ)(P,e=>(0,D.Z)(e,e=>p(e)),e=>h(e))),[h,p,P]),el=g?.id?n.cubes.find(e=>e.iri===g.cubeIri)?.filters[g.id]:void 0,{allSegments:eu,segments:ec}=(0,o.useMemo)(()=>{let e=Array.from(new Set(k.map(h))),t=Array.from(new Set(P.map(h))),r=R?.segment?.sorting,n=(0,ee.tf)(g,{sorting:r,sumsBySegment:es,useAbbreviations:R.segment?.useAbbreviations,dimensionFilter:el}),o=$()(e,n,(0,ee.jS)(n,r));return{allSegments:o,segments:o.filter(e=>t.includes(e))}},[P,k,g,R.segment?.sorting,R.segment?.useAbbreviations,es,el,h]),eb=(0,o.useMemo)(()=>Object.fromEntries((0,Z.jJ)(w,e=>(0,D.Z)(e,e=>p(e)),e=>l(e))),[w,l,p]),eh="percent"===eo,ey=(0,o.useMemo)(()=>eh?(0,Z.ZP)((0,H.Fi)(w,{key:f.id,getAxisValue:p,getTotalGroupValue:e=>eb[l(e)]}),l):(0,Z.ZP)(w,l),[eh,w,l,f.id,p,eb]),ej=(0,o.useMemo)(()=>(0,H.gS)({dataGrouped:ey,key:ei,getAxisValue:p,getSegment:h,allSegments:ec,imputationType:"zeros"}),[ey,ei,p,h,ec]),eO=n.cubes.find(e=>e.iri===s.cubeIri)?.filters[s.id],{colors:eZ,xScale:eD,xTimeRangeDomainLabels:ek,xScaleInteraction:eM,xScaleTimeRange:eA}=(0,o.useMemo)(()=>{let e=(0,M.Z)();if(R.segment&&b&&"segment"===R.color.type){let t=R.color,r=eu.map(e=>{let r=b.get(e)?.value||ea.get(e)?.value||"";return r||console.warn(`Can't find color for '${e}'.`),{label:e,color:t.colorMapping[r]??C.Z[0]}});e.domain(r.map(e=>e.label)),e.range(r.map(e=>e.color))}else e.domain(eu),e.range((0,Q.XN)({paletteId:R.color.paletteId,colorField:R.color}));e.unknown(()=>void 0);let t=[...new Set(P.map(l))],r=[...new Set(T.map(l))],n=R.x?.sorting,o=(0,ee.tf)(s,{sorting:n,useAbbreviations:R.x?.useAbbreviations,measureBySegment:eb,dimensionFilter:eO}),i=$()(t,o,(0,ee.jS)(o,n)),a=r.map(d),c=(0,A.Z)().domain(i).paddingInner(_.BW).paddingOuter(_.D1),m=(0,A.Z)().domain(i).paddingInner(0).paddingOuter(0),f=(0,S.Z)(T,e=>u(e));return{colors:e,xScale:c,xTimeRangeDomainLabels:a,xScaleTimeRange:(0,E.Z)().domain(f),xScaleInteraction:m}},[R.segment,R.color,R.x.sorting,R.x.useAbbreviations,s,eO,eb,l,d,u,P,T,b,ea,eu]),eE=R.animation?.componentId,eI=(0,o.useCallback)(e=>eE?e[eE]:"",[eE]),eC=(0,o.useMemo)(()=>(0,ew._4)(P,{normalize:eh,getX:l,getY:p,getTime:eI,customDomain:K.customDomain}),[P,eh,l,p,eI,K.customDomain]),eT=(0,o.useMemo)(()=>{if(N.calculation.active){let e=(0,ew._4)(L,{normalize:!1,getX:l,getY:p,getTime:eI,customDomain:K.customDomain});return e.domain()[1]<100&&e.domain()[0]>-100?(0,I.Z)().domain([0,100]):e}return(0,ew._4)(L,{normalize:eh,getX:l,getY:p,getTime:eI,customDomain:K.customDomain})},[N.calculation.active,L,eh,l,p,eI,K.customDomain]),e$=(0,o.useMemo)(()=>{let e=R.segment?.sorting,t=e?.sortingType,r=e?.sortingOrder,n="byTotalSize"===t?"asc"===r?ed.Z:em.Z:ef.Z;return(0,ep.Z)().order(n).offset(eg.Z).keys(ec)(ej)},[ej,R.segment?.sorting,ec]),{top:eL,left:eH,bottom:eV}=(0,X.u8)({xLabelPresent:!!O,yScale:eT,width:B,height:Y,interactiveFiltersConfig:N,formatNumber:er,bandDomain:ek.every(e=>void 0===e)?eD.domain():ek,normalize:eh}),ez=(0,X.Ti)({label:x,width:B}),eF=(0,X.Ti)({label:O,width:B}),eR={top:q.L+eL+ez.offset,right:40,bottom:eV,left:eH},eN=(0,X.vG)({width:B,left:eH,right:40}),eK=(0,X.dE)({width:B,chartWidth:eN,height:Y,margins:eR}),{chartHeight:eB}=eK;eD.range([0,eN]),eM.range([0,eN]),eA.range([0,eN]),eC.range([eB,0]);let e_=(0,et.d)(),eX=(0,o.useCallback)(e=>(0,z.fF)(s)?m(e):d(e),[s,m,d]),eG=(0,o.useCallback)((e,t)=>{let r,n,{segment:o,focusingSegment:i}=t,a=l(e);if(i)r=(0,ew.R0)({observation:e,series:e$,key:ei,getAxisValue:l,measureScale:eC,fallbackMeasureValue:eC(p(e)??0),segment:o}),n=eZ(o);else{let e=(ey.get(a)??[]).map(p);r=eC((0,D.Z)(e.map(e=>e??0)))-ex.x}return{x:eD(a)+.5*eD.bandwidth(),y:r,color:n}},[ey,eZ,l,p,e$,ei,eD,eC]),eq=(0,o.useCallback)(e=>{let t=eD.bandwidth(),r=l(e),n=ey.get(r)??[],o=n.map(p),i=(0,F.h)({data:n,order:ec,getCategory:h,sortingOrder:"asc"}),a=(0,ew.S8)({normalize:eh,measureId:f.id,measureUnit:f.unit,formatters:en,formatNumber:er}),s=eD(r)+.5*t,u=e_?eB:eC(.5*(0,D.Z)(o.map(e=>e??0))),d=e_?G.h0:(0,G.Y7)({chartWidth:eN,xAnchor:s,topAnchor:!R.segment}),m=c(e);return{xAnchor:s+("right"===d.x?.5:-.5)*t,yAnchor:u,placement:d,value:eX(m),datum:{label:R.segment&&y(e),value:a(p(e),v(e)),color:eZ(h(e))},values:i.map(e=>{let t=h(e),r=(0,ew.R0)({observation:e,series:e$,key:ei,getAxisValue:l,measureScale:eC,fallbackMeasureValue:eC(p(e)??0),segment:t});return{label:y(e),value:a(p(e),v(e)),axis:"y",axisOffset:r,color:eZ(t)}})}},[eD,l,ey,p,ec,h,eh,f.id,f.unit,en,er,e_,eB,eC,eN,R.segment,c,eX,y,v,eZ,e$,ei]);return eS({chartType:"column",chartDataGroupedByX:ey,bounds:eK,chartData:w,allData:V,xScale:eD,xScaleInteraction:eM,xScaleTimeRange:eA,yScale:eC,segments:ec,colors:eZ,getColorLabel:j,chartWideData:ej,series:e$,getAnnotationInfo:eG,getTooltipInfo:eq,leftAxisLabelSize:ez,leftAxisLabelOffsetTop:eL,bottomAxisLabelSize:eF,valueLabelFormatter:(0,ev.wI)({measureId:f.id,dimensions:i,measures:a,normalize:eh}),formatXAxisTick:eX},t)},eM=e=>{let{children:t}=e,r=(0,P.Z)(e,eZ),n=ej(r),o=eO(r,n),i=ek(r,n,o);return(0,g.jsx)(s._M.Provider,{value:i,children:t})},eA=e=>(0,g.jsx)(Y.o,{children:(0,g.jsx)(eM,eS({},e))});function eE(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eE(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eE(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eC=e=>{let{chartConfig:t,observations:r,dimensions:n,dimensionsById:i,measures:a,measuresById:l,limits:u}=e,{fields:c,interactiveFiltersConfig:d}=t,{x:f,y:p,animation:g}=c,b=i[f.componentId],h=(0,V.In)(t),y=(0,s.Ck)(t),j=(0,s.rV)(f,{dimensionsById:i,observations:r}),O=(0,s.rl)("column",p,{measuresById:l}),x=(0,s.Xg)(p,{getValue:O.getY,dimensions:n,measures:a}),v=(0,s.HR)(void 0,{dimensionsById:i,observations:r}),w=(0,s.SU)(d,{dimensionsById:i}),P=(0,s.m$)(u),{getX:Z,getXAsDate:D}=j,{getY:S}=O,k=(0,o.useCallback)(e=>{let{sortingOrder:t,sortingType:r}=f.sorting??{},n=(0,z.eP)(b)?D:Z;return"desc"===t&&"byDimensionLabel"===r?[...e].sort((e,t)=>(0,eb.Z)(n(e),n(t))):"asc"===t&&"byDimensionLabel"===r?[...e].sort((e,t)=>(0,L.Z)(n(e),n(t))):"desc"===t&&"byMeasure"===r?[...e].sort((e,t)=>(0,eb.Z)(S(e)??-1,S(t)??-1)):"asc"===t&&"byMeasure"===r?[...e].sort((e,t)=>(0,L.Z)(S(e)??-1,S(t)??-1)):[...e].sort((e,t)=>(0,L.Z)(n(e),n(t)))},[Z,D,S,f.sorting,b]),M=(0,m.Tw)(n,h,g);return eI(eI(eI(eI(eI(eI(eI(eI({},y),{},{sortData:k},j),O),x),v),w),P),{},{getRenderingKey:M})},eT=(e,t)=>{let{chartConfig:r,observations:n}=e,{sortData:o,xDimension:i,getXAsDate:a,getY:l,getTimeRangeDate:u}=t,c=(0,H.Tq)(n,{getY:l});return(0,s.q1)(c,{sortData:o,chartConfig:r,timeRangeDimensionId:i.id,getAxisValueAsDate:a,getTimeRangeDate:u})};var e$=r(62326);let eL=["offset"],eH=["children"];function eV(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ez(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eV(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eV(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eF=(e,t,r)=>{let{chartConfig:n,dimensions:i,measures:a}=e,{xDimension:s,getX:l,getXAsDate:u,getXAbbreviationOrLabel:c,getXLabel:d,formatXDate:m,yMeasure:f,getY:p,getMinY:g,getYErrorRange:b,getFormattedYUncertainty:h,getSegmentLabel:y,xAxisLabel:j,yAxisLabel:O,minLimitValue:x,maxLimitValue:v}=t,{chartData:w,scalesData:C,timeRangeData:T,paddingData:L,allData:H}=r,{fields:V,interactiveFiltersConfig:F}=n,{y:R}=V,{width:N,height:K}=(0,J.tH)(),B=(0,W.D2)({decimals:"auto"}),Y=(0,U.c)(e),er=(0,o.useMemo)(()=>Object.fromEntries((0,Z.jJ)(w,e=>(0,D.Z)(e,e=>p(e)),e=>l(e))),[w,l,p]),{segments:en,xScale:eo,colors:ei,yScale:ea,paddingYScale:es,xScaleTimeRange:el,xScaleInteraction:eu,xTimeRangeDomainLabels:ec}=(0,o.useMemo)(()=>{let e=(0,M.Z)();"single"===V.color.type&&e.range((0,Q.XN)({paletteId:V.color.paletteId,colorField:V.color}));let t=(0,ee.tf)(s,{sorting:V.x.sorting,measureBySegment:er,useAbbreviations:V.x.useAbbreviations,dimensionFilter:s?.id?n.cubes.find(e=>e.iri===s.cubeIri)?.filters[s.id]:void 0}),r=(0,ee.jS)(t,V.x.sorting),o=$()([...new Set(C.map(l))],t,r),i=[...new Set(T.map(l))].map(d),a=(0,A.Z)().domain(o).paddingInner(_.BW).paddingOuter(_.D1),c=(0,A.Z)().domain(o).paddingInner(0).paddingOuter(0),m=(0,S.Z)(T,e=>u(e)),f=(0,E.Z)().domain(m),h=(0,I.Z)(),y=(0,I.Z)();if(R.customDomain)h.domain(R.customDomain),y.domain(R.customDomain);else{let e=g(C,e=>b?.(e)[0]??p(e)),t=Math.max((0,k.Z)(C,e=>b?.(e)[1]??p(e))??0,0);h.domain([void 0!==x?Math.min(e,x):e,void 0!==v?Math.max(t,v):t]).nice();let r=g(L,e=>b?.(e)[0]??p(e)),n=Math.max((0,k.Z)(L,e=>b?.(e)[1]??p(e))??0,0);y.domain([void 0!==x?Math.min(r,x):r,void 0!==v?Math.max(n,v):n]).nice()}return{segments:[],colors:e,xScale:a,yScale:h,paddingYScale:y,xScaleTimeRange:f,xScaleInteraction:c,xTimeRangeDomainLabels:i}},[V.color,V.x.sorting,V.x.useAbbreviations,s,er,n.cubes,C,l,T,d,g,x,v,L,u,b,p,R.customDomain]),{top:ed,left:em,bottom:ef}=(0,X.u8)({xLabelPresent:!!j,yScale:es,width:N,height:K,interactiveFiltersConfig:F,formatNumber:B,bandDomain:ec.every(e=>void 0===e)?eo.domain():ec}),ep=(0,X.vG)({width:N,left:em,right:40});eo.range([0,ep]),eu.range([0,ep]),el.range([0,ep]);let eg=(0,X.Ti)({label:O,width:N}),eb=(0,X.Ti)({label:j,width:N}),eh=(0,ev.fv)(R,{chartData:w,dimensions:i,measures:a,getValue:p,getErrorRange:b,scale:ea,bandwidth:eo.bandwidth()}),{offset:ey}=eh,ej=(0,P.Z)(eh,eL),eO={top:q.L+ed+eg.offset+ey,right:40,bottom:ef,left:em},ew=(0,X.dE)({width:N,height:K,chartWidth:ep,margins:eO}),{chartHeight:eP}=ew;ea.range([eP,0]);let eZ=(0,et.d)(),eD=(0,o.useCallback)(e=>(0,z.fF)(s)?m(e):d(e),[s,m,d]),eS=(0,o.useCallback)(e=>{let t=eo(l(e))+.5*eo.bandwidth(),r=ej.showValues?ey+8:0;return{x:t,y:ea(Math.max(p(e)??NaN,0))-ex.x-r,color:e$.i}},[eo,l,ej.showValues,ey,ea,p]);return ez(ez({colors:ei,getColorLabel:y,chartType:"column",bounds:ew,chartData:w,allData:H,xScale:eo,xScaleTimeRange:el,xScaleInteraction:eu,yScale:ea,segments:en,getAnnotationInfo:eS,getTooltipInfo:e=>{let t;let r=eo(l(e))+.5*eo.bandwidth(),n=eZ?eP:ea(Math.max(p(e)??NaN,0)),o=eZ?G.h0:(0,G.Y7)({chartWidth:ep,xAnchor:r,topAnchor:!V.segment}),i=c(e),a=p(e);return{xAnchor:r,yAnchor:n,placement:o,value:eD(i),datum:{label:void 0,value:null!==a&&isNaN(a)?"-":`${t=p(e),(0,W._1)(t,Y[f.id]??B,f.unit)}`,error:h(e),color:""},values:void 0}},leftAxisLabelSize:eg,leftAxisLabelOffsetTop:ed,bottomAxisLabelSize:eb,formatXAxisTick:eD},ej),t)},eR=e=>{let{children:t}=e,r=(0,P.Z)(e,eH),n=eC(r),o=eT(r,n),i=eF(r,n,o);return(0,g.jsx)(s._M.Provider,{value:i,children:t})},eN=e=>(0,g.jsx)(Y.o,{children:(0,g.jsx)(eR,ez({},e))});var eK=r(18330),eB=r(40907);let e_=e=>{let{disableGaps:t=!0}=e,{chartData:r,bounds:{chartHeight:n,margins:o},getX:i,xScale:a,xScaleInteraction:l}=(0,s.gH)(),{onClick:u,onHover:c,onHoverOut:d}=(0,eB.A)({focusingSegment:!1}),m=t?l:a,f=m.bandwidth();return(0,g.jsx)("g",{transform:`translate(${o.left} ${o.top})`,children:r.map((e,t)=>{let r=m(i(e));return(0,g.jsx)("rect",{x:r,y:0,width:f,height:Math.max(0,n),fill:"hotpink",fillOpacity:0,stroke:"none",onMouseOver:()=>c(e,{segment:void 0}),onMouseOut:d,onClick:()=>u(e,{segment:void 0})},t)})})},eX=()=>{let{bounds:{height:e,margins:t},series:r}=(0,s.gH)(),{onClick:n,onHover:i,onHoverOut:l}=(0,eB.A)({focusingSegment:!0}),u=(0,a.z)(),c=(0,o.useMemo)(()=>r.flatMap(u),[u,r,e]);return(0,g.jsx)("g",{transform:`translate(${t.left} ${t.top})`,children:c.map(e=>(0,g.jsx)("rect",{x:e.x,y:e.y,width:e.width,height:e.height,fill:"hotpink",fillOpacity:0,stroke:"none",onMouseOver:()=>i(e.observation,{segment:e.segment}),onMouseOut:l,onClick:()=>n(e.observation,{segment:e.segment})},e.key))})},eG=()=>{let{bounds:e,getY:t,getX:r,yScale:n,xScale:i,chartDataGroupedByX:a,xDimension:l}=(0,s.gH)(),u=(0,o.useCallback)(e=>t(e)??0,[t]);return(0,g.jsx)(eK.x,{bounds:e,getValue:u,getAxisValue:r,valueScale:n,axisScale:i,chartDataGrouped:a,dimension:l,isHorizontal:!1})};var eq=r(48660),eU=r(43334),eY=r(73908),eJ=r(50051),eW=r(83001),eQ=r(36831),e0=r(18984),e1=r(80750),e8=r(38671),e2=r(71238),e4=r(15658),e3=r(4148);function e7(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function e6(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?e7(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):e7(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let e5=e=>(0,g.jsx)(i.F,e6(e6({},e),{},{Component:e9})),e9=(0,o.memo)(e=>{let{chartConfig:t,dimensions:r,measures:n,dimensionsById:o}=e,{fields:i,interactiveFiltersConfig:a}=t,s=(0,V.In)(t),[{dashboardFilters:l}]=(0,e4.lY)(e2.Sc),u=(0,eJ.O)(a,l?.timeRange),d=(0,V.sH)({chartConfig:t,dimensions:r,measures:n}),m=(0,c.I4)();return(0,g.jsx)(g.Fragment,{children:i.segment?.componentId&&"stacked"===i.segment.type?(0,g.jsxs)(eA,e6(e6({},e),{},{children:[(0,g.jsxs)(eW.BO,{children:[(0,g.jsxs)(eW.ST,{children:[(0,g.jsx)(eq.aP,{}),(0,g.jsx)(eU.p,{}),(0,g.jsx)(eY.X,{}),(0,g.jsx)(eY.d,{}),(0,g.jsx)(ec,{}),m?(0,g.jsxs)(g.Fragment,{children:[(0,g.jsx)(e_,{disableGaps:!1}),(0,g.jsx)(eX,{}),(0,g.jsx)(eG,{})]}):(0,g.jsx)(e_,{}),u&&(0,g.jsx)(eJ.j,{})]}),m?(0,g.jsx)(eQ.r,{}):(0,g.jsx)(e0.u,{type:"multiple"})]}),(0,g.jsx)(ex.u,{}),(0,g.jsxs)(eW.dt,{children:[i.animation&&(0,g.jsx)(e3.j,e6({filters:s,dimensions:r},i.animation)),(0,g.jsx)(e1.Ek,{dimensionsById:o,chartConfig:t,symbol:"square",interactive:a.legend.active,showTitle:i.segment.showTitle})]})]})):i.segment?.componentId&&"grouped"===i.segment.type?(0,g.jsxs)(es,e6(e6({},e),{},{children:[(0,g.jsxs)(eW.BO,{children:[(0,g.jsxs)(eW.ST,{children:[(0,g.jsx)(eq.aP,{}),(0,g.jsx)(eU.p,{}),(0,g.jsx)(eY.X,{}),(0,g.jsx)(eY.d,{}),(0,g.jsx)(w,{}),(0,g.jsx)(v,{}),(0,g.jsx)(e_,{}),u&&(0,g.jsx)(eJ.j,{})]}),(0,g.jsx)(e0.u,{type:"multiple"})]}),(0,g.jsxs)(eW.dt,{children:[i.animation&&(0,g.jsx)(e3.j,e6({filters:s,dimensions:r},i.animation)),(0,g.jsx)(e1.Ek,{dimensionsById:o,chartConfig:t,symbol:"square",interactive:a.legend.active,showTitle:i.segment.showTitle})]})]})):(0,g.jsxs)(eN,e6(e6({},e),{},{limits:d,children:[(0,g.jsxs)(eW.BO,{children:[(0,g.jsxs)(eW.ST,{children:[(0,g.jsx)(eq.aP,{}),(0,g.jsx)(eU.p,{}),(0,g.jsx)(eY.X,{}),(0,g.jsx)(eY.d,{}),(0,g.jsx)(j,{}),(0,g.jsx)(y,{}),(0,g.jsx)(e8.x,e6({},d)),(0,g.jsx)(e_,{}),u&&(0,g.jsx)(eJ.j,{})]}),m?(0,g.jsx)(eQ.r,{}):(0,g.jsx)(e0.u,{type:"single"})]}),(0,g.jsx)(ex.u,{}),i.animation||d.limits.length>0?(0,g.jsxs)(eW.dt,{children:[d.limits.length>0&&(0,g.jsx)(e1.Ek,{limits:d,dimensionsById:o,chartConfig:t,symbol:"square"}),i.animation&&(0,g.jsx)(e3.j,e6({filters:s,dimensions:r},i.animation))]}):null]}))})})},93352:function(e,t,r){r.d(t,{BW:function(){return o},D1:function(){return n},es:function(){return i}});let n=0,o=.1,i=.1},11626:function(e,t,r){r.d(t,{M:function(){return f},z:function(){return m}});var n=r(68049),o=r(59245),i=r(27378),a=r(93730),s=r(43137),l=r(83540),u=r(80491),c=r(25390),d=r(15658);let m=()=>{let{colors:e,showValuesBySegmentMapping:t,valueLabelFormatter:r,xScale:o,yScale:l,getX:u,getRenderingKey:m}=(0,s.gH)(),[f]=(0,d.lY)(),p=(0,c.f6)(f),g=(0,c.B6)(),b=o.bandwidth();return(0,i.useCallback)(i=>{let s=i.key,c=e(s);return i.map(e=>{let i=e.data,d=i[s],f=s&&t[s]?r(d):void 0,h=f?(0,n.Qg)(c):void 0,y=u(i),j=l(e[1]),O=(0,a.zm)(i,s,p,g);return{key:m(i,s),x:o(y),y:j,width:b,height:Math.max(0,l(e[0])-j),color:c,valueLabel:f,valueLabelColor:h,observation:i,segment:s,valueLabelOffset:O?20:0}})},[b,e,m,u,t,r,o,l,p,g])},f=(e,t,r)=>{let{transition:n,y0:i}=r;e.selectAll("g.column").data(t,e=>e.key).join(e=>e.append("g").attr("class","column").call(e=>e.append("rect").attr("data-index",(e,t)=>t).attr("x",e=>e.x).attr("y",i).attr("width",e=>e.width).attr("height",0).attr("fill",e=>e.color).call(e=>(0,u.u5)(e,{transition:n,s:e=>e.attr("y",e=>e.y).attr("height",e=>e.height)}))).call(e=>e.append("foreignObject").attr("x",e=>e.x).attr("y",i).attr("width",e=>e.width).attr("height",e=>e.height).call(e=>(0,u.u5)(e,{transition:n,s:e=>e.attr("y",e=>e.y+(e.valueLabelOffset??0))})).append("xhtml:div").call(l.hy).append("xhtml:p").call(l.oG).style("color",function(e){return e.valueLabelColor??(0,o.Z)(this).style("color")}).text(e=>e.valueLabel??"")),e=>((0,u.pA)(e.select("rect")),(0,u.u5)(e,{s:e=>e.call(e=>e.select("rect").attr("x",e=>e.x).attr("y",e=>e.y).attr("width",e=>e.width).attr("height",e=>e.height).attr("fill",e=>e.color)).call(e=>e.select("foreignObject").attr("x",e=>e.x).attr("y",e=>e.y+(e.valueLabelOffset??0)).attr("width",e=>e.width).attr("height",e=>e.height).select("p").style("color",function(e){return e.valueLabelColor??(0,o.Z)(this).style("color")}).text(e=>e.valueLabel??"")),transition:n})),e=>(0,u.u5)(e,{transition:n,s:e=>e.call(e=>e.select("rect").attr("y",i).attr("height",0)).remove()}))}},73908:function(e,t,r){r.d(t,{X:function(){return m},d:function(){return f}});var n=r(27454),o=r(27378),i=r(86932),a=r(43137),s=r(80491),l=r(3663),u=r(97358),c=r(80733),d=r(24246);let m=()=>{let e=(0,o.useRef)(null),{xScale:t,getXLabel:r,xDimension:m,xTimeUnit:f,formatXDate:p,yScale:g,bounds:{chartHeight:b,chartWidth:h,margins:y},xAxisLabel:j,bottomAxisLabelSize:O,formatXAxisTick:x}=(0,a.gH)(),{labelColor:v,gridColor:w,labelFontSize:P,fontFamily:Z,axisLabelFontSize:D,domainColor:S}=(0,l.$)(),k=(0,c.K)(e=>e.enable),M=(0,c.K)(e=>e.duration),A=t.bandwidth()>P?P:t.bandwidth(),E=(0,i.Fc)(t,r,f,A);return(0,o.useEffect)(()=>{if(e.current){let r=g.domain()[0]<0,o=(0,n.LL)(t).tickSizeOuter(0).tickSizeInner(r?-b:6).tickPadding(-10).tickFormat(x??(e=>e)),i=(0,s.sS)(e.current,{id:"axis-width-band",transform:`translate(${y.left} ${b+y.top})`,transition:{enable:k,duration:M},render:e=>e.attr("data-testid","axis-width-band").call(o),renderUpdate:(e,t)=>(0,s.u5)(e,{transition:t.transition,s:e=>e.call(o)})});i.select(".domain").remove(),i.selectAll(".tick line").attr("stroke",r?w:S),i.selectAll(".tick text").attr("transform","rotate(90)").attr("x",A+(P-A)*.6).attr("dy",r?A+(P-A):.6*A+(P-A)*.4).attr("font-size",A).attr("font-family",Z).attr("fill",v).attr("text-anchor","start")}},[b,S,k,Z,r,w,v,P,y.left,y.top,M,t,f,g,p,x,A]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)("foreignObject",{x:y.left+h/2-O.width/2,y:y.top+b+E+8,width:h,height:O.height,style:{display:"flex"},children:(0,d.jsx)(u.K,{component:m,children:(0,d.jsx)("span",{style:{fontSize:D,lineHeight:1.5},children:j})})}),(0,d.jsx)("g",{ref:e})]})},f=()=>{let e=(0,o.useRef)(null),t=(0,c.K)(e=>e.enable),r=(0,c.K)(e=>e.duration),{xScale:i,yScale:u,bounds:m}=(0,a.gH)(),{chartHeight:f,margins:p}=m,{domainColor:g}=(0,l.$)();return(0,o.useEffect)(()=>{if(e.current){let o=(0,n.LL)(i).tickSizeOuter(0),a=(0,s.sS)(e.current,{id:"axis-width-band-domain",transform:`translate(${p.left} ${f+p.top})`,transition:{enable:t,duration:r},render:e=>e.call(o),renderUpdate:(e,t)=>(0,s.u5)(e,{transition:t.transition,s:e=>e.call(o)})});a.selectAll(".tick line").remove(),a.selectAll(".tick text").remove(),a.select(".domain").attr("transform",`translate(0, -${m.chartHeight-u(0)})`).attr("stroke",g)}},[m.chartHeight,f,g,t,p.left,p.top,r,i,u]),(0,d.jsx)("g",{ref:e})}},38671:function(e,t,r){r.d(t,{x:function(){return u}});var n=r(17043),o=r(27378),i=r(43137),a=r(40964),s=r(24246);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}let u=e=>{let t=(0,i.gH)(),r=(0,o.useMemo)(()=>(0,a.x)({isHorizontal:!1,getChartState:()=>t}),[t]);return(0,s.jsx)(r,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({},e))};u.displayName="VerticalLimits"},18330:function(e,t,r){r.d(t,{x:function(){return c}});var n=r(50228),o=r(27378),i=r(93730),a=r(80491),s=r(81364),l=r(24246);let u=e=>{let{x:t,y:r,width:n,height:o}=e;return(0,l.jsx)("rect",{x:t,y:r,width:n,height:o,fill:"none",stroke:a.x_,strokeWidth:a.iE,pointerEvents:"none"})},c=e=>{let{bounds:t,getValue:r,getAxisValue:a,valueScale:c,axisScale:d,chartDataGrouped:m,dimension:f,isHorizontal:p}=e,[g]=(0,s.X)(),b=(0,i.gf)(),h=d.bandwidth(),y=(0,o.useCallback)(e=>{let t=d(e),o=m.get(e)??[],i=(0,n.Z)(o,r)??0,a=c(0),s=c(i),l=Math.abs(s-a);return p?{x:a,y:t,width:l,height:h}:{x:t,y:s,width:h,height:l}},[m,r,c,d,h,p]),j=(0,o.useMemo)(()=>{t.width;let e=[];if(g.observation&&"annotation"===g.type&&g.visible&&!g.focusingSegment){let t=a(g.observation),{focused:r}=b(g.observation,{axisComponentId:f.id,axisValue:t});r&&e.push(y(t))}for(let[t,r]of m){let{focused:n,isActive:o}=b(r[0],{axisComponentId:f.id,axisValue:t});(o||n&&"annotation"===g.type&&!g.focusingSegment)&&e.push(y(t))}return e},[t.width,g,a,b,f.id,y,m]);return 0===j.length?null:(0,l.jsx)("g",{transform:`translate(${t.margins.left} ${t.margins.top})`,children:j.map((e,t)=>(0,l.jsx)(u,{x:e.x,y:e.y,width:e.width,height:e.height},t))})}},4148:function(e,t,r){r.d(t,{j:function(){return C}});var n=r(17043),o=r(60116),i=r(87026),a=r(12548),s=r(56125),l=r(64986),u=r(40624),c=r(43605),d=r.n(c),m=r(27378),f=r(70644),p=r(43137),g=r(99990),b=r(10359),h=r(15658),y=r(64103),j=r(17510),O=r(41494),x=r(48947),v=r(27102),w=r(8788),P=r(7378),Z=r(7673),D=r(77142),S=r(71171),k=r(24246);function M(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?M(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let E=(0,m.createContext)(void 0),I=()=>{let e=(0,m.useContext)(E);if(!e)throw Error("useTimeline must be called inside a TimelineContext.Provider!");return(0,f.useSyncExternalStore)(e.subscribe,e.getUpdateKey),e},C=e=>{let{componentId:t,showPlayButton:r,type:n,duration:o,filters:i,dimensions:a}=e,[s]=(0,v.lY)(h.Sc),l=(0,m.useMemo)(()=>a.find(e=>e.id===t),[t,a]),u=(0,y.fF)(l),c=(0,y.eP)(l),f=(0,y.a6)(l);if(!(u||c||f))throw Error("You can only use TimeSlider with temporal dimensions!");let g=(0,O.z6)(),x="timeUnit"in l?l.timeUnit:void 0,w=(0,p.gH)(),D=i[l.id],S=(0,m.useMemo)(()=>{let e={animationType:n,msDuration:1e3*o},t=Array.from(new Set(w.allData.map(e=>e[l.id]).filter(j.y)));if(u)return A({type:"interval",msValues:t.map(e=>(0,b.sG)(e).getTime()),formatValue:e=>g(new Date(e),x)},e);{let r={sortingType:"byAuto",sortingOrder:"asc"},n=(0,Z.tf)(l,{dimensionFilter:D,sorting:r}),o=(0,Z.jS)(n,r);return A({type:"ordinal",sortedData:d()(t,n,o)},e)}},[n,o,w.allData,u,l,g,x,D]),M=(0,m.useMemo)(()=>new P.T(S),[S]);return s.dashboardFilters?.timeRange.active?null:(0,k.jsx)(E.Provider,{value:M,children:(0,k.jsx)(T,{showPlayButton:r})})},T=e=>{let{showPlayButton:t}=e,[r,n]=I().formattedExtent;return(0,k.jsxs)(o.Z,A(A({},S.nT),{},{sx:{display:"flex",alignItems:"center",gap:5,mb:5,mr:2.5},children:[t&&(0,k.jsx)($,{}),(0,k.jsxs)("div",{style:{position:"relative",width:"100%"},children:[(0,k.jsx)(H,{}),(0,k.jsx)(i.Z,{variant:"caption",sx:{position:"absolute",left:0,mt:2},children:r}),(0,k.jsx)(i.Z,{variant:"caption",sx:{position:"absolute",right:0,mt:2},children:n})]})]}))},$=()=>{let e=I(),t=(0,D.z)(()=>{e.playing?e.stop():e.start()});return(0,k.jsx)(a.Z,{onClick:t,variant:"outlined",style:{minHeight:32,minWidth:32,padding:0,borderRadius:"50%"},children:(0,k.jsx)(x.JO,{name:e.playing?"pause":"play",size:16})})},L=(0,l.Z)(()=>({root:{width:"100%",[`& .${s.Z.root}`]:{height:"6px",[`& .${s.Z.thumb}`]:{width:"16px",height:"16px"}}},playing:{[`& .${s.Z.thumb}`]:{transition:"none"},[`& .${s.Z.track}`]:{transition:"none"}}})),H=()=>{let e=I(),t=(0,w.bI)(e=>e.timeSlider),r=(0,w.bI)(e=>e.setTimeSlider),n=L(),o=(0,m.useMemo)(()=>e.domain.map(e=>({value:e}))??[],[e.domain]),i=(0,D.z)(t=>{e.setProgress(+t.target.value)}),a=(0,D.z)(()=>{e.stop()});return(0,m.useEffect)(()=>{e.type!==t.type&&r({type:e.type,value:void 0}),"interval"===e.type&&"interval"===t.type&&t.value?.getTime()!==e.value&&r({type:"interval",value:new Date(e.value)}),"ordinal"===e.type&&"ordinal"===t.type&&t?.value!==e.value&&r({type:"ordinal",value:e.value})},[e.value,e.type,t.type,t.value,r]),(0,k.jsx)(g.iR,{name:"time-slider",renderTextInput:!1,min:0,max:1,step:null,marks:o,value:e.progress,onChange:i,onClick:a,valueLabelDisplay:"on",valueLabelFormat:e.formattedValue,className:(0,u.Z)(n.root,e.playing&&n.playing)})}},26088:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e,t){if((s=e.length)>0)for(var r,n,o,i,a,s,l=0,u=e[t[0]].length;l<u;++l)for(i=a=0,r=0;r<s;++r)(o=(n=e[t[r]][l])[1]-n[0])>0?(n[0]=i,n[1]=i+=o):o<0?(n[1]=a,n[0]=a+=o):(n[0]=0,n[1]=o)}},70585:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(89884);function o(e){var t=e.map(i);return(0,n.Z)(e).sort(function(e,r){return t[e]-t[r]})}function i(e){for(var t,r=0,n=-1,o=e.length;++n<o;)(t=+e[n][1])&&(r+=t);return r}},82965:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(70585);function o(e){return(0,n.Z)(e).reverse()}},89884:function(e,t,r){r.d(t,{Z:function(){return n}});function n(e){for(var t=e.length,r=Array(t);--t>=0;)r[t]=t;return r}},91597:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(89884);function o(e){return(0,n.Z)(e).reverse()}},8379:function(e,t,r){r.d(t,{Z:function(){return u}});var n=r(91648),o=r(1058);function i(e,t){if((o=e.length)>1)for(var r,n,o,i=1,a=e[t[0]],s=a.length;i<o;++i)for(n=a,a=e[t[i]],r=0;r<s;++r)a[r][1]+=a[r][0]=isNaN(n[r][1])?n[r][0]:n[r][1]}var a=r(89884);function s(e,t){return e[t]}function l(e){let t=[];return t.key=e,t}function u(){var e=(0,o.Z)([]),t=a.Z,r=i,u=s;function c(o){var i,a,s=Array.from(e.apply(this,arguments),l),c=s.length,d=-1;for(let e of o)for(i=0,++d;i<c;++i)(s[i][d]=[0,+u(e,s[i].key,d,o)]).data=e;for(i=0,a=(0,n.Z)(t(s));i<c;++i)s[a[i]].index=i;return r(s,a),s}return c.keys=function(t){return arguments.length?(e="function"==typeof t?t:(0,o.Z)(Array.from(t)),c):e},c.value=function(e){return arguments.length?(u="function"==typeof e?e:(0,o.Z)(+e),c):u},c.order=function(e){return arguments.length?(t=null==e?a.Z:"function"==typeof e?e:(0,o.Z)(Array.from(e)),c):t},c.offset=function(e){return arguments.length?(r=null==e?i:e,c):r},c}}}]);
//# sourceMappingURL=14502.1954b3c2e2c73352.js.map