(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[87257],{62720:function(t,e){"use strict";function i(t){var e,n;return e=t,"undefined"!=typeof window&&"undefined"!=typeof document&&!!Array.prototype&&!!Array.prototype.every&&!!Array.prototype.filter&&!!Array.prototype.forEach&&!!Array.prototype.indexOf&&!!Array.prototype.lastIndexOf&&!!Array.prototype.map&&!!Array.prototype.some&&!!Array.prototype.reduce&&!!Array.prototype.reduceRight&&!!Array.isArray&&!!Function.prototype&&!!Function.prototype.bind&&!!Object.keys&&!!Object.create&&!!Object.getPrototypeOf&&!!Object.getOwnPropertyNames&&!!Object.isSealed&&!!Object.isFrozen&&!!Object.isExtensible&&!!Object.getOwnPropertyDescriptor&&!!Object.defineProperty&&!!Object.defineProperties&&!!Object.seal&&!!Object.freeze&&!!Object.preventExtensions&&!!("JSON"in window&&"parse"in JSON&&"stringify"in JSON)&&!!function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var t,e,i=new Blob([""],{type:"text/javascript"}),r=URL.createObjectURL(i);try{e=new Worker(r),t=!0}catch(e){t=!1}return e&&e.terminate(),URL.revokeObjectURL(r),t}()&&"Uint8ClampedArray"in window&&!!ArrayBuffer.isView&&!!function(){var t=document.createElement("canvas");t.width=t.height=1;var e=t.getContext("2d");if(!e)return!1;var i=e.getImageData(0,0,1,1);return i&&i.width===t.width}()&&(void 0===r[n=e&&e.failIfMajorPerformanceCaveat]&&(r[n]=function(t){var e,r,n,s=(e=document.createElement("canvas"),(r=Object.create(i.webGLContextAttributes)).failIfMajorPerformanceCaveat=t,e.getContext("webgl",r)||e.getContext("experimental-webgl",r));if(!s)return!1;try{n=s.createShader(s.VERTEX_SHADER)}catch(t){return!1}return!(!n||s.isContextLost())&&(s.shaderSource(n,"void main() {}"),s.compileShader(n),!0===s.getShaderParameter(n,s.COMPILE_STATUS))}(n)),!!r[n]&&!document.documentMode)}e.Z=i;var r={};i.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},68049:function(t,e,i){"use strict";i.d(e,{$_:function(){return I},A:function(){return R},BC:function(){return p},Bw:function(){return C},De:function(){return u},Di:function(){return E},Ev:function(){return f},Ff:function(){return Z},Fi:function(){return c},G$:function(){return h},Gg:function(){return l},Gp:function(){return N},HW:function(){return P},IV:function(){return L},LR:function(){return _},LU:function(){return A},M1:function(){return z},MA:function(){return M},MR:function(){return a},QU:function(){return w},Qg:function(){return V},S7:function(){return n},SJ:function(){return F},W2:function(){return v},XL:function(){return x},ZI:function(){return s},a7:function(){return S},co:function(){return k},eJ:function(){return o},fe:function(){return O},jX:function(){return T},jq:function(){return D},oZ:function(){return m},s:function(){return y},t1:function(){return b},zW:function(){return d},zl:function(){return j}});var r=i(25773),n=t=>{var{r:e,g:i,b:r,a:n}=t,s=Math.max(e,i,r),o=s-Math.min(e,i,r),a=o?s===e?(i-r)/o:s===i?2+(r-e)/o:4+(e-i)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},s=t=>{var{h:e,s:i,l:r}=p(t);return"hsl("+e+", "+Math.round(i)+"%, "+Math.round(r)+"%)"},o=t=>{var{h:e,s:i,v:r}=t;return"hsv("+e+", "+i+"%, "+r+"%)"},a=t=>{var{h:e,s:i,v:r,a:n}=t;return"hsva("+e+", "+i+"%, "+r+"%, "+n+")"},l=t=>{var{h:e,s:i,l:r,a:n}=p(t);return"hsla("+e+", "+i+"%, "+r+"%, "+n+")"},h=t=>{var[e,i,r,n]=(t.match(/\d+/g)||[]).map(Number);return{h:e,s:i,l:r,a:n}},d=t=>{var e=/hsla?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?c({h:m(e[1],e[2]),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}):{h:0,s:0,v:0,a:1}},u=d,c=t=>{var{h:e,s:i,l:r,a:n}=t;return{h:e,s:(i*=(r<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:n}},p=t=>{var{h:e,s:i,v:r,a:n}=t,s=(200-i)*r/100;return{h:e,s:s>0&&s<200?i*r/100/(s<=100?s:200-s)*100:0,l:s/2,a:n}},f=t=>{var e=/hsva?\(?\s*(-?\d*\.?\d+)(deg|rad|grad|turn)?[,\s]+(-?\d*\.?\d+)%?[,\s]+(-?\d*\.?\d+)%?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?{h:m(e[1],e[2]),s:Number(e[3]),v:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)}:{h:0,s:0,v:0,a:1}},g={grad:.9,turn:360,rad:360/(2*Math.PI)},m=function(t,e){return void 0===e&&(e="deg"),Number(t)*(g[e]||1)},v=f,w=t=>{var e=/rgba?\(?\s*(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?[,\s]+(-?\d*\.?\d+)(%)?,?\s*[/\s]*(-?\d*\.?\d+)?(%)?\s*\)?/i.exec(t);return e?n({r:Number(e[1])/(e[2]?.39215686274509803:1),g:Number(e[3])/(e[4]?.39215686274509803:1),b:Number(e[5])/(e[6]?.39215686274509803:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):{h:0,s:0,v:0,a:1}},_=w,y=t=>{let e;var{r:i,g:r,b:n}=t;return"#"+(Array(7-(e=(i<<16|r<<8|n).toString(16)).length).join("0")+e)},b=t=>{var{r:e,g:i,b:r,a:n}=t,s="number"==typeof n&&(255*n|256).toString(16).slice(1);return""+y({r:e,g:i,b:r,a:n})+(s||"")},P=t=>n(S(t)),S=t=>{var e=t.replace("#","");/^#?/.test(t)&&3===e.length&&(t="#"+e.charAt(0)+e.charAt(0)+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2));var[i,r,n=0,s]=t.match(/[A-Za-z0-9]{2}/g).map(t=>parseInt(t,16));return{r:i,g:r,b:n,a:(null!=s?s:255)/255}},M=t=>{var{h:e,s:i,v:n,a:s}=t,o=e/60,a=i/100,l=n/100,h=o-Math.floor(o),d=255*l*(1-a),u=255*l*(1-a*h),c=255*l*(1-a*(1-h));l*=255;var p={};switch(Math.floor(o)%6){case 0:p.r=l,p.g=c,p.b=d;break;case 1:p.r=u,p.g=l,p.b=d;break;case 2:p.r=d,p.g=l,p.b=c;break;case 3:p.r=d,p.g=u,p.b=l;break;case 4:p.r=c,p.g=d,p.b=l;break;case 5:p.r=l,p.g=d,p.b=u}return p.r=Math.round(p.r),p.g=Math.round(p.g),p.b=Math.round(p.b),(0,r.Z)({},p,{a:s})},C=t=>{var{r:e,g:i,b:r}=M(t);return"rgb("+e+", "+i+", "+r+")"},x=t=>{var{r:e,g:i,b:r,a:n}=M(t);return"rgba("+e+", "+i+", "+r+", "+n+")"},E=t=>{var{r:e,g:i,b:r}=t;return{r:e,g:i,b:r}},k=t=>{var{h:e,s:i,l:r}=t;return{h:e,s:i,l:r}},R=t=>y(M(t)),L=t=>b(M(t)),T=t=>{var{h:e,s:i,v:r}=t;return{h:e,s:i,v:r}},A=t=>D(E(S(t))),O=t=>y((0,r.Z)({},z(t),{a:255})),z=t=>{var{x:e,y:i,bri:r=255}=t,n=function(t){return t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055};return{r:Math.round(255*n(3.2406255*e+-1.537208*i+-.4986286*r)),g:Math.round(255*n(-.9689307*e+1.8757561*i+.0415175*r)),b:Math.round(255*n(.0557101*e+-.2040211*i+1.0569959*r))}},D=t=>{var{r:e,g:i,b:r}=t,n=function(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)},s=n(e/255),o=n(i/255),a=n(r/255),l={};return l.x=.4124*s+.3576*o+.1805*a,l.y=.2126*s+.7152*o+.0722*a,l.bri=.0193*s+.1192*o+.9505*a,l},I=t=>{var e,i,r,n,s,o,a,l,h;return"string"==typeof t&&Z(t)?(o=P(t),l=t):"string"!=typeof t&&(o=t),o&&(r=T(o),s=p(o),h=b(n=M(o)),l=R(o),i=k(s),a=D(e=E(n))),{rgb:e,hsl:i,hsv:r,rgba:n,hsla:s,hsva:o,hex:l,hexa:h,xy:a}},V=t=>{if(!t)return"#ffffff";var e=I(t);return(299*e.rgb.r+587*e.rgb.g+114*e.rgb.b)/1e3>=128?"#000000":"#ffffff"},j=(t,e)=>{if(t===e)return!0;for(var i in t)if(t[i]!==e[i])return!1;return!0},F=(t,e)=>t.replace(/\s/g,"")===e.replace(/\s/g,""),N=(t,e)=>t.toLowerCase()===e.toLowerCase()||j(S(t),S(e)),Z=t=>/^#?([A-Fa-f0-9]{3,4}){1,2}$/.test(t)},73140:function(t,e,i){var r=i(88799),n=i(85638);t.exports=function(t,e,i){(void 0===i||n(t[e],i))&&(void 0!==i||e in t)||r(t,e,i)}},9019:function(t,e,i){var r=i(23694),n=i(73140),s=i(49819),o=i(68867),a=i(11611),l=i(53893),h=i(97494);t.exports=function t(e,i,d,u,c){e!==i&&s(i,function(s,l){if(c||(c=new r),a(s))o(e,i,l,d,t,u,c);else{var p=u?u(h(e,l),s,l+"",e,i,c):void 0;void 0===p&&(p=s),n(e,l,p)}},l)}},68867:function(t,e,i){var r=i(73140),n=i(2734),s=i(63428),o=i(37561),a=i(97635),l=i(2900),h=i(19785),d=i(36468),u=i(43854),c=i(28338),p=i(11611),f=i(40861),g=i(48519),m=i(97494),v=i(89328);t.exports=function(t,e,i,w,_,y,b){var P=m(t,i),S=m(e,i),M=b.get(S);if(M){r(t,i,M);return}var C=y?y(P,S,i+"",t,e,b):void 0,x=void 0===C;if(x){var E=h(S),k=!E&&u(S),R=!E&&!k&&g(S);C=S,E||k||R?h(P)?C=P:d(P)?C=o(P):k?(x=!1,C=n(S,!0)):R?(x=!1,C=s(S,!0)):C=[]:f(S)||l(S)?(C=P,l(P)?C=v(P):(!p(P)||c(P))&&(C=a(S))):x=!1}x&&(b.set(S,C),_(C,S,w,y,b),b.delete(S)),r(t,i,C)}},7270:function(t,e,i){var r=i(1197),n=i(57535);t.exports=function(t){return r(function(e,i){var r=-1,s=i.length,o=s>1?i[s-1]:void 0,a=s>2?i[2]:void 0;for(o=t.length>3&&"function"==typeof o?(s--,o):void 0,a&&n(i[0],i[1],a)&&(o=s<3?void 0:o,s=1),e=Object(e);++r<s;){var l=i[r];l&&t(e,l,r,o)}return e})}},97494:function(t){t.exports=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}},36468:function(t,e,i){var r=i(80068),n=i(92360);t.exports=function(t){return n(t)&&r(t)}},15409:function(t,e,i){var r=i(9019),n=i(7270)(function(t,e,i){r(t,e,i)});t.exports=n},89328:function(t,e,i){var r=i(35159),n=i(53893);t.exports=function(t){return r(t,n(t))}},45174:function(t,e,i){"use strict";var r=i(83538),n=i(57067);let s=["src","srcSet","sizes","height","width","decoding","className","style","fetchPriority","placeholder","loading","unoptimized","fill","onLoadRef","onLoadingCompleteRef","setBlurComplete","setShowAltText","sizesInput","onLoad","onError"];function o(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function a(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?o(Object(i),!0).forEach(function(e){n(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):o(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"Image",{enumerable:!0,get:function(){return M}});let l=i(51538),h=i(5306),d=i(24246),u=h._(i(27378)),c=l._(i(31542)),p=l._(i(29454)),f=i(86144),g=i(42072),m=i(25726);i(99944);let v=i(80787),w=l._(i(59843)),_={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/vizualni-admin/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function y(t,e,i,r,n,s,o){let l=null==t?void 0:t.src;t&&t["data-loaded-src"]!==l&&(t["data-loaded-src"]=l,("decode"in t?t.decode():Promise.resolve()).catch(()=>{}).then(()=>{if(t.parentElement&&t.isConnected){if("empty"!==e&&n(!0),null==i?void 0:i.current){let e=new Event("load");Object.defineProperty(e,"target",{writable:!1,value:t});let r=!1,n=!1;i.current(a(a({},e),{},{nativeEvent:e,currentTarget:t,target:t,isDefaultPrevented:()=>r,isPropagationStopped:()=>n,persist:()=>{},preventDefault:()=>{r=!0,e.preventDefault()},stopPropagation:()=>{n=!0,e.stopPropagation()}}))}(null==r?void 0:r.current)&&r.current(t)}}))}function b(t){return u.use?{fetchPriority:t}:{fetchpriority:t}}let P=(0,u.forwardRef)((t,e)=>{let{src:i,srcSet:n,sizes:o,height:l,width:h,decoding:c,className:p,style:f,fetchPriority:g,placeholder:m,loading:v,unoptimized:w,fill:_,onLoadRef:P,onLoadingCompleteRef:S,setBlurComplete:M,setShowAltText:C,sizesInput:x,onLoad:E,onError:k}=t,R=r(t,s);return(0,d.jsx)("img",a(a(a({},R),b(g)),{},{loading:v,width:h,height:l,decoding:c,"data-nimg":_?"fill":"1",className:p,style:f,sizes:o,srcSet:n,src:i,ref:(0,u.useCallback)(t=>{e&&("function"==typeof e?e(t):"object"==typeof e&&(e.current=t)),t&&(k&&(t.src=t.src),t.complete&&y(t,m,P,S,M,w,x))},[i,m,P,S,M,k,w,x,e]),onLoad:t=>{y(t.currentTarget,m,P,S,M,w,x)},onError:t=>{C(!0),"empty"!==m&&M(!0),k&&k(t)}}))});function S(t){let{isAppRouter:e,imgAttributes:i}=t,r=a({as:"image",imageSrcSet:i.srcSet,imageSizes:i.sizes,crossOrigin:i.crossOrigin,referrerPolicy:i.referrerPolicy},b(i.fetchPriority));return e&&c.default.preload?(c.default.preload(i.src,r),null):(0,d.jsx)(p.default,{children:(0,d.jsx)("link",a({rel:"preload",href:i.srcSet?void 0:i.src},r),"__nimg-"+i.src+i.srcSet+i.sizes)})}let M=(0,u.forwardRef)((t,e)=>{let i=(0,u.useContext)(v.RouterContext),r=(0,u.useContext)(m.ImageConfigContext),n=(0,u.useMemo)(()=>{var t;let e=_||r||g.imageConfigDefault,i=[...e.deviceSizes,...e.imageSizes].sort((t,e)=>t-e),n=e.deviceSizes.sort((t,e)=>t-e),s=null==(t=e.qualities)?void 0:t.sort((t,e)=>t-e);return a(a({},e),{},{allSizes:i,deviceSizes:n,qualities:s})},[r]),{onLoad:s,onLoadingComplete:o}=t,l=(0,u.useRef)(s);(0,u.useEffect)(()=>{l.current=s},[s]);let h=(0,u.useRef)(o);(0,u.useEffect)(()=>{h.current=o},[o]);let[c,p]=(0,u.useState)(!1),[y,b]=(0,u.useState)(!1),{props:M,meta:C}=(0,f.getImgProps)(t,{defaultLoader:w.default,imgConf:n,blurComplete:c,showAltText:y});return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(P,a(a({},M),{},{unoptimized:C.unoptimized,placeholder:C.placeholder,fill:C.fill,onLoadRef:l,onLoadingCompleteRef:h,setBlurComplete:p,setShowAltText:b,sizesInput:t.sizes,ref:e})),C.priority?(0,d.jsx)(S,{isAppRouter:!i,imgAttributes:M}):null]})});("function"==typeof e.default||"object"==typeof e.default&&null!==e.default)&&void 0===e.default.__esModule&&(Object.defineProperty(e.default,"__esModule",{value:!0}),Object.assign(e.default,e),t.exports=e.default)},86144:function(t,e,i){"use strict";var r=i(57067),n=i(83538);let s=["src","sizes","unoptimized","priority","loading","className","quality","width","height","fill","style","overrideSrc","onLoad","onLoadingComplete","placeholder","blurDataURL","fetchPriority","decoding","layout","objectFit","objectPosition","lazyBoundary","lazyRoot"],o=["config"];function a(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function l(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?a(Object(i),!0).forEach(function(e){r(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):a(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImgProps",{enumerable:!0,get:function(){return p}}),i(99944);let h=i(2705),d=i(42072);function u(t){return void 0!==t.default}function c(t){return void 0===t?t:"number"==typeof t?Number.isFinite(t)?t:NaN:"string"==typeof t&&/^[0-9]+$/.test(t)?parseInt(t,10):NaN}function p(t,e){var i,r;let a,p,f,{src:g,sizes:m,unoptimized:v=!1,priority:w=!1,loading:_,className:y,quality:b,width:P,height:S,fill:M=!1,style:C,overrideSrc:x,onLoad:E,onLoadingComplete:k,placeholder:R="empty",blurDataURL:L,fetchPriority:T,decoding:A="async",layout:O,objectFit:z,objectPosition:D,lazyBoundary:I,lazyRoot:V}=t,j=n(t,s),{imgConf:F,showAltText:N,blurComplete:Z,defaultLoader:B}=e,U=F||d.imageConfigDefault;if("allSizes"in U)a=U;else{let t=[...U.deviceSizes,...U.imageSizes].sort((t,e)=>t-e),e=U.deviceSizes.sort((t,e)=>t-e),r=null==(i=U.qualities)?void 0:i.sort((t,e)=>t-e);a=l(l({},U),{},{allSizes:t,deviceSizes:e,qualities:r})}if(void 0===B)throw Error("images.loaderFile detected but the file is missing default export.\nRead more: https://nextjs.org/docs/messages/invalid-images-config");let W=j.loader||B;delete j.loader,delete j.srcSet;let G="__next_img_default"in W;if(G){if("custom"===a.loader)throw Error('Image with src "'+g+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let t=W;W=e=>{let{config:i}=e;return t(n(e,o))}}if(O){"fill"===O&&(M=!0);let t={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[O];t&&(C=l(l({},C),t));let e={responsive:"100vw",fill:"100vw"}[O];e&&!m&&(m=e)}let $="",H=c(P),q=c(S);if("object"==typeof(r=g)&&(u(r)||void 0!==r.src)){let t=u(g)?g.default:g;if(!t.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(t));if(!t.height||!t.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(t));if(p=t.blurWidth,f=t.blurHeight,L=L||t.blurDataURL,$=t.src,!M){if(H||q){if(H&&!q){let e=H/t.width;q=Math.round(t.height*e)}else if(!H&&q){let e=q/t.height;H=Math.round(t.width*e)}}else H=t.width,q=t.height}}let X=!w&&("lazy"===_||void 0===_);(!(g="string"==typeof g?g:$)||g.startsWith("data:")||g.startsWith("blob:"))&&(v=!0,X=!1),a.unoptimized&&(v=!0),G&&g.endsWith(".svg")&&!a.dangerouslyAllowSVG&&(v=!0),w&&(T="high");let Y=c(b),K=Object.assign(M?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:z,objectPosition:D}:{},N?{}:{color:"transparent"},C),J=Z||"empty"===R?null:"blur"===R?'url("data:image/svg+xml;charset=utf-8,'+(0,h.getImageBlurSvg)({widthInt:H,heightInt:q,blurWidth:p,blurHeight:f,blurDataURL:L||"",objectFit:K.objectFit})+'")':'url("'+R+'")',Q=J?{backgroundSize:K.objectFit||"cover",backgroundPosition:K.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:J}:{},tt=function(t){let{config:e,src:i,unoptimized:r,width:n,quality:s,sizes:o,loader:a}=t;if(r)return{src:i,srcSet:void 0,sizes:void 0};let{widths:l,kind:h}=function(t,e,i){let{deviceSizes:r,allSizes:n}=t;if(i){let t=/(^|\s)(1?\d?\d)vw/g,e=[];for(let r;r=t.exec(i);r)e.push(parseInt(r[2]));if(e.length){let t=.01*Math.min(...e);return{widths:n.filter(e=>e>=r[0]*t),kind:"w"}}return{widths:n,kind:"w"}}return"number"!=typeof e?{widths:r,kind:"w"}:{widths:[...new Set([e,2*e].map(t=>n.find(e=>e>=t)||n[n.length-1]))],kind:"x"}}(e,n,o),d=l.length-1;return{sizes:o||"w"!==h?o:"100vw",srcSet:l.map((t,r)=>a({config:e,src:i,quality:s,width:t})+" "+("w"===h?t:r+1)+h).join(", "),src:a({config:e,src:i,quality:s,width:l[d]})}}({config:a,src:g,unoptimized:v,width:H,quality:Y,sizes:m,loader:W});return{props:l(l({},j),{},{loading:X?"lazy":_,fetchPriority:T,width:H,height:q,decoding:A,className:y,style:l(l({},K),Q),sizes:tt.sizes,srcSet:tt.srcSet,src:x||tt.src}),meta:{unoptimized:v,priority:w,placeholder:R,fill:M}}}},2705:function(t,e){"use strict";function i(t){let{widthInt:e,heightInt:i,blurWidth:r,blurHeight:n,blurDataURL:s,objectFit:o}=t,a=r?40*r:e,l=n?40*n:i,h=a&&l?"viewBox='0 0 "+a+" "+l+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+h+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(h?"none":"contain"===o?"xMidYMid":"cover"===o?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+s+"'/%3E%3C/svg%3E"}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"getImageBlurSvg",{enumerable:!0,get:function(){return i}})},92774:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t,e){for(var i in e)Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}(e,{default:function(){return l},getImageProps:function(){return a}});let r=i(51538),n=i(86144),s=i(45174),o=r._(i(59843));function a(t){let{props:e}=(0,n.getImgProps)(t,{defaultLoader:o.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/vizualni-admin/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[t,i]of Object.entries(e))void 0===i&&delete e[t];return{props:e}}let l=s.Image},59843:function(t,e){"use strict";function i(t){var e;let{config:i,src:r,width:n,quality:s}=t,o=s||(null==(e=i.qualities)?void 0:e.reduce((t,e)=>Math.abs(e-75)<Math.abs(t-75)?e:t))||75;return i.path+"?url="+encodeURIComponent(r)+"&w="+n+"&q="+o}Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return r}}),i.__next_img_default=!0;let r=i},21002:function(){},38579:function(t,e,i){t.exports=i(92774)},71993:function(t,e,i){"use strict";i.d(e,{ZP:function(){return S},PE:function(){return R},Sx:function(){return s}});var r=i(27378);let n=r.createContext(null);function s(){let t=r.useContext(n)?.maps,e=(0,r.useContext)(b);return(0,r.useMemo)(()=>({...t,current:e?.map}),[t,e])}function o(t){return{longitude:t.center.lng,latitude:t.center.lat,zoom:t.zoom,pitch:t.pitch,bearing:t.bearing,padding:t.padding}}function a(t,e){let i=e.viewState||e,r=!1;if("longitude"in i&&"latitude"in i){let e=t.center;t.center=new e.constructor(i.longitude,i.latitude),r=r||e!==t.center}if("zoom"in i){let e=t.zoom;t.zoom=i.zoom,r=r||e!==t.zoom}if("bearing"in i){let e=t.bearing;t.bearing=i.bearing,r=r||e!==t.bearing}if("pitch"in i){let e=t.pitch;t.pitch=i.pitch,r=r||e!==t.pitch}return i.padding&&!t.isPaddingEqual(i.padding)&&(r=!0,t.padding=i.padding),r}let l=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function h(t){if(!t)return null;if("string"==typeof t||("toJS"in t&&(t=t.toJS()),!t.layers))return t;let e={};for(let i of t.layers)e[i.id]=i;let i=t.layers.map(t=>{let i=e[t.ref],r=null;if("interactive"in t&&(r={...t},delete r.interactive),i)for(let e of(r=r||{...t},delete r.ref,l))e in i&&(r[e]=i[e]);return r||t});return{...t,layers:i}}function d(t,e){if(t===e)return!0;if(!t||!e)return!1;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(let i=0;i<t.length;i++)if(!d(t[i],e[i]))return!1;return!0}if(Array.isArray(e))return!1;if("object"==typeof t&&"object"==typeof e){let i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(let r of i)if(!e.hasOwnProperty(r)||!d(t[r],e[r]))return!1;return!0}return!1}var u=i(27061);let c={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},p={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},f={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},g=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],m=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class v{constructor(t,e,i){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=t=>{let e=this.props[f[t.type]];e&&e(t)},this._onPointerEvent=t=>{("mousemove"===t.type||"mouseout"===t.type)&&this._updateHover(t);let e=this.props[c[t.type]];if(e){if(this.props.interactiveLayerIds&&"mouseover"!==t.type&&"mouseout"!==t.type){let e=this._hoveredFeatures||this._map.queryRenderedFeatures(t.point,{layers:this.props.interactiveLayerIds});if(!e.length)return;t.features=e}e(t),delete t.features}},this._onCameraEvent=t=>{if(!this._internalUpdate){let e=this.props[p[t.type]];e&&e(t)}t.type in this._deferredEvents&&(this._deferredEvents[t.type]=!1)},this._MapClass=t,this.props=e,this._initialize(i)}get map(){return this._map}get transform(){return this._renderTransform}setProps(t){let e=this.props;this.props=t;let i=this._updateSettings(t,e);i&&(this._renderTransform=this._map.transform.clone());let r=this._updateSize(t),n=this._updateViewState(t,!0);this._updateStyle(t,e),this._updateStyleComponents(t,e),this._updateHandlers(t,e),(i||r||n&&!this._map.isMoving())&&this.redraw()}static reuse(t,e){let i=v.savedMaps.pop();if(!i)return null;let r=i.map,n=r.getContainer();for(e.className=n.className;n.childNodes.length>0;)e.appendChild(n.childNodes[0]);return r._container=e,t.initialViewState&&i._updateViewState(t.initialViewState,!1),r.resize(),i.setProps({...t,styleDiffing:!1}),r.isStyleLoaded()?r.fire("load"):r.once("styledata",()=>r.fire("load")),i}_initialize(t){let{props:e}=this,i={...e,...e.initialViewState,accessToken:e.mapboxAccessToken||function(){let t=null;if("undefined"!=typeof location){let e=/access_token=([^&\/]*)/.exec(location.search);t=e&&e[1]}try{t=t||u.env.MapboxAccessToken}catch{}try{t=t||u.env.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return t}()||null,container:t,style:h(e.mapStyle)},r=i.initialViewState||i.viewState||i;if(Object.assign(i,{center:[r.longitude||0,r.latitude||0],zoom:r.zoom||0,pitch:r.pitch||0,bearing:r.bearing||0}),e.gl){let t=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=t,e.gl)}let n=new this._MapClass(i);r.padding&&n.setPadding(r.padding),e.cursor&&(n.getCanvas().style.cursor=e.cursor),this._renderTransform=n.transform.clone();let s=n._render;n._render=t=>{this._inRender=!0,s.call(n,t),this._inRender=!1};let o=n._renderTaskQueue.run;n._renderTaskQueue.run=t=>{o.call(n._renderTaskQueue,t),this._onBeforeRepaint()},n.on("render",()=>this._onAfterRepaint());let a=n.fire;for(let t in n.fire=this._fireEvent.bind(this,a),n.on("resize",()=>{this._renderTransform.resize(n.transform.width,n.transform.height)}),n.on("styledata",()=>this._updateStyleComponents(this.props,{})),n.on("sourcedata",()=>this._updateStyleComponents(this.props,{})),c)n.on(t,this._onPointerEvent);for(let t in p)n.on(t,this._onCameraEvent);for(let t in f)n.on(t,this._onEvent);this._map=n}recycle(){v.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){let t=this._map;!this._inRender&&t.style&&(t._frame&&(t._frame.cancel(),t._frame=null),t._render())}_updateSize(t){let{viewState:e}=t;if(e){let t=this._map;if(e.width!==t.transform.width||e.height!==t.transform.height)return t.resize(),!0}return!1}_updateViewState(t,e){if(this._internalUpdate)return!1;let i=this._map,r=this._renderTransform,{zoom:n,pitch:s,bearing:l}=r,h=a(r,{...o(i.transform),...t});if(h&&e){let t=this._deferredEvents;t.move=!0,t.zoom||(t.zoom=n!==r.zoom),t.rotate||(t.rotate=l!==r.bearing),t.pitch||(t.pitch=s!==r.pitch)}return i.isMoving()||a(i.transform,t),h}_updateSettings(t,e){let i=this._map,r=!1;for(let n of g)n in t&&!d(t[n],e[n])&&(r=!0,i[`set${n[0].toUpperCase()}${n.slice(1)}`](t[n]));return r}_updateStyle(t,e){if(t.cursor!==e.cursor&&(this._map.getCanvas().style.cursor=t.cursor),t.mapStyle!==e.mapStyle){let e={diff:t.styleDiffing};return"localIdeographFontFamily"in t&&(e.localIdeographFontFamily=t.localIdeographFontFamily),this._map.setStyle(h(t.mapStyle),e),!0}return!1}_updateStyleComponents(t,e){let i=this._map,r=!1;return i.style.loaded()&&("light"in t&&!d(t.light,e.light)&&(r=!0,i.setLight(t.light)),"fog"in t&&!d(t.fog,e.fog)&&(r=!0,i.setFog(t.fog)),"terrain"in t&&!d(t.terrain,e.terrain)&&(!t.terrain||i.getSource(t.terrain.source))&&(r=!0,i.setTerrain(t.terrain),this._renderTransform.elevation=i.transform.elevation)),r}_updateHandlers(t,e){let i=this._map,r=!1;for(let n of m){let s=t[n];d(s,e[n])||(r=!0,s?i[n].enable(s):i[n].disable())}return r}_updateHover(t){let{props:e}=this;if(e.interactiveLayerIds&&(e.onMouseMove||e.onMouseEnter||e.onMouseLeave)){let i;let r=t.type,n=this._hoveredFeatures?.length>0;if("mousemove"===r)try{i=this._map.queryRenderedFeatures(t.point,{layers:e.interactiveLayerIds})}catch{i=[]}else i=[];let s=i.length>0;!s&&n&&(t.type="mouseleave",this._onPointerEvent(t)),this._hoveredFeatures=i,s&&!n&&(t.type="mouseenter",this._onPointerEvent(t)),t.type=r}else this._hoveredFeatures=null}_fireEvent(t,e,i){let r=this._map,n=r.transform,s="string"==typeof e?e:e.type;return("move"===s&&this._updateViewState(this.props,!1),s in p&&("object"==typeof e&&(e.viewState=o(n)),this._map.isMoving()))?(r.transform=this._renderTransform,t.call(r,e,i),r.transform=n):t.call(r,e,i),r}_onBeforeRepaint(){let t=this._map;for(let e in this._internalUpdate=!0,this._deferredEvents)this._deferredEvents[e]&&t.fire(e);this._internalUpdate=!1;let e=this._map.transform;this._map.transform=this._renderTransform,this._onAfterRepaint=()=>{this._map.transform=e}}}v.savedMaps=[];let w=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"],_="undefined"!=typeof document?r.useLayoutEffect:r.useEffect,y=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"],b=r.createContext(null),P=(0,r.forwardRef)((t,e)=>{let s=(0,r.useContext)(n),[o,a]=(0,r.useState)(null),l=(0,r.useRef)(),{current:h}=(0,r.useRef)({mapLib:null,map:null});(0,r.useEffect)(()=>{let e;let r=t.mapLib,n=!0;return Promise.resolve(r||Promise.resolve().then(i.t.bind(i,88291,23))).then(i=>{if(n){if(i.Map||(i=i.default),!i||!i.Map)throw Error("Invalid mapLib");if(i.supported(t))(function(t,e){for(let i of y)i in e&&(t[i]=e[i]);e.RTLTextPlugin&&t.getRTLTextPluginStatus&&"unavailable"===t.getRTLTextPluginStatus()&&t.setRTLTextPlugin(e.RTLTextPlugin,t=>{t&&console.error(t)},!1)})(i,t),t.reuseMaps&&(e=v.reuse(t,l.current)),e||(e=new v(i.Map,t,l.current)),h.map=function(t,e){if(!t)return null;let i=t.map,r={getMap:()=>i,getCenter:()=>t.transform.center,getZoom:()=>t.transform.zoom,getBearing:()=>t.transform.bearing,getPitch:()=>t.transform.pitch,getPadding:()=>t.transform.padding,getBounds:()=>t.transform.getBounds(),project:i=>t.transform.locationPoint(e.LngLat.convert(i)),unproject:i=>t.transform.pointLocation(e.Point.convert(i))};for(let t of function(t){let e=new Set,i=t;for(;i;){for(let r of Object.getOwnPropertyNames(i))"_"!==r[0]&&"function"==typeof t[r]&&"fire"!==r&&"setEventedParent"!==r&&e.add(r);i=Object.getPrototypeOf(i)}return Array.from(e)}(i))t in r||w.includes(t)||(r[t]=i[t].bind(i));return r}(e,i),h.mapLib=i,a(e),s?.onMapMount(h.map,t.id);else throw Error("Map is not supported by this browser")}}).catch(e=>{t.onError({type:"error",target:null,originalEvent:null,error:e})}),()=>{n=!1,e&&(s?.onMapUnmount(t.id),t.reuseMaps?e.recycle():e.destroy())}},[]),_(()=>{o&&o.setProps(t)}),(0,r.useImperativeHandle)(e,()=>h.map,[o]);let d=(0,r.useMemo)(()=>({position:"relative",width:"100%",height:"100%",...t.style}),[t.style]);return r.createElement("div",{id:t.id,ref:l,style:d},o&&r.createElement(b.Provider,{value:h},t.children))});P.displayName="Map",P.defaultProps={minZoom:0,maxZoom:22,minPitch:0,maxPitch:60,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,mapStyle:{version:8,sources:{},layers:[]},styleDiffing:!0,projection:"mercator",renderWorldCopies:!0,onError:t=>console.error(t.error),RTLTextPlugin:"https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"};var S=P,M=i(31542);let C=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function x(t,e){if(!t||!e)return;let i=t.style;for(let t in e){let r=e[t];Number.isFinite(r)&&!C.test(t)?i[t]=`${r}px`:i[t]=r}}function E(t){let{map:e,mapLib:i}=(0,r.useContext)(b),n=(0,r.useRef)({props:t});n.current.props=t;let s=(0,r.useMemo)(()=>{let e=!1;r.Children.forEach(t.children,t=>{t&&(e=!0)});let o={...t,element:e?document.createElement("div"):null},a=new i.Marker(o).setLngLat([t.longitude,t.latitude]);return a.getElement().addEventListener("click",t=>{n.current.props.onClick?.({type:"click",target:a,originalEvent:t})}),a.on("dragstart",t=>{t.lngLat=s.getLngLat(),n.current.props.onDragStart?.(t)}),a.on("drag",t=>{t.lngLat=s.getLngLat(),n.current.props.onDrag?.(t)}),a.on("dragend",t=>{t.lngLat=s.getLngLat(),n.current.props.onDragEnd?.(t)}),a},[]);return(0,r.useEffect)(()=>(s.addTo(e.getMap()),()=>{s.remove()}),[]),(0,r.useEffect)(()=>{x(s.getElement(),t.style)},[t.style]),(s.getLngLat().lng!==t.longitude||s.getLngLat().lat!==t.latitude)&&s.setLngLat([t.longitude,t.latitude]),t.offset&&!function(t,e){let i=Array.isArray(t)?t[0]:t?t.x:0,r=Array.isArray(t)?t[1]:t?t.y:0,n=Array.isArray(e)?e[0]:e?e.x:0,s=Array.isArray(e)?e[1]:e?e.y:0;return i===n&&r===s}(s.getOffset(),t.offset)&&s.setOffset(t.offset),s.isDraggable()!==t.draggable&&s.setDraggable(t.draggable),s.getRotation()!==t.rotation&&s.setRotation(t.rotation),s.getRotationAlignment()!==t.rotationAlignment&&s.setRotationAlignment(t.rotationAlignment),s.getPitchAlignment()!==t.pitchAlignment&&s.setPitchAlignment(t.pitchAlignment),s.getPopup()!==t.popup&&s.setPopup(t.popup),(0,M.createPortal)(t.children,s.getElement())}function k(t){return new Set(t?t.trim().split(/\s+/):[])}function R(t,e,i){let n=(0,r.useContext)(b),s=(0,r.useMemo)(()=>t(n),[]);return(0,r.useEffect)(()=>{let{map:t}=n;return t.hasControl(s)||t.addControl(s,(i||e)?.position),()=>{"function"==typeof e&&e(n),t.hasControl(s)&&t.removeControl(s)}},[]),s}E.defaultProps={draggable:!1,popup:null,rotation:0,rotationAlignment:"auto",pitchAlignment:"auto"},r.memo(E),r.memo(function(t){let{map:e,mapLib:i}=(0,r.useContext)(b),n=(0,r.useMemo)(()=>document.createElement("div"),[]),s=(0,r.useRef)({props:t});s.current.props=t;let o=(0,r.useMemo)(()=>{let e={...t},r=new i.Popup(e).setLngLat([t.longitude,t.latitude]);return r.on("open",t=>{s.current.props.onOpen?.(t)}),r.on("close",t=>{s.current.props.onClose?.(t)}),r},[]);if((0,r.useEffect)(()=>(o.setDOMContent(n).addTo(e.getMap()),()=>{o.isOpen()&&o.remove()}),[]),(0,r.useEffect)(()=>{x(o.getElement(),t.style)},[t.style]),o.isOpen()&&((o.getLngLat().lng!==t.longitude||o.getLngLat().lat!==t.latitude)&&o.setLngLat([t.longitude,t.latitude]),t.offset&&!d(o.options.offset,t.offset)&&o.setOffset(t.offset),(o.options.anchor!==t.anchor||o.options.maxWidth!==t.maxWidth)&&(o.options.anchor=t.anchor,o.setMaxWidth(t.maxWidth)),o.options.className!==t.className)){let e=k(o.options.className),i=k(t.className);for(let t of e)i.has(t)||o.removeClassName(t);for(let t of i)e.has(t)||o.addClassName(t);o.options.className=t.className}return(0,M.createPortal)(t.children,n)}),r.memo(function(t){let e=R(({mapLib:e})=>new e.AttributionControl(t),{position:t.position});return(0,r.useEffect)(()=>{x(e._container,t.style)},[t.style]),null}),r.memo(function(t){let e=R(({mapLib:e})=>new e.FullscreenControl({container:t.containerId&&document.getElementById(t.containerId)}),{position:t.position});return(0,r.useEffect)(()=>{x(e._controlContainer,t.style)},[t.style]),null});let L=(0,r.forwardRef)((t,e)=>{let i=(0,r.useRef)({props:t}),n=R(({mapLib:e})=>{let r=new e.GeolocateControl(t);return r.on("geolocate",t=>{i.current.props.onGeolocate?.(t)}),r.on("error",t=>{i.current.props.onError?.(t)}),r.on("outofmaxbounds",t=>{i.current.props.onOutOfMaxBounds?.(t)}),r.on("trackuserlocationstart",t=>{i.current.props.onTrackUserLocationStart?.(t)}),r.on("trackuserlocationend",t=>{i.current.props.onTrackUserLocationEnd?.(t)}),r},{position:t.position});return i.current.props=t,(0,r.useImperativeHandle)(e,()=>({trigger:()=>n.trigger()}),[]),(0,r.useEffect)(()=>{x(n._container,t.style)},[t.style]),null});function T(t){let e=R(({mapLib:e})=>new e.ScaleControl(t),{position:t.position});return(e.options.unit!==t.unit||e.options.maxWidth!==t.maxWidth)&&(e.options.maxWidth=t.maxWidth,e.setUnit(t.unit)),(0,r.useEffect)(()=>{x(e._container,t.style)},[t.style]),null}L.displayName="GeolocateControl",r.memo(L),r.memo(function(t){let e=R(({mapLib:e})=>new e.NavigationControl(t),{position:t.position});return(0,r.useEffect)(()=>{x(e._container,t.style)},[t.style]),null}),T.defaultProps={unit:"metric",maxWidth:100},r.memo(T)},60721:function(t,e,i){"use strict";function r(t){return t}function n(t,e){return"string"==typeof e&&(e=t.objects[e]),"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return s(t,e)})}:s(t,e)}function s(t,e){var i=e.id,n=e.bbox,s=null==e.properties?{}:e.properties,o=function(t,e){var i=function(t){if(null==t)return r;var e,i,n=t.scale[0],s=t.scale[1],o=t.translate[0],a=t.translate[1];return function(t,r){r||(e=i=0);var l=2,h=t.length,d=Array(h);for(d[0]=(e+=t[0])*n+o,d[1]=(i+=t[1])*s+a;l<h;)d[l]=t[l],++l;return d}}(t.transform),n=t.arcs;function s(t){return i(t)}function o(t){for(var e=[],r=0,s=t.length;r<s;++r)!function(t,e){e.length&&e.pop();for(var r=n[t<0?~t:t],s=0,o=r.length;s<o;++s)e.push(i(r[s],s));t<0&&function(t,e){for(var i,r=t.length,n=r-e;n<--r;)i=t[n],t[n++]=t[r],t[r]=i}(e,o)}(t[r],e);return e.length<2&&e.push(e[0]),e}function a(t){for(var e=o(t);e.length<4;)e.push(e[0]);return e}function l(t){return t.map(a)}return function t(e){var i,r=e.type;switch(r){case"GeometryCollection":return{type:r,geometries:e.geometries.map(t)};case"Point":i=s(e.coordinates);break;case"MultiPoint":i=e.coordinates.map(s);break;case"LineString":i=o(e.arcs);break;case"MultiLineString":i=e.arcs.map(o);break;case"Polygon":i=l(e.arcs);break;case"MultiPolygon":i=e.arcs.map(l);break;default:return null}return{type:r,coordinates:i}}(e)}(t,e);return null==i&&null==n?{type:"Feature",properties:s,geometry:o}:null==n?{type:"Feature",id:i,properties:s,geometry:o}:{type:"Feature",id:i,bbox:n,properties:s,geometry:o}}i.d(e,{Z:function(){return n}})},25773:function(t,e,i){"use strict";function r(){return(r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)({}).hasOwnProperty.call(i,r)&&(t[r]=i[r])}return t}).apply(null,arguments)}i.d(e,{Z:function(){return r}})},38618:function(t,e,i){"use strict";i.d(e,{Z:function(){return eA}});let r=1,n=1;class s{time=0;channels=new Map;animations=new Map;playing=!1;lastEngineTime=-1;constructor(){}addChannel(t){let{delay:e=0,duration:i=Number.POSITIVE_INFINITY,rate:n=1,repeat:s=1}=t,o=r++,a={time:0,delay:e,duration:i,rate:n,repeat:s};return this._setChannelTime(a,this.time),this.channels.set(o,a),o}removeChannel(t){for(let[e,i]of(this.channels.delete(t),this.animations))i.channel===t&&this.detachAnimation(e)}isFinished(t){let e=this.channels.get(t);return void 0!==e&&this.time>=e.delay+e.duration*e.repeat}getTime(t){if(void 0===t)return this.time;let e=this.channels.get(t);return void 0===e?-1:e.time}setTime(t){for(let e of(this.time=Math.max(0,t),this.channels.values()))this._setChannelTime(e,this.time);for(let t of this.animations.values()){let{animation:e,channel:i}=t;e.setTime(this.getTime(i))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,e){let i=n++;return this.animations.set(i,{animation:t,channel:e}),t.setTime(this.getTime(e)),i}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(-1===this.lastEngineTime&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,e){let i=e-t.delay;i>=t.duration*t.repeat?t.time=t.duration*t.rate:(t.time=Math.max(0,i)%t.duration,t.time*=t.rate)}}var o=i(62297);let a=[i(11099).Z],l=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"],h=`\
uniform layerUniforms {
  uniform float opacity;
} layer;
`,d={name:"layer",vs:h,fs:h,getUniforms:t=>({opacity:Math.pow(t.opacity,1/2.2)}),uniformTypes:{opacity:"f32"}};var u=i(63846),c=i(15523),p=i(83263),f=i(96711),g=i(67227),m=i(40972);class v{constructor(t,e,i){this._loadCount=0,this._subscribers=new Set,this.id=t,this.context=i,this.setData(e)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,e){if(t===this._data&&!e)return;this._data=t;let i=++this._loadCount,r=t;for(let e of("string"==typeof t&&(r=(0,m.z)(t)),r instanceof Promise?(this.isLoaded=!1,this._loader=r.then(t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=void 0,this._content=t)}).catch(t=>{this._loadCount===i&&(this.isLoaded=!0,this._error=t||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t),this._subscribers))e.onChange(this.getData())}}class w{constructor(t){this.protocol=t.protocol||"resource://",this._context={device:t.device,gl:t.device?.gl,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return!!t.startsWith(this.protocol)||t in this._resources}add({resourceId:t,data:e,forceUpdate:i=!1,persistent:r=!0}){let n=this._resources[t];n?n.setData(e,i):(n=new v(t,e,this._context),this._resources[t]=n),n.persistent=r}remove(t){let e=this._resources[t];e&&(e.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){let e=this._consumers[t];if(e){for(let t in e){let i=e[t],r=this._resources[i.resourceId];r&&r.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:e,consumerId:i,requestId:r="default"}){let{_resources:n,protocol:s}=this;t.startsWith(s)&&!n[t=t.replace(s,"")]&&this.add({resourceId:t,data:null,persistent:!1});let o=n[t];if(this._track(i,r,o,e),o)return o.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(let t in this._resources)this._resources[t].delete()}_track(t,e,i,r){let n=this._consumers,s=n[t]=n[t]||{},o=s[e],a=o&&o.resourceId&&this._resources[o.resourceId];a&&(a.unsubscribe(o),this.prune()),i&&(o?(o.onChange=r,o.resourceId=i.id):o={onChange:r,resourceId:i.id},s[e]=o,i.subscribe(o))}_prune(){for(let t of(this._pruneRequest=null,Object.keys(this._resources))){let e=this._resources[t];e.persistent||e.inUse()||(e.delete(),delete this._resources[t])}}}var _=i(37501);class y{constructor(t,e){this._lastRenderedLayers=[],this._needsRedraw=!1,this._needsUpdate=!1,this._nextLayers=null,this._debug=!1,this._defaultShaderModulesChanged=!1,this.activateViewport=t=>{(0,p.Z)("layerManager.activateViewport",this,t),t&&(this.context.viewport=t)};let{deck:i,stats:r,viewport:n,timeline:h}=e||{};this.layers=[],this.resourceManager=new w({device:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,device:t,gl:t?.gl,deck:i,shaderAssembler:function(){let t=o.q.getDefaultShaderAssembler();for(let e of a)t.addDefaultModule(e);for(let e of l)t.addShaderHook(e);return t}(),defaultShaderModules:[d],renderPass:void 0,stats:r||new g.jk({id:"deck.gl"}),viewport:n||new _.Z({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:h||new s,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){for(let t of(this.resourceManager.finalize(),this.layers))this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;for(let i of(t.clearRedrawFlags&&(this._needsRedraw=!1),this.layers)){let r=i.getNeedsRedraw(t);e=e||r}return e}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._defaultShaderModulesChanged?"shader modules changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(e=>t.find(t=>0===e.id.indexOf(t))):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,e){(0,p.Z)("layerManager.setLayers",this,e,t),this._lastRenderedLayers=t;let i=(0,f.x)(t,Boolean);for(let t of i)t.context=this.context;this._updateLayers(this.layers,i)}updateLayers(){let t=this.needsUpdate();t&&(this.setNeedsRedraw(`updating layers: ${t}`),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}addDefaultShaderModule(t){let{defaultShaderModules:e}=this.context;e.find(e=>e.name===t.name)||(e.push(t),this._defaultShaderModulesChanged=!0)}removeDefaultShaderModule(t){let{defaultShaderModules:e}=this.context,i=e.findIndex(e=>e.name===t.name);i>=0&&(e.splice(i,1),this._defaultShaderModulesChanged=!0)}_handleError(t,e,i){i.raiseError(e,`${t} of ${i}`)}_updateLayers(t,e){let i={};for(let e of t)i[e.id]?c.Z.warn(`Multiple old layers with same id ${e.id}`)():i[e.id]=e;if(this._defaultShaderModulesChanged){for(let e of t)e.setNeedsUpdate(),e.setChangeFlags({extensionsChanged:!0});this._defaultShaderModulesChanged=!1}let r=[];this._updateSublayersRecursively(e,i,r),this._finalizeOldLayers(i);let n=!1;for(let t of r)if(t.hasUniformTransition()){n=`Uniform transition in ${t}`;break}this._needsUpdate=n,this.layers=r}_updateSublayersRecursively(t,e,i){for(let r of t){r.context=this.context;let t=e[r.id];null===t&&c.Z.warn(`Multiple new layers with same id ${r.id}`)(),e[r.id]=null;let n=null;try{this._debug&&t!==r&&r.validateProps(),t?(this._transferLayerState(t,r),this._updateLayer(r)):this._initializeLayer(r),i.push(r),n=r.isComposite?r.getSubLayers():null}catch(t){this._handleError("matching",t,r)}n&&this._updateSublayersRecursively(n,e,i)}}_finalizeOldLayers(t){for(let e in t){let i=t[e];i&&this._finalizeLayer(i)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=u.dt.INITIALIZED}catch(e){this._handleError("initialization",e,t)}}_transferLayerState(t,e){e._transferState(t),e.lifecycle=u.dt.MATCHED,e!==t&&(t.lifecycle=u.dt.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(e){this._handleError("update",e,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||`finalized ${t}`,t.lifecycle=u.dt.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=u.dt.FINALIZED}catch(e){this._handleError("finalization",e,t)}}}var b=i(94995);class P{constructor(t){this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(let t in this.controllers){let e=this.controllers[t];e&&e.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(let t in this.controllers){let e=this.controllers[t];e&&e.updateTransition()}}getViewports(t){return t?this._viewports.filter(e=>e.containsPixel(t)):this._viewports}getViews(){let t={};return this.views.forEach(e=>{t[e.id]=e}),t}getView(t){return this.views.find(e=>e.id===t)}getViewState(t){let e="string"==typeof t?this.getView(t):t,i=e&&this.viewState[e.getViewStateId()]||this.viewState;return e?e.filterViewState(i):i}getViewport(t){return this._viewportMap[t]}unproject(t,e){let i=this.getViewports(),r={x:t[0],y:t[1]};for(let n=i.length-1;n>=0;--n){let s=i[n];if(s.containsPixel(r)){let i=t.slice();return i[0]-=s.x,i[1]-=s.y,s.unproject(i,e)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.setNeedsUpdate("Size changed"))}_setViews(t){t=(0,f.x)(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?((0,b.v)(t,this.viewState,3)||this.setNeedsUpdate("viewState changed"),this.viewState=t):c.Z.warn("missing `viewState` or `initialViewState`")()}_createController(t,e){return new e.type({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._eventCallbacks.onViewStateChange,onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:e=>this.getView(t.id)?.makeViewport({viewState:e,width:this.width,height:this.height})})}_updateController(t,e,i,r){let n=t.controller;if(n&&i){let s={...e,...n,id:t.id,x:i.x,y:i.y,width:i.width,height:i.height};return r&&r.constructor===n.type||(r=this._createController(t,s)),r&&r.setProps(s),r}return null}_rebuildViewports(){let{views:t}=this,e=this.controllers;this._viewports=[],this.controllers={};let i=!1;for(let r=t.length;r--;){let n=t[r],s=this.getViewState(n),o=n.makeViewport({viewState:s,width:this.width,height:this.height}),a=e[n.id],l=!!n.controller;l&&!a&&(i=!0),(i||!l)&&a&&(a.finalize(),a=null),this.controllers[n.id]=this._updateController(n,s,o,a),o&&this._viewports.unshift(o)}for(let t in e){let i=e[t];i&&!this.controllers[t]&&i.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,e){return t.length!==e.length||t.some((i,r)=>!t[r].equals(e[r]))}}let S=/([0-9]+\.?[0-9]*)(%|px)/;function M(t){switch(typeof t){case"number":return{position:t,relative:!1};case"string":let e=S.exec(t);if(e&&e.length>=3){let t="%"===e[2],i=parseFloat(e[1]);return{position:t?i/100:i,relative:t}}default:throw Error(`Could not parse position string ${t}`)}}function C(t,e){return t.relative?Math.round(t.position*e):t.position}class x{constructor(t){let{id:e,x:i=0,y:r=0,width:n="100%",height:s="100%",padding:o=null}=t;this.id=e||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=M(i),this._y=M(r),this._width=M(n),this._height=M(s),this._padding=o&&{left:M(o.left||0),right:M(o.right||0),top:M(o.top||0),bottom:M(o.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t||this.constructor===t.constructor&&(0,b.v)(this.props,t.props,2)}makeViewport({width:t,height:e,viewState:i}){i=this.filterViewState(i);let r=this.getDimensions({width:t,height:e});return r.height&&r.width?new(this.getViewportType(i))({...i,...this.props,...r}):null}getViewStateId(){let{viewState:t}=this.props;return"string"==typeof t?t:t?.id||this.id}filterViewState(t){if(this.props.viewState&&"object"==typeof this.props.viewState){if(!this.props.viewState.id)return this.props.viewState;let e={...t};for(let t in this.props.viewState)"id"!==t&&(e[t]=this.props.viewState[t]);return e}return t}getDimensions({width:t,height:e}){let i={x:C(this._x,t),y:C(this._y,e),width:C(this._width,t),height:C(this._height,e)};return this._padding&&(i.padding={left:C(this._padding.left,t),top:C(this._padding.top,e),right:C(this._padding.right,t),bottom:C(this._padding.bottom,e)}),i}get controller(){let t=this.props.controller;return t?!0===t?{type:this.ControllerType}:"function"==typeof t?{type:t}:{type:this.ControllerType,...t}:null}}var E=i(41502),k=i(55715),R=i(24930);let L=()=>{},T={BREAK:1,SNAP_TO_END:2,IGNORE:3},A=t=>t,O=T.BREAK;class z{constructor(t){this._onTransitionUpdate=t=>{let{time:e,settings:{interpolator:i,startProps:r,endProps:n,duration:s,easing:o}}=t,a=o(e/s),l=i.interpolateProps(r,n,a);this.propsInTransition=this.getControllerState({...this.props,...l}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})},this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new R.Z(t.timeline),this.onViewStateChange=t.onViewStateChange||L,this.onStateChange=t.onStateChange||L}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let e=!1,i=this.props;if(this.props=t,!i||this._shouldIgnoreViewportChange(i,t))return!1;if(this._isTransitionEnabled(t)){let r=i;if(this.transition.inProgress){let{interruption:t,endProps:e}=this.transition.settings;r={...i,...t===T.SNAP_TO_END?e:this.propsInTransition||i}}this._triggerTransition(r,t),e=!0}else this.transition.cancel();return e}updateTransition(){this.transition.update()}_isTransitionEnabled(t){let{transitionDuration:e,transitionInterpolator:i}=t;return(e>0||"auto"===e)&&!!i}_isUpdateDueToCurrentTransition(t){return!!this.transition.inProgress&&!!this.propsInTransition&&this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition)}_shouldIgnoreViewportChange(t,e){return this.transition.inProgress?this.transition.settings.interruption===T.IGNORE||this._isUpdateDueToCurrentTransition(e):!this._isTransitionEnabled(e)||e.transitionInterpolator.arePropsEqual(t,e)}_triggerTransition(t,e){let i=this.getControllerState(t),r=this.getControllerState(e).shortestPathFrom(i),n=e.transitionInterpolator,s=n.getDuration?n.getDuration(t,e):e.transitionDuration;if(0===s)return;let o=n.initializeProps(t,r);this.propsInTransition={};let a={duration:s,easing:e.transitionEasing||A,interpolator:n,interruption:e.transitionInterruption||O,startProps:o.start,endProps:o.end,onStart:e.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(e.onTransitionInterrupt),onEnd:this._onTransitionEnd(e.onTransitionEnd)};this.transition.start(a),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return e=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t?.(e)}}}var D=i(19081);class I{constructor(t){let{compare:e,extract:i,required:r}=t;this._propsToCompare=e,this._propsToExtract=i||e,this._requiredProps=r}arePropsEqual(t,e){for(let i of this._propsToCompare)if(!(i in t)||!(i in e)||!(0,k.fS)(t[i],e[i]))return!1;return!0}initializeProps(t,e){let i={},r={};for(let n of this._propsToExtract)(n in t||n in e)&&(i[n]=t[n],r[n]=e[n]);return this._checkRequiredProps(i),this._checkRequiredProps(r),{start:i,end:r}}getDuration(t,e){return e.transitionDuration}_checkRequiredProps(t){this._requiredProps&&this._requiredProps.forEach(e=>{let i=t[e];(0,D.Z)(Number.isFinite(i)||Array.isArray(i),`${e} is required for transition`)})}}let V=["longitude","latitude","zoom","bearing","pitch"],j=["longitude","latitude","zoom"];class F extends I{constructor(t={}){let e=Array.isArray(t)?t:t.transitionProps,i=Array.isArray(t)?{}:t;i.transitionProps=Array.isArray(e)?{compare:e,required:e}:e||{compare:V,required:j},super(i.transitionProps),this.opts=i}initializeProps(t,e){let i=super.initializeProps(t,e),{makeViewport:r,around:n}=this.opts;if(r&&n){let s=r(t),o=r(e),a=s.unproject(n);i.start.around=n,Object.assign(i.end,{around:o.project(a),aroundPosition:a,width:e.width,height:e.height})}return i}interpolateProps(t,e,i){let r={};for(let n of this._propsToExtract)r[n]=(0,k.t7)(t[n]||0,e[n]||0,i);if(e.aroundPosition&&this.opts.makeViewport){let n=this.opts.makeViewport({...e,...r});Object.assign(r,n.panByPosition(e.aroundPosition,(0,k.t7)(t.around,e.around,i)))}return r}}let N={transitionDuration:0},Z=t=>1-(1-t)*(1-t),B=["wheel"],U=["panstart","panmove","panend"],W=["pinchstart","pinchmove","pinchend"],G=["multipanstart","multipanmove","multipanend"],$=["dblclick"],H=["keydown"],q={};class X{constructor(t){this.state={},this._events={},this._interactionState={isDragging:!1},this._customEvents=[],this._eventStartBlocked=null,this._panMove=!1,this.invertPan=!1,this.dragMode="rotate",this.inertia=0,this.scrollZoom=!0,this.dragPan=!0,this.dragRotate=!0,this.doubleClickZoom=!0,this.touchZoom=!0,this.touchRotate=!1,this.keyboard=!0,this.transitionManager=new z({...t,getControllerState:t=>new this.ControllerState(t),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(let t in this._events)this._events[t]&&this.eventManager?.off(t,this.handleEvent);this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;let e=this._eventStartBlocked;switch(t.type){case"panstart":return!e&&this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return!e&&this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"multipanstart":return!e&&this._onMultiPanStart(t);case"multipanmove":return this._onMultiPan(t);case"multipanend":return this._onMultiPanEnd(t);case"dblclick":return this._onDoubleClick(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){let{x:e,y:i}=this.props,{offsetCenter:r}=t;return[r.x-e,r.y-i]}isPointInBounds(t,e){let{width:i,height:r}=this.props;if(e&&e.handled)return!1;let n=t[0]>=0&&t[0]<=i&&t[1]>=0&&t[1]<=r;return n&&e&&e.stopPropagation(),n}isFunctionKeyPressed(t){let{srcEvent:e}=t;return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){let e=setTimeout(()=>{this._eventStartBlocked===e&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=e}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);let{inertia:e}=t;this.inertia=Number.isFinite(e)?e:!0===e?300:0;let{scrollZoom:i=!0,dragPan:r=!0,dragRotate:n=!0,doubleClickZoom:s=!0,touchZoom:o=!0,touchRotate:a=!1,keyboard:l=!0}=t,h=!!this.onViewStateChange;this.toggleEvents(B,h&&i),this.toggleEvents(U,h),this.toggleEvents(W,h&&(o||a)),this.toggleEvents(G,h&&a),this.toggleEvents($,h&&s),this.toggleEvents(H,h&&l),this.scrollZoom=i,this.dragPan=r,this.dragRotate=n,this.doubleClickZoom=s,this.touchZoom=o,this.touchRotate=a,this.keyboard=l}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,e){this.eventManager&&t.forEach(t=>{this._events[t]!==e&&(this._events[t]=e,e?this.eventManager.on(t,this.handleEvent):this.eventManager.off(t,this.handleEvent))})}updateViewport(t,e=null,i={}){let r={...t.getViewportProps(),...e},n=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(i),n){let t=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:r,interactionState:this._interactionState,oldViewState:t,viewId:this.props.id})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState,viewId:this.props.id})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||"pan"===this.dragMode)&&(i=!i);let r=this.controllerState[i?"panStart":"rotateStart"]({pos:e});return this._panMove=i,this.updateViewport(r,N,{isDragging:!0}),!0}_onPan(t){return!!this.isDragging()&&(this._panMove?this._onPanMove(t):this._onPanRotate(t))}_onPanEnd(t){return!!this.isDragging()&&(this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t))}_onPanMove(t){if(!this.dragPan)return!1;let e=this.getCenter(t),i=this.controllerState.pan({pos:e});return this.updateViewport(i,N,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){let{inertia:e}=this;if(this.dragPan&&e&&t.velocity){let i=this.getCenter(t),r=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],n=this.controllerState.pan({pos:r}).panEnd();this.updateViewport(n,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Z},{isDragging:!1,isPanning:!0})}else{let t=this.controllerState.panEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;let e=this.getCenter(t),i=this.controllerState.rotate({pos:e});return this.updateViewport(i,N,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){let{inertia:e}=this;if(this.dragRotate&&e&&t.velocity){let i=this.getCenter(t),r=[i[0]+t.velocityX*e/2,i[1]+t.velocityY*e/2],n=this.controllerState.rotate({pos:r}).rotateEnd();this.updateViewport(n,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Z},{isDragging:!1,isRotating:!0})}else{let t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;t.srcEvent.preventDefault();let{speed:i=.01,smooth:r=!1}=!0===this.scrollZoom?{}:this.scrollZoom,{delta:n}=t,s=2/(1+Math.exp(-Math.abs(n*i)));n<0&&0!==s&&(s=1/s);let o=this.controllerState.zoom({pos:e,scale:s});return this.updateViewport(o,{...this._getTransitionProps({around:e}),transitionDuration:r?250:1},{isZooming:!0,isPanning:!0}),!0}_onMultiPanStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.controllerState.rotateStart({pos:e});return this.updateViewport(i,N,{isDragging:!0}),!0}_onMultiPan(t){if(!this.touchRotate||!this.isDragging())return!1;let e=this.getCenter(t);e[0]-=t.deltaX;let i=this.controllerState.rotate({pos:e});return this.updateViewport(i,N,{isDragging:!0,isRotating:!0}),!0}_onMultiPanEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this;if(this.touchRotate&&e&&t.velocityY){let i=this.getCenter(t),r=[i[0],i[1]+=t.velocityY*e/2],n=this.controllerState.rotate({pos:r});this.updateViewport(n,{...this._getTransitionProps(),transitionDuration:e,transitionEasing:Z},{isDragging:!1,isRotating:!0}),this.blockEvents(e)}else{let t=this.controllerState.rotateEnd();this.updateViewport(t,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.controllerState.zoomStart({pos:e}).rotateStart({pos:e});return q._startPinchRotation=t.rotation,q._lastPinchEvent=t,this.updateViewport(i,N,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let e=this.controllerState;if(this.touchZoom){let{scale:i}=t,r=this.getCenter(t);e=e.zoom({pos:r,scale:i})}if(this.touchRotate){let{rotation:i}=t;e=e.rotate({deltaAngleX:q._startPinchRotation-i})}return this.updateViewport(e,N,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),q._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;let{inertia:e}=this,{_lastPinchEvent:i}=q;if(this.touchZoom&&e&&i&&t.scale!==i.scale){let r=this.getCenter(t),n=this.controllerState.rotateEnd(),s=Math.log2(t.scale),o=(s-Math.log2(i.scale))/(t.deltaTime-i.deltaTime),a=Math.pow(2,s+o*e/2);n=n.zoom({pos:r,scale:a}).zoomEnd(),this.updateViewport(n,{...this._getTransitionProps({around:r}),transitionDuration:e,transitionEasing:Z},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(e)}else{let t=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(t,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return q._startPinchRotation=null,q._lastPinchEvent=null,!0}_onDoubleClick(t){if(!this.doubleClickZoom)return!1;let e=this.getCenter(t);if(!this.isPointInBounds(e,t))return!1;let i=this.isFunctionKeyPressed(t),r=this.controllerState.zoom({pos:e,scale:i?.5:2});return this.updateViewport(r,this._getTransitionProps({around:e}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){let e;if(!this.keyboard)return!1;let i=this.isFunctionKeyPressed(t),{zoomSpeed:r,moveSpeed:n,rotateSpeedX:s,rotateSpeedY:o}=!0===this.keyboard?{}:this.keyboard,{controllerState:a}=this,l={};switch(t.srcEvent.code){case"Minus":e=i?a.zoomOut(r).zoomOut(r):a.zoomOut(r),l.isZooming=!0;break;case"Equal":e=i?a.zoomIn(r).zoomIn(r):a.zoomIn(r),l.isZooming=!0;break;case"ArrowLeft":i?(e=a.rotateLeft(s),l.isRotating=!0):(e=a.moveLeft(n),l.isPanning=!0);break;case"ArrowRight":i?(e=a.rotateRight(s),l.isRotating=!0):(e=a.moveRight(n),l.isPanning=!0);break;case"ArrowUp":i?(e=a.rotateUp(o),l.isRotating=!0):(e=a.moveUp(n),l.isPanning=!0);break;case"ArrowDown":i?(e=a.rotateDown(o),l.isRotating=!0):(e=a.moveDown(n),l.isPanning=!0);break;default:return!1}return this.updateViewport(e,this._getTransitionProps(),l),!0}_getTransitionProps(t){let{transition:e}=this;return e&&e.transitionInterpolator?t?{...e,transitionInterpolator:new F({...t,...e.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:e:N}}class Y{constructor(t,e){this._viewportProps=this.applyConstraints(t),this._state=e}getViewportProps(){return this._viewportProps}getState(){return this._state}}var K=i(77394);class J extends Y{constructor(t){let{width:e,height:i,latitude:r,longitude:n,zoom:s,bearing:o=0,pitch:a=0,altitude:l=1.5,position:h=[0,0,0],maxZoom:d=20,minZoom:u=0,maxPitch:c=60,minPitch:p=0,startPanLngLat:f,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:w,startZoom:_,normalize:y=!0}=t;(0,D.Z)(Number.isFinite(n)),(0,D.Z)(Number.isFinite(r)),(0,D.Z)(Number.isFinite(s)),super({width:e,height:i,latitude:r,longitude:n,zoom:s,bearing:o,pitch:a,altitude:l,maxZoom:d,minZoom:u,maxPitch:c,minPitch:p,normalize:y,position:h},{startPanLngLat:f,startZoomLngLat:g,startRotatePos:m,startBearing:v,startPitch:w,startZoom:_}),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:e}){let i=this.getState().startPanLngLat||this._unproject(e);if(!i)return this;let r=this.makeViewport(this.getViewportProps()).panByPosition(i,t);return this._getUpdatedState(r)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:e=0,deltaAngleY:i=0}){let r;let{startRotatePos:n,startBearing:s,startPitch:o}=this.getState();return n&&void 0!==s&&void 0!==o?(r=t?this._getNewRotation(t,n,o,s):{bearing:s+e,pitch:o+i},this._getUpdatedState(r)):this}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:e,scale:i}){let{startZoom:r,startZoomLngLat:n}=this.getState();if(n||(r=this.getViewportProps().zoom,n=this._unproject(e)||this._unproject(t)),!n)return this;let{maxZoom:s,minZoom:o}=this.getViewportProps(),a=r+Math.log2(i);a=(0,k.uZ)(a,o,s);let l=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...l.panByPosition(n,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){let e=t.getViewportProps(),i={...this.getViewportProps()},{bearing:r,longitude:n}=i;return Math.abs(r-e.bearing)>180&&(i.bearing=r<0?r+360:r-360),Math.abs(n-e.longitude)>180&&(i.longitude=n<0?n+360:n-360),i}applyConstraints(t){let{maxZoom:e,minZoom:i,zoom:r}=t;t.zoom=(0,k.uZ)(r,i,e);let{maxPitch:n,minPitch:s,pitch:o}=t;t.pitch=(0,k.uZ)(o,s,n);let{normalize:a=!0}=t;return a&&Object.assign(t,(0,K.QA)(t)),t}_zoomFromCenter(t){let{width:e,height:i}=this.getViewportProps();return this.zoom({pos:[e/2,i/2],scale:t})}_panFromCenter(t){let{width:e,height:i}=this.getViewportProps();return this.pan({startPos:[e/2,i/2],pos:[e/2+t[0],i/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){let e=this.makeViewport(this.getViewportProps());return t&&e.unproject(t)}_getNewRotation(t,e,i,r){let n=t[0]-e[0],s=t[1]-e[1],o=t[1],a=e[1],{width:l,height:h}=this.getViewportProps(),d=0;s>0?Math.abs(h-a)>5&&(d=s/(a-h)*1.2):s<0&&a>5&&(d=1-o/a),d=(0,k.uZ)(d,-1,1);let{minPitch:u,maxPitch:c}=this.getViewportProps(),p=i;return d>0?p=i+d*(c-i):d<0&&(p=i-d*(u-i)),{pitch:p,bearing:r+n/l*180}}}class Q extends X{constructor(){super(...arguments),this.ControllerState=J,this.transition={transitionDuration:300,transitionInterpolator:new F({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})},this.dragMode="pan"}setProps(t){t.position=t.position||[0,0,0];let e=this.props;super.setProps(t),e&&e.height===t.height||this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class tt extends x{constructor(t={}){super(t)}getViewportType(){return E.Z}get ControllerType(){return Q}}tt.displayName="MapView";let te=[255,255,255],ti=0;class tr{constructor(t={}){this.type="ambient";let{color:e=te}=t,{intensity:i=1}=t;this.id=t.id||`ambient-${ti++}`,this.color=e,this.intensity=i}}var tn=i(51394);let ts=[255,255,255],to=[0,0,-1],ta=0;class tl{constructor(t={}){this.type="directional";let{color:e=ts}=t,{intensity:i=1}=t,{direction:r=to}=t,{_shadow:n=!1}=t;this.id=t.id||`directional-${ta++}`,this.color=e,this.intensity=i,this.type="directional",this.direction=new tn.P(r).normalize().toArray(),this.shadow=n}getProjectedLight(t){return this}}var th=i(84900);class td{constructor(t,e={id:"pass"}){let{id:i}=e;this.id=i,this.device=t,this.props={...e}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class tu extends td{constructor(){super(...arguments),this._lastRenderIndex=-1}render(t){let[e,i]=this.device.canvasContext.getDrawingBufferSize(),r=t.clearCanvas??!0,n=t.clearColor??(!!r&&[0,0,0,0]),s=t.colorMask??15,o={viewport:[0,0,e,i]};t.colorMask&&(o.colorMask=s),t.scissorRect&&(o.scissorRect=t.scissorRect);let a=this.device.beginRenderPass({framebuffer:t.target,parameters:o,clearColor:n,clearDepth:!!r&&1,clearStencil:!!r&&0});try{return this._drawLayers(a,t)}finally{a.end()}}_drawLayers(t,e){let{target:i,shaderModuleProps:r,viewports:n,views:s,onViewportActive:o,clearStack:a=!0}=e;e.pass=e.pass||"unknown",a&&(this._lastRenderIndex=-1);let l=[];for(let a of n){let n=s&&s[a.id];o?.(a);let h=this._getDrawLayerParams(a,e);for(let s of a.subViewports||[a]){let o=this._drawLayersInViewport(t,{target:i,shaderModuleProps:r,viewport:s,view:n,pass:e.pass,layers:e.layers},h);l.push(o)}}return l}_getDrawLayerParams(t,{layers:e,pass:i,isPicking:r=!1,layerFilter:n,cullRect:s,effects:o,shaderModuleProps:a},l=!1){let h=[],d=function t(e=0,i={}){let r={},n=(s,o)=>{let a;let l=s.props._offset,h=s.id,d=s.parent&&s.parent.id;if(!d||d in i||n(s.parent,!1),d in r){let e=r[d]=r[d]||t(i[d],i);a=e(s,o),r[h]=e}else Number.isFinite(l)?(a=l+(i[d]||0),r[h]=null):a=e;return o&&a>=e&&(e=a+1),i[h]=a,a};return n}(this._lastRenderIndex+1),u={layer:e[0],viewport:t,isPicking:r,renderPass:i,cullRect:s},c={};for(let r=0;r<e.length;r++){let s=e[r],p=this._shouldDrawLayer(s,u,n,c),f={shouldDrawLayer:p};p&&!l&&(f.shouldDrawLayer=!0,f.layerRenderIndex=d(s,p),f.shaderModuleProps=this._getShaderModuleProps(s,o,i,a),f.layerParameters={...s.context.deck?.props.parameters,...this.getLayerParameters(s,r,t)}),h[r]=f}return h}_drawLayersInViewport(t,{layers:e,shaderModuleProps:i,pass:r,target:n,viewport:s,view:o},a){let l=function(t,{shaderModuleProps:e,target:i,viewport:r}){let n=e?.project?.devicePixelRatio??t.canvasContext.cssToDeviceRatio(),[,s]=t.canvasContext.getDrawingBufferSize(),o=i?i.height:s;return[r.x*n,o-(r.y+r.height)*n,r.width*n,r.height*n]}(this.device,{shaderModuleProps:i,target:n,viewport:s});if(o&&o.props.clear){let t=!0===o.props.clear?{color:!0,depth:!0}:o.props.clear;this.device.beginRenderPass({framebuffer:n,parameters:{viewport:l,scissorRect:l},clearColor:!!t.color&&[0,0,0,0],clearDepth:!!t.depth&&1}).end()}let h={totalCount:e.length,visibleCount:0,compositeCount:0,pickableCount:0};t.setParameters({viewport:l});for(let i=0;i<e.length;i++){let n=e[i],o=a[i],{shouldDrawLayer:l}=o;if(l&&n.props.pickable&&h.pickableCount++,n.isComposite&&h.compositeCount++,n.isDrawable&&o.shouldDrawLayer){let{layerRenderIndex:e,shaderModuleProps:i,layerParameters:a}=o;h.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,e),i.project&&(i.project.viewport=s),n.context.renderPass=t;try{n._drawLayer({renderPass:t,shaderModuleProps:i,uniforms:{layerIndex:e},parameters:a})}catch(t){n.raiseError(t,`drawing ${n} to ${r}`)}}}return h}shouldDrawLayer(t){return!0}getShaderModuleProps(t,e,i){return null}getLayerParameters(t,e,i){return t.props.parameters}_shouldDrawLayer(t,e,i,r){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;e.layer=t;let n=t.parent;for(;n;){if(!n.props.visible||!n.filterSubLayer(e))return!1;e.layer=n,n=n.parent}if(i){let t=e.layer.id;if(t in r||(r[t]=i(e)),!r[t])return!1}return t.activateViewport(e.viewport),!0}_getShaderModuleProps(t,e,i,r){let n=this.device.canvasContext.cssToDeviceRatio(),s=t.internalState?.propsInTransition||t.props,o={layer:s,picking:{isActive:!1},project:{viewport:t.context.viewport,devicePixelRatio:n,modelMatrix:s.modelMatrix,coordinateSystem:s.coordinateSystem,coordinateOrigin:s.coordinateOrigin,autoWrapLongitude:t.wrapLongitude}};if(e)for(let i of e)tc(o,i.getShaderModuleProps?.(t,o));return tc(o,this.getShaderModuleProps(t,e,o),r)}}function tc(t,...e){for(let i of e)if(i)for(let e in i)t[e]?Object.assign(t[e],i[e]):t[e]=i[e];return t}class tp extends tu{constructor(t,e){super(t,e);let i=t.createTexture({format:"rgba8unorm",width:1,height:1,sampler:{minFilter:"linear",magFilter:"linear",addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"},mipmaps:!0}),r=t.createTexture({format:"depth16unorm",width:1,height:1,mipmaps:!1});this.fbo=t.createFramebuffer({id:"shadowmap",width:1,height:1,colorAttachments:[i],depthStencilAttachment:r})}delete(){this.fbo&&(this.fbo.destroy(),this.fbo=null)}getShadowMap(){return this.fbo.colorAttachments[0].texture}render(t){let e=this.fbo,i=this.device.canvasContext.cssToDeviceRatio(),r=t.viewports[0],n=r.width*i,s=r.height*i;(n!==e.width||s!==e.height)&&e.resize({width:n,height:s}),super.render({...t,clearColor:[1,1,1,1],target:e,pass:"shadow"})}getLayerParameters(t,e,i){return{...t.props.parameters,blend:!1,depthWriteEnabled:!0,depthCompare:"less-equal"}}shouldDrawLayer(t){return!1!==t.props.shadowEnabled}getShaderModuleProps(t,e,i){return{shadow:{project:i.project,drawToShadowMap:!0}}}}var tf=i(67659),tg=i(87272),tm=i(75097);let tv=`
uniform shadowUniforms {
  bool drawShadowMap;
  bool useShadowMap;
  vec4 color;
  highp int lightId;
  float lightCount;
  mat4 viewProjectionMatrix0;
  mat4 viewProjectionMatrix1;
  vec4 projectCenter0;
  vec4 projectCenter1;
} shadow;
`,tw=`
const int max_lights = 2;

out vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  mat4 viewProjectionMatrices[max_lights];
  viewProjectionMatrices[0] = shadow.viewProjectionMatrix0;
  viewProjectionMatrices[1] = shadow.viewProjectionMatrix1;
  vec4 projectCenters[max_lights];
  projectCenters[0] = shadow.projectCenter0;
  projectCenters[1] = shadow.projectCenter1;

  if (shadow.drawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[shadow.lightId], projectCenters[shadow.lightId]);
  }
  if (shadow.useShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow.lightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, viewProjectionMatrices[i], projectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,t_=`
${tv}
${tw}
`,ty=`
const int max_lights = 2;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;

in vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow.drawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow.useShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow.lightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow.color.a / shadow.lightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow.color.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,tb=`
${tv}
${ty}
`,tP=(0,tm.Z)(function({viewport:t,center:e}){return new th.y(t.viewProjectionMatrix).invert().transform(e)}),tS=(0,tm.Z)(function({viewport:t,shadowMatrices:e}){let i=[],r=t.pixelUnprojectionMatrix,n=t.isGeospatial?void 0:1,s=[[0,0,n],[t.width,0,n],[0,t.height,n],[t.width,t.height,n],[0,0,-1],[t.width,0,-1],[0,t.height,-1],[t.width,t.height,-1]].map(t=>(function(t,e){let[i,r,n]=t,s=(0,K.CT)([i,r,n],e);return Number.isFinite(n)?s:[s[0],s[1],0]})(t,r));for(let r of e){let e=r.clone().translate(new tn.P(t.center).negate()),n=s.map(t=>e.transform(t)),o=new th.y().ortho({left:Math.min(...n.map(t=>t[0])),right:Math.max(...n.map(t=>t[0])),bottom:Math.min(...n.map(t=>t[1])),top:Math.max(...n.map(t=>t[1])),near:Math.min(...n.map(t=>-t[2])),far:Math.max(...n.map(t=>-t[2]))});i.push(o.multiplyRight(r))}return i}),tM=[0,0,0,1],tC=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];var tx={name:"shadow",dependencies:[tg.Z],vs:t_,fs:tb,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:function(t){let{shadowEnabled:e=!0,project:i}=t;if(!e||!i||!t.shadowMatrices||!t.shadowMatrices.length)return{drawShadowMap:!1,useShadowMap:!1,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};let r=tg.Z.getUniforms(i),n=tP({viewport:i.viewport,center:r.center}),s=[],o=tS({shadowMatrices:t.shadowMatrices,viewport:i.viewport}).slice();for(let e=0;e<t.shadowMatrices.length;e++){let t=o[e],a=t.clone().translate(new tn.P(i.viewport.center).negate());r.coordinateSystem===tf.COORDINATE_SYSTEM.LNGLAT&&r.projectionMode===tf.zG.WEB_MERCATOR?(o[e]=a,s[e]=n):(o[e]=t.clone().multiplyRight(tC),s[e]=a.transform(n))}let a={drawShadowMap:!!t.drawToShadowMap,useShadowMap:!!t.shadowMaps&&t.shadowMaps.length>0,color:t.shadowColor||tM,lightId:t.shadowLightId||0,lightCount:t.shadowMatrices.length,shadow_uShadowMap0:t.dummyShadowMap,shadow_uShadowMap1:t.dummyShadowMap};for(let t=0;t<o.length;t++)a[`viewProjectionMatrix${t}`]=o[t],a[`projectCenter${t}`]=s[t];for(let e=0;e<2;e++)a[`shadow_uShadowMap${e}`]=t.shadowMaps&&t.shadowMaps[e]||t.dummyShadowMap;return a},uniformTypes:{drawShadowMap:"f32",useShadowMap:"f32",color:"vec4<f32>",lightId:"i32",lightCount:"f32",viewProjectionMatrix0:"mat4x4<f32>",viewProjectionMatrix1:"mat4x4<f32>",projectCenter0:"vec4<f32>",projectCenter1:"vec4<f32>"}};let tE={color:[255,255,255],intensity:1},tk=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],tR=[0,0,0,200/255];class tL{constructor(t={}){this.id="lighting-effect",this.shadowColor=tR,this.shadow=!1,this.directionalLights=[],this.pointLights=[],this.shadowPasses=[],this.dummyShadowMap=null,this.setProps(t)}setup(t){this.context=t;let{device:e,deck:i}=t;this.shadow&&!this.dummyShadowMap&&(this._createShadowPasses(e),i._addDefaultShaderModule(tx),this.dummyShadowMap=e.createTexture({width:1,height:1}))}setProps(t){for(let e in this.ambientLight=void 0,this.directionalLights=[],this.pointLights=[],t){let i=t[e];switch(i.type){case"ambient":this.ambientLight=i;break;case"directional":this.directionalLights.push(i);break;case"point":this.pointLights.push(i)}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(t=>t.shadow),this.context&&this.setup(this.context),this.props=t}preRender({layers:t,layerFilter:e,viewports:i,onViewportActive:r,views:n}){if(this.shadow){this.shadowMatrices=this._calculateMatrices();for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:t,layerFilter:e,viewports:i,onViewportActive:r,views:n,shaderModuleProps:{shadow:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}}})}}getShaderModuleProps(t,e){let i=this.shadow?{project:e.project,shadowMaps:this.shadowPasses.map(t=>t.getShadowMap()),dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{},r={enabled:!0,ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(e=>e.getProjectedLight({layer:t})),pointLights:this.pointLights.map(e=>e.getProjectedLight({layer:t}))},n=t.props.material;return{shadow:i,lighting:r,phongMaterial:n,gouraudMaterial:n}}cleanup(t){for(let t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.dummyShadowMap&&(this.dummyShadowMap.destroy(),this.dummyShadowMap=null,t.deck._removeDefaultShaderModule(tx))}_calculateMatrices(){let t=[];for(let e of this.directionalLights){let i=new th.y().lookAt({eye:new tn.P(e.direction).negate()});t.push(i)}return t}_createShadowPasses(t){for(let e=0;e<this.directionalLights.length;e++){let i=new tp(t);this.shadowPasses[e]=i}}_applyDefaultLights(){let{ambientLight:t,pointLights:e,directionalLights:i}=this;t||0!==e.length||0!==i.length||(this.ambientLight=new tr(tE),this.directionalLights.push(new tl(tk[0]),new tl(tk[1])))}}let tT=new tL;class tA{constructor(t){this._resolvedEffects=[],this._defaultEffects=[],this.effects=[],this._context=t,this._needsRedraw="Initial render",this._setEffects([])}addDefaultEffect(t){let e=this._defaultEffects;if(!e.find(e=>e.id===t.id)){let i=e.findIndex(e=>(e.order??1/0)-(t.order??1/0)>0);i<0?e.push(t):e.splice(i,0,t),t.setup(this._context),this._setEffects(this.effects)}}setProps(t){"effects"in t&&!(0,b.v)(t.effects,this.effects,1)&&this._setEffects(t.effects)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}getEffects(){return this._resolvedEffects}_setEffects(t){let e={};for(let t of this.effects)e[t.id]=t;let i=[];for(let r of t){let t=e[r.id],n=r;t&&t!==r?t.setProps?(t.setProps(r.props),n=t):t.cleanup(this._context):t||r.setup(this._context),i.push(n),delete e[r.id]}for(let t in e)e[t].cleanup(this._context);this.effects=i,this._resolvedEffects=i.concat(this._defaultEffects),t.some(t=>t instanceof tL)||this._resolvedEffects.push(tT),this._needsRedraw="effects changed"}finalize(){for(let t of this._resolvedEffects)t.cleanup(this._context);this.effects.length=0,this._resolvedEffects.length=0,this._defaultEffects.length=0}}class tO extends tu{shouldDrawLayer(t){let{operation:e}=t.props;return e.includes("draw")||e.includes("terrain")}}let tz={blendColorOperation:"add",blendColorSrcFactor:"one",blendColorDstFactor:"zero",blendAlphaOperation:"add",blendAlphaSrcFactor:"constant-alpha",blendAlphaDstFactor:"zero"};class tD extends tu{constructor(){super(...arguments),this._colorEncoderState=null}render(t){return"pickingFBO"in t?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:e,views:i,viewports:r,onViewportActive:n,pickingFBO:s,deviceRect:{x:o,y:a,width:l,height:h},cullRect:d,effects:u,pass:c="picking",pickZ:p,shaderModuleProps:f}){this.pickZ=p;let g=this._resetColorEncoder(p),m=super.render({target:s,layers:t,layerFilter:e,views:i,viewports:r,onViewportActive:n,cullRect:d,effects:u?.filter(t=>t.useInPicking),pass:c,isPicking:!0,shaderModuleProps:f,clearColor:[0,0,0,0],colorMask:15,scissorRect:[o,a,l,h]});return this._colorEncoderState=null,{decodePickingColor:g&&tI.bind(null,g),stats:m}}shouldDrawLayer(t){let{pickable:e,operation:i}=t.props;return e&&i.includes("draw")||i.includes("terrain")||i.includes("mask")}getShaderModuleProps(t,e,i){return{picking:{isActive:1,isAttribute:this.pickZ},lighting:{enabled:!1}}}getLayerParameters(t,e,i){let r={...t.props.parameters},{pickable:n,operation:s}=t.props;return!this._colorEncoderState||s.includes("terrain")?r.blend=!1:n&&s.includes("draw")&&(Object.assign(r,tz),r.blend=!0,r.blendColor=function(t,e,i){let r;let{byLayer:n,byAlpha:s}=t,o=n.get(e);return o?(o.viewports.push(i),r=o.a):(r=n.size+1)<=255?(o={a:r,layer:e,viewports:[i]},n.set(e,o),s[r]=o):(c.Z.warn("Too many pickable layers, only picking the first 255")(),r=0),[0,0,0,r/255]}(this._colorEncoderState,t,i)),r}_resetColorEncoder(t){return this._colorEncoderState=t?null:{byLayer:new Map,byAlpha:[]},this._colorEncoderState}}function tI(t,e){let i=t.byAlpha[e[3]];return i&&{pickedLayer:i.layer,pickedViewports:i.viewports,pickedObjectIndex:i.layer.decodePickingColor(e)}}class tV{constructor(t){this.device=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new tO(t),this.pickLayersPass=new tD(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){if(!t.viewports.length)return;let e=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass,i={layerFilter:this.layerFilter,isPicking:this.drawPickingColors,...t};i.effects&&this._preRender(i.effects,i);let r=this.lastPostProcessEffect?this.renderBuffers[0]:i.target;this.lastPostProcessEffect&&(i.clearColor=[0,0,0,0],i.clearCanvas=!0);let n=e.render({...i,target:r});i.effects&&this._postRender(i.effects,i),this.renderCount++,(0,p.Z)("deckRenderer.renderLayers",this,n,t)}needsRedraw(t={clearRedrawFlags:!1}){let e=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),e}finalize(){let{renderBuffers:t}=this;for(let e of t)e.delete();t.length=0}_preRender(t,e){for(let i of(this.lastPostProcessEffect=null,e.preRenderStats=e.preRenderStats||{},t))e.preRenderStats[i.id]=i.preRender(e),i.postRender&&(this.lastPostProcessEffect=i.id);this.lastPostProcessEffect&&this._resizeRenderBuffers()}_resizeRenderBuffers(){let{renderBuffers:t}=this,e=this.device.canvasContext.getDrawingBufferSize();for(let i of(0===t.length&&[0,1].map(e=>{let i=this.device.createTexture({sampler:{minFilter:"linear",magFilter:"linear"}});t.push(this.device.createFramebuffer({id:`deck-renderbuffer-${e}`,colorAttachments:[i]}))}),t))i.resize(e)}_postRender(t,e){let{renderBuffers:i}=this,r={...e,inputBuffer:i[0],swapBuffer:i[1]};for(let n of t)if(n.postRender){r.target=n.id===this.lastPostProcessEffect?e.target:void 0;let t=n.postRender(r);r.inputBuffer=t,r.swapBuffer=t===i[0]?i[1]:i[0]}}}let tj={pickedColor:null,pickedObjectIndex:-1};function tF({pickInfo:t,viewports:e,pixelRatio:i,x:r,y:n,z:s}){let o,a=e[0];if(e.length>1&&(a=function(t,e){for(let i=t.length-1;i>=0;i--){let r=t[i];if(r.containsPixel(e))return r}return t[0]}(t?.pickedViewports||e,{x:r,y:n})),a){let t=[r-a.x,n-a.y];void 0!==s&&(t[2]=s),o=a.unproject(t)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:r,y:n,pixel:[r,n],coordinate:o,devicePixel:t&&"pickedX"in t?[t.pickedX,t.pickedY]:void 0,pixelRatio:i}}function tN({layer:t,info:e,mode:i}){for(;t&&e;){let r=e.layer||null;e.sourceLayer=r,e.layer=t,e=t.getPickingInfo({info:e,mode:i,sourceLayer:r}),t=t.parent}return e}class tZ{constructor(t){this._pickable=!0,this.device=t,this.pickLayersPass=new tD(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.destroy(),this.depthFBO&&this.depthFBO.destroy()}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:e,layers:i,viewports:r},n=this.lastPickedInfo.info){let s=n&&n.layer&&n.layer.id,o=n&&n.viewport&&n.viewport.id,a=s?i.find(t=>t.id===s):null,l=o&&r.find(t=>t.id===o)||r[0],h=l&&l.unproject([t-l.x,e-l.y]);return{...n,x:t,y:e,viewport:l,coordinate:h,layer:a}}_resizeBuffer(){if(!this.pickingFBO&&(this.pickingFBO=this.device.createFramebuffer({colorAttachments:["rgba8unorm"],depthStencilAttachment:"depth16unorm"}),this.device.isTextureFormatRenderable("rgba32float"))){let t=this.device.createFramebuffer({colorAttachments:["rgba32float"],depthStencilAttachment:"depth16unorm"});this.depthFBO=t}let{canvas:t}=this.device.getDefaultCanvasContext();this.pickingFBO?.resize({width:t.width,height:t.height}),this.depthFBO?.resize({width:t.width,height:t.height})}_getPickable(t){if(!1===this._pickable)return null;let e=t.filter(t=>this.pickLayersPass.shouldDrawLayer(t)&&!t.isComposite);return e.length?e:null}_pickClosestObject({layers:t,views:e,viewports:i,x:r,y:n,radius:s=0,depth:o=1,mode:a="query",unproject3D:l,onViewportActive:h,effects:d}){let u;let p=this.device.canvasContext.cssToDeviceRatio(),f=this._getPickable(t);if(!f||0===i.length)return{result:[],emptyInfo:tF({viewports:i,x:r,y:n,pixelRatio:p})};this._resizeBuffer();let g=this.device.canvasContext.cssToDevicePixels([r,n],!0),m=[g.x+Math.floor(g.width/2),g.y+Math.floor(g.height/2)],v=Math.round(s*p),{width:w,height:_}=this.pickingFBO,y=this._getPickingRect({deviceX:m[0],deviceY:m[1],deviceRadius:v,deviceWidth:w,deviceHeight:_}),b={x:r-s,y:n-s,width:2*s+1,height:2*s+1},P=[],S=new Set;for(let t=0;t<o;t++){let s,g;if((s=y?function({pickedColors:t,decodePickingColor:e,deviceX:i,deviceY:r,deviceRadius:n,deviceRect:s}){let{x:o,y:a,width:l,height:h}=s,d=n*n,u=-1,p=0;for(let e=0;e<h;e++){let n=e+a-r,s=n*n;if(s>d)p+=4*l;else for(let e=0;e<l;e++){if(t[p+3]-1>=0){let t=e+o-i,r=t*t+s;r<=d&&(d=r,u=p)}p+=4}}if(u>=0){let i=t.slice(u,u+4),r=e(i);if(r){let t=Math.floor(u/4/l),e=u/4-t*l;return{...r,pickedColor:i,pickedX:o+e,pickedY:a+t}}c.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}return tj}({...this._drawAndSample({layers:f,views:e,viewports:i,onViewportActive:h,deviceRect:y,cullRect:b,effects:d,pass:`picking:${a}`}),deviceX:m[0],deviceY:m[1],deviceRadius:v,deviceRect:y}):{pickedColor:null,pickedObjectIndex:-1}).pickedLayer&&l&&this.depthFBO){let{pickedColors:t}=this._drawAndSample({layers:[s.pickedLayer],views:e,viewports:i,onViewportActive:h,deviceRect:{x:s.pickedX,y:s.pickedY,width:1,height:1},cullRect:b,effects:d,pass:`picking:${a}:z`},!0);t[3]&&(g=t[0])}for(let e of(s.pickedLayer&&t+1<o&&(S.add(s.pickedLayer),s.pickedLayer.disablePickingIndex(s.pickedObjectIndex)),(u=function(t){let{pickInfo:e,lastPickedInfo:i,mode:r,layers:n}=t,{pickedColor:s,pickedLayer:o,pickedObjectIndex:a}=e,l=o?[o]:[];if("hover"===r){let t=i.index,e=i.layerId,r=o?o.props.id:null;if(r!==e||a!==t){if(r!==e){let t=n.find(t=>t.props.id===e);t&&l.unshift(t)}i.layerId=r,i.index=a,i.info=null}}let h=tF(t),d=new Map;return d.set(null,h),l.forEach(t=>{let e={...h};t===o&&(e.color=s,e.index=a,e.picked=!0);let n=(e=tN({layer:t,info:e,mode:r})).layer;t===o&&"hover"===r&&(i.info=e),d.set(n.id,e),"hover"===r&&n.updateAutoHighlight(e)}),d}({pickInfo:s,lastPickedInfo:this.lastPickedInfo,mode:a,layers:f,viewports:i,x:r,y:n,z:g,pixelRatio:p})).values()))e.layer&&P.push(e);if(!s.pickedColor)break}for(let t of S)t.restorePickingColors();return{result:P,emptyInfo:u.get(null)}}_pickVisibleObjects({layers:t,views:e,viewports:i,x:r,y:n,width:s=1,height:o=1,mode:a="query",maxObjects:l=null,onViewportActive:h,effects:d}){let u=this._getPickable(t);if(!u||0===i.length)return[];this._resizeBuffer();let p=this.device.canvasContext.cssToDeviceRatio(),f=this.device.canvasContext.cssToDevicePixels([r,n],!0),g=f.x,m=f.y+f.height,v=this.device.canvasContext.cssToDevicePixels([r+s,n+o],!0),w=v.x+v.width,_=v.y,y=function({pickedColors:t,decodePickingColor:e}){let i=new Map;if(t){for(let r=0;r<t.length;r+=4)if(t[r+3]-1>=0){let n=t.slice(r,r+4),s=n.join(",");if(!i.has(s)){let t=e(n);t?i.set(s,{...t,color:n}):c.Z.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(i.values())}(this._drawAndSample({layers:u,views:e,viewports:i,onViewportActive:h,deviceRect:{x:g,y:_,width:w-g,height:m-_},cullRect:{x:r,y:n,width:s,height:o},effects:d,pass:`picking:${a}`})),b=new Map,P=[],S=Number.isFinite(l);for(let t=0;t<y.length&&(!S||!(P.length>=l));t++){let e=y[t],i={color:e.pickedColor,layer:null,index:e.pickedObjectIndex,picked:!0,x:r,y:n,pixelRatio:p},s=(i=tN({layer:e.pickedLayer,info:i,mode:a})).layer.id;b.has(s)||b.set(s,new Set);let o=b.get(s),l=i.object??i.index;o.has(l)||(o.add(l),P.push(i))}return P}_drawAndSample({layers:t,views:e,viewports:i,onViewportActive:r,deviceRect:n,cullRect:s,effects:o,pass:a},l=!1){let h=l?this.depthFBO:this.pickingFBO,d={layers:t,layerFilter:this.layerFilter,views:e,viewports:i,onViewportActive:r,pickingFBO:h,deviceRect:n,cullRect:s,effects:o,pass:a,pickZ:l,preRenderStats:{},isPicking:!0};for(let t of o)t.useInPicking&&(d.preRenderStats[t.id]=t.preRender(d));let{decodePickingColor:u}=this.pickLayersPass.render(d),{x:c,y:p,width:f,height:g}=n,m=new(l?Float32Array:Uint8Array)(f*g*4);return this.device.readPixelsToArrayWebGL(h,{sourceX:c,sourceY:p,sourceWidth:f,sourceHeight:g,target:m}),{pickedColors:m,decodePickingColor:u}}_getPickingRect({deviceX:t,deviceY:e,deviceRadius:i,deviceWidth:r,deviceHeight:n}){let s=Math.max(0,t-i),o=Math.max(0,e-i),a=Math.min(r,t+i+1)-s,l=Math.min(n,e+i+1)-o;return a<=0||l<=0?null:{x:s,y:o,width:a,height:l}}}let tB={"top-left":{top:0,left:0},"top-right":{top:0,right:0},"bottom-left":{bottom:0,left:0},"bottom-right":{bottom:0,right:0},fill:{top:0,left:0,bottom:0,right:0}},tU="__root";class tW{constructor({deck:t,parentElement:e}){this.defaultWidgets=[],this.widgets=[],this.resolvedWidgets=[],this.containers={},this.lastViewports={},this.deck=t,this.parentElement=e}getWidgets(){return this.resolvedWidgets}setProps(t){t.widgets&&!(0,b.v)(t.widgets,this.widgets,1)&&this._setWidgets(t.widgets)}finalize(){for(let t of this.getWidgets())this._remove(t);for(let t in this.defaultWidgets.length=0,this.resolvedWidgets.length=0,this.containers)this.containers[t].remove()}addDefault(t){this.defaultWidgets.find(e=>e.id===t.id)||(this._add(t),this.defaultWidgets.push(t),this._setWidgets(this.widgets))}_setWidgets(t){let e={};for(let t of this.resolvedWidgets)e[t.id]=t;for(let t of(this.resolvedWidgets.length=0,this.defaultWidgets))e[t.id]=null,this.resolvedWidgets.push(t);for(let i of t){let t=e[i.id];t?t.viewId!==i.viewId||t.placement!==i.placement?(this._remove(t),this._add(i)):i!==t&&(t.setProps(i.props),i=t):this._add(i),e[i.id]=null,this.resolvedWidgets.push(i)}for(let t in e){let i=e[t];i&&this._remove(i)}this.widgets=t}_add(t){let{viewId:e=null,placement:i="top-left"}=t,r=t.onAdd({deck:this.deck,viewId:e});r&&this._getContainer(e,i).append(r),t._element=r}_remove(t){t.onRemove?.(),t._element&&t._element.remove(),t._element=void 0}_getContainer(t,e){let i=t||tU,r=this.containers[i];r||((r=document.createElement("div")).style.pointerEvents="none",r.style.position="absolute",r.style.overflow="hidden",this.parentElement?.append(r),this.containers[i]=r);let n=r.querySelector(`.${e}`);return n||((n=document.createElement("div")).className=e,n.style.position="absolute",n.style.zIndex="2",Object.assign(n.style,tB[e]),r.append(n)),n}_updateContainers(){let t=this.deck.width,e=this.deck.height;for(let i in this.containers){let r=this.lastViewports[i]||null,n=i===tU||r,s=this.containers[i];n?(s.style.display="block",s.style.left=`${r?r.x:0}px`,s.style.top=`${r?r.y:0}px`,s.style.width=`${r?r.width:t}px`,s.style.height=`${r?r.height:e}px`):s.style.display="none"}}onRedraw({viewports:t,layers:e}){let i=t.reduce((t,e)=>(t[e.id]=e,t),{});for(let r of this.getWidgets()){let{viewId:n}=r;if(n){let t=i[n];t&&(r.onViewportChange&&r.onViewportChange(t),r.onRedraw?.({viewports:[t],layers:e}))}else{if(r.onViewportChange)for(let e of t)r.onViewportChange(e);r.onRedraw?.({viewports:t,layers:e})}}this.lastViewports=i,this._updateContainers()}onHover(t,e){for(let i of this.getWidgets()){let{viewId:r}=i;r&&r!==t.viewport?.id||i.onHover?.(t,e)}}onEvent(t,e){let i=tf.Hu[e.type];if(i)for(let r of this.getWidgets()){let{viewId:n}=r;n&&n!==t.viewport?.id||r[i]?.(t,e)}}}let tG={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class t${constructor(){this.id="default-tooltip",this.placement="fill",this.props={},this.isVisible=!1}onAdd({deck:t}){let e=document.createElement("div");return e.className="deck-tooltip",Object.assign(e.style,tG),this.deck=t,this.element=e,e}onRemove(){this.deck=void 0,this.element=void 0}setProps(){}onViewportChange(t){this.isVisible&&t.id===this.lastViewport?.id&&t!==this.lastViewport&&this.setTooltip(null)}onHover(t){let{deck:e}=this,i=e&&e.props.getTooltip;if(!i)return;let r=i(t);this.lastViewport=t.viewport,this.setTooltip(r,t.x,t.y)}setTooltip(t,e,i){let r=this.element;if(r){if("string"==typeof t)r.innerText=t;else if(t)t.text&&(r.innerText=t.text),t.html&&(r.innerHTML=t.html),t.className&&(r.className=t.className);else{this.isVisible=!1,r.style.display="none";return}this.isVisible=!0,r.style.display="block",r.style.transform=`translate(${e}px, ${i}px)`,t&&"object"==typeof t&&"style"in t&&Object.assign(r.style,t.style)}}}var tH=i(43036),tq=i(46324),tX=i(47478),tY={dataType:null,batchType:null,id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:function(t){let e=t[0],i=t[t.length-1];return"{"===e&&"}"===i||"["===e&&"]"===i},parseTextSync:JSON.parse};let tK=function(){let t="9.1.2",e=globalThis.deck&&globalThis.deck.VERSION;if(e&&e!==t)throw Error(`deck.gl - multiple versions detected: ${e} vs ${t}`);return e||(c.Z.log(1,`deck.gl ${t}`)(),globalThis.deck={...globalThis.deck,VERSION:t,version:t,log:c.Z,_registerLoggers:p.z},(0,tq.fh)([tY,[tX.S,{imagebitmap:{premultiplyAlpha:"none"}}]])),t}();var tJ=i(20803),tQ=i(51150),t0=i(75501),t1=i(94576);let t2=(0,tJ.j)()&&"undefined"!=typeof document,t5=()=>t2&&"complete"===document.readyState,t4="No matching device found. Ensure `@luma.gl/webgl` and/or `@luma.gl/webgpu` modules are imported.";class t3{static defaultProps={...tQ.AS.defaultProps,type:"best-available",adapters:void 0,waitForPageLoad:!0};static pageLoaded=(t5()||"undefined"==typeof window?Promise.resolve():new Promise(t=>{window.addEventListener("load",()=>t())})).then(()=>{t1.c.probe(2,"DOM is loaded")()});stats=t0.l;log=t1.c;VERSION="9.1.3";spector;preregisteredAdapters=new Map;constructor(){if(globalThis.luma){if(globalThis.luma.VERSION!==this.VERSION)throw t1.c.error(`Found luma.gl ${globalThis.luma.VERSION} while initialzing ${this.VERSION}`)(),t1.c.error("'yarn why @luma.gl/core' can help identify the source of the conflict")(),Error("luma.gl - multiple versions detected: see console log");t1.c.error("This version of luma.gl has already been initialized")()}t1.c.log(1,`${this.VERSION} - set luma.log.level=1 (or higher) to trace rendering`)(),globalThis.luma=this}registerAdapters(t){for(let e of t)this.preregisteredAdapters.set(e.type,e)}getSupportedAdapters(t=[]){return Array.from(this.getAdapterMap(t)).map(([,t])=>t).filter(t=>t.isSupported?.()).map(t=>t.type)}getBestAvailableAdapter(t=[]){let e=this.getAdapterMap(t);return e.get("webgpu")?.isSupported?.()?"webgpu":e.get("webgl")?.isSupported?.()?"webgl":null}setDefaultDeviceProps(t){Object.assign(t3.defaultProps,t)}async createDevice(t={}){(t={...t3.defaultProps,...t}).waitForPageLoad&&await t3.pageLoaded;let e=this.getAdapterMap(t.adapters),i=t.type||"";"best-available"===i&&(i=this.getBestAvailableAdapter(t.adapters)||i);let r=(this.getAdapterMap(t.adapters)||e).get(i),n=await r?.create?.(t);if(n)return n;throw Error(t4)}async attachDevice(t){let e=this.getAdapterMap(t.adapters),i="";t.handle instanceof WebGL2RenderingContext&&(i="webgl"),t.createCanvasContext&&await t3.pageLoaded,null===t.handle&&(i="unknown");let r=e.get(i),n=await r?.attach?.(null);if(n)return n;throw Error(t4)}enforceWebGL2(t=!0,e=[]){let i=this.getAdapterMap(e).get("webgl");i||t1.c.warn("enforceWebGL2: webgl adapter not found")(),i?.enforceWebGL2?.(t)}getAdapterMap(t=[]){let e=new Map(this.preregisteredAdapters);for(let i of t)e.set(i.type,i);return e}registerDevices(t){for(let e of(t1.c.warn("luma.registerDevices() is deprecated, use luma.registerAdapters() instead"),t)){let t=e.adapter;t&&this.preregisteredAdapters.set(t.type,t)}}}let t6=new t3;class t8{}var t9=i(35058);let t7={WEBGL_depth_texture:{UNSIGNED_INT_24_8_WEBGL:34042},OES_element_index_uint:{},OES_texture_float:{},OES_texture_half_float:{HALF_FLOAT_OES:5131},EXT_color_buffer_float:{},OES_standard_derivatives:{FRAGMENT_SHADER_DERIVATIVE_HINT_OES:35723},EXT_frag_depth:{},EXT_blend_minmax:{MIN_EXT:32775,MAX_EXT:32776},EXT_shader_texture_lod:{}},et=t=>({drawBuffersWEBGL:e=>t.drawBuffers(e),COLOR_ATTACHMENT0_WEBGL:36064,COLOR_ATTACHMENT1_WEBGL:36065,COLOR_ATTACHMENT2_WEBGL:36066,COLOR_ATTACHMENT3_WEBGL:36067}),ee=t=>({VERTEX_ARRAY_BINDING_OES:34229,createVertexArrayOES:()=>t.createVertexArray(),deleteVertexArrayOES:e=>t.deleteVertexArray(e),isVertexArrayOES:e=>t.isVertexArray(e),bindVertexArrayOES:e=>t.bindVertexArray(e)}),ei=t=>({VERTEX_ATTRIB_ARRAY_DIVISOR_ANGLE:35070,drawArraysInstancedANGLE:(...e)=>t.drawArraysInstanced(...e),drawElementsInstancedANGLE:(...e)=>t.drawElementsInstanced(...e),vertexAttribDivisorANGLE:(...e)=>t.vertexAttribDivisor(...e)});var er=i(1827),en=i(95457);class es extends t8{type="webgl";constructor(){super(),tQ.AS.defaultProps={...tQ.AS.defaultProps,...er.rq},t9.j.adapter=this}isSupported(){return"undefined"!=typeof WebGL2RenderingContext}enforceWebGL2(t){!function(t=!0){let e=HTMLCanvasElement.prototype;if(!t&&e.originalGetContext){e.getContext=e.originalGetContext,e.originalGetContext=void 0;return}e.originalGetContext=e.getContext,e.getContext=function(t,e){if("webgl"===t||"experimental-webgl"===t){let t=this.originalGetContext("webgl2",e);return t instanceof HTMLElement&&function(t){t.getExtension("EXT_color_buffer_float");let e={...t7,WEBGL_disjoint_timer_query:t.getExtension("EXT_disjoint_timer_query_webgl2"),WEBGL_draw_buffers:et(t),OES_vertex_array_object:ee(t),ANGLE_instanced_arrays:ei(t)},i=t.getExtension;t.getExtension=function(r){return i.call(t,r)||(r in e?e[r]:null)};let r=t.getSupportedExtensions;t.getSupportedExtensions=function(){let i=r.apply(t)||[];return i?.concat(Object.keys(e))}}(t),t}return this.originalGetContext(t,e)}}(t)}async attach(t){if(t instanceof t9.j)return t;if(t?.device instanceof tQ.AS)return t.device;if(!("undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||t&&Number.isFinite(t._version)))throw Error("Invalid WebGL2RenderingContext");return new t9.j({_handle:t,createCanvasContext:{canvas:t.canvas,autoResize:!1}})}async create(t={}){t1.c.groupCollapsed(1,"WebGLDevice created")();let e=[];for(let i of((t.debugWebGL||t.debug)&&e.push((0,en.s)()),t.debugSpectorJS&&e.push((0,er.J$)(t)),await Promise.allSettled(e)))"rejected"===i.status&&t1.c.error(`Failed to initialize debug libraries ${i.reason}`)();let i=new t9.j(t),r=`\
${i._reused?"Reusing":"Created"} device with WebGL2 ${i.debug?"debug ":""}context: \
${i.info.vendor}, ${i.info.renderer} for canvas: ${i.canvasContext.id}`;return t1.c.probe(1,r)(),t1.c.table(1,i.info)(),t1.c.groupEnd(1)(),i}}let eo=new es,ea=0,el={device:null,onAddHTML:()=>"",onInitialize:async()=>null,onRender:()=>{},onFinalize:()=>{},onError:t=>console.error(t),stats:t6.stats.get(`animation-loop-${ea++}`),useDevicePixels:!0,autoResizeViewport:!1,autoResizeDrawingBuffer:!1};class eh{device=null;canvas=null;props;animationProps=null;timeline=null;stats;cpuTime;gpuTime;frameRate;display;needsRedraw="initialized";_initialized=!1;_running=!1;_animationFrameId=null;_nextFramePromise=null;_resolveNextFrame=null;_cpuStartTime=0;_error=null;constructor(t){if(this.props={...el,...t},!(t=this.props).device)throw Error("No device provided");let{useDevicePixels:e=!0}=this.props;this.stats=t.stats||new g.jk({id:"animation-loop-stats"}),this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this.setProps({autoResizeViewport:t.autoResizeViewport,autoResizeDrawingBuffer:t.autoResizeDrawingBuffer,useDevicePixels:e}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}destroy(){this.stop(),this._setDisplay(null)}delete(){this.destroy()}setError(t){if(this.props.onError(t),this._error=Error(),this.device?.canvasContext?.canvas instanceof HTMLCanvasElement){let e=document.createElement("h1");e.innerHTML=t.message,e.style.position="absolute",e.style.top="20%",e.style.left="10px",e.style.color="black",e.style.backgroundColor="red",document.body.appendChild(e)}}setNeedsRedraw(t){return this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.props.autoResizeViewport=t.autoResizeViewport||!1),"autoResizeDrawingBuffer"in t&&(this.props.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer||!1),"useDevicePixels"in t&&(this.props.useDevicePixels=t.useDevicePixels||!1),this}async start(){if(this._running)return this;this._running=!0;try{let t;if(this._initialized||(this._initialized=!0,await this._initDevice(),this._initialize(),await this.props.onInitialize(this._getAnimationProps())),!this._running)return null;return!1!==t&&(this._cancelAnimationFrame(),this._requestAnimationFrame()),this}catch(e){let t=e instanceof Error?e:Error("Unknown error");throw this.props.onError(t),t}}stop(){return this._running&&(this.animationProps&&!this._error&&this.props.onFinalize(this.animationProps),this._cancelAnimationFrame(),this._nextFramePromise=null,this._resolveNextFrame=null,this._running=!1),this}redraw(){return this.device?.isLost||this._error||(this._beginFrameTimers(),this._setupFrame(),this._updateAnimationProps(),this._renderFrame(this._getAnimationProps()),this._clearNeedsRedraw(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endFrameTimers()),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){if(this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.canvas instanceof HTMLCanvasElement)return this.canvas.toDataURL();throw Error("OffscreenCanvas")}_initialize(){this._startEventHandling(),this._initializeAnimationProps(),this._updateAnimationProps(),this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_setDisplay(t){this.display&&(this.display.destroy(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_requestAnimationFrame(){var t;this._running&&(this._animationFrameId=(t=this._animationFrame.bind(this),"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame(t):setTimeout(t,1e3/60)))}_cancelAnimationFrame(){var t;null!==this._animationFrameId&&(t=this._animationFrameId,"undefined"!=typeof window&&window.cancelAnimationFrame?window.cancelAnimationFrame(t):clearTimeout(t),this._animationFrameId=null)}_animationFrame(){this._running&&(this.redraw(),this._requestAnimationFrame())}_renderFrame(t){if(this.display){this.display._renderFrame(t);return}this.props.onRender(this._getAnimationProps()),this.device?.submit()}_clearNeedsRedraw(){this.needsRedraw=!1}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport()}_initializeAnimationProps(){let t=this.device?.canvasContext?.canvas;if(!this.device||!t)throw Error("loop");this.animationProps={animationLoop:this,device:this.device,canvas:t,timeline:this.timeline,useDevicePixels:this.props.useDevicePixels,needsRedraw:!1,width:1,height:1,aspect:1,time:0,startTime:Date.now(),engineTime:0,tick:0,tock:0,_mousePosition:null}}_getAnimationProps(){if(!this.animationProps)throw Error("animationProps");return this.animationProps}_updateAnimationProps(){if(!this.animationProps)return;let{width:t,height:e,aspect:i}=this._getSizeAndAspect();(t!==this.animationProps.width||e!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),i!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=e,this.animationProps.aspect=i,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime}async _initDevice(){if(this.device=await this.props.device,!this.device)throw Error("No device provided");this.canvas=this.device.canvasContext?.canvas||null}_createInfoDiv(){if(this.canvas&&this.props.onAddHTML){let t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";let e=document.createElement("div");e.style.position="absolute",e.style.left="10px",e.style.bottom="10px",e.style.width="300px",e.style.background="white",this.canvas instanceof HTMLCanvasElement&&t.appendChild(this.canvas),t.appendChild(e);let i=this.props.onAddHTML(e);i&&(e.innerHTML=i)}}_getSizeAndAspect(){if(!this.device)return{width:1,height:1,aspect:1};let[t,e]=this.device?.canvasContext?.getPixelSize()||[1,1],i=1,r=this.device?.canvasContext?.canvas;return r&&r.clientHeight?i=r.clientWidth/r.clientHeight:t>0&&e>0&&(i=t/e),{width:t,height:e,aspect:i}}_resizeViewport(){this.props.autoResizeViewport&&this.device.gl&&this.device.gl.viewport(0,0,this.device.gl.drawingBufferWidth,this.device.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.props.autoResizeDrawingBuffer&&this.device?.canvasContext?.resize({useDevicePixels:this.props.useDevicePixels})}_beginFrameTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this.cpuTime.timeStart()}_endFrameTimers(){this.cpuTime.timeEnd()}_startEventHandling(){this.canvas&&(this.canvas.addEventListener("mousemove",this._onMousemove.bind(this)),this.canvas.addEventListener("mouseleave",this._onMouseleave.bind(this)))}_onMousemove(t){t instanceof MouseEvent&&(this._getAnimationProps()._mousePosition=[t.offsetX,t.offsetY])}_onMouseleave(t){this._getAnimationProps()._mousePosition=null}}var ed=i(64979);function eu(){}let ec={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,parameters:{},parent:null,device:null,deviceProps:{type:"webgl"},gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,widgets:[],onDeviceInitialized:eu,onWebGLInitialized:eu,onResize:eu,onViewStateChange:eu,onInteractionStateChange:eu,onBeforeRender:eu,onAfterRender:eu,onLoad:eu,onError:t=>c.Z.error(t.message,t.cause)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:({isDragging:t})=>t?"grabbing":"grab",getTooltip:null,debug:!1,drawPickingColors:!1};class ep{constructor(t){this.width=0,this.height=0,this.userData={},this.device=null,this.canvas=null,this.viewManager=null,this.layerManager=null,this.effectManager=null,this.deckRenderer=null,this.deckPicker=null,this.eventManager=null,this.widgetManager=null,this.tooltip=null,this.animationLoop=null,this.cursorState={isHovering:!1,isDragging:!1},this.stats=new g.jk({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this._lastPointerDownInfo=null,this._onPointerMove=t=>{let{_pickRequest:e}=this;if("pointerleave"===t.type)e.x=-1,e.y=-1,e.radius=0;else{if(t.leftButton||t.rightButton)return;let i=t.offsetCenter;if(!i)return;e.x=i.x,e.y=i.y,e.radius=this.props.pickingRadius}this.layerManager&&(this.layerManager.context.mousePosition={x:e.x,y:e.y}),e.event=t},this._onEvent=t=>{let e=tf.Hu[t.type],i=t.offsetCenter;if(!e||!i||!this.layerManager)return;let r=this.layerManager.getLayers(),n=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:r,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=n,o=s&&(s[e]||s.props[e]),a=this.props[e],l=!1;o&&(l=o.call(s,n,t)),l||(a?.(n,t),this.widgetManager.onEvent(n,t))},this._onPointerDown=t=>{let e=t.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:e.x,y:e.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo},this.props={...ec,...t},(t=this.props).viewState&&t.initialViewState&&c.Z.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),this.viewState=this.props.initialViewState,t.device&&(this.device=t.device);let e=this.device;!e&&t.gl&&(t.gl instanceof WebGLRenderingContext&&c.Z.error("WebGL1 context not supported.")(),e=eo.attach(t.gl)),e||(e=t6.createDevice({type:"best-available",_reuseDevices:!0,adapters:[eo],...t.deviceProps,createCanvasContext:{canvas:this._createCanvas(t),useDevicePixels:this.props.useDevicePixels,autoResize:!1}})),this.animationLoop=this._createAnimationLoop(e,t),this.setProps(t),t._typedArrayManagerProps&&tH.Z.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){this.animationLoop?.stop(),this.animationLoop?.destroy(),this.animationLoop=null,this._lastPointerDownInfo=null,this.layerManager?.finalize(),this.layerManager=null,this.viewManager?.finalize(),this.viewManager=null,this.effectManager?.finalize(),this.effectManager=null,this.deckRenderer?.finalize(),this.deckRenderer=null,this.deckPicker?.finalize(),this.deckPicker=null,this.eventManager?.destroy(),this.eventManager=null,this.widgetManager?.finalize(),this.widgetManager=null,this.props.canvas||this.props.device||this.props.gl||!this.canvas||(this.canvas.parentElement?.removeChild(this.canvas),this.canvas=null)}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&c.Z.removed("onLayerHover","onHover")(),"onLayerClick"in t&&c.Z.removed("onLayerClick","onClick")(),t.initialViewState&&!(0,b.v)(this.props.initialViewState,t.initialViewState,3)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);let e=Object.create(this.props);Object.assign(e,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop?.setProps(e),this.layerManager&&(this.viewManager.setProps(e),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(e),this.effectManager.setProps(e),this.deckRenderer.setProps(e),this.deckPicker.setProps(e),this.widgetManager.setProps(e)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let e=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);let i=this.viewManager.needsRedraw(t),r=this.layerManager.needsRedraw(t),n=this.effectManager.needsRedraw(t),s=this.deckRenderer.needsRedraw(t);return e||i||r||n||s}redraw(t){if(!this.layerManager)return;let e=this.needsRedraw({clearRedrawFlags:!0});(e=t||e)&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(e):this._drawLayers(e))}get isInitialized(){return null!==this.viewManager}getViews(){return(0,D.Z)(this.viewManager),this.viewManager.views}getViewports(t){return(0,D.Z)(this.viewManager),this.viewManager.getViewports(t)}getCanvas(){return this.canvas}pickObject(t){let e=this._pick("pickObject","pickObject Time",t).result;return e.length?e[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,e=!1){for(let i in t)this.layerManager.resourceManager.add({resourceId:i,data:t[i],forceUpdate:e})}_removeResources(t){for(let e of t)this.layerManager.resourceManager.remove(e)}_addDefaultEffect(t){this.effectManager.addDefaultEffect(t)}_addDefaultShaderModule(t){this.layerManager.addDefaultShaderModule(t)}_removeDefaultShaderModule(t){this.layerManager?.removeDefaultShaderModule(t)}_pick(t,e,i){(0,D.Z)(this.deckPicker);let{stats:r}=this;r.get("Pick Count").incrementCount(),r.get(e).timeStart();let n=this.deckPicker[t]({layers:this.layerManager.getLayers(i),views:this.viewManager.getViews(),viewports:this.getViewports(i),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...i});return r.get(e).timeEnd(),n}_createCanvas(t){let e=t.canvas;return"string"==typeof e&&(e=document.getElementById(e),(0,D.Z)(e)),e||((e=document.createElement("canvas")).id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(e)),Object.assign(e.style,t.style),e}_setCanvasSize(t){if(!this.canvas)return;let{width:e,height:i}=t;if(e||0===e){let t=Number.isFinite(e)?`${e}px`:e;this.canvas.style.width=t}if(i||0===i){let e=Number.isFinite(i)?`${i}px`:i;this.canvas.style.position=t.style?.position||"absolute",this.canvas.style.height=e}}_updateCanvasSize(){let{canvas:t}=this;if(!t)return;let e=t.clientWidth??t.width,i=t.clientHeight??t.height;(e!==this.width||i!==this.height)&&(this.width=e,this.height=i,this.viewManager?.setProps({width:e,height:i}),this.layerManager?.activateViewport(this.getViewports()[0]),this.props.onResize({width:e,height:i}))}_createAnimationLoop(t,e){let{gl:i,onError:r,useDevicePixels:n}=e;return new eh({device:t,useDevicePixels:n,autoResizeDrawingBuffer:!i,autoResizeViewport:!1,onInitialize:t=>this._setDevice(t.device),onRender:this._onRenderFrame.bind(this),onError:r})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let{views:t}=this.props,e=Array.isArray(t)?t:t?[t]:[new tt({id:"default-view"})];return e.length&&this.props.controller&&(e[0].props.controller=this.props.controller),e}_onContextLost(){let{onError:t}=this.props;this.animationLoop&&t&&t(Error("WebGL context is lost"))}_pickAndCallback(){let{_pickRequest:t}=this;if(t.event){let{result:e,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=e.length>0;let r=i,n=!1;for(let i of e)r=i,n=i.layer?.onHover(i,t.event)||n;n||(this.props.onHover?.(r,t.event),this.widgetManager.onHover(r,t.event)),t.event=null}}_updateCursor(){let t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setDevice(t){if(this.device=t,!this.animationLoop)return;this.canvas||(this.canvas=this.device.canvasContext?.canvas),this.device instanceof t9.j&&this.device.setParametersWebGL({blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onDeviceInitialized(this.device),this.device instanceof t9.j&&this.props.onWebGLInitialized(this.device.gl);let e=new s;for(let t in e.play(),this.animationLoop.attachTimeline(e),this.eventManager=new ed.Qz(this.props.parent||this.canvas,{touchAction:this.props.touchAction,recognizers:Object.keys(tf._i).map(t=>{let[e,i,r,n]=tf._i[t],s=this.props.eventRecognizerOptions?.[t];return{recognizer:new e({...i,...s,event:t}),recognizeWith:r,requestFailure:n}}),events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}}),tf.Hu)this.eventManager.on(t,this._onEvent);this.viewManager=new P({timeline:e,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});let i=this.viewManager.getViewports()[0];this.layerManager=new y(this.device,{deck:this,stats:this.stats,viewport:i,timeline:e}),this.effectManager=new tA({deck:this,device:this.device}),this.deckRenderer=new tV(this.device),this.deckPicker=new tZ(this.device),this.widgetManager=new tW({deck:this,parentElement:this.canvas?.parentElement}),this.widgetManager.addDefault(new t$),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,e){let{device:i,gl:r}=this.layerManager.context;this.props.onBeforeRender({device:i,gl:r});let n={target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",effects:this.effectManager.getEffects(),...e};this.deckRenderer?.renderLayers(n),"screen"===n.pass&&this.widgetManager.onRedraw({viewports:n.viewports,layers:n.layers}),this.props.onAfterRender({device:i,gl:r})}_onRenderFrame(){this._getFrameStats(),this._metricsCounter++%60==0&&(this._getMetrics(),this.stats.reset(),c.Z.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){let e=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:e},!this.props.viewState&&this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){let{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();let e=this.animationLoop.stats;t.get("GPU Time").addTime(e.get("GPU Time").lastTiming),t.get("CPU Time").addTime(e.get("CPU Time").lastTiming)}_getMetrics(){let{metrics:t,stats:e}=this;t.fps=e.get("frameRate").getHz(),t.setPropsTime=e.get("setProps Time").time,t.updateAttributesTime=e.get("Update Attributes").time,t.framesRedrawn=e.get("Redraw Count").count,t.pickTime=e.get("pickObject Time").time+e.get("pickMultipleObjects Time").time+e.get("pickObjects Time").time,t.pickCount=e.get("Pick Count").count,t.gpuTime=e.get("GPU Time").time,t.cpuTime=e.get("CPU Time").time,t.gpuTimePerFrame=e.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=e.get("CPU Time").getAverageTime();let i=t6.stats.get("Memory Usage");t.bufferMemory=i.get("Buffer Memory").count,t.textureMemory=i.get("Texture Memory").count,t.renderbufferMemory=i.get("Renderbuffer Memory").count,t.gpuMemory=i.get("GPU Memory").count}}ep.defaultProps=ec,ep.VERSION=tK;var ef=i(22210),eg=i(43289);class em extends J{applyConstraints(t){let{maxZoom:e,minZoom:i,zoom:r}=t;t.zoom=(0,k.uZ)(r,i,e);let{longitude:n,latitude:s}=t;return(n<-180||n>180)&&(t.longitude=(0,eg.wQ)(n+180,360)-180),t.latitude=(0,k.uZ)(s,-K.LO,K.LO),t}}class ev extends X{constructor(){super(...arguments),this.ControllerState=em,this.transition={transitionDuration:300,transitionInterpolator:new F(["longitude","latitude","zoom"])},this.dragMode="pan"}setProps(t){super.setProps(t),this.dragRotate=!1,this.touchRotate=!1}}class ew extends x{constructor(t={}){super(t)}getViewportType(t){return t.zoom>12?E.Z:ef.Z}get ControllerType(){return ev}}ew.displayName="GlobeView";let e_=Math.PI/180;function ey({map:t,gl:e,deck:i}){let r;if(t.__deck)return t.__deck;let n=i?.props._customRender,s=i?.props.onLoad,o={...i?.props,_customRender:()=>{t.triggerRepaint(),n?.("")}};return o.parameters={...eS(t,!0),...o.parameters},o.views||(o.views=eC(t)),i&&i.props.gl!==e||(Object.assign(o,{gl:e,width:null,height:null,touchAction:"unset",viewState:ex(t)}),i?.isInitialized?eb(i,t):o.onLoad=()=>{s?.(),eb(r,t)}),i?(r=i,i.setProps(o),i.userData.isExternal=!0):(r=new ep(o),t.on("remove",()=>{eP(t)})),r.userData.mapboxLayers=new Set,t.__deck=r,t.on("render",()=>{r.isInitialized&&function(t,e){let{mapboxLayers:i,isExternal:r}=t.userData;if(r){let r=Array.from(i,t=>t.id),n=(0,f.x)(t.props.layers,Boolean).some(t=>t&&!r.includes(t.id)),s=t.getViewports(),o=s.findIndex(t=>"mapbox"===t.id),a=s.length>1||o<0;(n||a)&&(o>=0&&((s=s.slice())[o]=eE(t,e)),t._drawLayers("mapbox-repaint",{viewports:s,layerFilter:e=>(!t.props.layerFilter||t.props.layerFilter(e))&&("mapbox"!==e.viewport.id||!r.includes(e.layer.id)),clearCanvas:!1}))}t.userData.currentViewport=null}(r,t)}),r}function eb(t,e){let i=()=>{t.isInitialized?(t.setProps({viewState:ex(e)}),t.needsRedraw({clearRedrawFlags:!0})):e.off("move",i)};e.on("move",i)}function eP(t){t.__deck?.finalize(),t.__deck=null}function eS(t,e){let i=e?{depthWriteEnabled:!0,depthCompare:"less-equal",depthBias:0,blend:!0,blendColorSrcFactor:"src-alpha",blendColorDstFactor:"one-minus-src-alpha",blendAlphaSrcFactor:"one",blendAlphaDstFactor:"one-minus-src-alpha",blendColorOperation:"add",blendAlphaOperation:"add"}:{};return"globe"===eM(t)&&(i.cullMode="back"),i}function eM(t){let e=t.getProjection?.(),i=e?.type||e?.name;if("globe"===i)return"globe";if(i&&"mercator"!==i)throw Error("Unsupported projection");return"mercator"}function eC(t){return"globe"===eM(t)?new ew({id:"mapbox"}):new tt({id:"mapbox"})}function ex(t){let{lng:e,lat:i}=t.getCenter(),r={longitude:(e+540)%360-180,latitude:i,zoom:t.getZoom(),bearing:t.getBearing(),pitch:t.getPitch(),padding:t.getPadding(),repeat:t.getRenderWorldCopies()};return t.getTerrain?.()&&function(t,e){if(t.getFreeCameraOptions){let{position:i}=t.getFreeCameraOptions();if(!i||void 0===i.z)return;let r=t.transform.height,{longitude:n,latitude:s,pitch:o}=e,a=512*i.x,l=(1-i.y)*512,h=512*i.z,d=(0,K.w5)([n,s]),u=a-d[0],c=l-d[1],p=o*e_,f=1.5*r,g=p<.001?f*Math.cos(p)/h:f*Math.sin(p)/Math.sqrt(u*u+c*c);e.zoom=Math.log2(g);let m=f*Math.cos(p)/g;e.position=[0,0,(h-m)/(0,K.NC)(s)]}else"number"==typeof t.transform.elevation&&(e.position=[0,0,t.transform.elevation])}(t,r),r}function eE(t,e,i){let r=ex(e),n=eC(e);i&&(n.props.nearZMultiplier=.2);let s=i?.nearZ??e.transform._nearZ,o=i?.farZ??e.transform._farZ;return Number.isFinite(s)&&(r.nearZ=s/e.transform.height,r.farZ=o/e.transform.height),n.makeViewport({width:t.width,height:t.height,viewState:r})}function ek(t){if(t.userData.isExternal)return;let e=[];t.userData.mapboxLayers.forEach(t=>{let i=new t.props.type(t.props);e.push(i)}),t.setProps({layers:e})}class eR{constructor(t){if(!t.id)throw Error("Layer must have an unique id");this.id=t.id,this.type="custom",this.renderingMode=t.renderingMode||"3d",this.map=null,this.deck=null,this.props=t}onAdd(t,e){var i;this.map=t,this.deck=ey({map:t,gl:e,deck:this.props.deck}),(i=this.deck).userData.mapboxLayers.add(this),ek(i)}onRemove(){if(this.deck){var t;(t=this.deck).userData.mapboxLayers.delete(this),ek(t)}}setProps(t){Object.assign(this.props,t,{id:this.id}),this.deck&&ek(this.deck)}render(t,e){!function(t,e,i,r){let{currentViewport:n}=t.userData,s=!1;n||(n=eE(t,e,r),t.userData.currentViewport=n,s=!0),t.isInitialized&&t._drawLayers("mapbox-repaint",{viewports:[n],layerFilter:({layer:t})=>i.id===t.id||t.props.operation.includes("terrain"),clearStack:s,clearCanvas:!1})}(this.deck,this.map,this,e)}}let eL="__UNDEFINED__";function eT(t,e,i,r){if(!t||!e||!t.style||!t.style._loaded)return;let n=(0,f.x)(r,Boolean);if(i!==r){let e=new Set((0,f.x)(i,Boolean).map(t=>t.id));for(let t of n)e.delete(t.id);for(let i of e)t.getLayer(i)&&t.removeLayer(i)}for(let i of n){let r=t.getLayer(i.id);r?(r.implementation||r).setProps(i.props):t.addLayer(new eR({id:i.id,deck:e}),i.props.beforeId)}let s=t.style._order,o={};for(let t of n){let{beforeId:e}=t.props;e&&s.includes(e)||(e=eL),o[e]=o[e]||[],o[e].push(t.id)}for(let e in o){let i=o[e],r=e===eL?s.length:s.indexOf(e),n=e===eL?void 0:e;for(let e=i.length-1;e>=0;e--){let o=i[e],a=s.indexOf(o);a!==r-1&&(t.moveLayer(o,n),a>r&&r++),r--,n=o}}}class eA{constructor(t){this._handleStyleChange=()=>{eT(this._map,this._deck,this._props.layers,this._props.layers)},this._updateContainerSize=()=>{if(this._map&&this._container){let{clientWidth:t,clientHeight:e}=this._map.getContainer();Object.assign(this._container.style,{width:`${t}px`,height:`${e}px`})}},this._updateViewState=()=>{let t=this._deck,e=this._map;t&&e&&(t.setProps({views:this._props.views||eC(e),viewState:ex(e)}),t.isInitialized&&t.redraw())},this._handleMouseEvent=t=>{let e=this._deck;if(!e||!e.isInitialized)return;let i={type:t.type,offsetCenter:t.point,srcEvent:t},r=this._lastMouseDownPoint;switch(!t.point&&r&&(i.deltaX=t.originalEvent.clientX-r.clientX,i.deltaY=t.originalEvent.clientY-r.clientY,i.offsetCenter={x:r.x+i.deltaX,y:r.y+i.deltaY}),i.type){case"mousedown":e._onPointerDown(i),this._lastMouseDownPoint={...t.point,clientX:t.originalEvent.clientX,clientY:t.originalEvent.clientY};break;case"dragstart":i.type="panstart",e._onEvent(i);break;case"drag":i.type="panmove",e._onEvent(i);break;case"dragend":i.type="panend",e._onEvent(i);break;case"click":i.tapCount=1,e._onEvent(i);break;case"dblclick":i.type="click",i.tapCount=2,e._onEvent(i);break;case"mousemove":i.type="pointermove",e._onPointerMove(i);break;case"mouseout":i.type="pointerleave",e._onPointerMove(i);break;default:return}};let{interleaved:e=!1,...i}=t;this._interleaved=e,this._props=i}setProps(t){this._interleaved&&t.layers&&eT(this._map,this._deck,this._props.layers,t.layers),Object.assign(this._props,t),this._deck&&this._map&&this._deck.setProps({...this._props,parameters:{...eS(this._map,this._interleaved),...this._props.parameters}})}onAdd(t){return this._map=t,this._interleaved?this._onAddInterleaved(t):this._onAddOverlaid(t)}_onAddOverlaid(t){let e=document.createElement("div");return Object.assign(e.style,{position:"absolute",left:0,top:0,textAlign:"initial",pointerEvents:"none"}),this._container=e,this._deck=new ep({...this._props,parent:e,parameters:{...eS(t,!1),...this._props.parameters},views:this._props.views||eC(t),viewState:ex(t)}),t.on("resize",this._updateContainerSize),t.on("render",this._updateViewState),t.on("mousedown",this._handleMouseEvent),t.on("dragstart",this._handleMouseEvent),t.on("drag",this._handleMouseEvent),t.on("dragend",this._handleMouseEvent),t.on("mousemove",this._handleMouseEvent),t.on("mouseout",this._handleMouseEvent),t.on("click",this._handleMouseEvent),t.on("dblclick",this._handleMouseEvent),this._updateContainerSize(),e}_onAddInterleaved(t){let e=t.painter.context.gl;return e instanceof WebGLRenderingContext&&c.Z.warn("Incompatible basemap library. See: https://deck.gl/docs/api-reference/mapbox/overview#compatibility")(),this._deck=ey({map:t,gl:e,deck:new ep({...this._props,gl:e})}),t.on("styledata",this._handleStyleChange),eT(t,this._deck,[],this._props.layers),document.createElement("div")}onRemove(){let t=this._map;t&&(this._interleaved?this._onRemoveInterleaved(t):this._onRemoveOverlaid(t)),this._deck=void 0,this._map=void 0,this._container=void 0}_onRemoveOverlaid(t){t.off("resize",this._updateContainerSize),t.off("render",this._updateViewState),t.off("mousedown",this._handleMouseEvent),t.off("dragstart",this._handleMouseEvent),t.off("drag",this._handleMouseEvent),t.off("dragend",this._handleMouseEvent),t.off("mousemove",this._handleMouseEvent),t.off("mouseout",this._handleMouseEvent),t.off("click",this._handleMouseEvent),t.off("dblclick",this._handleMouseEvent),this._deck?.finalize()}_onRemoveInterleaved(t){t.off("styledata",this._handleStyleChange),eT(t,this._deck,this._props.layers,[]),eP(t)}getDefaultPosition(){return"top-left"}pickObject(t){return(0,D.Z)(this._deck),this._deck.pickObject(t)}pickMultipleObjects(t){return(0,D.Z)(this._deck),this._deck.pickMultipleObjects(t)}pickObjects(t){return(0,D.Z)(this._deck),this._deck.pickObjects(t)}finalize(){this._map&&this._map.removeControl(this)}getCanvas(){return this._map?this._interleaved?this._map.getCanvas():this._deck.getCanvas():null}}},79834:function(t,e,i){"use strict";i.d(e,{dU:function(){return r}});class r{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){let e=this._partials,i=0;for(let r=0;r<this._n&&r<32;r++){let n=e[r],s=t+n,o=Math.abs(t)<Math.abs(n)?t-(s-n):n-(s-t);o&&(e[i++]=o),t=s}return e[i]=t,this._n=i+1,this}valueOf(){let t=this._partials,e=this._n,i,r,n,s=0;if(e>0){for(s=t[--e];e>0&&(s=(i=s)+(r=t[--e]),!(n=r-(s-i))););e>0&&(n<0&&t[e-1]<0||n>0&&t[e-1]>0)&&(i=s+(r=2*n),r==i-s&&(s=i))}return s}}},81469:function(t,e,i){"use strict";function r(t,e,i){t=+t,e=+e,i=(n=arguments.length)<2?(e=t,t=0,1):n<3?1:+i;for(var r=-1,n=0|Math.max(0,Math.ceil((e-t)/i)),s=Array(n);++r<n;)s[r]=t+r*i;return s}i.d(e,{Z:function(){return r}})},27454:function(t,e,i){"use strict";function r(t){return t}function n(t){return"translate("+t+",0)"}function s(t){return"translate(0,"+t+")"}function o(){return!this.__axis}function a(t,e){var i=[],a=null,l=null,h=6,d=6,u=3,c="undefined"!=typeof window&&window.devicePixelRatio>1?0:.5,p=1===t||4===t?-1:1,f=4===t||2===t?"x":"y",g=1===t||3===t?n:s;function m(n){var s=null==a?e.ticks?e.ticks.apply(e,i):e.domain():a,m=null==l?e.tickFormat?e.tickFormat.apply(e,i):r:l,v=Math.max(h,0)+u,w=e.range(),_=+w[0]+c,y=+w[w.length-1]+c,b=(e.bandwidth?function(t,e){return e=Math.max(0,t.bandwidth()-2*e)/2,t.round()&&(e=Math.round(e)),i=>+t(i)+e}:function(t){return e=>+t(e)})(e.copy(),c),P=n.selection?n.selection():n,S=P.selectAll(".domain").data([null]),M=P.selectAll(".tick").data(s,e).order(),C=M.exit(),x=M.enter().append("g").attr("class","tick"),E=M.select("line"),k=M.select("text");S=S.merge(S.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(x),E=E.merge(x.append("line").attr("stroke","currentColor").attr(f+"2",p*h)),k=k.merge(x.append("text").attr("fill","currentColor").attr(f,p*v).attr("dy",1===t?"0em":3===t?"0.71em":"0.32em")),n!==P&&(S=S.transition(n),M=M.transition(n),E=E.transition(n),k=k.transition(n),C=C.transition(n).attr("opacity",1e-6).attr("transform",function(t){return isFinite(t=b(t))?g(t+c):this.getAttribute("transform")}),x.attr("opacity",1e-6).attr("transform",function(t){var e=this.parentNode.__axis;return g((e&&isFinite(e=e(t))?e:b(t))+c)})),C.remove(),S.attr("d",4===t||2===t?d?"M"+p*d+","+_+"H"+c+"V"+y+"H"+p*d:"M"+c+","+_+"V"+y:d?"M"+_+","+p*d+"V"+c+"H"+y+"V"+p*d:"M"+_+","+c+"H"+y),M.attr("opacity",1).attr("transform",function(t){return g(b(t)+c)}),E.attr(f+"2",p*h),k.attr(f,p*v).text(m),P.filter(o).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",2===t?"start":4===t?"end":"middle"),P.each(function(){this.__axis=b})}return m.scale=function(t){return arguments.length?(e=t,m):e},m.ticks=function(){return i=Array.from(arguments),m},m.tickArguments=function(t){return arguments.length?(i=null==t?[]:Array.from(t),m):i.slice()},m.tickValues=function(t){return arguments.length?(a=null==t?null:Array.from(t),m):a&&a.slice()},m.tickFormat=function(t){return arguments.length?(l=t,m):l},m.tickSize=function(t){return arguments.length?(h=d=+t,m):h},m.tickSizeInner=function(t){return arguments.length?(h=+t,m):h},m.tickSizeOuter=function(t){return arguments.length?(d=+t,m):d},m.tickPadding=function(t){return arguments.length?(u=+t,m):u},m.offset=function(t){return arguments.length?(c=+t,m):c},m}function l(t){return a(2,t)}function h(t){return a(3,t)}function d(t){return a(4,t)}i.d(e,{LL:function(){return h},y4:function(){return d},Kh:function(){return l}})},92201:function(t,e,i){"use strict";i.d(e,{Uc:function(){return v}});var r=i(56015),n=i(93910);let s=Math.PI/180,o=180/Math.PI,a=4/29,l=6/29,h=6/29*3*(6/29),d=6/29*(6/29)*(6/29);function u(t){if(t instanceof c)return new c(t.l,t.a,t.b,t.opacity);if(t instanceof w)return _(t);t instanceof n.Ss||(t=(0,n.SU)(t));var e,i,r=m(t.r),s=m(t.g),o=m(t.b),a=p((.2225045*r+.7168786*s+.0606169*o)/1);return r===s&&s===o?e=i=a:(e=p((.4360747*r+.3850649*s+.1430804*o)/.96422),i=p((.0139322*r+.0971045*s+.7141733*o)/.82521)),new c(116*a-16,500*(e-a),200*(a-i),t.opacity)}function c(t,e,i,r){this.l=+t,this.a=+e,this.b=+i,this.opacity=+r}function p(t){return t>d?Math.pow(t,1/3):t/h+a}function f(t){return t>l?t*t*t:h*(t-a)}function g(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function m(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function v(t,e,i,r){return 1==arguments.length?function(t){if(t instanceof w)return new w(t.h,t.c,t.l,t.opacity);if(t instanceof c||(t=u(t)),0===t.a&&0===t.b)return new w(NaN,0<t.l&&t.l<100?0:NaN,t.l,t.opacity);var e=Math.atan2(t.b,t.a)*o;return new w(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}(t):new w(t,e,i,null==r?1:r)}function w(t,e,i,r){this.h=+t,this.c=+e,this.l=+i,this.opacity=+r}function _(t){if(isNaN(t.h))return new c(t.l,0,0,t.opacity);var e=t.h*s;return new c(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}(0,r.Z)(c,function(t,e,i,r){return 1==arguments.length?u(t):new c(t,e,i,null==r?1:r)},(0,r.l)(n.Il,{brighter(t){return new c(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker(t){return new c(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,i=isNaN(this.b)?t:t-this.b/200;return e=.96422*f(e),t=1*f(t),i=.82521*f(i),new n.Ss(g(3.1338561*e-1.6168667*t-.4906146*i),g(-.9787684*e+1.9161415*t+.033454*i),g(.0719453*e-.2289914*t+1.4052427*i),this.opacity)}})),(0,r.Z)(w,v,(0,r.l)(n.Il,{brighter(t){return new w(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker(t){return new w(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb(){return _(this).rgb()}}))},87885:function(t,e,i){"use strict";i.d(e,{L9:function(){return c},ZP:function(){return _},gL:function(){return f}});var r,n,s,o,a,l=i(79834),h=i(37454),d=i(14823),u=i(40954),c=new l.dU,p=new l.dU,f={point:d.Z,lineStart:d.Z,lineEnd:d.Z,polygonStart:function(){c=new l.dU,f.lineStart=g,f.lineEnd=m},polygonEnd:function(){var t=+c;p.add(t<0?h.BZ+t:t),this.lineStart=this.lineEnd=this.point=d.Z},sphere:function(){p.add(h.BZ)}};function g(){f.point=v}function m(){w(r,n)}function v(t,e){f.point=w,r=t,n=e,t*=h.uR,e*=h.uR,s=t,o=(0,h.mC)(e=e/2+h.pu),a=(0,h.O$)(e)}function w(t,e){t*=h.uR,e*=h.uR,e=e/2+h.pu;var i=t-s,r=i>=0?1:-1,n=r*i,l=(0,h.mC)(e),d=(0,h.O$)(e),u=a*d,p=o*l+u*(0,h.mC)(n),f=u*r*(0,h.O$)(n);c.add((0,h.fv)(f,p)),s=t,o=l,a=d}function _(t){return p=new l.dU,(0,u.Z)(t,f),2*p}},18581:function(t,e,i){"use strict";i.d(e,{Z:function(){return L}});var r,n,s,o,a,l,h,d,u,c,p,f=i(79834),g=i(87885),m=i(37454);function v(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}var w=i(40954),_={point:y,lineStart:P,lineEnd:S,polygonStart:function(){_.point=M,_.lineStart=C,_.lineEnd=x,u=new f.dU,g.gL.polygonStart()},polygonEnd:function(){g.gL.polygonEnd(),_.point=y,_.lineStart=P,_.lineEnd=S,g.L9<0?(r=-(s=180),n=-(o=90)):u>m.Ho?o=90:u<-m.Ho&&(n=-90),p[0]=r,p[1]=s},sphere:function(){r=-(s=180),n=-(o=90)}};function y(t,e){c.push(p=[r=t,s=t]),e<n&&(n=e),e>o&&(o=e)}function b(t,e){var i=(f=(u=[t*m.uR,e*m.uR])[0],g=u[1],[(w=(0,m.mC)(g))*(0,m.mC)(f),w*(0,m.O$)(f),(0,m.O$)(g)]);if(d){var l=v(d,i),h=v([l[1],-l[0],0],l);_=h,y=(0,m._b)(_[0]*_[0]+_[1]*_[1]+_[2]*_[2]),_[0]/=y,_[1]/=y,_[2]/=y,b=h,h=[(0,m.fv)(b[1],b[0]),(0,m.ZR)(b[2])];var u,f,g,w,_,y,b,P,S=t-a,M=S>0?1:-1,C=h[0]*m.RW*M,x=(0,m.Wn)(S)>180;x^(M*a<C&&C<M*t)?(P=h[1]*m.RW)>o&&(o=P):x^(M*a<(C=(C+360)%360-180)&&C<M*t)?(P=-h[1]*m.RW)<n&&(n=P):(e<n&&(n=e),e>o&&(o=e)),x?t<a?E(r,t)>E(r,s)&&(s=t):E(t,s)>E(r,s)&&(r=t):s>=r?(t<r&&(r=t),t>s&&(s=t)):t>a?E(r,t)>E(r,s)&&(s=t):E(t,s)>E(r,s)&&(r=t)}else c.push(p=[r=t,s=t]);e<n&&(n=e),e>o&&(o=e),d=i,a=t}function P(){_.point=b}function S(){p[0]=r,p[1]=s,_.point=y,d=null}function M(t,e){if(d){var i=t-a;u.add((0,m.Wn)(i)>180?i+(i>0?360:-360):i)}else l=t,h=e;g.gL.point(t,e),b(t,e)}function C(){g.gL.lineStart()}function x(){M(l,h),g.gL.lineEnd(),(0,m.Wn)(u)>m.Ho&&(r=-(s=180)),p[0]=r,p[1]=s,d=null}function E(t,e){return(e-=t)<0?e+360:e}function k(t,e){return t[0]-e[0]}function R(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function L(t){var e,i,a,l,h,d,u;if(o=s=-(r=n=1/0),c=[],(0,w.Z)(t,_),i=c.length){for(c.sort(k),e=1,h=[a=c[0]];e<i;++e)R(a,(l=c[e])[0])||R(a,l[1])?(E(a[0],l[1])>E(a[0],a[1])&&(a[1]=l[1]),E(l[0],a[1])>E(a[0],a[1])&&(a[0]=l[0])):h.push(a=l);for(d=-1/0,i=h.length-1,e=0,a=h[i];e<=i;a=l,++e)l=h[e],(u=E(a[1],l[0]))>d&&(d=u,r=l[0],s=a[1])}return c=p=null,r===1/0||n===1/0?[[NaN,NaN],[NaN,NaN]]:[[r,n],[s,o]]}},99324:function(t,e,i){"use strict";i.d(e,{Z:function(){return z}});var r,n,s,o,a,l,h,d,u,c,p,f,g,m,v,w,_=i(79834),y=i(37454),b=i(14823),P=i(40954),S={sphere:b.Z,point:M,lineStart:x,lineEnd:R,polygonStart:function(){S.lineStart=L,S.lineEnd=T},polygonEnd:function(){S.lineStart=x,S.lineEnd=R}};function M(t,e){t*=y.uR,e*=y.uR;var i=(0,y.mC)(e);C(i*(0,y.mC)(t),i*(0,y.O$)(t),(0,y.O$)(e))}function C(t,e,i){++r,s+=(t-s)/r,o+=(e-o)/r,a+=(i-a)/r}function x(){S.point=E}function E(t,e){t*=y.uR,e*=y.uR;var i=(0,y.mC)(e);m=i*(0,y.mC)(t),v=i*(0,y.O$)(t),w=(0,y.O$)(e),S.point=k,C(m,v,w)}function k(t,e){t*=y.uR,e*=y.uR;var i=(0,y.mC)(e),r=i*(0,y.mC)(t),s=i*(0,y.O$)(t),o=(0,y.O$)(e),a=(0,y.fv)((0,y._b)((a=v*o-w*s)*a+(a=w*r-m*o)*a+(a=m*s-v*r)*a),m*r+v*s+w*o);n+=a,l+=a*(m+(m=r)),h+=a*(v+(v=s)),d+=a*(w+(w=o)),C(m,v,w)}function R(){S.point=M}function L(){S.point=A}function T(){O(f,g),S.point=M}function A(t,e){f=t,g=e,t*=y.uR,e*=y.uR,S.point=O;var i=(0,y.mC)(e);m=i*(0,y.mC)(t),v=i*(0,y.O$)(t),w=(0,y.O$)(e),C(m,v,w)}function O(t,e){t*=y.uR,e*=y.uR;var i=(0,y.mC)(e),r=i*(0,y.mC)(t),s=i*(0,y.O$)(t),o=(0,y.O$)(e),a=v*o-w*s,f=w*r-m*o,g=m*s-v*r,_=(0,y._m)(a,f,g),b=(0,y.ZR)(_),P=_&&-b/_;u.add(P*a),c.add(P*f),p.add(P*g),n+=b,l+=b*(m+(m=r)),h+=b*(v+(v=s)),d+=b*(w+(w=o)),C(m,v,w)}function z(t){r=n=s=o=a=l=h=d=0,u=new _.dU,c=new _.dU,p=new _.dU,(0,P.Z)(t,S);var e=+u,i=+c,f=+p,g=(0,y._m)(e,i,f);return g<y.aW&&(e=l,i=h,f=d,n<y.Ho&&(e=s,i=o,f=a),(g=(0,y._m)(e,i,f))<y.aW)?[NaN,NaN]:[(0,y.fv)(i,e)*y.RW,(0,y.ZR)(f/g)*y.RW]}},37454:function(t,e,i){"use strict";i.d(e,{BZ:function(){return l},Ho:function(){return r},O$:function(){return g},RW:function(){return h},Wn:function(){return u},ZR:function(){return v},_b:function(){return m},_m:function(){return f},aW:function(){return n},fv:function(){return c},mC:function(){return p},pu:function(){return a},uR:function(){return d}});var r=1e-6,n=1e-12,s=Math.PI,o=s/2,a=s/4,l=2*s,h=180/s,d=s/180,u=Math.abs,c=Math.atan2,p=Math.cos,f=Math.hypot,g=Math.sin,m=Math.sqrt;function v(t){return t>1?o:t<-1?-o:Math.asin(t)}},14823:function(t,e,i){"use strict";function r(){}i.d(e,{Z:function(){return r}})},40954:function(t,e,i){"use strict";function r(t,e){t&&s.hasOwnProperty(t.type)&&s[t.type](t,e)}i.d(e,{Z:function(){return l}});var n={Feature:function(t,e){r(t.geometry,e)},FeatureCollection:function(t,e){for(var i=t.features,n=-1,s=i.length;++n<s;)r(i[n].geometry,e)}},s={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)t=i[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){o(t.coordinates,e,0)},MultiLineString:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)o(i[r],e,0)},Polygon:function(t,e){a(t.coordinates,e)},MultiPolygon:function(t,e){for(var i=t.coordinates,r=-1,n=i.length;++r<n;)a(i[r],e)},GeometryCollection:function(t,e){for(var i=t.geometries,n=-1,s=i.length;++n<s;)r(i[n],e)}};function o(t,e,i){var r,n=-1,s=t.length-i;for(e.lineStart();++n<s;)r=t[n],e.point(r[0],r[1],r[2]);e.lineEnd()}function a(t,e){var i=-1,r=t.length;for(e.polygonStart();++i<r;)o(t[i],e,1);e.polygonEnd()}function l(t,e){t&&n.hasOwnProperty(t.type)?n[t.type](t,e):r(t,e)}},66666:function(t,e,i){"use strict";i.d(e,{_b:function(){return h}});var r=i(47626),n=i(3367),s=i(81219);function o(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function a(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function l(t){return t<0?-t*t:t*t}function h(){return(function t(){var e,i,h,d=(i=(e=(0,n.l4)())(n.yR,n.yR),h=1,i.exponent=function(t){return arguments.length?1==(h=+t)?e(n.yR,n.yR):.5===h?e(a,l):e(o(h),o(1/h)):h},(0,r.Q)(i));return d.copy=function(){return(0,n.JG)(d,t()).exponent(d.exponent())},s.o.apply(d,arguments),d}).apply(null,arguments).exponent(.5)}},39454:function(t,e,i){"use strict";i.d(e,{Z:function(){return function t(){var e,i=[],a=[],l=[];function h(){var t=0,e=Math.max(1,a.length);for(l=Array(e-1);++t<e;)l[t-1]=function(t,e,i=r.Z){if(!(!(n=t.length)||isNaN(e=+e))){if(e<=0||n<2)return+i(t[0],0,t);if(e>=1)return+i(t[n-1],n-1,t);var n,s=(n-1)*e,o=Math.floor(s),a=+i(t[o],o,t);return a+(+i(t[o+1],o+1,t)-a)*(s-o)}}(i,t/e);return d}function d(t){return null==t||isNaN(t=+t)?e:a[(0,n.ZP)(l,t)]}return d.invertExtent=function(t){var e=a.indexOf(t);return e<0?[NaN,NaN]:[e>0?l[e-1]:i[0],e<l.length?l[e]:i[i.length-1]]},d.domain=function(t){if(!arguments.length)return i.slice();for(let e of(i=[],t))null==e||isNaN(e=+e)||i.push(e);return i.sort(s.Z),h()},d.range=function(t){return arguments.length?(a=Array.from(t),h()):a.slice()},d.unknown=function(t){return arguments.length?(e=t,d):e},d.quantiles=function(){return l.slice()},d.copy=function(){return t().domain(i).range(a).unknown(e)},o.o.apply(d,arguments)}}});var r=i(1618),n=i(28646),s=i(60090),o=i(81219)},8854:function(t,e,i){"use strict";i.d(e,{Z:function(){return function t(){var e,i=0,o=1,a=1,l=[.5],h=[0,1];function d(t){return null!=t&&t<=t?h[(0,r.ZP)(l,t,0,a)]:e}function u(){var t=-1;for(l=Array(a);++t<a;)l[t]=((t+1)*o-(t-a)*i)/(a+1);return d}return d.domain=function(t){return arguments.length?([i,o]=t,i=+i,o=+o,u()):[i,o]},d.range=function(t){return arguments.length?(a=(h=Array.from(t)).length-1,u()):h.slice()},d.invertExtent=function(t){var e=h.indexOf(t);return e<0?[NaN,NaN]:e<1?[i,l[0]]:e>=a?[l[a-1],o]:[l[e-1],l[e]]},d.unknown=function(t){return arguments.length&&(e=t),d},d.thresholds=function(){return l.slice()},d.copy=function(){return t().domain([i,o]).range(h).unknown(e)},s.o.apply((0,n.Q)(d),arguments)}}});var r=i(28646),n=i(47626),s=i(81219)},19254:function(t,e,i){"use strict";i.d(e,{JG:function(){return l},ZP:function(){return function t(){var e=(0,a.Q)((function(){var t,e,i,o,a,l=0,h=1,d=s.yR,u=!1;function c(e){return null==e||isNaN(e=+e)?a:d(0===i?.5:(e=(o(e)-t)*i,u?Math.max(0,Math.min(1,e)):e))}function p(t){return function(e){var i,r;return arguments.length?([i,r]=e,d=t(i,r),c):[d(0),d(1)]}}return c.domain=function(r){return arguments.length?([l,h]=r,t=o(l=+l),e=o(h=+h),i=t===e?0:1/(e-t),c):[l,h]},c.clamp=function(t){return arguments.length?(u=!!t,c):u},c.interpolator=function(t){return arguments.length?(d=t,c):d},c.range=p(r.Z),c.rangeRound=p(n.Z),c.unknown=function(t){return arguments.length?(a=t,c):a},function(r){return o=r,t=r(l),e=r(h),i=t===e?0:1/(e-t),c}})()(s.yR));return e.copy=function(){return l(e,t())},o.O.apply(e,arguments)}}});var r=i(93461),n=i(67873),s=i(3367),o=i(81219),a=i(47626);function l(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}},75841:function(t,e,i){"use strict";i.d(e,{Z:function(){return function t(){var e,i=[.5],s=[0,1],o=1;function a(t){return null!=t&&t<=t?s[(0,r.ZP)(i,t,0,o)]:e}return a.domain=function(t){return arguments.length?(o=Math.min((i=Array.from(t)).length,s.length-1),a):i.slice()},a.range=function(t){return arguments.length?(s=Array.from(t),o=Math.min(i.length,s.length-1),a):s.slice()},a.invertExtent=function(t){var e=s.indexOf(t);return[i[e-1],i[e]]},a.unknown=function(t){return arguments.length?(e=t,a):e},a.copy=function(){return t().domain(i).range(s).unknown(e)},n.o.apply(a,arguments)}}});var r=i(28646),n=i(81219)},16364:function(t,e,i){"use strict";function r(t,e){for(var i=[],r=0;r<t;r++){for(var n=[],s=0;s<e;s++)n.push(0);i.push(n)}return i}function n(t,e,i,r){var n;if(t>0){var s=(i[e]-i[t-1])/(e-t+1);n=r[e]-r[t-1]-(e-t+1)*s*s}else n=r[e]-i[e]*i[e]/(e+1);return n<0?0:n}function s(t,e){if(e>t.length)throw Error("cannot generate more classes than there are data values");var i=t.slice().sort(function(t,e){return t-e});if(1===function(t){for(var e,i=0,r=0;r<t.length;r++)(0===r||t[r]!==e)&&(e=t[r],i++);return i}(i))return[i];var s=r(e,i.length),o=r(e,i.length);!function(t,e,i){for(var r=e[0].length,s=t[Math.floor(r/2)],o=[],a=[],l=0,h=void 0;l<r;++l)h=t[l]-s,0===l?(o.push(h),a.push(h*h)):(o.push(o[l-1]+h),a.push(a[l-1]+h*h)),e[0][l]=n(0,l,o,a),i[0][l]=0;for(var d=1;d<e.length;++d)!function t(e,i,r,s,o,a,l){if(!(e>i)){var h,d,u,c=Math.floor((e+i)/2);s[r][c]=s[r-1][c-1],o[r][c]=c;var p=r;e>r&&(p=Math.max(p,o[r][e-1]||0)),p=Math.max(p,o[r-1][c]||0);var f=c-1;i<s[0].length-1&&(f=Math.min(f,o[r][i+1]||0));for(var g=f;g>=p&&!((h=n(g,c,a,l))+s[r-1][p-1]>=s[r][c]);--g)(d=n(p,c,a,l)+s[r-1][p-1])<s[r][c]&&(s[r][c]=d,o[r][c]=p),p++,(u=h+s[r-1][g-1])<s[r][c]&&(s[r][c]=u,o[r][c]=g);t(e,c-1,r,s,o,a,l),t(c+1,i,r,s,o,a,l)}}(d<e.length-1?d:r-1,r-1,d,e,i,o,a)}(i,s,o);for(var a=[],l=o[0].length-1,h=o.length-1;h>=0;h--){var d=o[h][l];a[h]=i.slice(d,l+1),h>0&&(l=d-1)}return a}i.d(e,{Pf:function(){return s}});var o=function(){this.totalCount=0,this.data={}};o.prototype.train=function(t,e){for(var i in this.data[e]||(this.data[e]={}),t){var r=t[i];void 0===this.data[e][i]&&(this.data[e][i]={}),void 0===this.data[e][i][r]&&(this.data[e][i][r]=0),this.data[e][i][r]++}this.totalCount++},o.prototype.score=function(t){var e,i={};for(var r in t){var n=t[r];for(e in this.data)i[e]={},this.data[e][r]?i[e][r+"_"+n]=(this.data[e][r][n]||0)/this.totalCount:i[e][r+"_"+n]=0}var s={};for(e in i)for(var o in s[e]=0,i[e])s[e]+=i[e][o];return s};var a=function(){this.weights=[],this.bias=0};a.prototype.predict=function(t){if(t.length!==this.weights.length)return null;for(var e=0,i=0;i<this.weights.length;i++)e+=this.weights[i]*t[i];return(e+=this.bias)>0?1:0},a.prototype.train=function(t,e){if(0!==e&&1!==e)return null;t.length!==this.weights.length&&(this.weights=t,this.bias=1);var i=this.predict(t);if("number"==typeof i&&i!==e){for(var r=e-i,n=0;n<this.weights.length;n++)this.weights[n]+=r*t[n];this.bias+=r}return this};for(var l=Math.sqrt(2*Math.PI),h=[],d=0;d<=3.09;d+=.01)h.push(function(t){for(var e=t,i=t,r=1;r<15;r++)i*=t*t/(2*r+1),e+=i;return Math.round((.5+e/l*Math.exp(-t*t/2))*1e4)/1e4}(d))}}]);
//# sourceMappingURL=87257.236cb5d3f81e7ce5.js.map