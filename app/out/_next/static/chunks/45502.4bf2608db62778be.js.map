{"version":3,"file":"static/chunks/45502.4bf2608db62778be.js","mappings":"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","sources":["webpack://_N_E/./charts/column/constants.ts","webpack://_N_E/./charts/column/rendering-utils.ts","webpack://_N_E/./charts/combo/axis-height-linear-dual.tsx","webpack://_N_E/./charts/combo/combo-line-column.tsx","webpack://_N_E/./charts/combo/combo-line-column-state-props.ts","webpack://_N_E/./charts/combo/combo-line-column-state.tsx","webpack://_N_E/./charts/combo/overlay-temporal-columns.tsx","webpack://_N_E/./charts/combo/chart-combo-line-column.tsx","webpack://_N_E/./charts/shared/annotation-utils.ts","webpack://_N_E/./charts/shared/axis-width-band.tsx","webpack://_N_E/./charts/shared/render-value-labels.ts","webpack://_N_E/./charts/shared/use-annotation-interactions.ts"],"sourcesContent":["export const PADDING_OUTER = 0;\nexport const PADDING_INNER = 0.1;\nexport const PADDING_WITHIN = 0.1;\n","import { getContrastingColor } from \"@uiw/react-color\";\nimport { select, Selection } from \"d3-selection\";\nimport { Series } from \"d3-shape\";\nimport { useCallback } from \"react\";\n\nimport { StackedColumnsState } from \"@/charts/column/columns-stacked-state\";\nimport { hasSegmentAnnotation } from \"@/charts/shared/annotation-utils\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport {\n  setSegmentValueLabelProps,\n  setSegmentWrapperValueLabelProps,\n} from \"@/charts/shared/render-value-labels\";\nimport {\n  maybeTransition,\n  RenderOptions,\n  toggleFocusBorder,\n} from \"@/charts/shared/rendering-utils\";\nimport { getChartConfig, useDefinitiveFilters } from \"@/config-utils\";\nimport { useConfiguratorState } from \"@/configurator/configurator-state\";\nimport { Observation } from \"@/domain/data\";\n\nexport type RenderColumnDatum = {\n  key: string;\n  x: number;\n  y: number;\n  width: number;\n  height: number;\n  color: string;\n  focused?: boolean;\n  valueLabel?: string;\n  valueLabelColor?: string;\n  segment?: string;\n  observation: Observation;\n  valueLabelOffset?: number;\n};\n\nexport const useGetRenderStackedColumnDatum = () => {\n  const {\n    colors,\n    showValuesBySegmentMapping,\n    valueLabelFormatter,\n    xScale,\n    yScale,\n    getX,\n    getRenderingKey,\n  } = useChartState() as StackedColumnsState;\n  const [state] = useConfiguratorState();\n  const chartConfig = getChartConfig(state);\n  const definitiveFilters = useDefinitiveFilters();\n  const bandwidth = xScale.bandwidth();\n\n  return useCallback(\n    (s: Series<{ [key: string]: number }, string>) => {\n      const segment = s.key;\n      const color = colors(segment);\n\n      return s.map((d) => {\n        const observation = d.data;\n        const value = observation[segment];\n        const valueLabel =\n          segment && showValuesBySegmentMapping[segment]\n            ? valueLabelFormatter(value)\n            : undefined;\n        const valueLabelColor = valueLabel\n          ? getContrastingColor(color)\n          : undefined;\n        const xRaw = getX(observation);\n        const y = yScale(d[1]) as number;\n\n        const hasAnnotation = hasSegmentAnnotation(\n          observation,\n          segment,\n          chartConfig,\n          definitiveFilters\n        );\n\n        const valueLabelOffset = hasAnnotation ? 20 : 0;\n\n        return {\n          key: getRenderingKey(observation, segment),\n          x: xScale(xRaw) as number,\n          y,\n          width: bandwidth,\n          height: Math.max(0, yScale(d[0]) - y),\n          color,\n          valueLabel,\n          valueLabelColor,\n          observation,\n          segment,\n          valueLabelOffset,\n        } satisfies RenderColumnDatum;\n      });\n    },\n    [\n      bandwidth,\n      colors,\n      getRenderingKey,\n      getX,\n      showValuesBySegmentMapping,\n      valueLabelFormatter,\n      xScale,\n      yScale,\n      chartConfig,\n      definitiveFilters,\n    ]\n  );\n};\n\nexport const renderColumns = (\n  g: Selection<SVGGElement, null, SVGGElement, unknown>,\n  data: RenderColumnDatum[],\n  options: RenderOptions & { y0: number }\n) => {\n  const { transition, y0 } = options;\n\n  g.selectAll<SVGGElement, RenderColumnDatum>(\"g.column\")\n    .data(data, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append(\"g\")\n          .attr(\"class\", \"column\")\n          .call((g) =>\n            g\n              .append(\"rect\")\n              .attr(\"data-index\", (_, i) => i)\n              .attr(\"x\", (d) => d.x)\n              .attr(\"y\", y0)\n              .attr(\"width\", (d) => d.width)\n              .attr(\"height\", 0)\n              .attr(\"fill\", (d) => d.color)\n              .call((enter) =>\n                maybeTransition(enter, {\n                  transition,\n                  s: (g) =>\n                    g.attr(\"y\", (d) => d.y).attr(\"height\", (d) => d.height),\n                })\n              )\n          )\n          .call((g) =>\n            g\n              .append(\"foreignObject\")\n              .attr(\"x\", (d) => d.x)\n              .attr(\"y\", y0)\n              .attr(\"width\", (d) => d.width)\n              .attr(\"height\", (d) => d.height)\n              .call((g) =>\n                maybeTransition(g, {\n                  transition,\n                  s: (g) => g.attr(\"y\", (d) => d.y + (d.valueLabelOffset ?? 0)),\n                })\n              )\n              .append(\"xhtml:div\")\n              .call(setSegmentWrapperValueLabelProps)\n              .append(\"xhtml:p\")\n              .call(setSegmentValueLabelProps)\n              .style(\"color\", function (d) {\n                return d.valueLabelColor ?? select(this).style(\"color\");\n              })\n              .text((d) => d.valueLabel ?? \"\")\n          ),\n      (update) => {\n        toggleFocusBorder(update.select(\"rect\"));\n\n        return maybeTransition(update, {\n          s: (g) =>\n            g\n              .call((g) =>\n                g\n                  .select(\"rect\")\n                  .attr(\"x\", (d) => d.x)\n                  .attr(\"y\", (d) => d.y)\n                  .attr(\"width\", (d) => d.width)\n                  .attr(\"height\", (d) => d.height)\n                  .attr(\"fill\", (d) => d.color)\n              )\n              .call((g) =>\n                g\n                  .select(\"foreignObject\")\n                  .attr(\"x\", (d) => d.x)\n                  .attr(\"y\", (d) => d.y + (d.valueLabelOffset ?? 0))\n                  .attr(\"width\", (d) => d.width)\n                  .attr(\"height\", (d) => d.height)\n                  .select(\"p\")\n                  .style(\"color\", function (d) {\n                    return d.valueLabelColor ?? select(this).style(\"color\");\n                  })\n                  .text((d) => d.valueLabel ?? \"\")\n              ),\n          transition,\n        });\n      },\n      (exit) =>\n        maybeTransition(exit, {\n          transition,\n          s: (g) =>\n            g\n              .call((g) => g.select(\"rect\").attr(\"y\", y0).attr(\"height\", 0))\n              .remove(),\n        })\n    );\n};\n","import { useState } from \"react\";\n\nimport { ComboLineColumnState } from \"@/charts/combo/combo-line-column-state\";\nimport { ComboLineDualState } from \"@/charts/combo/combo-line-dual-state\";\nimport {\n  TITLE_H_PADDING,\n  TITLE_V_PADDING,\n  useAxisTitleSize,\n} from \"@/charts/combo/shared\";\nimport {\n  TICK_PADDING,\n  useRenderAxisHeightLinear,\n} from \"@/charts/shared/axis-height-linear\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { useChartTheme } from \"@/charts/shared/use-chart-theme\";\nimport { DISABLE_SCREENSHOT_COLOR_WIPE_ATTR } from \"@/components/chart-shared\";\nimport { OpenMetadataPanelWrapper } from \"@/components/metadata-panel\";\nimport { theme } from \"@/themes/theme\";\n\ntype AxisHeightLinearDualProps = {\n  orientation?: \"left\" | \"right\";\n};\n\nexport const AxisHeightLinearDual = (props: AxisHeightLinearDualProps) => {\n  const { orientation = \"left\" } = props;\n  const leftAligned = orientation === \"left\";\n\n  const { gridColor, labelColor, axisLabelFontSize } = useChartTheme();\n  const [ref, setRef] = useState<SVGGElement | null>(null);\n  const { y, yOrientationScales, colors, bounds } = useChartState() as\n    | ComboLineDualState\n    | ComboLineColumnState;\n\n  const yScale = yOrientationScales[orientation];\n  const { width, chartWidth, chartHeight, margins } = bounds;\n  const axisTitle = y[orientation].label;\n  const color = colors(axisTitle);\n  useRenderAxisHeightLinear(ref, {\n    id: `axis-height-linear-${orientation}`,\n    orientation,\n    scale: yScale,\n    width: chartWidth,\n    height: chartHeight,\n    margins,\n    lineColor: gridColor,\n    textColor: labelColor,\n  });\n\n  const { width: axisTitleWidth, height: axisTitleHeight } = useAxisTitleSize(\n    axisTitle,\n    { width: width * 0.5 - TICK_PADDING }\n  );\n\n  const axisTitleX = leftAligned ? 0 : width - axisTitleWidth;\n\n  return (\n    <>\n      <foreignObject\n        data-testid={`axis-title-${orientation}`}\n        x={axisTitleX}\n        width={axisTitleWidth}\n        height={axisTitleHeight}\n        color={theme.palette.getContrastText(color)}\n      >\n        <OpenMetadataPanelWrapper component={y[orientation].dimension}>\n          <span\n            {...DISABLE_SCREENSHOT_COLOR_WIPE_ATTR}\n            style={{\n              width: \"100%\",\n              fontSize: axisLabelFontSize,\n              lineHeight: 1.5,\n              backgroundColor: color,\n              color: theme.palette.getContrastText(color),\n              padding: `${TITLE_V_PADDING}px ${TITLE_H_PADDING}px`,\n              borderRadius: 4,\n              wordBreak: \"break-word\",\n            }}\n          >\n            {axisTitle}\n          </span>\n        </OpenMetadataPanelWrapper>\n      </foreignObject>\n      <g ref={(newRef) => setRef(newRef)} />\n    </>\n  );\n};\n","import { line } from \"d3-shape\";\nimport { memo, useEffect, useMemo, useRef } from \"react\";\n\nimport {\n  RenderColumnDatum,\n  renderColumns,\n} from \"@/charts/column/rendering-utils\";\nimport { ComboLineColumnState } from \"@/charts/combo/combo-line-column-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { renderContainer } from \"@/charts/shared/rendering-utils\";\nimport { Observation } from \"@/domain/data\";\nimport { useTransitionStore } from \"@/stores/transition\";\n\nconst Columns = () => {\n  const {\n    chartData,\n    bounds,\n    xScale,\n    getXAsDate,\n    formatXDate,\n    y,\n    yOrientationScales,\n    colors,\n    getRenderingKey,\n  } = useChartState() as ComboLineColumnState;\n  const { margins } = bounds;\n  const ref = useRef<SVGGElement>(null);\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const bandwidth = xScale.bandwidth();\n  const yColumn = y.left.chartType === \"column\" ? y.left : y.right;\n  const yScale =\n    y.left.chartType === \"column\"\n      ? yOrientationScales.left\n      : yOrientationScales.right;\n  const y0 = yScale(0);\n  const renderData = useMemo(() => {\n    return chartData.map((d) => {\n      const key = getRenderingKey(d);\n      const xDate = getXAsDate(d);\n      const xScaled = xScale(formatXDate(xDate)) as number;\n      const y = yColumn.getY(d) ?? NaN;\n      const yScaled = yScale(y);\n      const yRender = yScale(Math.max(y, 0));\n      const height = Math.max(0, Math.abs(yScaled - y0));\n      const color = colors(yColumn.id);\n\n      return {\n        key,\n        x: xScaled,\n        y: yRender,\n        width: bandwidth,\n        height,\n        color,\n        observation: d,\n      } satisfies RenderColumnDatum;\n    });\n  }, [\n    chartData,\n    getRenderingKey,\n    xScale,\n    getXAsDate,\n    formatXDate,\n    yColumn,\n    yScale,\n    y0,\n    colors,\n    bandwidth,\n  ]);\n\n  useEffect(() => {\n    if (ref.current) {\n      renderContainer(ref.current, {\n        id: \"columns\",\n        transform: `translate(${margins.left} ${margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g, opts) => renderColumns(g, renderData, { ...opts, y0 }),\n      });\n    }\n  }, [\n    enableTransition,\n    margins.left,\n    margins.top,\n    renderData,\n    transitionDuration,\n    y0,\n  ]);\n\n  return <g ref={ref} />;\n};\n\nconst Lines = () => {\n  const {\n    chartData,\n    xScale,\n    getXAsDate,\n    formatXDate,\n    yOrientationScales,\n    y,\n    colors,\n    bounds,\n  } = useChartState() as ComboLineColumnState;\n  const yLine = y.left.chartType === \"line\" ? y.left : y.right;\n  const yScale =\n    y.left.chartType === \"line\"\n      ? yOrientationScales.left\n      : yOrientationScales.right;\n  const pathGenerator = line<Observation>()\n    // FIXME: add missing observations basing on the time interval, so we can\n    // properly indicate the missing data.\n    .defined((d) => {\n      const y = yLine.getY(d);\n      return y !== null && !isNaN(y);\n    })\n    .x(\n      (d) =>\n        (xScale(formatXDate(getXAsDate(d))) as number) +\n        xScale.bandwidth() * 0.5\n    )\n    .y((d) => yScale(yLine.getY(d) as number));\n\n  return (\n    <g transform={`translate(${bounds.margins.left} ${bounds.margins.top})`}>\n      <Line\n        path={pathGenerator(chartData) as string}\n        color={colors(yLine.label)}\n      />\n    </g>\n  );\n};\n\ntype LineProps = {\n  path: string;\n  color: string;\n};\n\nconst Line = memo(function Line(props: LineProps) {\n  const { path, color } = props;\n\n  return <path d={path} stroke={color} strokeWidth={4} fill=\"none\" />;\n});\n\nexport const ComboLineColumn = () => {\n  return (\n    <>\n      <Columns />\n      <Lines />\n    </>\n  );\n};\n","import { min } from \"d3-array\";\nimport { useCallback } from \"react\";\n\nimport { BaseYGetter, sortComboData } from \"@/charts/combo/combo-state-props\";\nimport {\n  getLabelWithUnit,\n  usePlottableData,\n} from \"@/charts/shared/chart-helpers\";\nimport {\n  BandXVariables,\n  BaseVariables,\n  ChartStateData,\n  InteractiveFiltersVariables,\n  RenderingVariables,\n  shouldUseDynamicMinScaleValue,\n  SortingVariables,\n  useBandXVariables,\n  useBaseVariables,\n  useChartData,\n  useInteractiveFiltersVariables,\n} from \"@/charts/shared/chart-state\";\nimport { useRenderingKeyVariable } from \"@/charts/shared/rendering-utils\";\nimport { useChartConfigFilters } from \"@/config-utils\";\nimport { ComboLineColumnConfig } from \"@/configurator\";\n\nimport { ChartProps } from \"../shared/chart-props\";\n\ntype NumericalYComboLineColumnVariables = {\n  y: {\n    left: YGetter;\n    right: YGetter;\n  };\n};\n\ntype YGetter = BaseYGetter & {\n  chartType: \"line\" | \"column\";\n  orientation: \"left\" | \"right\";\n};\n\nexport type ComboLineColumnStateVariables = BaseVariables &\n  SortingVariables &\n  BandXVariables &\n  NumericalYComboLineColumnVariables &\n  RenderingVariables &\n  InteractiveFiltersVariables;\n\nexport const useComboLineColumnStateVariables = (\n  props: ChartProps<ComboLineColumnConfig>\n): ComboLineColumnStateVariables => {\n  const {\n    chartConfig,\n    dimensions,\n    dimensionsById,\n    measuresById,\n    observations,\n  } = props;\n  const { fields, interactiveFiltersConfig } = chartConfig;\n  const { x } = fields;\n\n  const filters = useChartConfigFilters(chartConfig);\n  const baseVariables = useBaseVariables(chartConfig);\n  const bandXVariables = useBandXVariables(x, {\n    dimensionsById,\n    observations,\n  });\n  const interactiveFiltersVariables = useInteractiveFiltersVariables(\n    interactiveFiltersConfig,\n    { dimensionsById }\n  );\n\n  const lineId = chartConfig.fields.y.lineComponentId;\n  const lineAxisOrientation = chartConfig.fields.y.lineAxisOrientation;\n  const columnId = chartConfig.fields.y.columnComponentId;\n  let numericalYVariables: NumericalYComboLineColumnVariables;\n  const lineYGetter: YGetter = {\n    chartType: \"line\",\n    orientation: lineAxisOrientation,\n    dimension: measuresById[lineId],\n    id: lineId,\n    label: getLabelWithUnit(measuresById[lineId]),\n    color: fields.color.colorMapping[lineId],\n    getY: (d) => (d[lineId] !== null ? Number(d[lineId]) : null),\n    getMinY: (data) => {\n      const minY =\n        min(data, (d) => (d[lineId] !== null ? Number(d[lineId]) : null)) ?? 0;\n\n      return shouldUseDynamicMinScaleValue(measuresById[lineId].scaleType)\n        ? minY\n        : Math.min(0, minY);\n    },\n  };\n  const columnYGetter: YGetter = {\n    chartType: \"column\",\n    orientation: lineAxisOrientation === \"left\" ? \"right\" : \"left\",\n    dimension: measuresById[columnId],\n    id: columnId,\n    label: getLabelWithUnit(measuresById[columnId]),\n    color: fields.color.colorMapping[columnId],\n    getY: (d) => (d[columnId] !== null ? Number(d[columnId]) : null),\n    getMinY: (data) => {\n      const minY =\n        min(data, (d) => (d[columnId] !== null ? Number(d[columnId]) : null)) ??\n        0;\n\n      return Math.min(0, minY);\n    },\n  };\n\n  numericalYVariables =\n    lineAxisOrientation === \"left\"\n      ? {\n          y: {\n            left: lineYGetter,\n            right: columnYGetter,\n          },\n        }\n      : {\n          y: {\n            left: columnYGetter,\n            right: lineYGetter,\n          },\n        };\n\n  const { getXAsDate } = bandXVariables;\n  const sortData: ComboLineColumnStateVariables[\"sortData\"] = useCallback(\n    (data) => {\n      return sortComboData(data, {\n        getX: getXAsDate,\n      });\n    },\n    [getXAsDate]\n  );\n\n  const getRenderingKey = useRenderingKeyVariable(\n    dimensions,\n    filters,\n    undefined\n  );\n\n  return {\n    ...baseVariables,\n    sortData,\n    ...bandXVariables,\n    ...numericalYVariables,\n    ...interactiveFiltersVariables,\n    getRenderingKey,\n  };\n};\n\nexport const useComboLineColumnStateData = (\n  chartProps: ChartProps<ComboLineColumnConfig>,\n  variables: ComboLineColumnStateVariables\n): ChartStateData => {\n  const { chartConfig, observations } = chartProps;\n  const { sortData, xDimension, getX, getXAsDate, y, getTimeRangeDate } =\n    variables;\n  const plottableData = usePlottableData(observations, {\n    getX,\n    getY: (d) => {\n      for (const { getY } of [y.left, y.right]) {\n        const y = getY(d);\n\n        if (y !== null) {\n          return y;\n        }\n      }\n    },\n  });\n\n  return useChartData(plottableData, {\n    sortData,\n    chartConfig,\n    timeRangeDimensionId: xDimension.id,\n    getAxisValueAsDate: getXAsDate,\n    getTimeRangeDate,\n  });\n};\n","import { max, mean, min } from \"d3-array\";\nimport {\n  ScaleBand,\n  scaleBand,\n  ScaleLinear,\n  scaleLinear,\n  ScaleOrdinal,\n  ScaleTime,\n} from \"d3-scale\";\nimport { schemeCategory10 } from \"d3-scale-chromatic\";\nimport { PropsWithChildren } from \"react\";\n\nimport { PADDING_INNER, PADDING_OUTER } from \"@/charts/column/constants\";\nimport {\n  ComboLineColumnStateVariables,\n  useComboLineColumnStateData,\n  useComboLineColumnStateVariables,\n} from \"@/charts/combo/combo-line-column-state-props\";\nimport {\n  adjustScales,\n  useCommonComboState,\n  useDualAxisMargins,\n  useYScales,\n} from \"@/charts/combo/combo-state\";\nimport { TICK_PADDING } from \"@/charts/shared/axis-height-linear\";\nimport {\n  AxisLabelSizeVariables,\n  getChartWidth,\n  useAxisLabelSizeVariables,\n  useChartBounds,\n  useChartPadding,\n} from \"@/charts/shared/chart-dimensions\";\nimport {\n  ChartContext,\n  ChartStateData,\n  CommonChartState,\n  InteractiveXTimeRangeState,\n} from \"@/charts/shared/chart-state\";\nimport { TooltipInfo, TooltipValue } from \"@/charts/shared/interaction/tooltip\";\nimport {\n  getCenteredTooltipPlacement,\n  MOBILE_TOOLTIP_PLACEMENT,\n} from \"@/charts/shared/interaction/tooltip-box\";\nimport { getTickNumber } from \"@/charts/shared/ticks\";\nimport { TICK_FONT_SIZE } from \"@/charts/shared/use-chart-theme\";\nimport { InteractionProvider } from \"@/charts/shared/use-interaction\";\nimport { ComboLineColumnConfig } from \"@/configurator\";\nimport { Observation } from \"@/domain/data\";\nimport { truthy } from \"@/domain/types\";\nimport { TimeUnit } from \"@/graphql/resolver-types\";\nimport { getTimeInterval } from \"@/intervals\";\nimport { getTextWidth } from \"@/utils/get-text-width\";\nimport { useIsMobile } from \"@/utils/use-is-mobile\";\n\nimport { ChartProps } from \"../shared/chart-props\";\n\nexport type ComboLineColumnState = CommonChartState &\n  ComboLineColumnStateVariables &\n  InteractiveXTimeRangeState & {\n    chartType: \"comboLineColumn\";\n    xKey: string;\n    xScale: ScaleBand<string>;\n    xScaleTime: ScaleTime<number, number>;\n    xScaleInteraction: ScaleBand<string>;\n    yScale: ScaleLinear<number, number>;\n    yOrientationScales: {\n      left: ScaleLinear<number, number>;\n      right: ScaleLinear<number, number>;\n    };\n    colors: ScaleOrdinal<string, string>;\n    getColorLabel: (label: string) => string;\n    chartWideData: ArrayLike<Observation>;\n    getTooltipInfo: (d: Observation) => TooltipInfo;\n    maxRightTickWidth: number;\n    leftAxisLabelSize: AxisLabelSizeVariables;\n    bottomAxisLabelSize: AxisLabelSizeVariables;\n    formatXAxisTick?: (tick: string) => string;\n  };\n\nconst useComboLineColumnState = (\n  chartProps: ChartProps<ComboLineColumnConfig>,\n  variables: ComboLineColumnStateVariables,\n  data: ChartStateData\n): ComboLineColumnState => {\n  const { chartConfig } = chartProps;\n  const { getX, getXAsDate, xAxisLabel, formatXDate } = variables;\n  const { chartData, scalesData, timeRangeData, paddingData, allData } = data;\n  const { fields, interactiveFiltersConfig } = chartConfig;\n  const xKey = fields.x.componentId;\n  const {\n    width,\n    height,\n    formatNumber,\n    timeFormatUnit,\n    chartWideData,\n    xScaleTime,\n    xScaleTimeRange,\n    colors,\n  } = useCommonComboState({\n    chartData,\n    timeRangeData,\n    getXAsDate,\n    getXAsString: getX,\n    xKey,\n    yGetters: [variables.y.left, variables.y.right],\n    computeTotal: false,\n  });\n\n  // x\n  const xTimeUnit = variables.xTimeUnit as TimeUnit;\n  const interval = getTimeInterval(xTimeUnit);\n  const [xMin, xMax] = xScaleTime.domain() as [Date, Date];\n  const xDomain = interval.range(xMin, xMax).concat(xMax).map(formatXDate);\n  const xScale = scaleBand()\n    .domain(xDomain)\n    .paddingInner(PADDING_INNER)\n    .paddingOuter(PADDING_OUTER);\n\n  // y\n  const { yScale: yScaleLeft, paddingYScale: paddingLeftYScale } = useYScales({\n    scalesData,\n    paddingData,\n    getY: variables.y.left.getY,\n    getMinY: variables.y.left.getMinY,\n  });\n  const { yScale: yScaleRight, paddingYScale: paddingRightYScale } = useYScales(\n    {\n      scalesData,\n      paddingData,\n      getY: variables.y.right.getY,\n      getMinY: variables.y.right.getMinY,\n    }\n  );\n  const [minLeftValue, maxLeftValue] = yScaleLeft.domain();\n  const [minRightValue, maxRightValue] = yScaleRight.domain();\n  const minValue = min([minLeftValue, minRightValue]) ?? 0;\n  const maxValue = max([maxLeftValue, maxRightValue]) ?? 0;\n  const yScale = scaleLinear().domain([minValue, maxValue]).nice();\n  const yOrientationScales = {\n    left: yScaleLeft,\n    right: yScaleRight,\n  };\n\n  // Dimensions\n  const { left, bottom } = useChartPadding({\n    xLabelPresent: !!xAxisLabel,\n    yScale: paddingLeftYScale,\n    width,\n    height,\n    interactiveFiltersConfig,\n    formatNumber,\n    bandDomain: xDomain,\n  });\n  const fakeRightTicks = paddingRightYScale.ticks(getTickNumber(height));\n  const maxRightTickWidth = Math.max(\n    ...fakeRightTicks.map(\n      (d) =>\n        getTextWidth(formatNumber(d), { fontSize: TICK_FONT_SIZE }) +\n        TICK_PADDING\n    )\n  );\n  const margins = useDualAxisMargins({\n    width,\n    left,\n    bottom,\n    maxRightTickWidth,\n    leftAxisTitle: variables.y.left.label,\n    rightAxisTitle: variables.y.right.label,\n  });\n  const leftAxisLabelSize = useAxisLabelSizeVariables({\n    label: variables.y.left.label,\n    width,\n  });\n  const rightAxisLabelSize = useAxisLabelSizeVariables({\n    label: variables.y.right.label,\n    width,\n  });\n  const bottomAxisLabelSize = useAxisLabelSizeVariables({\n    label: xAxisLabel,\n    width,\n  });\n  const chartWidth = getChartWidth({\n    width,\n    left: margins.left,\n    right: margins.right,\n  });\n  const bounds = useChartBounds({ width, chartWidth, height, margins });\n  const { chartHeight } = bounds;\n  const xScales = [xScale, xScaleTime, xScaleTimeRange];\n  const yScales = [yScale, yScaleLeft, yScaleRight];\n  adjustScales(xScales, yScales, { chartWidth, chartHeight });\n\n  const isMobile = useIsMobile();\n\n  const getTooltipInfo = (datum: Observation): TooltipInfo => {\n    const x = getXAsDate(datum);\n    const xScaled =\n      (xScale(formatXDate(x)) as number) + xScale.bandwidth() * 0.5;\n    const values = [variables.y.left, variables.y.right]\n      .map(({ orientation, getY, id, label, chartType }) => {\n        const yRaw = getY(datum);\n\n        if (!Number.isFinite(yRaw) || yRaw === null) {\n          return null;\n        }\n\n        const axisOffset = yOrientationScales[orientation](yRaw ?? 0);\n\n        return {\n          label,\n          value: `${yRaw}`,\n          color: colors(id),\n          axis: \"y\",\n          axisOffset,\n          symbol: chartType === \"line\" ? \"line\" : \"square\",\n        } satisfies TooltipValue;\n      })\n      .filter(truthy);\n    const yAnchor = isMobile\n      ? chartHeight\n      : mean(values.map((d) => d.axisOffset));\n    const placement = isMobile\n      ? MOBILE_TOOLTIP_PLACEMENT\n      : getCenteredTooltipPlacement({\n          chartWidth,\n          xAnchor: xScaled,\n          topAnchor: false,\n        });\n\n    return {\n      datum: {\n        label: \"\",\n        value: \"0\",\n        color: schemeCategory10[0],\n      },\n      xAnchor: xScaled,\n      yAnchor,\n      value: timeFormatUnit(x, xTimeUnit),\n      placement,\n      values,\n    };\n  };\n\n  return {\n    chartType: \"comboLineColumn\",\n    xKey,\n    bounds,\n    maxRightTickWidth,\n    chartData,\n    allData,\n    xScale,\n    xScaleInteraction: xScale.copy().padding(0),\n    xScaleTime,\n    xScaleTimeRange,\n    yScale,\n    yOrientationScales,\n    colors,\n    getColorLabel: (label) => label,\n    chartWideData,\n    getTooltipInfo,\n    leftAxisLabelSize: {\n      width: Math.max(leftAxisLabelSize.width, rightAxisLabelSize.width),\n      height: Math.max(leftAxisLabelSize.height, rightAxisLabelSize.height),\n      offset: Math.max(leftAxisLabelSize.offset, rightAxisLabelSize.offset),\n    },\n    bottomAxisLabelSize,\n    ...variables,\n  };\n};\n\nconst ComboLineColumnChartProvider = (\n  props: PropsWithChildren<ChartProps<ComboLineColumnConfig>>\n) => {\n  const { children, ...chartProps } = props;\n  const variables = useComboLineColumnStateVariables(chartProps);\n  const data = useComboLineColumnStateData(chartProps, variables);\n  const state = useComboLineColumnState(chartProps, variables, data);\n\n  return (\n    <ChartContext.Provider value={state}>{children}</ChartContext.Provider>\n  );\n};\n\nexport const ComboLineColumnChart = (\n  props: PropsWithChildren<ChartProps<ComboLineColumnConfig>>\n) => {\n  return (\n    <InteractionProvider>\n      <ComboLineColumnChartProvider {...props} />\n    </InteractionProvider>\n  );\n};\n","import { useCallback } from \"react\";\n\nimport { ComboLineColumnState } from \"@/charts/combo/combo-line-column-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { useAnnotationInteractions } from \"@/charts/shared/use-annotation-interactions\";\nimport { Observation } from \"@/domain/data\";\n\nexport const InteractionTemporalColumns = () => {\n  const {\n    chartData,\n    bounds: { chartHeight, margins },\n    getXAsDate,\n    formatXDate,\n    xScaleInteraction,\n  } = useChartState() as ComboLineColumnState;\n  const { onClick, onHover, onHoverOut } = useAnnotationInteractions({\n    focusingSegment: false,\n  });\n  const getXValue = useCallback(\n    (d: Observation) => {\n      return formatXDate(getXAsDate(d));\n    },\n    [formatXDate, getXAsDate]\n  );\n  const bandwidth = xScaleInteraction.bandwidth();\n\n  return (\n    <g transform={`translate(${margins.left} ${margins.top})`}>\n      {chartData.map((d, i) => {\n        const x = getXValue(d);\n        const xScaled = xScaleInteraction(x) as number;\n\n        return (\n          <rect\n            key={i}\n            x={xScaled}\n            y={0}\n            width={bandwidth}\n            height={Math.max(0, chartHeight)}\n            fill=\"hotpink\"\n            fillOpacity={0}\n            stroke=\"none\"\n            onMouseOver={() => onHover(d, { segment: undefined })}\n            onMouseOut={onHoverOut}\n            onClick={() => onClick(d, { segment: undefined })}\n          />\n        );\n      })}\n    </g>\n  );\n};\n","import { memo } from \"react\";\n\nimport { ChartDataWrapper } from \"@/charts/chart-data-wrapper\";\nimport { AxisHeightLinearDual } from \"@/charts/combo/axis-height-linear-dual\";\nimport { ComboLineColumn } from \"@/charts/combo/combo-line-column\";\nimport { ComboLineColumnChart } from \"@/charts/combo/combo-line-column-state\";\nimport { InteractionTemporalColumns } from \"@/charts/combo/overlay-temporal-columns\";\nimport { AxisWidthBand } from \"@/charts/shared/axis-width-band\";\nimport { BrushTime, shouldShowBrush } from \"@/charts/shared/brush\";\nimport { ChartContainer, ChartSvg } from \"@/charts/shared/containers\";\nimport { HoverDotMultiple } from \"@/charts/shared/interaction/hover-dots-multiple\";\nimport { Ruler } from \"@/charts/shared/interaction/ruler\";\nimport { Tooltip } from \"@/charts/shared/interaction/tooltip\";\nimport { ComboLineColumnConfig } from \"@/config-types\";\nimport { hasChartConfigs } from \"@/configurator\";\nimport { useConfiguratorState } from \"@/src\";\n\nimport { ChartProps, VisualizationProps } from \"../shared/chart-props\";\n\nexport const ChartComboLineColumnVisualization = (\n  props: VisualizationProps<ComboLineColumnConfig>\n) => {\n  return <ChartDataWrapper {...props} Component={ChartComboLineColumn} />;\n};\n\nconst ChartComboLineColumn = memo(\n  (props: ChartProps<ComboLineColumnConfig>) => {\n    const { chartConfig } = props;\n    const { interactiveFiltersConfig } = chartConfig;\n    const [{ dashboardFilters }] = useConfiguratorState(hasChartConfigs);\n    return (\n      <ComboLineColumnChart {...props}>\n        <ChartContainer>\n          <ChartSvg>\n            <AxisHeightLinearDual orientation=\"left\" />\n            <AxisHeightLinearDual orientation=\"right\" />\n            <AxisWidthBand />\n            <ComboLineColumn />\n            <InteractionTemporalColumns />\n            {shouldShowBrush(\n              interactiveFiltersConfig,\n              dashboardFilters?.timeRange\n            ) && <BrushTime />}\n          </ChartSvg>\n          <HoverDotMultiple />\n          <Ruler rotate />\n          <Tooltip type=\"multiple\" />\n        </ChartContainer>\n      </ComboLineColumnChart>\n    );\n  }\n);\n","import { useCallback } from \"react\";\n\nimport { useInteraction } from \"@/charts/shared/use-interaction\";\nimport {\n  Annotation,\n  AnnotationTarget,\n  ChartConfig,\n  Filters,\n  isSegmentInConfig,\n} from \"@/config-types\";\nimport { extractSingleFilters, getChartConfig } from \"@/config-utils\";\nimport { isAnnotationField } from \"@/configurator/components/chart-annotations/utils\";\nimport {\n  isConfiguring,\n  useConfiguratorState,\n} from \"@/configurator/configurator-state\";\nimport { FIELD_VALUE_NONE } from \"@/configurator/constants\";\nimport { Observation } from \"@/domain/data\";\n\nexport const useIsEditingAnnotation = () => {\n  const [state] = useConfiguratorState();\n  const { activeField } = getChartConfig(state);\n\n  return isAnnotationField(activeField) && isConfiguring(state);\n};\n\nexport const useGetAnnotationRenderState = () => {\n  const [interaction] = useInteraction();\n  const [state] = useConfiguratorState();\n  const chartConfig = getChartConfig(state);\n  const { activeField } = chartConfig;\n  const isEditing = useIsEditingAnnotation();\n\n  const getAnnotationRenderState = useCallback(\n    (\n      observation: Observation,\n      {\n        axisComponentId,\n        axisValue,\n      }: {\n        axisComponentId: string;\n        axisValue: string;\n      }\n    ) => {\n      let annotation: Annotation | undefined;\n\n      for (const a of chartConfig.annotations) {\n        const matches = matchesAnnotationTarget(observation, a.targets);\n\n        if (matches) {\n          annotation = a;\n          break;\n        }\n      }\n\n      let color: string | undefined;\n\n      if (annotation?.color && annotation.highlightType === \"filled\") {\n        color = annotation.color;\n      }\n\n      const currentInteraction = interaction;\n      const interactionMatches =\n        currentInteraction.type === \"annotation\" &&\n        currentInteraction.visible &&\n        currentInteraction.observation?.[`${axisComponentId}/__iri__`] ===\n          axisValue;\n\n      const targetsOtherAnnotations = chartConfig.annotations.some(\n        (a) =>\n          a.key !== activeField &&\n          matchesAnnotationTarget(observation, a.targets)\n      );\n      const isActive = annotation?.key === activeField;\n\n      let focused =\n        isEditing &&\n        ((interactionMatches && !targetsOtherAnnotations) || isActive);\n\n      return {\n        color,\n        focused,\n        isActive,\n      };\n    },\n    [activeField, chartConfig.annotations, interaction, isEditing]\n  );\n\n  return getAnnotationRenderState;\n};\n\nexport const getAnnotationTargetsFromObservation = (\n  observation: Observation,\n  {\n    chartConfig,\n    definitiveFilters,\n    segment,\n  }: {\n    chartConfig: ChartConfig;\n    definitiveFilters: Filters;\n    /** This is needed for stacked charts, where the segment value is not in the observation,\n     *  but in the getSegment function.\n     */\n    segment?: string;\n  }\n): Annotation[\"targets\"] => {\n  const singleFilters = extractSingleFilters(definitiveFilters);\n  const targets: Annotation[\"targets\"] = Object.entries(singleFilters)\n    .filter(([, v]) => v.value !== FIELD_VALUE_NONE)\n    .map(([componentId, value]) => ({\n      componentId,\n      value: `${value.value}`,\n    }));\n\n  switch (chartConfig.chartType) {\n    case \"column\":\n    case \"line\":\n    case \"area\": {\n      const xComponentId = chartConfig.fields.x.componentId;\n      if (xComponentId) {\n        targets.push({\n          componentId: xComponentId,\n          value: `${observation[`${xComponentId}/__iri__`]}`,\n        });\n      }\n\n      const segmentComponentId = chartConfig.fields.segment?.componentId;\n      if (segmentComponentId && segment) {\n        const value =\n          segment ?? observation[`${segmentComponentId}/__iri__`] ?? \"\";\n        targets.push({\n          componentId: segmentComponentId,\n          value,\n        });\n      }\n\n      break;\n    }\n    case \"bar\": {\n      const yComponentId = chartConfig.fields.y.componentId;\n      if (yComponentId) {\n        targets.push({\n          componentId: yComponentId,\n          value: `${observation[`${yComponentId}/__iri__`]}`,\n        });\n      }\n\n      const segmentComponentId = chartConfig.fields.segment?.componentId;\n      if (segmentComponentId && segment) {\n        const value =\n          segment ?? observation[`${segmentComponentId}/__iri__`] ?? \"\";\n        targets.push({\n          componentId: segmentComponentId,\n          value,\n        });\n      }\n\n      break;\n    }\n    case \"scatterplot\": {\n      const segmentComponentId = chartConfig.fields.segment?.componentId;\n      if (segmentComponentId && segment) {\n        const value =\n          segment ?? observation[`${segmentComponentId}/__iri__`] ?? \"\";\n        targets.push({\n          componentId: segmentComponentId,\n          value,\n        });\n      }\n\n      break;\n    }\n    case \"pie\": {\n      const segmentComponentId = chartConfig.fields.segment?.componentId;\n      if (segmentComponentId && segment) {\n        const value =\n          segment ?? observation[`${segmentComponentId}/__iri__`] ?? \"\";\n        targets.push({\n          componentId: segmentComponentId,\n          value,\n        });\n      }\n\n      break;\n    }\n    case \"comboLineColumn\":\n    case \"comboLineDual\":\n    case \"comboLineSingle\":\n    case \"map\":\n    case \"table\":\n      break;\n    default:\n      const _exhaustiveCheck: never = chartConfig;\n      return _exhaustiveCheck;\n  }\n\n  return targets;\n};\n\nexport const matchesAnnotationTarget = (\n  observation: Observation,\n  targets: AnnotationTarget[]\n) => {\n  if (targets.length === 0) {\n    return false;\n  }\n\n  for (const target of targets) {\n    const observationValue = observation[`${target.componentId}/__iri__`];\n\n    if (observationValue !== target.value) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nexport const hasSegmentAnnotation = (\n  observation: Observation,\n  segment: string,\n  chartConfig: ChartConfig,\n  definitiveFilters: Filters\n) => {\n  if (!isSegmentInConfig(chartConfig)) {\n    return false;\n  }\n\n  const segmentComponentId = chartConfig.fields.segment?.componentId;\n  if (!segmentComponentId) {\n    return false;\n  }\n\n  return chartConfig.annotations.some((annotation) => {\n    const observationTargets = getAnnotationTargetsFromObservation(\n      observation,\n      {\n        chartConfig,\n        definitiveFilters,\n        segment,\n      }\n    );\n\n    if (annotation.targets.length === 0 || observationTargets.length === 0) {\n      return false;\n    }\n\n    const relevantAnnotationTargets = annotation.targets.filter(\n      (annotationTarget) => {\n        return observationTargets.some((observationTarget) => {\n          return annotationTarget.componentId === observationTarget.componentId;\n        });\n      }\n    );\n\n    if (relevantAnnotationTargets.length === 0) {\n      return false;\n    }\n\n    return relevantAnnotationTargets.every((annotationTarget) => {\n      return observationTargets.some((observationTarget) => {\n        return (\n          annotationTarget.componentId === observationTarget.componentId &&\n          annotationTarget.value === observationTarget.value\n        );\n      });\n    });\n  });\n};\n","import { axisBottom } from \"d3-axis\";\nimport { useEffect, useRef } from \"react\";\n\nimport { GroupedColumnsState } from \"@/charts/column/columns-grouped-state\";\nimport { StackedColumnsState } from \"@/charts/column/columns-stacked-state\";\nimport { ColumnsState } from \"@/charts/column/columns-state\";\nimport { ComboLineColumnState } from \"@/charts/combo/combo-line-column-state\";\nimport { useXAxisTitleOffset } from \"@/charts/shared/chart-dimensions\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport {\n  maybeTransition,\n  renderContainer,\n} from \"@/charts/shared/rendering-utils\";\nimport { useChartTheme } from \"@/charts/shared/use-chart-theme\";\nimport { OpenMetadataPanelWrapper } from \"@/components/metadata-panel\";\nimport { useTransitionStore } from \"@/stores/transition\";\n\nexport const AxisWidthBand = () => {\n  const ref = useRef<SVGGElement>(null);\n  const {\n    xScale,\n    getXLabel,\n    xDimension,\n    xTimeUnit,\n    formatXDate,\n    yScale,\n    bounds: { chartHeight, chartWidth, margins },\n    xAxisLabel,\n    bottomAxisLabelSize,\n    formatXAxisTick,\n  } = useChartState() as\n    | ColumnsState\n    | StackedColumnsState\n    | GroupedColumnsState\n    | ComboLineColumnState;\n  const {\n    labelColor,\n    gridColor,\n    labelFontSize,\n    fontFamily,\n    axisLabelFontSize,\n    domainColor,\n  } = useChartTheme();\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const resolvedFontSize =\n    xScale.bandwidth() > labelFontSize ? labelFontSize : xScale.bandwidth();\n  const xAxisTitleOffset = useXAxisTitleOffset(\n    xScale,\n    getXLabel,\n    xTimeUnit,\n    resolvedFontSize\n  );\n\n  useEffect(() => {\n    if (ref.current) {\n      const rotation = true;\n      const hasNegativeValues = yScale.domain()[0] < 0;\n      const axis = axisBottom(xScale)\n        .tickSizeOuter(0)\n        .tickSizeInner(hasNegativeValues ? -chartHeight : 6)\n        .tickPadding(rotation ? -10 : 0)\n        .tickFormat(formatXAxisTick ?? ((tick) => tick));\n\n      const g = renderContainer(ref.current, {\n        id: \"axis-width-band\",\n        transform: `translate(${margins.left} ${chartHeight + margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g) => g.attr(\"data-testid\", \"axis-width-band\").call(axis),\n        renderUpdate: (g, opts) =>\n          maybeTransition(g, {\n            transition: opts.transition,\n            s: (g) => g.call(axis),\n          }),\n      });\n\n      g.select(\".domain\").remove();\n      g.selectAll(\".tick line\").attr(\n        \"stroke\",\n        hasNegativeValues ? gridColor : domainColor\n      );\n      g.selectAll(\".tick text\")\n        .attr(\"transform\", rotation ? \"rotate(90)\" : \"rotate(0)\")\n        .attr(\n          \"x\",\n          rotation\n            ? resolvedFontSize + (labelFontSize - resolvedFontSize) * 0.6\n            : 0\n        )\n        .attr(\n          \"dy\",\n          hasNegativeValues\n            ? resolvedFontSize + (labelFontSize - resolvedFontSize)\n            : 0.6 * resolvedFontSize + (labelFontSize - resolvedFontSize) * 0.4\n        )\n        .attr(\"font-size\", resolvedFontSize)\n        .attr(\"font-family\", fontFamily)\n        .attr(\"fill\", labelColor)\n        .attr(\"text-anchor\", rotation ? \"start\" : \"unset\");\n    }\n  }, [\n    chartHeight,\n    domainColor,\n    enableTransition,\n    fontFamily,\n    getXLabel,\n    gridColor,\n    labelColor,\n    labelFontSize,\n    margins.left,\n    margins.top,\n    transitionDuration,\n    xScale,\n    xTimeUnit,\n    yScale,\n    formatXDate,\n    formatXAxisTick,\n    resolvedFontSize,\n  ]);\n\n  return (\n    <>\n      <foreignObject\n        x={margins.left + chartWidth / 2 - bottomAxisLabelSize.width / 2}\n        y={margins.top + chartHeight + xAxisTitleOffset + 8}\n        width={chartWidth}\n        height={bottomAxisLabelSize.height}\n        style={{ display: \"flex\" }}\n      >\n        <OpenMetadataPanelWrapper component={xDimension}>\n          <span style={{ fontSize: axisLabelFontSize, lineHeight: 1.5 }}>\n            {xAxisLabel}\n          </span>\n        </OpenMetadataPanelWrapper>\n      </foreignObject>\n      <g ref={ref} />\n    </>\n  );\n};\n\nexport const AxisWidthBandDomain = () => {\n  const ref = useRef<SVGGElement>(null);\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const { xScale, yScale, bounds } = useChartState() as ColumnsState;\n  const { chartHeight, margins } = bounds;\n  const { domainColor } = useChartTheme();\n\n  useEffect(() => {\n    if (ref.current) {\n      const axis = axisBottom(xScale).tickSizeOuter(0);\n      const g = renderContainer(ref.current, {\n        id: \"axis-width-band-domain\",\n        transform: `translate(${margins.left} ${chartHeight + margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g) => g.call(axis),\n        renderUpdate: (g, opts) =>\n          maybeTransition(g, {\n            transition: opts.transition,\n            s: (g) => g.call(axis),\n          }),\n      });\n\n      g.selectAll(\".tick line\").remove();\n      g.selectAll(\".tick text\").remove();\n      g.select(\".domain\")\n        .attr(\"transform\", `translate(0, -${bounds.chartHeight - yScale(0)})`)\n        .attr(\"stroke\", domainColor);\n    }\n  }, [\n    bounds.chartHeight,\n    chartHeight,\n    domainColor,\n    enableTransition,\n    margins.left,\n    margins.top,\n    transitionDuration,\n    xScale,\n    yScale,\n  ]);\n\n  return <g ref={ref} />;\n};\n","import { BaseType, Selection } from \"d3-selection\";\n\nimport {\n  maybeTransition,\n  RenderOptions,\n} from \"@/charts/shared/rendering-utils\";\nimport { DISABLE_SCREENSHOT_COLOR_WIPE_KEY } from \"@/components/chart-shared\";\n\nexport type RenderTotalValueLabelDatum = {\n  key: string;\n  x: number;\n  y: number;\n  valueLabel: string;\n};\n\nexport const renderTotalValueLabels = (\n  g: Selection<SVGGElement, null, SVGGElement, unknown>,\n  data: RenderTotalValueLabelDatum[],\n  options: RenderOptions & {\n    rotate: boolean;\n    textAnchor?: \"start\" | \"middle\" | \"end\";\n    dx?: number;\n    dy?: number;\n    fontSize: number;\n    fontFamily: string;\n    strokeWidth?: number;\n  }\n) => {\n  const {\n    transition,\n    rotate,\n    textAnchor: _textAnchor,\n    dx = 0,\n    dy = -8,\n    fontFamily,\n    fontSize,\n    strokeWidth = 3,\n  } = options;\n  const textAnchor = _textAnchor ?? getValueLabelTextAnchor(rotate);\n\n  g.selectAll<SVGTextElement, RenderTotalValueLabelDatum>(\"text\")\n    .data(data, (d) => d.key)\n    .join(\n      (enter) =>\n        enter\n          .append(\"text\")\n          .attr(\"font-size\", fontSize)\n          .attr(\"font-family\", fontFamily)\n          .attr(\"text-anchor\", textAnchor)\n          .attr(\"paint-order\", \"stroke\")\n          .attr(\"stroke\", \"white\")\n          .attr(\"stroke-width\", strokeWidth)\n          .style(\"transform\", (d) =>\n            getValueLabelTransform(d, {\n              rotate,\n              labelHeight: fontSize,\n              dx,\n              dy,\n            })\n          )\n          .style(\"line-height\", 1)\n          .style(\"opacity\", 0)\n          .text((d) => d.valueLabel)\n          .call((enter) =>\n            maybeTransition(enter, {\n              transition,\n              s: (g) => g.style(\"opacity\", 1),\n            })\n          ),\n      (update) =>\n        maybeTransition(update, {\n          s: (g) =>\n            g\n              .attr(\"text-anchor\", textAnchor)\n              .style(\"transform\", (d) =>\n                getValueLabelTransform(d, {\n                  rotate,\n                  labelHeight: fontSize,\n                  dx,\n                  dy,\n                })\n              )\n              .style(\"opacity\", 1)\n              .text((d) => d.valueLabel),\n          transition,\n        }),\n      (exit) =>\n        maybeTransition(exit, {\n          transition,\n          s: (g) => g.style(\"opacity\", 0).remove(),\n        })\n    );\n};\n\nconst getValueLabelTransform = (\n  d: RenderTotalValueLabelDatum,\n  {\n    rotate,\n    labelHeight,\n    dx,\n    dy,\n  }: {\n    rotate: boolean;\n    labelHeight: number;\n    dx: number;\n    dy: number;\n  }\n) => {\n  if (rotate) {\n    return `translate(${d.x + labelHeight / 3}px, ${d.y - (labelHeight * 2) / 3}px) rotate(-90deg)`;\n  }\n\n  return `translate(${d.x + dx}px, ${d.y + dy}px) rotate(0deg)`;\n};\n\nconst getValueLabelTextAnchor = (rotate: boolean) => {\n  return rotate ? \"start\" : \"middle\";\n};\n\nexport const setSegmentWrapperValueLabelProps = <\n  T extends { valueLabel?: string; valueLabelColor?: string },\n>(\n  g: Selection<BaseType, T, SVGGElement, null>\n) => {\n  return g\n    .style(\"display\", \"flex\")\n    .style(\"justify-content\", \"center\")\n    .style(\"align-items\", \"center\")\n    .style(\"width\", \"100%\")\n    .style(\"height\", \"100%\")\n    .style(\"padding\", \"2px\");\n};\n\nexport const setSegmentValueLabelProps = <\n  T extends { valueLabel?: string; valueLabelColor?: string },\n>(\n  g: Selection<BaseType, T, SVGGElement, null>\n) => {\n  return g\n    .attr(DISABLE_SCREENSHOT_COLOR_WIPE_KEY, true)\n    .style(\"overflow\", \"hidden\")\n    .style(\"font-size\", \"12px\")\n    .style(\"white-space\", \"nowrap\")\n    .style(\"text-overflow\", \"ellipsis\");\n};\n","import isEqual from \"lodash/isEqual\";\n\nimport {\n  getAnnotationTargetsFromObservation,\n  useIsEditingAnnotation,\n} from \"@/charts/shared/annotation-utils\";\nimport { useInteraction } from \"@/charts/shared/use-interaction\";\nimport { getChartConfig, useDefinitiveFilters } from \"@/config-utils\";\nimport { useConfiguratorState } from \"@/configurator/configurator-state\";\nimport { Observation } from \"@/domain/data\";\nimport { useEvent } from \"@/utils/use-event\";\n\nexport const useAnnotationInteractions = ({\n  focusingSegment,\n}: {\n  focusingSegment: boolean;\n}) => {\n  const [, dispatchInteraction] = useInteraction();\n  const [state, dispatch] = useConfiguratorState();\n  const chartConfig = getChartConfig(state);\n  const { activeField, annotations } = chartConfig;\n  const definitiveFilters = useDefinitiveFilters();\n  const isEditingAnnotation = useIsEditingAnnotation();\n  const activeAnnotation = annotations.find((a) => a.key === activeField);\n\n  const onClick = useEvent(\n    (observation: Observation, { segment }: { segment?: string }) => {\n      if (!isEditingAnnotation || !activeAnnotation || !activeField) {\n        return;\n      }\n\n      const activeNewTargets = getAnnotationTargetsFromObservation(\n        observation,\n        {\n          chartConfig,\n          definitiveFilters,\n          segment,\n        }\n      );\n\n      for (const annotation of annotations) {\n        const currentTargets = annotation.targets;\n        const newTargets =\n          annotation.key !== activeField\n            ? getAnnotationTargetsFromObservation(observation, {\n                chartConfig,\n                definitiveFilters,\n                segment,\n              })\n            : activeNewTargets;\n\n        if (isEqual(currentTargets, newTargets)) {\n          return;\n        }\n      }\n\n      dispatch({\n        type: \"CHART_ANNOTATION_TARGETS_CHANGE\",\n        value: {\n          key: activeField,\n          targets: activeNewTargets,\n        },\n      });\n    }\n  );\n\n  const onHover = useEvent(\n    (observation: Observation, { segment }: { segment?: string }) => {\n      dispatchInteraction({\n        type: \"INTERACTION_UPDATE\",\n        value: {\n          type: isEditingAnnotation ? \"annotation\" : \"tooltip\",\n          visible: true,\n          observation,\n          focusingSegment,\n          segment,\n        },\n      });\n    }\n  );\n\n  const onHoverOut = useEvent(() => {\n    dispatchInteraction({\n      type: \"INTERACTION_HIDE\",\n    });\n  });\n\n  return {\n    onClick,\n    onHover,\n    onHoverOut,\n  };\n};\n"],"names":["PADDING_OUTER","PADDING_INNER","PADDING_WITHIN","useGetRenderStackedColumnDatum","colors","showValuesBySegmentMapping","valueLabelFormatter","xScale","yScale","getX","getRenderingKey","useChartState","state","useConfiguratorState","chartConfig","getChartConfig","definitiveFilters","useDefinitiveFilters","bandwidth","useCallback","s","segment","key","color","map","d","observation","data","value","valueLabel","undefined","valueLabelColor","getContrastingColor","xRaw","y","hasAnnotation","hasSegmentAnnotation","x","width","height","Math","max","valueLabelOffset","renderColumns","g","options","transition","y0","selectAll","join","enter","append","attr","call","_","i","maybeTransition","setSegmentWrapperValueLabelProps","setSegmentValueLabelProps","style","select","text","update","toggleFocusBorder","exit","remove","AxisHeightLinearDual","props","orientation","leftAligned","gridColor","labelColor","axisLabelFontSize","useChartTheme","ref","setRef","useState","yOrientationScales","bounds","chartWidth","chartHeight","margins","axisTitle","label","useRenderAxisHeightLinear","id","scale","lineColor","textColor","axisTitleWidth","axisTitleHeight","useAxisTitleSize","TICK_PADDING","_jsxs","_Fragment","children","_jsx","theme","palette","getContrastText","OpenMetadataPanelWrapper","component","dimension","_objectSpread","DISABLE_SCREENSHOT_COLOR_WIPE_ATTR","fontSize","lineHeight","backgroundColor","padding","TITLE_V_PADDING","TITLE_H_PADDING","borderRadius","wordBreak","newRef","Columns","chartData","getXAsDate","formatXDate","useRef","enableTransition","useTransitionStore","enable","transitionDuration","duration","yColumn","left","chartType","right","renderData","useMemo","xScaled","getY","NaN","yScaled","abs","useEffect","current","renderContainer","transform","top","render","opts","Lines","yLine","pathGenerator","line","defined","isNaN","Line","path","memo","stroke","strokeWidth","fill","ComboLineColumn","useComboLineColumnStateVariables","numericalYVariables","dimensions","dimensionsById","measuresById","observations","fields","interactiveFiltersConfig","filters","useChartConfigFilters","baseVariables","useBaseVariables","bandXVariables","useBandXVariables","interactiveFiltersVariables","useInteractiveFiltersVariables","lineId","lineComponentId","lineAxisOrientation","columnId","columnComponentId","lineYGetter","getLabelWithUnit","colorMapping","Number","getMinY","minY","min","shouldUseDynamicMinScaleValue","scaleType","columnYGetter","sortData","sortComboData","useRenderingKeyVariable","useComboLineColumnStateData","chartProps","variables","xDimension","getTimeRangeDate","plottableData","usePlottableData","useChartData","timeRangeDimensionId","getAxisValueAsDate","useComboLineColumnState","xAxisLabel","scalesData","timeRangeData","paddingData","allData","xKey","componentId","formatNumber","timeFormatUnit","chartWideData","xScaleTime","xScaleTimeRange","useCommonComboState","getXAsString","yGetters","computeTotal","xTimeUnit","interval","getTimeInterval","xMin","xMax","domain","xDomain","range","concat","scaleBand","paddingInner","paddingOuter","yScaleLeft","paddingYScale","paddingLeftYScale","useYScales","yScaleRight","paddingRightYScale","minLeftValue","maxLeftValue","minRightValue","maxRightValue","minValue","maxValue","scaleLinear","nice","bottom","useChartPadding","xLabelPresent","bandDomain","maxRightTickWidth","fakeRightTicks","ticks","getTickNumber","getTextWidth","TICK_FONT_SIZE","useDualAxisMargins","leftAxisTitle","rightAxisTitle","leftAxisLabelSize","useAxisLabelSizeVariables","rightAxisLabelSize","bottomAxisLabelSize","getChartWidth","useChartBounds","xScales","yScales","adjustScales","isMobile","useIsMobile","xScaleInteraction","copy","getColorLabel","getTooltipInfo","datum","values","_ref","yRaw","isFinite","axisOffset","axis","symbol","filter","truthy","yAnchor","mean","placement","MOBILE_TOOLTIP_PLACEMENT","getCenteredTooltipPlacement","xAnchor","topAnchor","schemeCategory10","offset","ComboLineColumnChartProvider","_objectWithoutProperties","_excluded","ChartContext","Provider","ComboLineColumnChart","InteractionProvider","InteractionTemporalColumns","onClick","onHover","onHoverOut","useAnnotationInteractions","focusingSegment","getXValue","fillOpacity","onMouseOver","onMouseOut","ChartComboLineColumnVisualization","ChartDataWrapper","Component","ChartComboLineColumn","dashboardFilters","hasChartConfigs","ChartContainer","ChartSvg","AxisWidthBand","shouldShowBrush","timeRange","BrushTime","HoverDotMultiple","Ruler","rotate","Tooltip","type","useIsEditingAnnotation","activeField","isAnnotationField","isConfiguring","useGetAnnotationRenderState","interaction","useInteraction","isEditing","annotation","axisComponentId","axisValue","a","annotations","matchesAnnotationTarget","targets","highlightType","interactionMatches","currentInteraction","visible","targetsOtherAnnotations","some","isActive","focused","getAnnotationTargetsFromObservation","_ref2","Object","entries","extractSingleFilters","_ref3","v","FIELD_VALUE_NONE","_ref4","xComponentId","push","segmentComponentId","yComponentId","length","target","observationValue","isSegmentInConfig","observationTargets","relevantAnnotationTargets","annotationTarget","observationTarget","every","getXLabel","formatXAxisTick","labelFontSize","fontFamily","domainColor","resolvedFontSize","xAxisTitleOffset","useXAxisTitleOffset","hasNegativeValues","axisBottom","tickSizeOuter","tickSizeInner","tickPadding","tickFormat","tick","renderUpdate","display","AxisWidthBandDomain","renderTotalValueLabels","textAnchor","_textAnchor","dx","dy","getValueLabelTextAnchor","getValueLabelTransform","labelHeight","DISABLE_SCREENSHOT_COLOR_WIPE_KEY","dispatchInteraction","dispatch","isEditingAnnotation","activeAnnotation","find","useEvent","activeNewTargets","currentTargets","newTargets","isEqual"],"sourceRoot":""}