(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[59021],{61887:function(e,t,r){var o={"./int/bathing-water-quality-hierarchie":[52551,3,52551],"./int/bathing-water-quality-hierarchie.json":[52551,3,52551],"./int/column-heavy-metals":[47578,3,47578],"./int/column-heavy-metals.json":[47578,3,47578],"./int/configs":[88188,9,88188],"./int/configs.ts":[88188,9,88188],"./int/map-nfi":[46238,3,46238],"./int/map-nfi.json":[46238,3,46238],"./int/pie-red-list":[54104,3,54104],"./int/pie-red-list.json":[54104,3,54104],"./int/scatterplot-palmer-penguins":[39322,3,39322],"./int/scatterplot-palmer-penguins.json":[39322,3,39322],"./prod/column-1":[17940,3,17940],"./prod/column-1.json":[17940,3,17940],"./prod/column-2":[82095,3,82095],"./prod/column-2.json":[82095,3,82095],"./prod/column-3":[82369,3,82369],"./prod/column-3.json":[82369,3,82369],"./prod/column-4":[4725,3,4725],"./prod/column-4.json":[4725,3,4725],"./prod/column-5":[34041,3,34041],"./prod/column-5.json":[34041,3,34041],"./prod/column-6":[90275,3,90275],"./prod/column-6.json":[90275,3,90275],"./prod/column-7":[69975,3,69975],"./prod/column-7.json":[69975,3,69975],"./prod/column-traffic-pollution":[96770,3,96770],"./prod/column-traffic-pollution.json":[96770,3,96770],"./prod/combo-line-dual":[24019,3,24019],"./prod/combo-line-dual.json":[24019,3,24019],"./prod/configs":[80450,9,80450],"./prod/configs.ts":[80450,9,80450],"./prod/dashboard-free-canvas":[86767,3,86767],"./prod/dashboard-free-canvas.json":[86767,3,86767],"./prod/dashboard-tall":[96842,3,96842],"./prod/dashboard-tall.json":[96842,3,96842],"./prod/line-1":[17229,3,17229],"./prod/line-1.json":[17229,3,17229],"./prod/line-2":[61896,3,61896],"./prod/line-2.json":[61896,3,61896],"./prod/line-waldflasche":[78979,3,78979],"./prod/line-waldflasche.json":[78979,3,78979],"./prod/map-1":[14874,3,14874],"./prod/map-1.json":[14874,3,14874],"./prod/most-recent-time-range-interactive-filter":[33169,3,33169],"./prod/most-recent-time-range-interactive-filter.json":[33169,3,33169],"./prod/pie-1":[65751,3,65751],"./prod/pie-1.json":[65751,3,65751],"./test/4YL1p4QTFQS4":[46759,3,46759],"./test/4YL1p4QTFQS4.json":[46759,3,46759],"./test/chartConfig-column-covid19":[49413,3,49413],"./test/chartConfig-column-covid19.json":[49413,3,49413],"./test/chartConfig-photovoltaik-und-gebaudeprogramm":[72506,3,72506],"./test/chartConfig-photovoltaik-und-gebaudeprogramm.json":[72506,3,72506],"./test/chartConfig-table-covid19":[97460,3,97460],"./test/chartConfig-table-covid19.json":[97460,3,97460]};function n(e){if(!r.o(o,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=o[e],n=t[0];return r.e(t[2]).then(function(){return r.t(n,16|t[1])})}n.keys=function(){return Object.keys(o)},n.id=61887,e.exports=n},1283:function(e,t,r){"use strict";r.d(t,{F:function(){return q}});var o=r(17043),n=r(90089),a=r(96338),s=r(19914),i=r(60116),c=r(64986),l=r(40624),d=r(27378),u=r(58555),p=r(97091),h=r(48863),m=r(62050),f=r(93477),j=r(78222),b=r(16370),g=r(97971),y=r(47612),x=r(52137),v=r(32597),O=r(78081),k=r(10369),C=r(65619),w=r(53082),P=r(17899),S=r(5680),D=r(78839),F=r(25390),_=r(71238),E=r(62075),Z=r(56436),B=r(87182),K=r(80207),M=r(94460),I=r(49148),T=r(8788),N=r(82395),U=r(24246);let L=["dataSource","state","chartConfig","configKey","children","embedParams","shouldShrink"];function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let $=(0,d.forwardRef)((e,t)=>{let{dataSource:r,state:o,chartConfig:a,configKey:s,children:i,embedParams:c,shouldShrink:l}=e,u=(0,n.Z)(e,L),p=(0,d.useMemo)(()=>(0,S.ag)(),[]);return(0,U.jsx)(S.ax.Provider,{value:p,children:(0,U.jsx)(O.Ig,{children:(0,U.jsx)(x.hC,W(W({layout:o.layout,ref:t,chartKey:a.key},u),{},{children:(0,U.jsx)(G,{dataSource:r,state:o,chartConfig:a,configKey:s,metadataPanelStore:p,embedParams:c,shouldShrink:l,children:i},a.key)}),a.key)},a.key)})}),q=e=>{let{configKey:t,embedParams:r,shouldShrink:o,isPreview:n}=e,[a]=(0,_.lY)(_.s9),{dataSource:c}=a,l=(0,I.bU)(),u=(0,d.useMemo)(()=>(0,S.ag)(),[]),p=Q({shrink:!0}),h=(0,d.useCallback)(e=>(0,U.jsx)($,{dataSource:c,state:a,chartConfig:e,configKey:t,embedParams:r},e.key),[t,c,r,a]),m=(0,d.useCallback)(e=>{switch(e.type){case"chart":return h(a.chartConfigs.find(t=>t.key===e.key));case"text":return(0,D.aW)(e);default:return e}},[a.chartConfigs,h]),j=(0,d.useCallback)(e=>{let{height:t}=e;window.parent.postMessage({type:f.m2,height:t},"*")},[]),[b]=(0,N.y)(j);return(0,U.jsx)(S.ax.Provider,{value:u,children:(0,U.jsx)(T.ch,{chartConfigs:a.chartConfigs,children:(0,U.jsx)(i.Z,{ref:b,children:"dashboard"===a.layout.type?(0,U.jsxs)(i.Z,{className:p.dashboardBoxWrapper,children:[a.layout.meta.title[l]||a.layout.meta.description[l]?(0,U.jsxs)(w.k,{flexDirection:"column",children:[a.layout.meta.title[l]&&(0,U.jsx)(E.Dx,{text:a.layout.meta.title[l]}),a.layout.meta.description[l]&&(0,U.jsx)(E.dk,{text:a.layout.meta.description[l]})]}):null,(0,U.jsx)(x.WK,{layoutType:a.layout.layout,renderBlock:m}),1!==a.chartConfigs.length&&t&&(0,U.jsx)(y.cS,{configKey:t,createdWith:s.ag._({id:"metadata.link.created.with"})})]}):(0,U.jsxs)(U.Fragment,{children:[(0,U.jsxs)(w.k,{sx:{flexDirection:"column",mb:a.layout.meta.title[l]||a.layout.meta.description[l]?4:0},children:[a.layout.meta.title[l]&&(0,U.jsx)(E.Dx,{text:a.layout.meta.title[l]}),a.layout.meta.description[l]&&(0,U.jsx)(E.dk,{text:a.layout.meta.description[l]})]}),(0,U.jsxs)(O.Ig,{children:[(0,U.jsx)(C.u,{}),(0,U.jsx)(x.hC,{layout:a.layout,chartKey:a.activeChartKey,children:(0,U.jsx)(G,{dataSource:c,state:a,chartConfig:(0,F.f6)(a),configKey:t,metadataPanelStore:u,embedParams:r,shouldShrink:o,isPreview:n})})]})]})})})})},Q=(0,c.Z)(e=>({root:{position:"relative",paddingLeft:t=>{let{shrink:r}=t;return`calc(${e.spacing(5)} + ${r?Z.pG:0}px)`},padding:t=>{let{optimizeSpace:r}=t;return r?e.spacing(3):e.spacing(6)},transition:"padding 0.25s ease"},dashboardBoxWrapper:{[e.breakpoints.up("xs")]:{padding:e.spacing(5,4,2,4)},[e.breakpoints.up("md")]:{padding:e.spacing(5)},[e.breakpoints.up("lg")]:{padding:e.spacing(6)},gap:16,display:"flex",flexDirection:"column",backgroundColor:e.palette.cobalt[50]}})),z=e=>{let{dataSource:t=B.Ve,state:r,chartConfig:o,configKey:n,className:s,children:c,metadataPanelStore:f,embedParams:x,shouldShrink:C,isPreview:S}=e,{meta:D}=o,F=(0,d.useRef)(null),{isTable:_,computeContainerHeight:N}=(0,O.IS)(),L=(0,u.oR)(f,e=>e.open),R=(0,d.useMemo)(()=>{let e=F.current?.getBoundingClientRect().width;return!!e&&(C??(L&&e>2*Z.pG))},[C,L]);(0,d.useEffect)(()=>{let e=f.subscribe(()=>{N()});return()=>e()});let $=(0,v.TZ)({removeBorder:x?.removeBorder}),q=Q({shrink:R,optimizeSpace:x?.optimizeSpace}),z=(0,I.bU)(),G=(0,B.Id)(t),V={sourceType:t.type,sourceUrl:t.url,locale:z},[{data:Y}]=(0,K.bi)({variables:{sourceType:t.type,sourceUrl:t.url,locale:z,cubeFilters:o.cubes.map(e=>({iri:e.iri}))}}),A=Y?.dataCubesMetadata,H=(0,p.Zl)(r.chartConfigs),[{data:X}]=(0,K.k$)({chartConfig:o,variables:W(W({},V),{},{cubeFilters:o.cubes.map(e=>({iri:e.iri,componentIds:H,joinBy:e.joinBy}))})}),J=X?.dataCubesComponents,ee=J?.dimensions,et=J?.measures,er=(0,d.useMemo)(()=>ee&&et?[...ee,...et]:[],[ee,et]);return(0,U.jsxs)(i.Z,{ref:F,className:(0,l.Z)($.root,$.pastEditing,q.root,s),children:[c,(0,U.jsxs)(g.x,{resetKeys:[o],children:[(0,U.jsxs)("div",{children:[A?.some(e=>e.publicationStatus===M.sl.Draft)&&(0,U.jsx)(i.Z,{sx:{mb:4},children:(0,U.jsx)(P.BI,{children:(0,U.jsx)(a.cC,{id:"dataset.publicationStatus.draft.warning",components:{0:(0,U.jsx)("br",{}),1:(0,U.jsx)("strong",{})}})})}),A?.some(e=>e.expires)&&(0,U.jsx)(i.Z,{sx:{mb:4},children:(0,U.jsx)(P.BI,{children:(0,U.jsx)(a.cC,{id:"dataset.publicationStatus.expires.warning",components:{0:(0,U.jsx)("br",{}),1:(0,U.jsx)("strong",{})}})})}),!G&&(0,U.jsx)(i.Z,{sx:{mb:4},children:(0,U.jsx)(P.m0,{children:(0,U.jsx)(a.cC,{id:"data.source.notTrusted"})})}),(0,m.v5)(o)&&(0,U.jsx)(i.Z,{sx:{mb:4},children:(0,U.jsx)(P.pd,{children:(0,U.jsx)(a.cC,{id:"dataset.hasImputedValues"})})})]}),(0,U.jsx)(h.p,{children:(0,U.jsxs)(T.Zg,{chartConfigKey:o.key,children:[(0,U.jsxs)(w.k,{sx:{height:"fit-content",justifyContent:D.title[z]?"space-between":"flex-end",gap:2},children:[D.title[z]?(0,U.jsx)(E.Dx,{text:D.title[z],smaller:!0}):(0,U.jsx)("span",{style:{height:1}}),x?.removeMoreOptionsButton?null:(0,U.jsx)(j.G,{children:(0,U.jsx)(v.iA,{configKey:n,chartKey:o.key,chartWrapperNode:F.current,components:er,disableDatabaseRelatedActions:S})})]}),D.description[z]?(0,U.jsx)(E.dk,{text:D.description[z],smaller:!0}):(0,U.jsx)("span",{style:{height:1}}),(0,U.jsx)(v.xx,{dataSource:t,chartConfig:o,dashboardFilters:r.dashboardFilters,metadataPanelProps:x?.removeMoreOptionsButton?void 0:{components:er,container:F.current,allowMultipleOpen:!0}}),(0,U.jsx)(O.S4,{children:_?(0,U.jsx)(b._,{dataSource:t,chartConfig:o,dashboardFilters:r.dashboardFilters,sx:{maxHeight:"100%"}}):(0,U.jsx)(k.I,{dataSource:t,componentIds:H,chartConfig:o,dashboardFilters:r.dashboardFilters,embedParams:x})}),(0,U.jsx)(y.Tc,{configKey:n,dataSource:t,chartConfig:o,dashboardFilters:r.dashboardFilters,components:er,showVisualizeLink:"dashboard"!==r.layout.type||"dashboard"===r.layout.type&&1===r.chartConfigs.length,hideFilters:x?.removeFilters,hideMetadata:x?.removeFootnotes,metadataPanelProps:x?.removeMoreOptionsButton?{components:er,container:F.current,allowMultipleOpen:!0}:void 0})]})})]})]})},G=e=>(0,d.createElement)(z,W(W({},e),{},{key:e.chartConfig.key}))},39669:function(e,t,r){"use strict";r.r(t);var o=r(17043),n=r(86677),a=r(27378),s=r(1283),i=r(71238),c=r(76394),l=r(24246);function d(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,o)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?d(Object(r),!0).forEach(function(t){(0,o.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):d(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}t.default=()=>{let{env:e,slug:t}=(0,n.useRouter)().query,{0:o,1:d}=(0,a.useState)();return((0,a.useEffect)(()=>{e&&t&&(async()=>{let o=(await r(61887)(`./${e}/${t}`)).default;d(u(u({},o),{},{data:await (0,c.qm)(o.data)}))})()},[e,t]),o)?(0,l.jsx)(i.c7,{chartId:"published",initialState:u(u({},o.data),{},{state:"PUBLISHED"}),children:(0,l.jsx)(s.F,{})}):null}},82359:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/__test/[env]/[slug]",function(){return r(39669)}])}},function(e){e.O(0,[31434,88033,68143,72159,54568,96761,2386,22686,25592,17671,65362,92888,49774,40179],function(){return e(e.s=82359)}),_N_E=e.O()}]);
//# sourceMappingURL=[slug]-fed24f61d9ef793f.js.map