(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[86076],{96718:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return D}});var l=s(27378),a=s(60116),t=s(345),n=s(62033),i=s(971),c=s(85492),u=s(64189),o=s(381),d=s(65637),h=s(1787),x=s(40749),f=s(52936),j=s(98700),p=s(87026),m=s(45298),y=s(24246);let g={name:"Territory theme",type:m.r4.DataCubeTheme,value:"https://register.ld.admin.ch/opendataswiss/category/territory"},v={name:"Geography theme",type:m.r4.DataCubeTheme,value:"https://register.ld.admin.ch/opendataswiss/category/geography"};m.r4.DataCubeOrganization;let Z=e=>{let{query:r,locale:s,filters:i,includeDrafts:h,sourceUrl:x}=e,f=(0,l.useRef)(0),{0:j,1:g}=(0,l.useState)(0);(0,l.useEffect)(()=>{f.current=Date.now()},[r,s,h]);let[v]=(0,m.kY)({variables:{locale:s,query:r,filters:i.map(e=>{let{type:r,value:s}=e;return{type:r,value:s}}),includeDrafts:h,sourceUrl:x,sourceType:"sparql"}});(0,l.useEffect)(()=>{v.data&&g(Date.now())},[v.data]);let Z=f.current&&j?j-f.current:void 0,b=v?.extensions?.queries;return(0,y.jsxs)(a.Z,{children:[(0,y.jsxs)(p.Z,{variant:"h5",children:['"',r,'"\xa0',i?i.map(e=>(0,y.jsx)(t.Z,{size:"small",label:e.name},e.value)):null]}),v.fetching?(0,y.jsx)(d.Z,{}):(0,y.jsxs)("div",{children:[(0,y.jsxs)(p.Z,{variant:"caption",color:v.data?.searchCubes.length===0?"error":void 0,children:[v.data?.searchCubes.length," results |"," "]}),(0,y.jsx)(p.Z,{variant:"caption",color:Z&&Z>1500?"error":void 0,children:void 0!==Z?`${Z}ms`:""})]}),v.error?(0,y.jsx)(p.Z,{color:"error",children:v.error.message}):null,(0,y.jsx)(n.Z,{spacing:4,children:v.data?.searchCubes.map(e=>{let{cube:r,highlightedTitle:s,highlightedDescription:l}=e;return y.jsxs("div",{children:[y.jsx(p.Z,{variant:"h6",dangerouslySetInnerHTML:{__html:s}}),y.jsx(p.Z,{variant:"caption",dangerouslySetInnerHTML:{__html:l?.slice(0,100)??"..."}}),y.jsx("br",{}),y.jsx(p.Z,{variant:"caption",children:r.iri}),y.jsxs(n.Z,{spacing:2,direction:"row",children:[r.themes.map(e=>y.jsx(t.Z,{size:"small",label:e.label},e.iri)),y.jsx(t.Z,{size:"small",label:r.publicationStatus})]})]},r.iri)})}),(0,y.jsxs)(c.Z,{sx:{mt:2,borderTop:0},children:[(0,y.jsx)(o.Z,{sx:{typography:"h4"},children:"queries"}),(0,y.jsx)(u.Z,{children:(0,y.jsx)(n.Z,{spacing:2,children:b?b.map((e,r)=>(0,y.jsxs)("div",{children:[(0,y.jsx)(p.Z,{variant:"h5",children:e.label}),(0,y.jsx)(n.Z,{direction:"row",spacing:4,children:(0,y.jsxs)("div",{children:[(0,y.jsx)(p.Z,{variant:"overline",children:"Duration"}),(0,y.jsxs)(p.Z,{variant:"body2",children:[e.endTime-e.startTime,"ms"]})]})}),(0,y.jsxs)(c.Z,{sx:{mt:2},children:[(0,y.jsx)(o.Z,{sx:{typography:"overline"},children:"Query"}),(0,y.jsx)(u.Z,{children:(0,y.jsx)(a.Z,{component:"pre",sx:{fontSize:"small"},children:e.text})})]})]},r)):null})})]})]})},b=()=>{let{0:e,1:r}=(0,l.useState)(!1),{0:s,1:t}=(0,l.useState)("https://int.lindas.admin.ch/query"),{0:n,1:c}=(0,l.useState)("");return(0,y.jsxs)(a.Z,{sx:{margin:"1rem",display:"grid",gap:"2rem",gridTemplateColumns:"repeat(auto-fit, minmax(1fr, 300px))"},children:[(0,y.jsx)(i.Z,{label:"Drafts",control:(0,y.jsx)(f.Z,{value:e,onChange:(e,s)=>r(s)})}),(0,y.jsxs)(x.Z,{onChange:e=>t(e.target.value),value:s,children:[(0,y.jsx)(h.Z,{value:"https://int.lindas.admin.ch/query",children:"int"}),(0,y.jsx)(h.Z,{value:"https://lindas.admin.ch/query",children:"prod"})]}),(0,y.jsx)(j.Z,{defaultValue:"",placeholder:"Search...",onKeyUp:e=>{"Enter"===e.key&&e.target&&c(e.target.value)}}),""!==n?(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:n,filters:[],locale:"fr"},n):(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"bruit",filters:[],locale:"fr"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"Bathing",filters:[g],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"bath",filters:[g],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"Ausgaben",filters:[],locale:"de"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"",filters:[g],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"SFOE",filters:[v],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"National economy",filters:[],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"Einmalverg\xfctung",filters:[],locale:"de"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"zeitverz\xf6gert",filters:[],locale:"de"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"\xf6ffentlich",filters:[],locale:"de"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"WASTA",filters:[],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"tari",filters:[],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"SFA",filters:[],locale:"en"}),(0,y.jsx)(Z,{sourceUrl:s,includeDrafts:e,query:"\xe9missions de gaz \xe0 effet de serre",filters:[],locale:"fr"})]})]})};var D=()=>(0,y.jsx)(l.Suspense,{fallback:(0,y.jsx)("div",{children:"Loading.."}),children:(0,y.jsx)(b,{})})},96368:function(e,r,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/__test/search",function(){return s(96718)}])}},function(e){e.O(0,[2386,92888,49774,40179],function(){return e(e.s=96368)}),_N_E=e.O()}]);
//# sourceMappingURL=search-10d31db31f2cc5a0.js.map