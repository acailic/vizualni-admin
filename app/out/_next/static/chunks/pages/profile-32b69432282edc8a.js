(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[50277],{97542:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSP:function(){return e7},default:function(){return te}});var r=n(60116),a=n(6135),i=n(25592),o=n(66056),l=n(37268),s=n(19914),c=n(91282),d=n(41094),p=n(88659),u=n(48921),h=n(64986),g=n(40624),m=n(38354),x=n.n(m),j=n(27378),f=n(96338),b=n(9448),y=n(87026),v=n(12548),C=n(1869),w=n(97901),O=n(95555),Z=n(53082),k=n(24157),P=n(63093),_=n(45214),I=n(48947),S=n(17043),D=n(99990),N=n(71238),z=n(41282),E=n(90453),T=n(37079),H=n(54312),$=n(35904),B=n(23155),M=n(86095),F=n(24246);let L=["#663778","#FF9900","#FF5F55","#3F7397","#00B040","#9F2020","#BCBD21"],R=e=>{let{type:t}=e,n=null;switch(t){case"sequential":n=(0,F.jsx)(_.E,{height:20,width:146,colorInterpolator:B.Z});break;case"diverging":n=(0,F.jsx)(_.E,{height:20,width:146,colorInterpolator:M.Z});break;case"categorical":n=(0,F.jsx)(Z.k,{gap:"1px",children:L.map(e=>(0,F.jsx)(P.r,{color:e},`option-${e}`))});break;default:return t}return(0,F.jsxs)(Z.k,{flexDirection:"column",children:[(0,F.jsx)(D.__,{htmlFor:"custom-color-palette-example",children:(0,F.jsx)(f.cC,{id:"controls.custom-color-palettes.example"})}),n]})};var W=n(6222);function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach(function(t){(0,S.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let U=(0,h.Z)({root:{width:"100%",padding:"8px 0px"},backButton:{width:"fit-content"},colorPickerContainer:{gap:E.r.spacing(5),width:"510px",paddingLeft:E.r.spacing(4)},inputContainer:{width:"304px"},addColorButton:{minWidth:"fit-content",paddingLeft:0},saveButtonContainer:{marginTop:E.r.spacing(2)}}),X=e=>{let{onBack:t,palette:n,formMode:a,customColorPalettes:i}=e,{0:o,1:l}=(0,j.useState)(n?.type||"categorical"),{0:c,1:d}=(0,j.useState)(()=>(0,z.c8)(o,n?.colors||[])),p=(0,j.useRef)({categorical:(0,z.c8)("categorical",n?.colors||[]),sequential:(0,z.c8)("sequential",n?.colors||[]),diverging:(0,z.c8)("diverging",n?.colors||[])}),{0:u,1:h}=(0,j.useState)(!1),{0:g,1:m}=(0,j.useState)(n?.name||""),x=U(),C=(0,$.Tu)(T.pk),w=(0,$.Tu)(T.rs),O=(0,j.useCallback)((e,t)=>{d(n=>{let r=n.map(n=>n.id===t?A(A({},n),{},{color:e}):n);return p.current[o]=r,r})},[o]),k=(0,j.useCallback)(e=>{d(t=>{let n=t.filter(t=>t.id!==e);return p.current[o]=n,n})},[o]),P=(0,j.useCallback)(e=>{d(t=>{let n=[...t,{color:e??"#000000",id:(0,H.EY)()}];return p.current[o]=n,n})},[o]),_=(0,j.useCallback)(e=>{l(e);let t=c.map(e=>e.color),n=(0,z.c8)(e,t);p.current[e]=n,d(n)},[c]),I=(0,b.zX)(async()=>{i?.find(e=>e.name===g)&&"add"===a?h(!0):(h(!1),n?await w.mutate({paletteId:n.paletteId,name:g,colors:c.map(e=>e.color),type:o}):await C.mutate({name:g,colors:c.map(e=>e.color),type:o}),t())}),S=n?.name===g&&n?.colors?.length===c.length&&n?.colors?.every((e,t)=>e===c[t].color),E={sequential:s.ag._({id:"controls.custom-color-palettes.caption-sequential"}),diverging:s.ag._({id:"controls.custom-color-palettes.caption-diverging"}),categorical:s.ag._({id:"controls.custom-color-palettes.caption-categorical"})};return(0,F.jsxs)(Z.k,{flexDirection:"column",gap:8,children:[(0,F.jsx)(N.xE,{className:x.backButton,onClick:t,children:(0,F.jsx)(f.cC,{id:"login.profile.my-color-palettes.create.back-button"})}),(0,F.jsxs)(Z.k,{flexDirection:"column",className:x.colorPickerContainer,children:[(0,F.jsx)(J,{onChange:_,selectedType:o}),(0,F.jsx)(y.Z,{variant:"body2",children:E[o]}),(0,F.jsx)(r.Z,{className:x.inputContainer,children:(0,F.jsxs)(Z.k,{flexDirection:"column",children:[(0,F.jsx)(D.II,{error:u,label:s.ag._({id:"controls.custom-color-palettes.title"}),name:"custom-color-palette-title",value:g,onChange:e=>m(e.target.value)}),u&&(0,F.jsx)(y.Z,{color:"error.main",variant:"caption",children:(0,F.jsx)(f.cC,{id:"controls.custom-color-palettes.title-unavailable"})})]})}),(0,F.jsx)(W.v,{type:o,title:g,colorValues:c,onRemove:k,onUpdate:O,onAdd:P}),(0,F.jsx)(r.Z,{className:x.saveButtonContainer,children:(0,F.jsx)(v.Z,{onClick:I,disabled:0===c.length||""===g||S,children:"add"===a?(0,F.jsx)(f.cC,{id:"controls.custom-color-palettes.create-palette"}):(0,F.jsx)(f.cC,{id:"controls.custom-color-palettes.update-palette"})})})]})]})},J=e=>{let{onChange:t,selectedType:n}=e,a={sequential:s.ag._({id:"controls.custom-color-palettes.sequential"}),diverging:s.ag._({id:"controls.custom-color-palettes.diverging"}),categorical:s.ag._({id:"controls.custom-color-palettes.categorical"})},i=(0,b.zX)(e=>{t(e.target.value)});return(0,F.jsxs)(r.Z,{sx:{fontSize:"1rem",pb:2},children:[(0,F.jsx)(y.Z,{variant:"caption",component:"p",sx:{mb:2},children:(0,F.jsx)(f.cC,{id:"controls.custom-color-palettes.type"})}),(0,F.jsx)(D.Ee,{children:["categorical","sequential","diverging"].map(e=>(0,F.jsxs)(Z.k,{flexDirection:"column",gap:2,children:[(0,F.jsx)(D.Y8,{label:a[e],value:e,checked:e===n,onChange:i}),(0,F.jsx)(R,{type:e})]},`color-palettes-${e}`))})]})};var G=n(58144),V=n(39674),Y=n(30998),K=n(73799),Q=n(18170),ee=n(56571),et=n(58009),en=n(27979),er=n(98505),ea=n(67896),ei=n(46142),eo=n(95099),el=n.n(eo),es=n(79894),ec=n.n(es),ed=n(27686),ep=n(90089),eu=n(50714),eh=n(77142);let eg=["children"];function em(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ex(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?em(Object(n),!0).forEach(function(t){(0,S.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):em(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let ej=e=>{let{children:t}=e,n=(0,ep.Z)(e,eg),{0:r,1:a}=(0,j.useState)(!1),i=(0,eh.z)(e=>{let{currentTarget:{scrollWidth:t,clientWidth:n}}=e;t>n&&a(!0)});return(0,F.jsx)(eu.Z,ex(ex({},n),{},{open:r,onMouseEnter:i,onMouseLeave:()=>a(!1),disableHoverListener:!r,children:t}))};var ef=n(34712),eb=n(7050),ey=n(54417),ev=n(64689),eC=n(3615),ew=n(96373),eO=n(47434);let eZ=["config","locale","onClose","userId"];function ek(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ek(Object(n),!0).forEach(function(t){(0,S.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ek(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let e_=e=>{let{config:t,locale:n,onClose:r,userId:a}=e,i=(0,ep.Z)(e,eZ),{invalidate:o}=(0,l.oL)(),c=(0,$.Tu)(T.rF),d=1===t.data.chartConfigs.length,p=(0,ey.Z)(async e=>{e.preventDefault();let n=Object.fromEntries(new FormData(e.currentTarget).entries());if(d){let e=t.data.chartConfigs[0];await c.mutate({key:t.key,data:eP(eP({},t.data),{},{chartConfigs:[eP(eP({},e),{},{meta:eP(eP({},e.meta),{},{title:n??e.meta.title})})]})})}else{let e=t.data.layout;await c.mutate({key:t.key,data:eP(eP({},t.data),{},{layout:eP(eP({},e),{},{meta:eP(eP({},e.meta),{},{title:n??e.meta.title})})})})}o(),r?.()}),u=d?t.data.chartConfigs[0].meta:t.data.layout.meta;return(0,F.jsx)(ev.Z,eP(eP({},i),{},{fullWidth:!0,children:(0,F.jsxs)("form",{style:{display:"contents"},onSubmit:p,children:[(0,F.jsx)(eC.Z,{children:(0,F.jsx)(y.Z,{variant:"h5",component:"p",sx:{fontWeight:700},children:(0,F.jsx)(f.cC,{id:"profile.chart.rename-dialog.title"})})}),(0,F.jsx)(ew.Z,{children:(0,F.jsxs)(Z.k,{sx:{flexDirection:"column",gap:4},children:[(0,F.jsx)(D.II,{name:"de",label:s.ag._({id:"controls.language.german"}),defaultValue:u.title.de}),(0,F.jsx)(D.II,{name:"fr",label:s.ag._({id:"controls.language.french"}),defaultValue:u.title.fr}),(0,F.jsx)(D.II,{name:"it",label:s.ag._({id:"controls.language.italian"}),defaultValue:u.title.it}),(0,F.jsx)(D.II,{name:"en",label:s.ag._({id:"controls.language.english"}),defaultValue:u.title.en})]})}),(0,F.jsxs)(eO.Z,{sx:{pb:6,pr:6},children:[(0,F.jsx)(v.Z,{variant:"outlined",onClick:r,children:"Cancel"}),(0,F.jsx)(eb.Z,{type:"submit",variant:"contained",loading:"fetching"===c.status,sx:{minWidth:"auto"},children:"Ok"})]})]})}))};var eI=n(7663),eS=n(32027);let eD=e=>{let{itemsCount:t}=e,n=(0,j.useRef)(null),{0:r,1:a}=(0,j.useState)(),{0:i,1:o}=(0,j.useState)({vertical:"bottom",horizontal:"center"}),{0:l,1:s}=(0,j.useState)({vertical:"top",horizontal:"center"});return{handleOpenElClick:(0,eh.z)(()=>{let e=n.current;if(!e)return;a(e);let{top:r,bottom:i}=e.getBoundingClientRect(),l=window.innerHeight-i;l<40*t+16&&r>l?(o({vertical:"top",horizontal:"center"}),s({vertical:"bottom",horizontal:"center"})):(o({vertical:"bottom",horizontal:"center"}),s({vertical:"top",horizontal:"center"}))}),handleClose:(0,eh.z)(()=>{a(null)}),Wrapper:(0,j.useMemo)(()=>{switch(i.vertical){case"bottom":default:return eS._X;case"top":return eS.RM}},[i.vertical]),anchorEl:r,buttonRef:n,anchorOrigin:i,transformOrigin:l}};function eN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ez(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eN(Object(n),!0).forEach(function(t){(0,S.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eN(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eE=e=>{let{actions:t}=e,[n,...r]=t,{buttonRef:a,handleOpenElClick:i,handleClose:o,anchorEl:l,anchorOrigin:s,transformOrigin:c,Wrapper:d}=eD({itemsCount:t.length}),p="button"===n.type?{onDialogClose:o}:{};return(0,F.jsxs)(Z.k,{gap:"0.5rem",justifyContent:"flex-end",alignItems:"center",children:[(0,F.jsx)(eI.M,ez(ez({as:"button"},n),p)),(0,F.jsx)(w.Z,{ref:a,onClick:i,children:(0,F.jsx)(I.JO,{name:"more",size:16})}),(0,F.jsx)(d,{onClose:o,open:!!l,anchorEl:l,anchorOrigin:s,transformOrigin:c,children:r.map((e,t)=>(0,F.jsx)(eI.M,ez(ez({as:"menuitem"},e),{},{onClick:t=>{e.stayOpen||o(),e.onClick?.(t)}},p),t))})]})};var eT=n(79234),eH=n(50953),e$=n(87182),eB=n(17510),eM=n(80207),eF=n(49148),eL=n(59266),eR=n(10850);function eW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function eq(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eW(Object(n),!0).forEach(function(t){(0,S.Z)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eW(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}let eA=e=>{let{children:t,title:n}=e,a=(0,eL.d)();return(0,F.jsxs)(r.Z,{className:a.sectionContent,children:[n&&(0,F.jsx)(y.Z,{variant:"h3",sx:{mb:6,fontWeight:700},children:n}),t]})},eU=(0,C.ZP)(G.Z)(e=>{let{theme:t}=e;return{tableLayout:"fixed",boxShadow:t.shadows[4],[`& .${V.Z.root}`]:{verticalAlign:"middle",height:56,[`& > .${Y.Z.root}`]:{borderBottomColor:t.palette.divider}},[`& .${K.Z.root} .${Y.Z.root}`]:{color:t.palette.text.secondary}}}),eX=e=>{let{title:t,userId:n,userConfigs:r,preview:a,onShowAll:i}=e;return(0,F.jsx)(eA,{title:t,children:r.length>0?(0,F.jsxs)(F.Fragment,{children:[(0,F.jsxs)(eU,{children:[(0,F.jsx)(Q.Z,{children:(0,F.jsxs)(ee.Z,{children:[(0,F.jsx)(et.Z,{component:"th",width:"10%",children:(0,F.jsx)(f.cC,{id:"login.profile.my-visualizations.chart-type"})}),(0,F.jsx)(et.Z,{component:"th",width:"27.5%",children:(0,F.jsx)(f.cC,{id:"login.profile.my-visualizations.chart-name"})}),(0,F.jsx)(et.Z,{component:"th",width:"27.5%",children:(0,F.jsx)(f.cC,{id:"login.profile.my-visualizations.dataset-name"})}),(0,F.jsx)(et.Z,{component:"th",width:"10%",children:(0,F.jsx)(f.cC,{id:"login.profile.my-visualizations.chart-views"})}),(0,F.jsx)(et.Z,{component:"th",width:"12.5%",children:(0,F.jsx)(f.cC,{id:"login.profile.my-visualizations.chart-updated-date"})}),(0,F.jsx)(et.Z,{component:"th",width:"12.5%"})]})}),(0,F.jsx)(en.Z,{children:r.slice(0,a?3:void 0).map(e=>(0,F.jsx)(eJ,{userId:n,config:e},e.key))})]}),a&&(0,F.jsx)(v.Z,{variant:"text",color:"primary",size:"sm",endIcon:(0,F.jsx)(I.JO,{name:"arrowDown",size:20}),onClick:i,sx:{mt:6},children:(0,F.jsx)(f.cC,{id:"show.all"})})]}):(0,F.jsxs)(y.Z,{variant:"body2",children:[(0,F.jsx)(f.cC,{id:"login.no-charts"}),","," ",(0,F.jsx)(ec(),{href:"/browse",passHref:!0,legacyBehavior:!0,children:(0,F.jsx)(er.Z,{children:(0,F.jsx)(f.cC,{id:"login.create-chart"})})}),"."]})})},eJ=e=>{let{userId:t,config:n}=e,{dataSource:r}=n.data,a=Array.from(new Set(n.data.chartConfigs.flatMap(e=>e.cubes.map(e=>e.iri)))),i=1===a.length?a[0]:null,o=(0,eF.bU)(),[{data:c,fetching:d}]=(0,eM.bi)({variables:{sourceType:r.type,sourceUrl:r.url,locale:o,cubeFilters:[{iri:i}]},pause:!i}),{invalidate:p}=(0,l.oL)(),u=(0,$.Tu)(T.cC),h=(0,$.Tu)(T.rF),{0:g,1:m}=(0,j.useState)(),{0:x,1:f}=(0,j.useState)(),{isOpen:b,open:v,close:C}=(0,eT.q)(),w=n.published_state===ei.PUBLISHED_STATE.PUBLISHED,O=`/${o}/v/${n.key}`,Z=`/${o}/create/new?edit=${n.key}${n.data.chartConfigs.length>1?`&state=${eH.z0}`:""}`,k=(0,j.useMemo)(()=>{let e=[{type:"link",href:O,label:w?s.ag._({id:"login.chart.view"}):s.ag._({id:"login.chart.preview"}),leadingIconName:"show",priority:w?0:void 0},{type:"link",href:`/${o}/create/new?copy=${n.key}`,label:s.ag._({id:"login.chart.duplicate"}),leadingIconName:"duplicate"},{type:"link",href:Z,label:s.ag._({id:"login.chart.edit"}),leadingIconName:"pen",priority:w?void 0:0},w?{type:"button",label:s.ag._({id:"login.chart.actions.unpublish"}),leadingIconName:"fetching"===h.status?"loading":"unpublish",onClick:async()=>{await h.mutate({key:n.key,data:eq(eq({},n.data),{},{state:"PUBLISHING"}),published_state:ei.PUBLISHED_STATE.DRAFT}),p()},onSuccess:()=>{p()}}:null,{type:"button",onClick:e=>m(e?.currentTarget),label:s.ag._({id:"login.chart.share"}),leadingIconName:"share",stayOpen:!0},{type:"button",onClick:e=>f(e?.currentTarget),label:s.ag._({id:"login.chart.embed"}),leadingIconName:"embed",stayOpen:!0},{type:"button",label:s.ag._({id:"login.chart.rename"}),leadingIconName:"text",onClick:()=>{v()}},{type:"button",label:s.ag._({id:"login.chart.delete"}),color:"red",leadingIconName:"fetching"===u.status?"refresh":"trash",requireConfirmation:!0,confirmationTitle:w?s.ag._({id:"login.chart.delete.confirmation"}):s.ag._({id:"login.chart.delete-draft.confirmation"}),confirmationText:w?s.ag._({id:"login.profile.chart.delete.warning"}):s.ag._({id:"login.profile.chart.delete-draft.warning"}),onClick:async()=>{await u.mutate({key:n.key}),p()},onSuccess:()=>{p()}}];return el()(e.filter(eB.y),e=>e.priority)},[O,w,o,n.key,n.data,Z,h,u,p,v]),P=1===n.data.chartConfigs.length,_=(0,j.useMemo)(()=>(P?n.data.chartConfigs[0].meta.title[o]:n.data.layout.meta.title[o])||s.ag._({id:"annotator.add.title"}),[n.data.chartConfigs,n.data.layout.meta.title,P,o]);return(0,F.jsxs)(ee.Z,{children:[(0,F.jsx)(et.Z,{children:P?s.ag._({id:"controls.layout.chart"}):s.ag._({id:"controls.layout.dashboard"})}),(0,F.jsx)(et.Z,{children:(0,F.jsx)(ec(),{href:w?O:Z,passHref:!0,legacyBehavior:!0,children:(0,F.jsx)(er.Z,{children:(0,F.jsx)(ej,{arrow:!0,title:(0,F.jsx)(ed.UG,{children:_}),color:"primary.main",children:(0,F.jsx)(y.Z,{variant:"body3",component:"p",noWrap:!0,children:(0,F.jsx)(ed.T9,{children:_})})})})})}),(0,F.jsx)(et.Z,{children:d?(0,F.jsx)(ea.Z,{width:"50%",height:32}):i?(0,F.jsx)(ec(),{href:`/browse?dataset=${i}&dataSource=${(0,e$.nw)(r)}`,passHref:!0,legacyBehavior:!0,children:(0,F.jsx)(er.Z,{children:(0,F.jsx)(ej,{arrow:!0,title:c?.dataCubesMetadata[0]?.title??"",color:"primary.main",children:(0,F.jsx)(y.Z,{variant:"body3",component:"p",noWrap:!0,children:c?.dataCubesMetadata[0]?.title??""})})})}):(0,F.jsx)(y.Z,{variant:"body3",component:"p",noWrap:!0,children:s.ag._({id:"login.profile.my-visualizations.multiple-datasets"})})}),(0,F.jsx)(et.Z,{children:(0,F.jsx)(y.Z,{variant:"body3",component:"p",noWrap:!0,children:(0,eR.k)(n.viewCount)})}),(0,F.jsx)(et.Z,{children:n.updated_at.toLocaleString("de",{dateStyle:"medium",timeStyle:"short"})}),(0,F.jsxs)(et.Z,{align:"right",children:[(0,F.jsx)(eE,{actions:k}),(0,F.jsx)(ef.H2,{popoverProps:{anchorPosition:eq({},eG(x)),anchorReference:"anchorPosition"},trigger:x,children:(0,F.jsx)(ef.MM,{locale:o,configKey:n.key})}),(0,F.jsx)(ef.H2,{popoverProps:{anchorPosition:eq({},eG(g)),anchorReference:"anchorPosition"},trigger:g,children:(0,F.jsx)(ef.X_,{locale:o,configKey:n.key})}),(0,F.jsx)(e_,{config:n,open:b,onClose:C,locale:o,userId:t})]})]})},eG=e=>{if(!e)return{top:0,left:0};{let{x:t,y:n}=e.getBoundingClientRect();return{top:n,left:t-8}}};var eV=n(59159);let eY=e=>{let{title:t}=e,{data:n,invalidate:r}=(0,eV.H)(),{0:a,1:i}=(0,j.useState)("view"),{0:o,1:l}=(0,j.useState)(null),s=(0,b.zX)(()=>{l(null),i("add")}),c=(0,b.zX)(e=>{l(e),i("edit")}),d=(0,b.zX)(()=>{r(),i("view")}),p=n?.find(e=>e.paletteId===o);return(0,F.jsx)(eA,{title:"view"===a?t:void 0,children:"view"===a?(0,F.jsxs)(Z.k,{flexDirection:"column",width:385,gap:"30px",children:[n&&n.length>0?(0,F.jsx)(Z.k,{flexDirection:"column",gap:1,children:n.map(e=>(0,F.jsx)(e0,{paletteId:e.paletteId,name:e.name,colors:e.colors,type:e.type,onDelete:r,onEdit:c},e.paletteId))}):(0,F.jsx)(y.Z,{variant:"body2",children:(0,F.jsx)(f.cC,{id:"login.profile.my-color-palettes.description"})}),(0,F.jsx)(v.Z,{size:"sm",startIcon:(0,F.jsx)(I.JO,{name:"plus"}),sx:{width:"fit-content"},onClick:s,children:(0,F.jsx)(f.cC,{id:"login.profile.my-color-palettes.add"})})]}):(0,F.jsx)(X,{formMode:a,palette:"edit"===a?p:void 0,onBack:d,customColorPalettes:n})})},eK=(0,C.ZP)(w.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(1),minWidth:"auto",backgroundColor:"transparent",lineHeight:0}}),eQ=(0,C.ZP)(w.Z)(e=>{let{theme:t}=e;return{padding:t.spacing(1),minWidth:"auto",backgroundColor:"transparent",lineHeight:0}}),e0=e=>{let{colors:t,name:n,paletteId:r,type:a,onDelete:i,onEdit:o}=e,l=(0,$.Tu)(T.GI),s=(0,b.zX)(async()=>{await l.mutate({paletteId:r}),i()});return(0,F.jsxs)(Z.k,{sx:{justifyContent:"space-between",alignItems:"center",py:3,pr:4},children:[(0,F.jsxs)("div",{children:[(0,F.jsx)(y.Z,{variant:"caption",children:n}),(0,F.jsx)(O.ZP,{container:!0,spacing:.5,sx:{display:"flex",alignItems:"center",width:"240px","& .MuiGrid-item":{display:"flex",alignItems:"center"}},children:(0,F.jsx)(e1,{colors:t,paletteId:r,type:a})})]}),(0,F.jsxs)(Z.k,{gap:2.5,children:[(0,F.jsx)(eK,{onClick:()=>o(r),children:(0,F.jsxs)(y.Z,{component:"span",color:"text.primary","aria-hidden":!0,style:{lineHeight:0},children:[(0,F.jsx)(k.T,{children:(0,F.jsx)(f.cC,{id:"login.profile.my-color-palettes.edit"})}),(0,F.jsx)(I.JO,{name:"pen",size:24})]})}),(0,F.jsxs)(eQ,{disabled:"fetching"===l.status,onClick:s,children:[(0,F.jsx)(k.T,{children:(0,F.jsx)(f.cC,{id:"login.profile.my-color-palettes.delete"})}),(0,F.jsx)(y.Z,{component:"span",color:"text.primary","aria-hidden":!0,style:{lineHeight:0},children:(0,F.jsx)(I.JO,{name:"trash",size:24})})]})]})]})},e1=e=>{let{colors:t,paletteId:n,type:r}=e;switch(r){case"categorical":return(0,F.jsx)(F.Fragment,{children:t.map((e,t)=>(0,F.jsx)(O.ZP,{item:!0,children:(0,F.jsx)(P.r,{color:e})},`${n}-${e}-${t}`))});case"sequential":return(0,F.jsx)(_.E,{height:20,width:240,colorInterpolator:(0,z.xT)({endColorHex:t[0],startColorHex:t[1]}).interpolator});case"diverging":return(0,F.jsx)(_.E,{height:20,width:240,colorInterpolator:(0,z.kD)({endColorHex:t[0],startColorHex:t[1],options:{midColorHex:t[2]??void 0}}).interpolator});default:return r}},e2=(0,h.Z)(e=>({section:{borderTop:`1px solid ${e.palette.monochrome[300]}`,borderBottom:`1px solid ${e.palette.monochrome[300]}`,marginTop:e.spacing(6)},tabList:{minHeight:"fit-content","& .MuiTabs-flexContainer":{height:"fit-content"}},tabPanel:{padding:0},tabPanelContent:{padding:e.spacing(6),backgroundColor:e.palette.background.paper},tab:{height:48,minHeight:0,padding:"0 1rem",textTransform:"none"}})),e4=e=>{let{userId:t}=e,{data:n}=(0,l.oL)(),{0:a,1:i}=(0,j.useState)("home"),o=(0,eh.z)((e,t)=>{i(t)}),h=(0,eL.d)(),m=e2(),{DRAFT:f=[],PUBLISHED:b=[]}=(0,j.useMemo)(()=>x()(n,e=>e.published_state),[n]);return n?(0,F.jsxs)(c.ZP,{value:a,children:[(0,F.jsx)(r.Z,{className:(0,g.Z)(h.section,m.section),children:(0,F.jsx)(r.Z,{className:h.sectionContent,children:(0,F.jsxs)(d.Z,{className:m.tabList,onChange:o,children:[(0,F.jsx)(u.Z,{className:m.tab,label:s.ag._({id:"login.profile.home"}),value:"home"}),(0,F.jsx)(u.Z,{className:m.tab,label:s.ag._({id:"login.profile.my-drafts"}),value:"drafts"}),(0,F.jsx)(u.Z,{className:m.tab,label:s.ag._({id:"login.profile.my-published-visualizations"}),value:"published"}),(0,F.jsx)(u.Z,{"data-testid":"color-palettes-tab",className:m.tab,label:s.ag._({id:"login.profile.my-color-palettes"}),value:"palettes"})]})})}),(0,F.jsx)(p.Z,{className:m.tabPanel,value:"home",children:(0,F.jsxs)(r.Z,{className:m.tabPanelContent,sx:{display:"flex",flexDirection:"column",gap:"3rem"},children:[(0,F.jsx)(eX,{title:s.ag._({id:"login.profile.my-drafts"}),userId:t,userConfigs:f,preview:!0,onShowAll:()=>i("drafts")}),(0,F.jsx)(eX,{title:s.ag._({id:"login.profile.my-published-visualizations"}),userId:t,userConfigs:b,preview:!0,onShowAll:()=>i("published")})]})}),(0,F.jsx)(p.Z,{className:m.tabPanel,value:"published",children:(0,F.jsx)(r.Z,{className:m.tabPanelContent,children:(0,F.jsx)(eX,{title:s.ag._({id:"login.profile.my-published-visualizations"}),userId:t,userConfigs:b})})}),(0,F.jsx)(p.Z,{className:m.tabPanel,value:"drafts",children:(0,F.jsx)(r.Z,{className:m.tabPanelContent,children:(0,F.jsx)(eX,{title:s.ag._({id:"login.profile.my-drafts"}),userId:t,userConfigs:f})})}),(0,F.jsx)(p.Z,{className:m.tabPanel,value:"palettes",children:(0,F.jsx)(r.Z,{className:m.tabPanelContent,children:(0,F.jsx)(eY,{title:s.ag._({id:"login.profile.my-color-palettes"})})})})]}):null};var e5=n(73868),e6=n(16976);let e9=(0,h.Z)(e=>({section:{paddingTop:e.spacing(6)},topRow:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:e.spacing(1)},button:{width:"fit-content"}})),e3=e=>{let{user:t}=e,n=(0,eL.d)(),a=e9();return(0,F.jsx)(r.Z,{className:(0,g.Z)(n.section,a.section),children:(0,F.jsxs)(r.Z,{className:n.sectionContent,children:[(0,F.jsxs)(r.Z,{className:a.topRow,children:[(0,F.jsx)(y.Z,{variant:"h1",sx:{fontWeight:700},children:t.name}),(0,F.jsx)(e8,{})]}),e6.nf&&(0,F.jsx)(v.Z,{className:a.button,component:"a",href:e6.nf,variant:"text",color:"primary",size:"sm",sx:{mr:2},children:"eIAM MyAccount"}),(0,F.jsx)(v.Z,{className:a.button,variant:"text",color:"primary",size:"sm",onClick:async()=>await (0,e5.signOut)(),children:(0,F.jsx)(f.cC,{id:"login.sign-out"})})]})})},e8=()=>(0,F.jsx)(ec(),{href:"/browse",passHref:!0,legacyBehavior:!0,children:(0,F.jsx)(v.Z,{size:"sm",endIcon:(0,F.jsx)(I.JO,{name:"arrowRight",size:20}),children:(0,F.jsx)(f.cC,{id:"browse.dataset.all"})})});var e7=!0,te=e=>{let{user:t,userConfigs:n}=(0,o.M)(e),s=(0,eL.d)();return(0,$.sj)(l.sN,n),(0,F.jsxs)(i.LN,{children:[(0,F.jsxs)(r.Z,{className:s.root,children:[(0,F.jsx)(e3,{user:t}),(0,F.jsx)(r.Z,{sx:{flexGrow:1,display:"flex",flexDirection:"column"},children:(0,F.jsx)(e4,{userId:t.id})})]}),(0,F.jsx)(a.$,{})]})}},10850:function(e,t,n){"use strict";n.d(t,{U:function(){return a},k:function(){return r}});let r=(0,n(29226).Z)({decimal:".",thousands:"\xa0",grouping:[3],currency:["","\xa0 CHF"],minus:"âˆ’",percent:"%"}).format(",d"),a=(e,t)=>{let{locale:n}=t,r=e.getFullYear(),a=e.toLocaleDateString(n,{month:"short"});return`${r} ${a}`}},38316:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return n(97542)}])}},function(e){e.O(0,[31434,88033,68143,72159,54568,96761,2386,22686,25592,17671,65362,16,92888,49774,40179],function(){return e(e.s=38316)}),_N_E=e.O()}]);
//# sourceMappingURL=profile-32b69432282edc8a.js.map