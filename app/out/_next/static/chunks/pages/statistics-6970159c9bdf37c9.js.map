{"version":3,"file":"static/chunks/pages/statistics-6970159c9bdf37c9.js","mappings":"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","sources":["webpack://_N_E/./db/serialize.ts","webpack://_N_E/./statistics/base-stats-card.tsx","webpack://_N_E/./statistics/card-grid.tsx","webpack://_N_E/./statistics/links.tsx","webpack://_N_E/./statistics/sections.tsx","webpack://_N_E/./statistics/utils.ts","webpack://_N_E/./statistics/stats-card.tsx","webpack://_N_E/./pages/statistics.tsx","webpack://_N_E/./statistics/formatters.ts","webpack://_N_E/?1a12"],"sourcesContent":["import SuperJSON from \"superjson\";\nimport { SuperJSONResult } from \"superjson/dist/types\";\n\nexport type Serialized<P> = P & {\n  _superjson?: ReturnType<typeof SuperJSON.serialize>[\"meta\"];\n};\n\nexport const serializeProps = <T extends unknown>(props: T) => {\n  const { json: sprops, meta } = SuperJSON.serialize(props);\n  if (meta) {\n    // @ts-ignore\n    sprops._superjson = meta;\n  }\n  return sprops as Serialized<typeof props>;\n};\n\ntype Deserialized<T> = T extends Serialized<infer S> ? S : never;\n\nexport const deserializeProps = <T extends Serialized<unknown>>(sprops: T) => {\n  const { _superjson, ...props } = sprops;\n  return SuperJSON.deserialize({\n    json: props,\n    meta: _superjson,\n  } as unknown as SuperJSONResult) as Deserialized<T>;\n};\n","import { Box, Card, Theme, Tooltip, Typography } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\nimport { max, sum } from \"d3-array\";\nimport { motion } from \"framer-motion\";\nimport { ReactNode } from \"react\";\n\nimport { useFlag } from \"@/flags/use-flag\";\nimport { formatInteger } from \"@/statistics/formatters\";\n\ntype Datum = [string, { count: number; label: ReactNode }];\n\nexport const BaseStatsCard = ({\n  title,\n  subtitle,\n  data,\n  columnName = \"Date\",\n  trend,\n  showPercentage = false,\n}: {\n  title: string;\n  subtitle: string;\n  data: Datum[];\n  columnName?: string;\n  trend?: {\n    direction: \"up\" | \"down\";\n    lastMonthDailyAverage: number;\n    previousThreeMonthsDailyAverage: number;\n  };\n  showPercentage?: boolean;\n}) => {\n  const classes = useStyles();\n  const totalCount = sum(data, ([, { count }]) => count) ?? 1;\n  const maxCount = max(data, ([, { count }]) => count) ?? 1;\n\n  return (\n    <Card className={classes.root}>\n      <Box sx={{ px: 5 }}>\n        <Box sx={{ display: \"grid\", gridTemplateColumns: \"1fr 24px\", gap: 2 }}>\n          <Typography variant=\"h2\" sx={{ fontWeight: \"normal\" }}>\n            {title}\n          </Typography>\n          {trend ? (\n            <Tooltip\n              title={\n                <>\n                  <Typography variant=\"h3\" sx={{ fontWeight: \"bold\" }}>\n                    {trend.direction === \"up\"\n                      ? \"Upward trend\"\n                      : \"Downward trend\"}\n                  </Typography>\n                  <Typography variant=\"caption\">\n                    Last 30 days daily average:{\" \"}\n                    <b>\n                      {trend.lastMonthDailyAverage >= 10\n                        ? formatInteger(trend.lastMonthDailyAverage)\n                        : trend.lastMonthDailyAverage.toFixed(2)}\n                    </b>\n                  </Typography>\n                  <br />\n                  <Typography variant=\"caption\">\n                    Last 90 days daily average:{\" \"}\n                    <b>\n                      {trend.previousThreeMonthsDailyAverage >= 10\n                        ? formatInteger(trend.previousThreeMonthsDailyAverage)\n                        : trend.previousThreeMonthsDailyAverage.toFixed(2)}\n                    </b>\n                  </Typography>\n                </>\n              }\n            >\n              <Typography variant=\"h4\" component=\"span\" sx={{ mt: \"0.5em\" }}>\n                {trend.direction === \"up\" ? \"ðŸ“ˆ\" : \"ðŸ“‰\"}\n              </Typography>\n            </Tooltip>\n          ) : null}\n        </Box>\n        <Typography variant=\"h3\" sx={{ fontWeight: \"normal\" }}>\n          {subtitle}\n        </Typography>\n      </Box>\n      <div\n        className={classes.table}\n        style={{\n          gridTemplateColumns: showPercentage\n            ? \"auto auto auto 1fr\"\n            : \"auto auto 1fr\",\n        }}\n      >\n        <div className={classes.tableHeader}>\n          <Typography\n            variant=\"caption\"\n            sx={{ position: \"sticky\", top: 0, fontWeight: \"bold\" }}\n          >\n            {columnName}\n          </Typography>\n        </div>\n        <div className={classes.tableHeader} style={{ textAlign: \"end\" }}>\n          <Typography variant=\"caption\" sx={{ fontWeight: \"bold\" }}>\n            Count\n          </Typography>\n        </div>\n        {showPercentage ? (\n          <div className={classes.tableHeader} style={{ textAlign: \"end\" }}>\n            <Typography variant=\"caption\" sx={{ fontWeight: \"bold\" }}>\n              Share\n            </Typography>\n          </div>\n        ) : null}\n        <div className={classes.divider} />\n        {data.map(([key, datum]) => (\n          <Bar\n            key={key}\n            {...datum}\n            maxCount={maxCount}\n            totalCount={totalCount}\n            showPercentage={showPercentage}\n          />\n        ))}\n      </div>\n    </Card>\n  );\n};\n\nconst Bar = ({\n  label,\n  count,\n  maxCount,\n  totalCount,\n  showPercentage,\n}: Datum[1] & {\n  label: ReactNode;\n  maxCount: number;\n  totalCount: number;\n  showPercentage?: boolean;\n}) => {\n  const classes = useStyles();\n  const easterEgg = useFlag(\"easter-eggs\");\n\n  return (\n    <>\n      <div className={classes.tableCell}>\n        <Typography\n          variant=\"caption\"\n          component=\"p\"\n          sx={{\n            overflow: \"hidden\",\n            maxWidth: 200,\n            cursor: \"default\",\n            whiteSpace: \"nowrap\",\n            textOverflow: \"ellipsis\",\n          }}\n        >\n          {label}\n        </Typography>\n      </div>\n      <div className={classes.tableCell} style={{ textAlign: \"end\" }}>\n        <Typography variant=\"caption\">{formatInteger(count)}</Typography>\n      </div>\n      {showPercentage ? (\n        <div className={classes.tableCell} style={{ textAlign: \"end\" }}>\n          <Typography variant=\"caption\" sx={{ lineHeight: \"normal\" }}>\n            {formatInteger((count / totalCount) * 100)}%\n          </Typography>\n        </div>\n      ) : null}\n      <div className={classes.tableCell}>\n        {count > 0 ? (\n          !easterEgg ? (\n            <Box\n              sx={{\n                width: `${(count / maxCount) * 100}%`,\n                height: \"100%\",\n                backgroundColor: \"primary.main\",\n              }}\n            />\n          ) : (\n            <>\n              {Array(Math.ceil((count / maxCount) * 40))\n                .fill(0)\n                .map((_, i) => {\n                  return (\n                    <motion.div\n                      key={i}\n                      style={{ display: \"inline-block\" }}\n                      initial={{ scale: 0, opacity: 0 }}\n                      animate={{\n                        opacity: 1,\n                        scale: 1,\n                        transition: { delay: i * 0.03 },\n                      }}\n                    >\n                      ðŸ¥“\n                    </motion.div>\n                  );\n                })}\n            </>\n          )\n        ) : null}\n      </div>\n    </>\n  );\n};\n\nconst useStyles = makeStyles<Theme>((theme) => ({\n  root: {\n    width: \"100%\",\n    paddingTop: theme.spacing(4),\n    boxShadow: theme.shadows[2],\n    borderRadius: 4,\n    borderBottomLeftRadius: 0,\n    borderBottomRightRadius: 0,\n    backgroundColor: theme.palette.grey[200],\n  },\n  table: {\n    display: \"grid\",\n    gridTemplateRows: \"auto\",\n    gap: \"2px\",\n    width: \"100%\",\n    height: \"fit-content\",\n    // Roughly 12 rows\n    maxHeight: \"calc(12 * 2.3rem)\",\n    overflowY: \"auto\",\n    marginTop: theme.spacing(3),\n    padding: theme.spacing(1),\n    paddingTop: 0,\n    backgroundColor: theme.palette.grey[200],\n  },\n  tableHeader: {\n    position: \"sticky\",\n    top: 0,\n    width: \"100%\",\n    padding: \"0.3rem 0.6rem\",\n    borderBottom: `2px solid ${theme.palette.divider}`,\n    backgroundColor: theme.palette.background.paper,\n  },\n  tableCell: {\n    width: \"100%\",\n    padding: \"0.3rem 0.6rem\",\n    backgroundColor: theme.palette.background.paper,\n  },\n  divider: {\n    zIndex: 1,\n    position: \"sticky\",\n    top: 0,\n    width: \"100%\",\n    height: \"100%\",\n    padding: \"0.3rem\",\n    borderBottom: `2px solid ${theme.palette.divider}`,\n    backgroundColor: theme.palette.background.paper,\n  },\n}));\n","import { Box } from \"@mui/material\";\nimport { ReactNode } from \"react\";\n\nexport const CardGrid = ({ children }: { children: ReactNode }) => {\n  return (\n    <Box\n      sx={{\n        display: \"grid\",\n        gridTemplateColumns: [\"1fr\", \"1fr\", \"1fr 1fr\"],\n        gap: 4,\n        my: [4, 6],\n      }}\n    >\n      {children}\n    </Box>\n  );\n};\n","import { Link, Typography } from \"@mui/material\";\n\nimport { Icon } from \"@/icons\";\nimport { Locale } from \"@/locales/locales\";\n\nexport const ChartLink = ({\n  locale,\n  chartKey,\n}: {\n  locale: Locale;\n  chartKey: string;\n}) => {\n  return (\n    <Link\n      href={`/${locale}/v/${chartKey}`}\n      target=\"_blank\"\n      sx={{\n        display: \"flex\",\n        gap: 2,\n        justifyContent: \"space-between\",\n      }}\n    >\n      <Typography\n        variant=\"caption\"\n        component=\"p\"\n        sx={{\n          overflow: \"hidden\",\n          maxWidth: 200,\n          cursor: \"default\",\n          whiteSpace: \"nowrap\",\n          textOverflow: \"ellipsis\",\n        }}\n      >\n        {chartKey}\n      </Typography>\n      <Icon name=\"legacyLinkExternal\" size={16} />\n    </Link>\n  );\n};\n\nexport const CubeLink = ({\n  locale,\n  iri,\n  title,\n}: {\n  locale: Locale;\n  iri: string;\n  title: string;\n}) => {\n  return (\n    <Link\n      href={`/${locale}/browse?dataset=${iri}`}\n      target=\"_blank\"\n      sx={{\n        display: \"flex\",\n        gap: 2,\n        justifyContent: \"space-between\",\n      }}\n    >\n      <Typography\n        variant=\"caption\"\n        component=\"p\"\n        sx={{\n          overflow: \"hidden\",\n          maxWidth: 200,\n          cursor: \"default\",\n          whiteSpace: \"nowrap\",\n          textOverflow: \"ellipsis\",\n        }}\n      >\n        {title}\n      </Typography>\n      <Icon name=\"legacyLinkExternal\" size={16} />\n    </Link>\n  );\n};\n","import { Box, Typography } from \"@mui/material\";\nimport { ReactNode } from \"react\";\n\nexport const SectionTitleWrapper = ({ children }: { children: ReactNode }) => {\n  return (\n    <Box\n      sx={{\n        width: \"100%\",\n        maxWidth: 850,\n        mx: \"auto\",\n        py: 4,\n        textWrap: \"balance\",\n        textAlign: \"center\",\n      }}\n    >\n      {children}\n    </Box>\n  );\n};\n\nexport const SectionTitle = ({ title }: { title: string }) => {\n  return (\n    <Typography\n      variant=\"h1\"\n      component=\"h2\"\n      sx={{ lineHeight: \"1 !important\", mb: 2 }}\n    >\n      {title}\n    </Typography>\n  );\n};\n","import { rollups, sum } from \"d3-array\";\nimport uniq from \"lodash/uniq\";\n\nimport { Locale } from \"@/locales/locales\";\nimport { formatYearMonth } from \"@/statistics/formatters\";\n\nexport const groupByYearMonth = (\n  countByDay: { day: Date; count: number }[],\n  { locale }: { locale: Locale }\n) => {\n  const countByDate = rollups(\n    countByDay,\n    (v) => ({\n      count: sum(v, (d) => d.count),\n      date: v[v.length - 1].day,\n      label: formatYearMonth(v[0].day, { locale }),\n    }),\n    (d) => formatYearMonth(d.day, { locale })\n  ).reverse();\n  const allYearMonthStrings = uniq(\n    countByDate.map(([yearMonthStr]) => yearMonthStr)\n  );\n  const start = new Date(countByDate[0][1].date);\n  const end = new Date(countByDate[countByDate.length - 1][1].date);\n\n  if (start.getTime() !== end.getTime()) {\n    for (let date = start; date <= end; date.setMonth(date.getMonth() + 1)) {\n      const formattedDate = formatYearMonth(date, { locale });\n\n      if (!allYearMonthStrings.includes(formattedDate)) {\n        countByDate.push([\n          formattedDate,\n          {\n            count: 0,\n            date: new Date(date),\n            label: formattedDate,\n          },\n        ]);\n      }\n    }\n  }\n  countByDate.sort(([, a], [, b]) => b.date.getTime() - a.date.getTime());\n\n  return countByDate;\n};\n","import { sum } from \"d3-array\";\nimport { useMemo } from \"react\";\n\nimport { useLocale } from \"@/locales/use-locale\";\nimport { BaseStatsCard } from \"@/statistics/base-stats-card\";\nimport { groupByYearMonth } from \"@/statistics/utils\";\n\nexport type StatProps = {\n  countByDay: {\n    day: Date;\n    type?: \"view\" | \"preview\";\n    count: number;\n  }[];\n  trendAverages: {\n    lastMonthDailyAverage: number;\n    previousThreeMonthsDailyAverage: number;\n  };\n};\n\nexport const StatsCard = ({\n  title,\n  subtitle,\n  countByDay,\n  trendAverages,\n}: StatProps & {\n  title: (total: number) => string;\n  subtitle: (total: number, avgMonthlyCount: number) => string;\n}) => {\n  const locale = useLocale();\n  const { countByYearMonth, total } = useMemo(() => {\n    return {\n      countByYearMonth: groupByYearMonth(countByDay, { locale }),\n      total: sum(countByDay, (d) => d.count) ?? 0,\n    };\n  }, [countByDay, locale]);\n  const avgMonthlyCount = Math.round(total / countByYearMonth.length);\n  const { lastMonthDailyAverage, previousThreeMonthsDailyAverage } =\n    trendAverages;\n  const direction =\n    lastMonthDailyAverage > previousThreeMonthsDailyAverage ? \"up\" : \"down\";\n\n  return (\n    <BaseStatsCard\n      title={title(total)}\n      subtitle={subtitle(total, avgMonthlyCount)}\n      data={countByYearMonth}\n      trend={{\n        direction,\n        lastMonthDailyAverage,\n        previousThreeMonthsDailyAverage,\n      }}\n    />\n  );\n};\n","import { Box, Typography } from \"@mui/material\";\nimport { rollups, sum } from \"d3-array\";\nimport groupBy from \"lodash/groupBy\";\nimport uniq from \"lodash/uniq\";\nimport { GetServerSideProps } from \"next\";\n\nimport { AppLayout } from \"@/components/layout\";\nimport { ChartType, LayoutDashboard } from \"@/config-types\";\nimport { getFieldLabel } from \"@/configurator/components/field-i18n\";\nimport { getIconName } from \"@/configurator/components/ui-helpers\";\nimport { deserializeProps, Serialized, serializeProps } from \"@/db/serialize\";\nimport { Icon } from \"@/icons\";\nimport { defaultLocale } from \"@/locales/locales\";\nimport { useLocale } from \"@/locales/use-locale\";\nimport { BaseStatsCard } from \"@/statistics/base-stats-card\";\nimport { CardGrid } from \"@/statistics/card-grid\";\nimport { formatInteger } from \"@/statistics/formatters\";\nimport { ChartLink, CubeLink } from \"@/statistics/links\";\nimport {\n  fetchChartCountByDay,\n  fetchChartsMetadata,\n  fetchChartTrendAverages,\n  fetchMostPopularAllTimeCharts,\n  fetchMostPopularThisMonthCharts,\n  fetchViewCountByDay,\n  fetchViewTrendAverages,\n} from \"@/statistics/prisma\";\nimport { SectionTitle, SectionTitleWrapper } from \"@/statistics/sections\";\nimport { queryCubesMetadata } from \"@/statistics/sparql\";\nimport { StatProps, StatsCard } from \"@/statistics/stats-card\";\n\ntype PageProps = {\n  charts: StatProps & {\n    mostPopularAllTime: {\n      key: string;\n      createdDate: Date;\n      viewCount: number;\n    }[];\n    mostPopularThisMonth: {\n      key: string;\n      viewCount: number;\n    }[];\n    countByChartType: {\n      type: ChartType;\n      count: number;\n    }[];\n    countByLayoutTypeAndSubtype: {\n      type: \"single\" | \"dashboard\";\n      subtype?: LayoutDashboard[\"layout\"] | \"tab\" | null;\n      count: number;\n    }[];\n    count: number;\n    dashboardCount: number;\n    countByCubeIri: {\n      iri: string;\n      title: string;\n      creator?: string;\n      count: number;\n    }[];\n  };\n  views: StatProps;\n};\n\nexport const getServerSideProps: GetServerSideProps<PageProps> = async ({\n  locale,\n}) => {\n  const [\n    mostPopularAllTimeCharts,\n    mostPopularThisMonthCharts,\n    chartCountByDay,\n    chartTrendAverages,\n    viewCountByDay,\n    viewTrendAverages,\n    chartsMetadata,\n  ] = await Promise.all([\n    fetchMostPopularAllTimeCharts(),\n    fetchMostPopularThisMonthCharts(),\n    fetchChartCountByDay(),\n    fetchChartTrendAverages(),\n    fetchViewCountByDay(),\n    fetchViewTrendAverages(),\n    fetchChartsMetadata(),\n  ]);\n\n  const chartCountByLayoutTypeAndSubtype = rollups(\n    chartsMetadata,\n    (v) => v.length,\n    ({ chartTypes, layoutType = \"single\" }) => {\n      if (chartTypes.length === 1 || layoutType === \"singleURLs\") {\n        return \"single\" as const;\n      }\n\n      return \"dashboard\" as const;\n    },\n    ({ chartTypes, layoutType, layoutSubtype }) => {\n      return chartTypes.length === 1 || layoutType === \"singleURLs\"\n        ? null\n        : layoutType === \"tab\" || !layoutSubtype\n          ? (\"tab\" as const)\n          : layoutSubtype;\n    }\n  )\n    .flatMap(([type, subtypeCounts]) => {\n      return subtypeCounts.map(([subtype, count]) => ({\n        type,\n        subtype,\n        count,\n      }));\n    })\n    .sort((a, b) => b.count - a.count);\n  const chartCountByChartType = rollups(\n    chartsMetadata.flatMap((d) => d.chartTypes),\n    (v) => v.length,\n    (d) => d\n  )\n    .map(([type, count]) => ({ type, count }))\n    .sort((a, b) => b.count - a.count);\n  const count = sum(chartCountByLayoutTypeAndSubtype, (d) => d.count);\n  const dashboardCount = sum(\n    chartCountByLayoutTypeAndSubtype.filter((d) => d.type !== \"single\"),\n    (d) => d.count\n  );\n  const cubeIris = chartsMetadata.flatMap((d) => d.iris);\n  const cubesMetadata = await queryCubesMetadata({\n    cubeIris: uniq(cubeIris),\n    locale: locale ?? defaultLocale,\n  });\n  const cubesMetadataByIri = groupBy(cubesMetadata, (d) => d.iri);\n  const unversionedCubeIris = cubeIris.map((iri) => {\n    const unversionedIri = cubesMetadataByIri[iri]?.[0]?.unversionedIri;\n    return unversionedIri ?? iri;\n  });\n  const cubesMetadataByUnversionedIri = groupBy(\n    cubesMetadata,\n    (d) => d.unversionedIri\n  );\n  const countByCubeIri = rollups(\n    unversionedCubeIris,\n    (v) => v.length,\n    (d) => d\n  )\n    .map(([iri, count]) => {\n      const { title, creator } = cubesMetadataByUnversionedIri[iri]?.[0] ?? {\n        title: iri,\n        creator: undefined,\n      };\n\n      return { iri, title, creator, count };\n    })\n    .sort((a, b) => b.count - a.count);\n\n  return {\n    props: serializeProps({\n      charts: {\n        mostPopularAllTime: mostPopularAllTimeCharts,\n        mostPopularThisMonth: mostPopularThisMonthCharts,\n        countByDay: chartCountByDay,\n        countByChartType: chartCountByChartType,\n        countByLayoutTypeAndSubtype: chartCountByLayoutTypeAndSubtype,\n        count: count,\n        dashboardCount: dashboardCount,\n        trendAverages: chartTrendAverages,\n        countByCubeIri: countByCubeIri,\n      },\n      views: {\n        countByDay: viewCountByDay,\n        trendAverages: viewTrendAverages,\n      },\n    }),\n  };\n};\n\nconst Statistics = (props: Serialized<PageProps>) => {\n  const { charts, views } = deserializeProps(props);\n  const locale = useLocale();\n\n  return (\n    <AppLayout>\n      <Box\n        sx={{\n          width: \"100%\",\n          maxWidth: 1400,\n          mx: \"auto\",\n          my: \"36px\",\n          px: 4,\n        }}\n      >\n        <SectionTitleWrapper>\n          <SectionTitle title=\"Popularity statistics\" />\n          <Typography>\n            Gain insights into number of charts and view trends in Visualize.\n          </Typography>\n          <Typography>\n            The data on chart views <b>is not complete</b> as it was started to\n            be collected in 2024.\n          </Typography>\n        </SectionTitleWrapper>\n        <Typography variant=\"caption\" component=\"p\" sx={{ mt: 2 }}>\n          <b>Views</b> are counted when a user opens a published chart in{\" \"}\n          <code>/v</code> page or through iframe.\n        </Typography>\n        <Typography variant=\"caption\" component=\"p\">\n          <b>Previews</b> are counted when accessing a chart preview through{\" \"}\n          <code>/preview</code> or <code>/preview_post</code> pages and are not\n          connected to a chart config.\n        </Typography>\n        <CardGrid>\n          {charts.countByDay.length > 0 && (\n            <StatsCard\n              countByDay={charts.countByDay}\n              trendAverages={charts.trendAverages}\n              title={(total) =>\n                `Visualize users created ${formatInteger(total)} charts...`\n              }\n              subtitle={(total, avgMonthlyCount) =>\n                `${total ? ` It's around ${formatInteger(avgMonthlyCount)} chart${avgMonthlyCount > 1 ? \"s\" : \"\"} per month on average.` : \"\"}`\n              }\n            />\n          )}\n          {views.countByDay.length > 0 && (\n            <StatsCard\n              countByDay={views.countByDay}\n              trendAverages={views.trendAverages}\n              title={(total) =>\n                `...viewed ${formatInteger(total)}x (including ${formatInteger(\n                  sum(\n                    views.countByDay.filter((d) => d.type === \"preview\"),\n                    (d) => d.count\n                  )\n                )} previews)`\n              }\n              subtitle={(total, avgMonthlyCount) =>\n                `${total ? ` It's around ${formatInteger(avgMonthlyCount)} view${avgMonthlyCount > 1 ? \"s\" : \"\"} per month on average.` : \"\"}`\n              }\n            />\n          )}\n          {charts.mostPopularAllTime.length > 0 && (\n            <BaseStatsCard\n              title=\"Most popular charts (all time)\"\n              subtitle=\"Top 25 charts by view count.\"\n              data={charts.mostPopularAllTime.map((chart) => [\n                chart.key,\n                {\n                  count: chart.viewCount,\n                  label: <ChartLink locale={locale} chartKey={chart.key} />,\n                },\n              ])}\n              columnName=\"Chart link\"\n            />\n          )}\n          {charts.mostPopularThisMonth.length > 0 && (\n            <BaseStatsCard\n              title=\"Most popular charts (last 30 days)\"\n              subtitle=\"Top 25 charts by view count.\"\n              data={charts.mostPopularThisMonth.map((chart) => [\n                chart.key,\n                {\n                  count: chart.viewCount,\n                  label: <ChartLink locale={locale} chartKey={chart.key} />,\n                },\n              ])}\n              columnName=\"Chart link\"\n            />\n          )}\n        </CardGrid>\n        <SectionTitleWrapper>\n          <SectionTitle title=\"Charts\" />\n          <Typography>\n            Gain insights into the characteristics of the charts created in\n            Visualize.\n          </Typography>\n        </SectionTitleWrapper>\n        <CardGrid>\n          <BaseStatsCard\n            title={`Visualize users created ${formatInteger(sum(charts.countByChartType, (d) => d.count))} individual* charts`}\n            subtitle=\"*Dashboards contain multiple charts; here we show them all.\"\n            data={charts.countByChartType.map(({ type, count }) => [\n              type,\n              {\n                count,\n                label: (\n                  <Box sx={{ display: \"flex\", gap: 2, alignItems: \"center\" }}>\n                    <Icon size={18} name={getIconName(type)} />{\" \"}\n                    {getFieldLabel(type) || type}\n                  </Box>\n                ),\n              },\n            ])}\n            columnName=\"Chart type\"\n            showPercentage\n          />\n          <BaseStatsCard\n            title={`There are ${formatInteger(\n              charts.dashboardCount\n            )} Visualize dashboards`}\n            subtitle={`It accounts for around ${(\n              (charts.dashboardCount / charts.count) *\n              100\n            ).toFixed(0)}% of all charts created.`}\n            data={charts.countByLayoutTypeAndSubtype.map(\n              ({ type, subtype, count }) => [\n                type,\n                {\n                  count,\n                  label: getChartTypeSubtypeLabel({ type, subtype }),\n                },\n              ]\n            )}\n            columnName=\"Layout type\"\n            showPercentage\n          />\n        </CardGrid>\n        <SectionTitleWrapper>\n          <SectionTitle title=\"Cubes\" />\n          <Typography>\n            Gain insights into the cubes used in the charts created in\n            Visualize.\n          </Typography>\n        </SectionTitleWrapper>\n        <CardGrid>\n          <BaseStatsCard\n            title={`Individual charts were made using ${formatInteger(\n              uniq(charts.countByCubeIri.map((d) => d.iri)).length\n            )} cubes`}\n            subtitle=\"Cubes are the data sources used in individual charts.\"\n            data={charts.countByCubeIri.map(({ iri, title, count }) => [\n              title,\n              {\n                count,\n                label:\n                  iri === title ? (\n                    title\n                  ) : (\n                    <CubeLink locale={locale} iri={iri} title={title} />\n                  ),\n              },\n            ])}\n            columnName=\"Cube name (IRI if name is missing)\"\n            showPercentage\n          />\n          <BaseStatsCard\n            title={`Cubes come from ${formatInteger(\n              uniq(\n                charts.countByCubeIri\n                  .filter((d) => d.creator)\n                  .map((d) => d.creator)\n              ).length\n            )} known creators`}\n            subtitle=\"Creators are the organizations that create the cubes.\"\n            data={rollups(\n              charts.countByCubeIri,\n              (v) => sum(v, (d) => d.count),\n              (d) => d.creator\n            )\n              .sort((a, b) =>\n                a[0] === undefined ? 1 : b[0] === undefined ? -1 : b[1] - a[1]\n              )\n              .map(([creator, count]) => [\n                creator ?? \"Unknown\",\n                {\n                  count,\n                  label: creator ?? <i>Unknown</i>,\n                },\n              ])}\n            columnName=\"Cube creator\"\n            showPercentage\n          />\n        </CardGrid>\n      </Box>\n    </AppLayout>\n  );\n};\n\nconst getChartTypeSubtypeLabel = ({\n  type,\n  subtype,\n}: {\n  type: \"single\" | \"dashboard\";\n  subtype?: LayoutDashboard[\"layout\"] | \"tab\" | null;\n}) => {\n  switch (type) {\n    case \"single\":\n      return \"Single chart\";\n    case \"dashboard\":\n      switch (subtype) {\n        case \"tab\":\n          return \"Tab dashboard\";\n        case \"canvas\":\n          return \"Free canvas dashboard\";\n        case \"tall\":\n          return \"Tall dashboard\";\n        case \"vertical\":\n          return \"Vertical dashboard\";\n        default:\n          return type ?? subtype ?? \"Unknown\";\n      }\n    default:\n      const _exhaustiveCheck: never = type;\n      return _exhaustiveCheck;\n  }\n};\n\nexport default Statistics;\n","import { formatLocale } from \"d3-format\";\n\nimport { Locale } from \"@/locales/locales\";\n\nexport const formatInteger = formatLocale({\n  decimal: \".\",\n  thousands: \"\\u00a0\",\n  grouping: [3],\n  currency: [\"\", \"\\u00a0 CHF\"],\n  minus: \"\\u2212\",\n  percent: \"%\",\n}).format(\",d\");\n\nexport const formatYearMonth = (date: Date, { locale }: { locale: Locale }) => {\n  const year = date.getFullYear();\n  const month = date.toLocaleDateString(locale, { month: \"short\" });\n\n  return `${year} ${month}`;\n};\n","\n    (window.__NEXT_P = window.__NEXT_P || []).push([\n      \"/statistics\",\n      function () {\n        return require(\"private-next-pages/statistics.tsx\");\n      }\n    ]);\n    if(module.hot) {\n      module.hot.dispose(function () {\n        window.__NEXT_P.push([\"/statistics\"])\n      });\n    }\n  "],"names":["deserializeProps","sprops","_superjson","props","_objectWithoutProperties","_excluded","SuperJSON","json","meta","BaseStatsCard","_ref","title","subtitle","data","columnName","trend","showPercentage","classes","useStyles","totalCount","sum","_ref2","count","maxCount","max","_ref3","_jsxs","Card","className","root","children","Box","sx","px","display","gridTemplateColumns","gap","_jsx","Typography","variant","fontWeight","Tooltip","_Fragment","direction","lastMonthDailyAverage","formatInteger","toFixed","previousThreeMonthsDailyAverage","component","mt","table","style","tableHeader","position","top","textAlign","divider","map","_ref4","key","datum","Bar","_objectSpread","_ref5","label","easterEgg","useFlag","tableCell","overflow","maxWidth","cursor","whiteSpace","textOverflow","lineHeight","Array","Math","ceil","fill","_","i","motion","div","initial","scale","opacity","animate","transition","delay","width","height","backgroundColor","makeStyles","theme","paddingTop","spacing","boxShadow","shadows","borderRadius","borderBottomLeftRadius","borderBottomRightRadius","palette","grey","gridTemplateRows","maxHeight","overflowY","marginTop","padding","borderBottom","background","paper","zIndex","CardGrid","my","ChartLink","locale","chartKey","Link","href","target","justifyContent","Icon","name","size","CubeLink","iri","SectionTitleWrapper","mx","py","textWrap","SectionTitle","mb","groupByYearMonth","countByDay","countByDate","rollups","v","d","date","length","day","formatYearMonth","reverse","allYearMonthStrings","uniq","yearMonthStr","start","Date","end","getTime","setMonth","getMonth","formattedDate","includes","push","sort","a","b","StatsCard","trendAverages","useLocale","countByYearMonth","total","useMemo","avgMonthlyCount","round","getChartTypeSubtypeLabel","type","subtype","__N_SSP","statistics","charts","views","AppLayout","filter","mostPopularAllTime","chart","viewCount","mostPopularThisMonth","countByChartType","alignItems","getIconName","getFieldLabel","dashboardCount","countByLayoutTypeAndSubtype","countByCubeIri","creator","undefined","formatLocale","decimal","thousands","grouping","currency","minus","percent","format","year","getFullYear","month","toLocaleDateString","window","__NEXT_P","__webpack_require__"],"sourceRoot":""}