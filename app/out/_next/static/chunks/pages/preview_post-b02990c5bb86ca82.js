(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[19186],{1283:function(e,t,r){"use strict";r.d(t,{F:function(){return V}});var a=r(17043),n=r(90089),s=r(96338),i=r(19914),o=r(60116),c=r(64986),l=r(40624),d=r(27378),u=r(58555),p=r(97091),h=r(48863),x=r(62050),j=r(93477),y=r(78222),b=r(16370),f=r(97971),m=r(47612),g=r(52137),O=r(32597),k=r(78081),v=r(10369),w=r(65619),C=r(53082),P=r(17899),S=r(5680),_=r(78839),D=r(25390),F=r(71238),Z=r(62075),K=r(56436),B=r(87182),E=r(80207),M=r(94460),I=r(49148),N=r(8788),T=r(82395),W=r(24246);let R=["dataSource","state","chartConfig","configKey","children","embedParams","shouldShrink"];function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}function z(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let G=(0,d.forwardRef)((e,t)=>{let{dataSource:r,state:a,chartConfig:s,configKey:i,children:o,embedParams:c,shouldShrink:l}=e,u=(0,n.Z)(e,R),p=(0,d.useMemo)(()=>(0,S.ag)(),[]);return(0,W.jsx)(S.ax.Provider,{value:p,children:(0,W.jsx)(k.Ig,{children:(0,W.jsx)(g.hC,z(z({layout:a.layout,ref:t,chartKey:s.key},u),{},{children:(0,W.jsx)(L,{dataSource:r,state:a,chartConfig:s,configKey:i,metadataPanelStore:p,embedParams:c,shouldShrink:l,children:o},s.key)}),s.key)},s.key)})}),V=e=>{let{configKey:t,embedParams:r,shouldShrink:a,isPreview:n}=e,[s]=(0,F.lY)(F.s9),{dataSource:c}=s,l=(0,I.bU)(),u=(0,d.useMemo)(()=>(0,S.ag)(),[]),p=$({shrink:!0}),h=(0,d.useCallback)(e=>(0,W.jsx)(G,{dataSource:c,state:s,chartConfig:e,configKey:t,embedParams:r},e.key),[t,c,r,s]),x=(0,d.useCallback)(e=>{switch(e.type){case"chart":return h(s.chartConfigs.find(t=>t.key===e.key));case"text":return(0,_.aW)(e);default:return e}},[s.chartConfigs,h]),y=(0,d.useCallback)(e=>{let{height:t}=e;window.parent.postMessage({type:j.m2,height:t},"*")},[]),[b]=(0,T.y)(y);return(0,W.jsx)(S.ax.Provider,{value:u,children:(0,W.jsx)(N.ch,{chartConfigs:s.chartConfigs,children:(0,W.jsx)(o.Z,{ref:b,children:"dashboard"===s.layout.type?(0,W.jsxs)(o.Z,{className:p.dashboardBoxWrapper,children:[s.layout.meta.title[l]||s.layout.meta.description[l]?(0,W.jsxs)(C.k,{flexDirection:"column",children:[s.layout.meta.title[l]&&(0,W.jsx)(Z.Dx,{text:s.layout.meta.title[l]}),s.layout.meta.description[l]&&(0,W.jsx)(Z.dk,{text:s.layout.meta.description[l]})]}):null,(0,W.jsx)(g.WK,{layoutType:s.layout.layout,renderBlock:x}),1!==s.chartConfigs.length&&t&&(0,W.jsx)(m.cS,{configKey:t,createdWith:i.ag._({id:"metadata.link.created.with"})})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(C.k,{sx:{flexDirection:"column",mb:s.layout.meta.title[l]||s.layout.meta.description[l]?4:0},children:[s.layout.meta.title[l]&&(0,W.jsx)(Z.Dx,{text:s.layout.meta.title[l]}),s.layout.meta.description[l]&&(0,W.jsx)(Z.dk,{text:s.layout.meta.description[l]})]}),(0,W.jsxs)(k.Ig,{children:[(0,W.jsx)(w.u,{}),(0,W.jsx)(g.hC,{layout:s.layout,chartKey:s.activeChartKey,children:(0,W.jsx)(L,{dataSource:c,state:s,chartConfig:(0,D.f6)(s),configKey:t,metadataPanelStore:u,embedParams:r,shouldShrink:a,isPreview:n})})]})]})})})})},$=(0,c.Z)(e=>({root:{position:"relative",paddingLeft:t=>{let{shrink:r}=t;return`calc(${e.spacing(5)} + ${r?K.pG:0}px)`},padding:t=>{let{optimizeSpace:r}=t;return r?e.spacing(3):e.spacing(6)},transition:"padding 0.25s ease"},dashboardBoxWrapper:{[e.breakpoints.up("xs")]:{padding:e.spacing(5,4,2,4)},[e.breakpoints.up("md")]:{padding:e.spacing(5)},[e.breakpoints.up("lg")]:{padding:e.spacing(6)},gap:16,display:"flex",flexDirection:"column",backgroundColor:e.palette.cobalt[50]}})),A=e=>{let{dataSource:t=B.Ve,state:r,chartConfig:a,configKey:n,className:i,children:c,metadataPanelStore:j,embedParams:g,shouldShrink:w,isPreview:S}=e,{meta:_}=a,D=(0,d.useRef)(null),{isTable:F,computeContainerHeight:T}=(0,k.IS)(),R=(0,u.oR)(j,e=>e.open),U=(0,d.useMemo)(()=>{let e=D.current?.getBoundingClientRect().width;return!!e&&(w??(R&&e>2*K.pG))},[w,R]);(0,d.useEffect)(()=>{let e=j.subscribe(()=>{T()});return()=>e()});let G=(0,O.TZ)({removeBorder:g?.removeBorder}),V=$({shrink:U,optimizeSpace:g?.optimizeSpace}),A=(0,I.bU)(),L=(0,B.Id)(t),X={sourceType:t.type,sourceUrl:t.url,locale:A},[{data:H}]=(0,E.bi)({variables:{sourceType:t.type,sourceUrl:t.url,locale:A,cubeFilters:a.cubes.map(e=>({iri:e.iri}))}}),J=H?.dataCubesMetadata,Y=(0,p.Zl)(r.chartConfigs),[{data:q}]=(0,E.k$)({chartConfig:a,variables:z(z({},X),{},{cubeFilters:a.cubes.map(e=>({iri:e.iri,componentIds:Y,joinBy:e.joinBy}))})}),Q=q?.dataCubesComponents,ee=Q?.dimensions,et=Q?.measures,er=(0,d.useMemo)(()=>ee&&et?[...ee,...et]:[],[ee,et]);return(0,W.jsxs)(o.Z,{ref:D,className:(0,l.Z)(G.root,G.pastEditing,V.root,i),children:[c,(0,W.jsxs)(f.x,{resetKeys:[a],children:[(0,W.jsxs)("div",{children:[J?.some(e=>e.publicationStatus===M.sl.Draft)&&(0,W.jsx)(o.Z,{sx:{mb:4},children:(0,W.jsx)(P.BI,{children:(0,W.jsx)(s.cC,{id:"dataset.publicationStatus.draft.warning",components:{0:(0,W.jsx)("br",{}),1:(0,W.jsx)("strong",{})}})})}),J?.some(e=>e.expires)&&(0,W.jsx)(o.Z,{sx:{mb:4},children:(0,W.jsx)(P.BI,{children:(0,W.jsx)(s.cC,{id:"dataset.publicationStatus.expires.warning",components:{0:(0,W.jsx)("br",{}),1:(0,W.jsx)("strong",{})}})})}),!L&&(0,W.jsx)(o.Z,{sx:{mb:4},children:(0,W.jsx)(P.m0,{children:(0,W.jsx)(s.cC,{id:"data.source.notTrusted"})})}),(0,x.v5)(a)&&(0,W.jsx)(o.Z,{sx:{mb:4},children:(0,W.jsx)(P.pd,{children:(0,W.jsx)(s.cC,{id:"dataset.hasImputedValues"})})})]}),(0,W.jsx)(h.p,{children:(0,W.jsxs)(N.Zg,{chartConfigKey:a.key,children:[(0,W.jsxs)(C.k,{sx:{height:"fit-content",justifyContent:_.title[A]?"space-between":"flex-end",gap:2},children:[_.title[A]?(0,W.jsx)(Z.Dx,{text:_.title[A],smaller:!0}):(0,W.jsx)("span",{style:{height:1}}),g?.removeMoreOptionsButton?null:(0,W.jsx)(y.G,{children:(0,W.jsx)(O.iA,{configKey:n,chartKey:a.key,chartWrapperNode:D.current,components:er,disableDatabaseRelatedActions:S})})]}),_.description[A]?(0,W.jsx)(Z.dk,{text:_.description[A],smaller:!0}):(0,W.jsx)("span",{style:{height:1}}),(0,W.jsx)(O.xx,{dataSource:t,chartConfig:a,dashboardFilters:r.dashboardFilters,metadataPanelProps:g?.removeMoreOptionsButton?void 0:{components:er,container:D.current,allowMultipleOpen:!0}}),(0,W.jsx)(k.S4,{children:F?(0,W.jsx)(b._,{dataSource:t,chartConfig:a,dashboardFilters:r.dashboardFilters,sx:{maxHeight:"100%"}}):(0,W.jsx)(v.I,{dataSource:t,componentIds:Y,chartConfig:a,dashboardFilters:r.dashboardFilters,embedParams:g})}),(0,W.jsx)(m.Tc,{configKey:n,dataSource:t,chartConfig:a,dashboardFilters:r.dashboardFilters,components:er,showVisualizeLink:"dashboard"!==r.layout.type||"dashboard"===r.layout.type&&1===r.chartConfigs.length,hideFilters:g?.removeFilters,hideMetadata:g?.removeFootnotes,metadataPanelProps:g?.removeMoreOptionsButton?{components:er,container:D.current,allowMultipleOpen:!0}:void 0})]})})]})]})},L=e=>(0,d.createElement)(A,z(z({},e),{},{key:e.chartConfig.key}))},19028:function(e,t,r){"use strict";r.r(t),r.d(t,{__N_SSP:function(){return x},default:function(){return j}});var a=r(17043),n=r(96338),s=r(88424),i=r(1283),o=r(9707),c=r(93912),l=r(49148),d=r(27102),u=r(90453),p=r(24246);function h(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,a)}return r}var x=!0;function j(e){let{configuratorState:t,locale:r}=e;c.ag.activate(r);let x=JSON.parse(t);return(0,p.jsx)(l.Iw,{value:r,children:(0,p.jsx)(n.bd,{i18n:c.ag,children:(0,p.jsx)(o.c,{children:(0,p.jsx)(s.Z,{theme:u.r,children:x?(0,p.jsx)(d.c7,{chartId:"published",initialState:x,children:(0,p.jsx)(i.F,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?h(Object(r),!0).forEach(function(t){(0,a.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):h(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}({configKey:"preview",isPreview:!0},x))}):null})})})})}},35430:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/preview_post",function(){return r(19028)}])}},function(e){e.O(0,[31434,88033,68143,72159,54568,96761,2386,22686,25592,17671,65362,92888,49774,40179],function(){return e(e.s=35430)}),_N_E=e.O()}]);
//# sourceMappingURL=preview_post-b02990c5bb86ca82.js.map