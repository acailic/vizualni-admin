"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[80625],{93226:function(e,t,r){r.d(t,{F:function(){return v}});var n=r(17043),o=r(64986),l=r(73681),i=r(83864),s=r.n(i),a=r(27378),c=r(60116),u=r(24157),d=r(24246);let p=(0,a.memo)(e=>{let{title:t,dimensions:r,measures:n,observations:o}=e,l=(0,a.useMemo)(()=>{let e=new Set(Object.keys(o[0]));return[...r,...n].filter(t=>e.has(t.id))},[r,n,o]);return(0,d.jsx)(u.T,{children:(0,d.jsxs)("table",{children:[(0,d.jsx)("caption",{children:t}),(0,d.jsxs)("tbody",{children:[(0,d.jsx)("tr",{children:l.map(e=>{let{id:t,label:r}=e;return(0,d.jsx)("th",{role:"columnheader",scope:"col",children:(0,d.jsx)(c.Z,{children:r})},t)})}),o.map((e,t)=>(0,d.jsx)("tr",{children:l.map(t=>{let{id:r}=t;return(0,d.jsx)("td",{children:e[r]},r)})},t))]})]})})});var h=r(48863),m=r(53082),g=r(17899),f=r(80207),b=r(49148);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function x(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let y=(0,o.Z)(()=>({dataWrapper:{position:"relative",width:"100%",height:"100%",display:"flex",flexDirection:"column"}})),O=e=>{let{chartConfig:t,LoadingOverlayComponent:r=g.fz,Component:n,ComponentProps:o,componentIds:i,dataSource:c,embedParams:u,observationQueryFilters:j,fetching:O=!1,error:v}=e,P=(0,h.$)(),C=y(),k=(0,b.bU)(),Z={sourceType:c.type,sourceUrl:c.url,locale:k},[M]=(0,f.bi)({variables:x(x({},Z),{},{cubeFilters:t.cubes.map(e=>({iri:e.iri}))}),keepPreviousData:!0}),[S]=(0,f.k$)({chartConfig:t,variables:x(x({},Z),{},{cubeFilters:t.cubes.map(e=>({iri:e.iri,componentIds:i,joinBy:e.joinBy,loadValues:!0}))}),keepPreviousData:!0}),[D]=(0,f.XO)({chartConfig:t,variables:x(x({},Z),{},{cubeFilters:j}),keepPreviousData:!0}),{data:I,fetching:E,error:T}=M,{data:$,fetching:R,error:B}=S,{data:N,fetching:F,error:W}=D,z=I?.dataCubesMetadata,H=N?.dataCubesObservations?.data,_=$?.dataCubesComponents.dimensions,G=$?.dataCubesComponents.measures,U=O||E||R||F,A=v||T||B||W;(0,a.useEffect)(()=>{P.set("data",U)},[P,U]);let{dimensionsById:L,measuresById:q}=(0,a.useMemo)(()=>({dimensionsById:s()(_??[],e=>e.id),measuresById:s()(G??[],e=>e.id)}),[_,G]);if(A)return(0,d.jsxs)(m.k,{sx:{flexDirection:"column",gap:3},children:[T&&(0,d.jsx)(w,{message:T.message}),B&&(0,d.jsx)(w,{message:B.message}),W&&(0,d.jsx)(w,{message:W.message}),v&&(0,d.jsx)(w,{message:v.message})]});if(U&&(!z||!_||!G||!H))return(0,d.jsx)(g.gb,{});if(!z||!_||!G||!H)return null;{let e=z.map(e=>e.title).join(", ");return(0,d.jsxs)("div",{className:C.dataWrapper,"data-chart-loaded":!P.loading,children:[H.length>0&&(0,d.jsx)(p,{title:e,observations:H,dimensions:_,measures:G}),(0,a.createElement)(n,x({observations:H,dimensions:_,dimensionsById:L,measures:G,measuresById:q,chartConfig:t,embedParams:u},o)),(0,d.jsx)(l.M,{children:P.loading?(0,d.jsx)(r,{}):0===H.length?(0,d.jsx)(g.y8,{}):null})]})}},v=e=>{let t=(0,a.useMemo)(()=>e.chartConfig.cubes.map(e=>`${e.iri}${e.joinBy?`:${e.joinBy}`:""}`).join(" / "),[e.chartConfig.cubes]);return(0,d.jsx)(O,x({},e),t)},w=e=>{let{message:t}=e;return(0,d.jsx)(m.k,{flexGrow:1,justifyContent:"center",minHeight:300,children:(0,d.jsx)(g.OD,{message:t})})}},3663:function(e,t,r){r.d(t,{$:function(){return i},r:function(){return l}});var n=r(24663),o=r(90717);let l=12,i=()=>{let e=(0,o.F)(),t=e.palette.text.primary,r=e.palette.monochrome[800],i=e.palette.cobalt[100],s=e.typography.fontFamily,a=e.palette.monochrome[300],c=e.palette.monochrome[500],u=e.palette.monochrome[500],d=e.palette.background.paper;return{axisLabelFontSize:(0,n.Z)(e.breakpoints.down("xl"))?12:14,labelColor:t,labelFontSize:l,domainColor:r,gridColor:i,fontFamily:s,brushOverlayColor:a,brushSelectionColor:c,brushHandleStrokeColor:u,brushHandleFillColor:d}}},27808:function(e,t,r){r.r(t),r.d(t,{ChartTableVisualization:function(){return eF}});var n=r(17043),o=r(27378),l=r(93226),i=r(50051),s=r(83001),a=r(90089),c=r(96338),u=r(19914),d=r(60116),p=r(87026),h=r(64986),m=r(45258),g=r.n(m),f=r(60378),b=r(70008),j=r(30677),x=r(43137),y=r(92201),O=r(98505),v=r(97091),w=r(48947),P=r(24246);let C=(0,h.Z)(e=>({link:{display:"inline-flex",alignItems:"center",gap:e.spacing(1),color:"inherit",fontWeight:"inherit",textDecoration:"none","&:hover":{textDecoration:"underline"}}})),k=(e,t,r)=>{let n=(0,v.d7)(r),{original:o}=e.row,l=o[(0,v.d7)(`${r}/__iri__`)],i=o[n],s=l?`${l}`.split("/").pop()||l:i;return`${t}${s}`},Z=e=>{let{children:t,cell:r,columnMeta:n,links:o}=e,l=C(),i=o.enabled&&""!==o.baseUrl.trim()&&""!==o.componentId.trim()&&""!==o.targetComponentId.trim()&&(0,v.d7)(o.targetComponentId)===n.slugifiedId,s=k(r,o.baseUrl,o.componentId);return i&&s?(0,P.jsxs)(O.Z,{className:l.link,href:s,target:"_blank",title:s,style:{flex:1,justifyContent:"space-between"},children:[t,(0,P.jsx)(w.JO,{name:"legacyLinkExternal",size:16})]}):(0,P.jsx)(P.Fragment,{children:t})},M=e=>{let{tagColor:t,small:r=!1,children:n}=e;return(0,P.jsx)(d.Z,{component:"span",sx:{backgroundColor:t,color:(0,y.Uc)(t).l<55?"#fff":"#000",borderRadius:8,px:2,py:r?"0.125rem":1,my:r?0:1},children:n})};var S=r(53082);function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let E=(0,h.Z)(e=>({heatmapCell:{alignItems:"center",justifyContent:"flex-end",textAlign:"right",padding:`0 ${e.spacing(3)}`},defaultCell:{alignItems:"center",paddingLeft:0,"&:first-of-type":{paddingLeft:0},"&:last-of-type":{paddingRight:0}},barBackground:{position:"absolute",top:"-2px",width:"1px",height:22,backgroundColor:e.palette.grey[700]},barForeground:{position:"absolute",top:0,height:18}})),T=e=>{let{cell:t,columnMeta:r}=e,{columnComponentType:n,textStyle:o,textColor:l,columnColor:i,barColorPositive:s,barColorNegative:a,barColorBackground:c,barShowBackground:u}=r,p=E(),{links:h}=(0,x.gH)();switch(r.type){case"text":return(0,P.jsx)(S.k,I(I({sx:{alignItems:"center",justifyContent:"NumericalMeasure"===n?"flex-end":"flex-start",color:l,backgroundColor:i,fontWeight:o,px:3}},t.getCellProps()),{},{children:(0,P.jsx)(Z,{cell:t,columnMeta:r,links:h,children:r.formatter(t)})}));case"category":let{colorScale:m}=r;return(0,P.jsx)(S.k,I(I({sx:{alignItems:"center",fontWeight:o,pl:1,pr:3}},t.getCellProps()),{},{children:(0,P.jsx)(Z,{cell:t,columnMeta:r,links:h,children:(0,P.jsx)(M,{tagColor:m(t.value),children:r.formatter(t)})})}));case"heatmap":let{colorScale:g}=r,f=null===t.value;return(0,P.jsx)(S.k,I(I({className:p.heatmapCell,sx:{color:f?l:(0,y.Uc)(g(t.value)).l<55?"#fff":"#000",backgroundColor:f?"grey.100":g(t.value),fontWeight:o}},t.getCellProps()),{},{children:(0,P.jsx)(Z,{cell:t,columnMeta:r,links:h,children:r.formatter(t)})}));case"bar":let{widthScale:b}=r;return(0,P.jsx)(S.k,I(I({sx:{flexDirection:"column",justifyContent:"center",px:"12px"}},t.getCellProps()),{},{children:(0,P.jsxs)(Z,{cell:t,columnMeta:r,links:h,children:[(0,P.jsx)(d.Z,{children:r.formatter(t)}),null!==t.value&&b&&(0,P.jsxs)(d.Z,{sx:{width:b.range()[1],height:18,position:"relative",backgroundColor:u?c:"grey.100"},children:[(0,P.jsx)(d.Z,{className:p.barForeground,sx:{left:`${$(t.value,b)}px`,width:`${R(t.value,b)}px`,backgroundColor:t.value>0?s:a}}),(0,P.jsx)(d.Z,{className:p.barBackground,sx:{left:`${t.value<0?b(0):$(t.value,b)}px`}})]})]})}));default:return(0,P.jsx)(S.k,I(I({className:p.defaultCell,sx:{justifyContent:"NumericalMeasure"===n?"flex-end":"flex-start",textAlign:"NumericalMeasure"===n?"right":"left",color:l,backgroundColor:i,fontWeight:o}},t.getCellProps()),{},{children:(0,P.jsx)(Z,{cell:t,columnMeta:r,links:h,children:r.formatter(t)})}))}},$=(e,t)=>t(e>=0?Math.max(t.domain()[0],0):e<0?e:Math.max(t.domain()[0],0)),R=(e,t)=>e>=0?t(e)-t(Math.max(t.domain()[0],0)):e<0?t(Math.abs(e))-t(0):t(e)-t(0);var B=r(41494);let N=e=>{let{cell:t,columnMeta:r}=e,{bounds:n,links:o}=(0,x.gH)(),{chartWidth:l}=n,i=(0,B.D2)(),{columnComponentType:s,textColor:a,textStyle:c,barShowBackground:u,barColorBackground:p,barColorNegative:h,barColorPositive:m}=r;switch(r.type){case"text":return(0,P.jsx)(d.Z,{component:"div",sx:{width:"100%",color:a,fontWeight:c},children:(0,P.jsx)(Z,{cell:t,columnMeta:r,links:o,children:"NumericalMeasure"===s?i(t.value):t.render("Cell")})});case"category":{let{colorScale:e}=r;return(0,P.jsx)(Z,{cell:t,columnMeta:r,links:o,children:(0,P.jsx)(M,{tagColor:e(t.value),small:!0,children:t.render("Cell")})})}case"heatmap":{let{colorScale:e}=r,n=null===t.value;return(0,P.jsx)(Z,{cell:t,columnMeta:r,links:o,children:(0,P.jsx)(d.Z,{sx:{width:"fit-content",px:1,borderRadius:"2px",backgroundColor:n?"grey.100":e(t.value),color:n?a:(0,y.Uc)(e(t.value)).l<55?"#fff":"#000",fontWeight:c},children:i(t.value)})})}case"bar":{let{widthScale:e}=r;return e.range([0,l/2]),(0,P.jsx)(Z,{cell:t,columnMeta:r,links:o,children:(0,P.jsxs)(S.k,{sx:{flexDirection:"column",justifyContent:"center",width:l/2},children:[(0,P.jsx)(d.Z,{sx:{width:l/2},children:i(t.value)}),null!==t.value&&(0,P.jsxs)(d.Z,{sx:{position:"relative",width:l/2,height:14,backgroundColor:u?p:"grey.100"},children:[(0,P.jsx)(d.Z,{sx:{position:"absolute",top:0,left:`${$(t.value,e)}px`,width:`${R(t.value,e)}px`,height:14,backgroundColor:t.value>0?m:h}}),(0,P.jsx)(d.Z,{sx:{position:"absolute",top:"-2px",left:`${t.value<0?e(0):$(t.value,e)}px`,width:"1px",height:18,backgroundColor:"grey.700"}})]})]})})}default:return(0,P.jsx)(Z,{cell:t,columnMeta:r,links:o,children:(0,P.jsx)(d.Z,{component:"span",sx:{color:a,fontWeight:c},children:"NumericalMeasure"===s?i(t.value):t.render("Cell")})})}};function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function W(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let z=e=>{let{row:t,groupingLevels:r}=e,{tableColumnsMeta:n}=(0,x.gH)(),{depth:l}=t;return(0,P.jsx)(P.Fragment,{children:t.allCells.map((e,i)=>{let s=n[e.column.id],{formatter:a}=s,c=H(r-l);return(0,P.jsx)(o.Fragment,{children:e.isGrouped&&(0,P.jsxs)(S.k,W(W({},t.getToggleRowExpandedProps()),{},{sx:{minWidth:"100%",alignItems:"center",cursor:"pointer",bg:c},children:[(0,P.jsx)(d.Z,{component:"span",sx:{width:24,mr:0,color:"grey.600"},children:(0,P.jsx)(w.JO,{name:t.isExpanded?"chevronDown":"chevronRight"})}),"category"===s.type?(0,P.jsx)(M,{tagColor:s.colorScale(e.value),children:a(e)}):(0,P.jsx)(d.Z,{component:"span",sx:{color:(0,y.Uc)(c).l<55?"grey.100":"grey.900",fontWeight:"bold",textAlign:"left"},children:a(e)})]}))},i)})})},H=e=>{switch(e){case 0:case 1:default:return"grey.100";case 2:return"grey.200";case 3:return"grey.300";case 4:return"grey.400";case 5:return"grey.500";case 6:return"grey.600"}};var _=r(79778),G=r(40624),U=r(97358);function A(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function L(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?A(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):A(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let q=(0,o.createContext)(void 0),J=e=>{let{headerGroups:t,tableColumnsMeta:r,customSortCount:n,totalColumnsWidth:l,children:i}=e,s=(0,o.useMemo)(()=>({headerGroups:t,tableColumnsMeta:r,customSortCount:n,totalColumnsWidth:l}),[t,r,n,l]);return(0,P.jsx)(q.Provider,{value:s,children:i})},Q=(0,h.Z)(e=>({headerGroup:{margin:0,padding:`${e.spacing(2)} ${e.spacing(3)}`,borderTop:"1px solid",borderBottom:"1px solid",borderTopColor:e.palette.monochrome[300],borderBottomColor:e.palette.monochrome[300],fontWeight:"bold",fontSize:"0.875rem",backgroundColor:e.palette.background.paper,color:e.palette.grey[700],minHeight:24,alignItems:"center",justifyContent:"flex-start",whiteSpace:"nowrap"},headerGroupMeasure:{justifyContent:"flex-end"}})),V=e=>{let{children:t}=e,r=(0,o.useContext)(q),n=Q();if(!r)throw Error("Please wrap TableContent in TableContentProvider");let{headerGroups:l,tableColumnsMeta:i,customSortCount:s,totalColumnsWidth:a}=r;return(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(d.Z,{sx:{position:"sticky",top:0,zIndex:1},children:l.map(e=>(0,P.jsx)(d.Z,L(L({},e.getHeaderGroupProps()),{},{children:e.headers.map(e=>{let{dim:t,columnComponentType:r}=i[e.id],o=e.sortedIndex<s;return(0,P.jsx)(S.k,L(L({className:(0,G.Z)(n.headerGroup,"NumericalMeasure"===r?n.headerGroupMeasure:void 0)},e.getHeaderProps(e.getSortByToggleProps())),{},{children:(0,P.jsx)(_.Z,{active:o,direction:e.isSortedDesc?"desc":"asc",sx:{"& svg":{opacity:o?1:.5}},children:(0,P.jsx)(U.K,{component:t,children:(0,P.jsx)("span",{style:{fontWeight:"bold"},children:e.render("Header")})})})}))})})))}),(0,P.jsx)(d.Z,{sx:{position:"relative",minWidth:a,width:"100%"},children:t})]})};var K=r(99990),Y=r(71171);let X=["children"];function ee(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ee(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let er=(0,o.forwardRef)((e,t)=>{let{children:r}=e,n=(0,a.Z)(e,X);return(0,P.jsx)(d.Z,et(et({ref:t},n),{},{style:et(et({},n.style),{},{height:n.style.height+42}),children:(0,P.jsx)(V,{children:r})}))}),en=(0,h.Z)(e=>({desktopRow:{borderBottom:"1px solid",borderBottomColor:e.palette.monochrome[300]},mobileRow:{borderBottom:"1px solid",borderBottomColor:e.palette.monochrome[300],"&:first-of-type":{borderTop:"1px solid",borderTopColor:e.palette.monochrome[300]}}})),eo=e=>e<384,el=e=>{let{showSearch:t,width:r,showTimeRange:n}=e;return(t?48:0)+(eo(r)?48:0)+(n?40:0)+54},ei=()=>{let{bounds:e,rowHeight:t,chartData:r,showSearch:n,tableColumns:l,tableColumnsMeta:i,groupingIds:s,hiddenIds:a,sortingIds:h}=(0,x.gH)(),m=en(),{0:y,1:O}=(0,o.useState)(!1),v=eo(e.width),{0:C,1:k}=(0,o.useState)(""),Z=(0,o.useMemo)(()=>{let e=Object.values(i).flatMap(e=>"NumericalMeasure"===e.columnComponentType?[]:[e.slugifiedId]),t=g().create({tokenize:"full",doc:{id:"id",field:e}});return t.add(r),t},[i,r]),M=(0,o.useMemo)(()=>""===C?r:Z.search({query:`${C}`}),[r,C,Z]),{getTableProps:D,getTableBodyProps:I,headerGroups:E,rows:$,totalColumnsWidth:R,prepareRow:B,visibleColumns:F,state:W}=(0,f.useTable)({columns:l,data:M,autoResetExpanded:!1,autoResetSortBy:!1,useControlledState:e=>(0,o.useMemo)(()=>et(et({},e),{},{sortBy:[...e.sortBy,...h],groupBy:s,hiddenColumns:a}),[e,s,a,h])},f.useFlexLayout,f.useGroupBy,f.useSortBy,f.useExpanded),H=W.sortBy.length-h.length,_=(0,o.useCallback)(e=>{let{index:t,style:r}=e,n=$[t];return B(n),(0,P.jsx)(d.Z,et(et({},n.getRowProps({style:et(et({},r),{},{minWidth:"100%"})})),{},{className:m.desktopRow,children:0===n.subRows.length?n.cells.map((e,t)=>(0,P.jsx)(T,{cell:e,columnMeta:i[e.column.id]},t)):(0,P.jsx)(z,{row:n,groupingLevels:s.length})}))},[m.desktopRow,s.length,B,$,i]),G=(0,o.useCallback)(e=>$[e].isGrouped?t:32*F.length,[$,t,F.length]),U=(0,o.useCallback)(e=>{let{index:r,style:n}=e,o=$[r];return B(o),(0,P.jsx)(P.Fragment,{children:(0,P.jsx)(d.Z,et(et({className:m.mobileRow},o.getRowProps({style:et(et({},n),{},{flexDirection:"column",width:"100%"})})),{},{children:0===o.subRows.length?o.cells.map((e,t)=>(0,P.jsxs)(S.k,{component:"dl",sx:{justifyContent:"space-between",alignItems:"center",color:"grey.800",fontSize:"0.75rem",my:1},children:[(0,P.jsx)(d.Z,{component:"dt",sx:{fontWeight:"bold",mr:2,whiteSpace:"nowrap"},children:e.column.Header}),(0,P.jsx)(S.k,{component:"dd",sx:{position:"relative",justifyContent:"flex-end",textAlign:"right",ml:2},children:(0,P.jsx)(N,{cell:e,columnMeta:i[e.column.id]})})]},t)):(0,P.jsx)(S.k,{sx:{height:t,ml:`${12*o.depth}px`},children:(0,P.jsx)(z,{row:o,groupingLevels:s.length})})}))})},[m.mobileRow,s.length,B,t,$,i]);return(0,P.jsxs)(P.Fragment,{children:[n&&(0,P.jsx)(d.Z,et(et({sx:{mb:4,width:"min(100%, 300px)"}},Y.nT),{},{children:(0,P.jsx)(K.II,{type:"text",name:"search-input",placeholder:u.ag._({id:"table.search.placeholder"}),endAdornment:(0,P.jsx)(w.JO,{name:"search"}),value:C,onChange:e=>k(e.currentTarget.value)})})),(0,P.jsx)(d.Z,{sx:{my:3},style:{display:e.width<384?"block":"none"},children:(0,P.jsx)(K.rs,{label:(0,P.jsx)(c.cC,{id:"chart.published.toggle.mobile.view"}),name:"Compact view",checked:y,onChange:()=>O(!y)})}),v&&y?(0,P.jsx)(d.Z,{sx:{width:"100%",height:"100%",position:"relative",backgroundColor:"grey.100",mb:4,fontSize:"0.875rem"},children:(0,P.jsx)(b.ZP,{children:e=>{let{width:t,height:r}=e;return(0,P.jsx)(j.S_,{height:r,itemCount:$.length,itemSize:G,width:t,children:U},$.length)}})}):(0,P.jsx)(d.Z,et(et({sx:{position:"relative",mb:4,fontSize:"0.875rem"}},D({style:{minWidth:"100%",height:"100%"}})),{},{children:(0,P.jsx)("div",et(et({},I()),{},{style:{height:"100%"},children:(0,P.jsx)(J,{headerGroups:E,tableColumnsMeta:i,customSortCount:H,totalColumnsWidth:R,children:(0,P.jsx)(b.ZP,{disableWidth:!0,children:e=>{let{height:r}=e;return(0,P.jsx)(j.t7,{outerElementType:er,height:r-t,itemCount:$.length,itemSize:t,width:"100%",children:_})}})})}))})),(0,P.jsxs)(p.Z,{variant:"body3",sx:{display:"flex",justifyContent:"flex-end",mb:5},children:[(0,P.jsx)(c.cC,{id:"chart.table.number.of.lines"})," ",M.length]})]})};var es=r(60090),ea=r(93603),ec=r(49951),eu=r(51894),ed=r(36890),ep=r(86706),eh=r(47626),em=r(9787),eg=r(67291),ef=r(83180),eb=r.n(ef),ej=r(25389),ex=r.n(ej),ey=r(93477);function eO(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ev(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eO(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eO(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let ew=e=>{let{chartConfig:t,dimensionsById:r}=e,n=(0,x.Ck)(t),{timeRange:o}=t.interactiveFiltersConfig,l=o.active?o.componentId:void 0,i=(0,x.sH)({componentId:l},{dimensionsById:r});return ev(ev({},n),i)},eP=(e,t)=>{let{chartConfig:r,observations:n}=e,{xDimension:o,getX:l}=t,i=(0,v.Tq)(n,{});return(0,x.q1)(i,{chartConfig:r,timeRangeDimensionId:o?.id,axisDimensionId:o?.id,getAxisValueAsDate:l,getTimeRangeDate:l})};var eC=r(10359),ek=r(41282),eZ=r(87358),eM=r(7673);let eS=["children"];function eD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eI(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eD(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eD(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eE=(e,t,r)=>{let{chartConfig:n,dimensions:l,measures:i}=e,{getX:s}=t,{chartData:a,allData:c,timeRangeData:u}=r,{fields:d,settings:p,links:h,sorting:m}=n,g=(0,B.D2)(),f=Object.values(d).some(e=>"bar"===e.columnStyle.type)?56:40,{width:b}=(0,ey.tH)(),j={top:10,right:10,bottom:10,left:10},x=b-j.left-j.right,y=Math.min(600,(a.length+1)*f),O=y+j.top+j.bottom+el({showSearch:p.showSearch,width:b,showTimeRange:n.interactiveFiltersConfig.timeRange.active}),w=(0,eC.Km)(d),P=[...l,...i].reduce((e,t)=>eI(eI({},e),{},{[(0,v.d7)(t.id)]:t.__typename}),{}),C=(0,o.useMemo)(function(){let e=Object.keys(a[0]??[]),t=e.length,r=e.map(v.d7);return a.map((n,o)=>{let l={id:o};for(let o=0;o<t;o++){let t=r[o],i=n[e[o]];l[t]="NumericalMeasure"!==P[t]?i:null!=i?+i:null}return l})},[a,P]),k=(0,o.useMemo)(()=>{let e=[...l,...i];return w.map(t=>{let r=e.find(e=>e.id===t.componentId);if(!r)throw Error(`No dimension <${t.componentId}> in cube!`);let n=(0,eM.tf)(r,{sorting:{sortingType:"byTableSortingType",sortingOrder:"asc"}}),o=(0,v.zY)(r),l=[...[...new Set(a.map(e=>e[t.componentId]))].map(e=>{let r="NumericalMeasure"===t.componentType?g(e):e;return(0,eZ.m)(`${r}`,{fontSize:16})+20})],i=Math.max(50,(0,eZ.m)(o,{fontSize:16})+44,...l);return{Header:o,accessor:(0,v.d7)(t.componentId),width:i,sortType:(e,t,r)=>{for(let o of n){let n=(0,es.Z)(o(e.values[r]),o(t.values[r]));if(n)return n}return 0}}})},[l,i,w,a,g]),Z=(0,o.useMemo)(()=>w.filter(e=>e.isGroup).map(e=>(0,v.d7)(e.componentId)),[w]),M=(0,o.useMemo)(()=>[...m.map(e=>({id:(0,v.d7)(e.componentId),desc:"desc"===e.sortingOrder})),...w.flatMap(e=>m.some(t=>t.componentId===e.componentId)?[]:[{id:(0,v.d7)(e.componentId),desc:!1}])],[m,w]),S=(0,B.sz)([...l,...i]),D=(0,o.useMemo)(()=>w.filter(e=>e.isHidden).map(e=>(0,v.d7)(e.componentId)),[w]),I=(0,o.useMemo)(()=>{let e=Object.fromEntries([...l,...i].map(e=>[e.id,e]));return eb()(ex()(d,(t,r)=>{let n=(0,v.d7)(r),o=t.columnStyle,l=o.type,i=t.componentType,s=S[r],c=eI({dim:e[r],id:r,slugifiedId:n,columnComponentType:i,description:e[r]?.description||void 0,formatter:e=>s(e.value)},o);if("text"===l)return c;if("category"===l){let{colorMapping:t}=o,n=e[r],l=(0,ed.Z)(),i=Object.keys(t).map(e=>({label:(n.values.find(t=>t.value===e)??{label:"unknown"}).label,color:t[e]??eg.Z[0]}));return l.domain(i.map(e=>e.label)),l.range(i.map(e=>e.color)),eI(eI({},c),{},{colorScale:l})}if("heatmap"===l){let e=Math.max((0,ea.Z)(a,e=>null!==e[r]?Math.abs(e[r]):0)||0,(0,ec.Z)(a,e=>null!==e[r]?Math.abs(e[r]):1)||1),t=(0,ep.ZP)((0,ek.d5)(o.paletteId)).domain([-e,0,e]);return eI(eI({},c),{},{colorScale:t})}{if("bar"!==l)return null;let e=[...new Set(a.map(e=>null!==e&&null!==e[r]?(0,eC.QQ)(e[r]):NaN))],t=e.map(e=>{let t=s(e);return(0,eZ.m)(`${t}`,{fontSize:16})+80}),n=Math.max((0,ec.Z)(t,e=>e)||150,150)-24,o=(0,eu.Z)(e,e=>e),i=(0,eh.Z)().domain(o).range([0,n]);return eI(eI({},c),{},{widthScale:i})}}),e=>e.slugifiedId)},[l,i,d,S,a]),E=(0,o.useMemo)(()=>{let e=(0,eu.Z)(u,e=>s(e));return(0,em.Z)().domain(e)},[s,u]);return E.range([0,x]),eI({chartType:"table",chartData:C,allData:c,bounds:{width:b,height:O,aspectRatio:O/b,margins:j,chartWidth:x,chartHeight:y},rowHeight:f,showSearch:p.showSearch,tableColumns:k,tableColumnsMeta:I,groupingIds:Z,hiddenIds:D,sortingIds:M,xScaleTimeRange:E,links:h},t)},eT=e=>{let{children:t}=e,r=(0,a.Z)(e,eS),n=ew(r),o=eP(r,n),l=eE(r,n,o);return(0,P.jsx)(x._M.Provider,{value:l,children:t})},e$=e=>(0,P.jsx)(eT,eI({},e));var eR=r(71238);function eB(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function eN(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eB(Object(r),!0).forEach(function(t){(0,n.Z)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eB(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}let eF=e=>{let{observationQueryFilters:t}=e;return(0,P.jsx)(l.F,eN(eN({},e),{},{observationQueryFilters:t,Component:eW}))},eW=(0,o.memo)(function(e){let{chartConfig:t}=e,{interactiveFiltersConfig:r}=t,[{dashboardFilters:n}]=(0,eR.lY)(eR.Sc),o=(0,i.O)(r,n?.timeRange);return(0,P.jsx)(e$,eN(eN({},e),{},{children:(0,P.jsxs)(s.BO,{children:[o&&(0,P.jsx)("svg",{style:{width:"100%",height:40,minHeight:40},children:(0,P.jsx)(i.j,{yOffset:10})}),(0,P.jsx)(ei,{})]})}))})},87358:function(e,t,r){let n,o;r.d(t,{m:function(){return i}});let l=r(90453).r.typography.fontFamily,i=(e,t)=>(void 0===n&&void 0===o&&(o=(n=document.createElement("canvas")).getContext("2d")),o.font=`${t.fontSize}px ${l}`,o.measureText(e).width)}}]);
//# sourceMappingURL=80625.8419941ad62577a3.js.map