{"version":3,"file":"static/chunks/61127.ee8826d20de30097.js","mappings":"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","sources":["webpack://_N_E/./charts/line/lines.tsx","webpack://_N_E/./charts/line/lines-state-props.ts","webpack://_N_E/./charts/line/lines-state.tsx","webpack://_N_E/./charts/line/chart-lines.tsx","webpack://_N_E/./charts/shared/axis-width-time.tsx","webpack://_N_E/./charts/shared/interaction/hover-dots-multiple.tsx","webpack://_N_E/./charts/shared/interaction/ruler.tsx","webpack://_N_E/./charts/shared/limits/vertical.tsx","webpack://_N_E/./charts/shared/overlay-horizontal.tsx","webpack://_N_E/./charts/shared/overlay-voronoi.tsx","webpack://_N_E/../node_modules/d3-selection/src/pointers.js","webpack://_N_E/../node_modules/d3-shape/src/array.js","webpack://_N_E/../node_modules/d3-shape/src/constant.js","webpack://_N_E/../node_modules/d3-shape/src/curve/linear.js","webpack://_N_E/../node_modules/d3-shape/src/line.js","webpack://_N_E/../node_modules/d3-path/src/path.js","webpack://_N_E/../node_modules/d3-shape/src/path.js","webpack://_N_E/../node_modules/d3-shape/src/point.js"],"sourcesContent":["import { line } from \"d3-shape\";\nimport { Fragment, memo, useEffect, useMemo, useRef } from \"react\";\n\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { renderTotalValueLabels } from \"@/charts/shared/render-value-labels\";\nimport {\n  renderContainer,\n  RenderVerticalWhiskerDatum,\n  renderVerticalWhiskers,\n} from \"@/charts/shared/rendering-utils\";\nimport { useRenderTemporalValueLabelsData } from \"@/charts/shared/show-values-utils\";\nimport { useChartTheme } from \"@/charts/shared/use-chart-theme\";\nimport { ShowDotsSize } from \"@/config-types\";\nimport { Observation } from \"@/domain/data\";\nimport { truthy } from \"@/domain/types\";\nimport { useTransitionStore } from \"@/stores/transition\";\n\nexport const ErrorWhiskers = () => {\n  const {\n    getX,\n    getY,\n    getYErrorPresent,\n    getYErrorRange,\n    chartData,\n    yScale,\n    xScale,\n    showYUncertainty,\n    colors,\n    getSegment,\n    bounds,\n  } = useChartState() as LinesState;\n  const { margins } = bounds;\n  const ref = useRef<SVGGElement>(null);\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const renderData = useMemo(() => {\n    if (!getYErrorRange || !showYUncertainty) {\n      return [];\n    }\n\n    return chartData.filter(getYErrorPresent).map((d, i) => {\n      const x0 = xScale(getX(d)) as number;\n      const segment = getSegment(d);\n      const barWidth = 15;\n      const y = getY(d) as number;\n      const [y1, y2] = getYErrorRange(d);\n\n      return {\n        key: `${i}`,\n        x: x0 - barWidth / 2,\n        y: yScale(y),\n        y1: yScale(y1),\n        y2: yScale(y2),\n        width: barWidth,\n        fill: colors(segment),\n        renderMiddleCircle: true,\n      } satisfies RenderVerticalWhiskerDatum;\n    });\n  }, [\n    chartData,\n    colors,\n    getSegment,\n    getX,\n    getY,\n    getYErrorPresent,\n    getYErrorRange,\n    showYUncertainty,\n    xScale,\n    yScale,\n  ]);\n\n  useEffect(() => {\n    if (ref.current) {\n      renderContainer(ref.current, {\n        id: \"lines-error-whiskers\",\n        transform: `translate(${margins.left} ${margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g, opts) => renderVerticalWhiskers(g, renderData, opts),\n      });\n    }\n  }, [\n    enableTransition,\n    margins.left,\n    margins.top,\n    renderData,\n    transitionDuration,\n  ]);\n\n  return <g ref={ref} />;\n};\n\nexport const Lines = ({ dotSize }: { dotSize?: ShowDotsSize }) => {\n  const { getX, xScale, getY, yScale, grouped, colors, bounds } =\n    useChartState() as LinesState;\n  const { margins } = bounds;\n  const { labelFontSize, fontFamily } = useChartTheme();\n  const valueLabelsContainerRef = useRef<SVGGElement>(null);\n\n  const lineGenerator = line<Observation>()\n    .defined((d) => {\n      const y = getY(d);\n      return y !== null && !isNaN(y);\n    })\n    .x((d) => xScale(getX(d)))\n    .y((d) => yScale(getY(d) as number));\n\n  const valueLabelsData = useRenderTemporalValueLabelsData();\n\n  useEffect(() => {\n    if (valueLabelsContainerRef.current) {\n      renderContainer(valueLabelsContainerRef.current, {\n        id: \"lines-value-labels\",\n        transform: \"translate(0, 0)\",\n        transition: {\n          enable: false,\n          duration: 0,\n        },\n        render: (g, opts) =>\n          renderTotalValueLabels(g, valueLabelsData, {\n            ...opts,\n            rotate: false,\n            fontFamily,\n            fontSize: labelFontSize,\n          }),\n      });\n    }\n  }, [margins.left, margins.top, valueLabelsData, labelFontSize, fontFamily]);\n\n  return (\n    <g transform={`translate(${margins.left} ${margins.top})`}>\n      {Array.from(grouped).map((observation, i) => {\n        return (\n          <Fragment key={observation[0]}>\n            <Line\n              key={i}\n              path={lineGenerator(observation[1]) as string}\n              color={colors(observation[0])}\n            />\n          </Fragment>\n        );\n      })}\n      <Points dotSize={dotSize} />\n      <g ref={valueLabelsContainerRef} />\n    </g>\n  );\n};\n\nconst Line = memo(function Line({\n  path,\n  color,\n}: {\n  path: string;\n  color: string;\n}) {\n  return <path data-testid=\"chart-line\" d={path} stroke={color} fill=\"none\" />;\n});\n\nconst getPointRadius = (dotSize: ShowDotsSize) => {\n  switch (dotSize) {\n    case \"Small\":\n      return 2;\n    case \"Medium\":\n      return 3;\n    case \"Large\":\n      return 4;\n    case undefined:\n      return 2;\n    default:\n      const _exhaustiveCheck: never = dotSize;\n      return _exhaustiveCheck;\n  }\n};\n\nconst Points = ({ dotSize }: { dotSize?: ShowDotsSize }) => {\n  const { getX, xScale, getY, yScale, bounds, chartData, getSegment, colors } =\n    useChartState() as LinesState;\n  const { chartHeight, width } = bounds;\n  const dots = useMemo(() => {\n    return chartData\n      .map((d) => {\n        const xScaled = xScale(getX(d));\n        const y = getY(d);\n\n        if (Number.isNaN(y) || y === null) {\n          return;\n        }\n\n        const yScaled = yScale(y);\n        const fill = colors(getSegment(d));\n\n        return {\n          x: xScaled,\n          y: yScaled,\n          fill,\n        };\n      })\n      .filter(truthy);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [\n    width,\n    chartHeight,\n    xScale,\n    yScale,\n    getY,\n    bounds.chartWidth,\n    chartData,\n    getX,\n  ]);\n\n  if (!dotSize) {\n    return null;\n  }\n\n  const r = getPointRadius(dotSize);\n\n  return (\n    <g>\n      {dots.map(({ x, y, fill }, i) => (\n        <circle key={i} cx={x} cy={y} r={r} fill={fill} />\n      ))}\n    </g>\n  );\n};\n","import { ascending } from \"d3-array\";\nimport { useCallback } from \"react\";\n\nimport { usePlottableData } from \"@/charts/shared/chart-helpers\";\nimport {\n  BaseVariables,\n  ChartStateData,\n  InteractiveFiltersVariables,\n  LimitsVariables,\n  NumericalYErrorVariables,\n  NumericalYVariables,\n  SegmentVariables,\n  SortingVariables,\n  TemporalXVariables,\n  useBaseVariables,\n  useChartData,\n  useInteractiveFiltersVariables,\n  useLimitsVariables,\n  useNumericalYErrorVariables,\n  useNumericalYVariables,\n  useSegmentVariables,\n  useTemporalXVariables,\n} from \"@/charts/shared/chart-state\";\nimport { useLimits } from \"@/config-utils\";\nimport { LineConfig } from \"@/configurator\";\n\nimport { ChartProps } from \"../shared/chart-props\";\n\nexport type LinesStateVariables = BaseVariables &\n  SortingVariables &\n  TemporalXVariables &\n  NumericalYVariables &\n  NumericalYErrorVariables &\n  SegmentVariables &\n  InteractiveFiltersVariables &\n  LimitsVariables;\n\nexport const useLinesStateVariables = (\n  props: ChartProps<LineConfig> & { limits: ReturnType<typeof useLimits> }\n): LinesStateVariables => {\n  const {\n    chartConfig,\n    observations,\n    dimensions,\n    dimensionsById,\n    measures,\n    measuresById,\n    limits,\n  } = props;\n  const { fields } = chartConfig;\n  const { x, y, segment } = fields;\n\n  const baseVariables = useBaseVariables(chartConfig);\n  const temporalXVariables = useTemporalXVariables(x, {\n    dimensionsById,\n  });\n  const numericalYVariables = useNumericalYVariables(\"line\", y, {\n    measuresById,\n  });\n  const numericalYErrorVariables = useNumericalYErrorVariables(y, {\n    getValue: numericalYVariables.getY,\n    dimensions,\n    measures,\n  });\n  const segmentVariables = useSegmentVariables(segment, {\n    dimensionsById,\n    observations,\n  });\n  const interactiveFiltersVariables = useInteractiveFiltersVariables(\n    chartConfig.interactiveFiltersConfig,\n    { dimensionsById }\n  );\n  const limitsVariables = useLimitsVariables(limits);\n\n  const { getX } = temporalXVariables;\n  const sortData: LinesStateVariables[\"sortData\"] = useCallback(\n    (data) => {\n      return [...data].sort((a, b) => {\n        return ascending(getX(a), getX(b));\n      });\n    },\n    [getX]\n  );\n\n  return {\n    ...baseVariables,\n    sortData,\n    ...temporalXVariables,\n    ...numericalYVariables,\n    ...numericalYErrorVariables,\n    ...segmentVariables,\n    ...interactiveFiltersVariables,\n    ...limitsVariables,\n  };\n};\n\nexport const useLinesStateData = (\n  chartProps: ChartProps<LineConfig> & { limits: ReturnType<typeof useLimits> },\n  variables: LinesStateVariables\n): ChartStateData => {\n  const { chartConfig, observations, limits } = chartProps;\n  const {\n    sortData,\n    xDimension,\n    getX,\n    getY,\n    getSegmentAbbreviationOrLabel,\n    getTimeRangeDate,\n  } = variables;\n  const plottableData = usePlottableData(observations, {\n    getY,\n  });\n\n  return useChartData(plottableData, {\n    sortData,\n    chartConfig,\n    axisDimensionId: xDimension.id,\n    limits: limits.limits.map((limit) => limit.measureLimit),\n    timeRangeDimensionId: xDimension.id,\n    getAxisValueAsDate: getX,\n    getSegmentAbbreviationOrLabel,\n    getTimeRangeDate,\n  });\n};\n","import { extent, group, max } from \"d3-array\";\nimport {\n  ScaleLinear,\n  scaleLinear,\n  ScaleOrdinal,\n  scaleOrdinal,\n  ScaleTime,\n  scaleTime,\n} from \"d3-scale\";\nimport { schemeCategory10 } from \"d3-scale-chromatic\";\nimport orderBy from \"lodash/orderBy\";\nimport { PropsWithChildren, useCallback, useMemo } from \"react\";\n\nimport {\n  LinesStateVariables,\n  useLinesStateData,\n  useLinesStateVariables,\n} from \"@/charts/line/lines-state-props\";\nimport { DEFAULT_ANNOTATION_CIRCLE_COLOR } from \"@/charts/shared/annotation-circle\";\nimport { GetAnnotationInfo } from \"@/charts/shared/annotations\";\nimport {\n  AxisLabelSizeVariables,\n  getChartWidth,\n  useAxisLabelSizeVariables,\n  useChartBounds,\n  useChartPadding,\n} from \"@/charts/shared/chart-dimensions\";\nimport { getWideData } from \"@/charts/shared/chart-helpers\";\nimport {\n  ChartContext,\n  ChartStateData,\n  CommonChartState,\n  InteractiveXTimeRangeState,\n} from \"@/charts/shared/chart-state\";\nimport { TooltipInfo, TooltipValue } from \"@/charts/shared/interaction/tooltip\";\nimport {\n  getCenteredTooltipPlacement,\n  MOBILE_TOOLTIP_PLACEMENT,\n} from \"@/charts/shared/interaction/tooltip-box\";\nimport { DEFAULT_MARGIN_TOP } from \"@/charts/shared/margins\";\nimport {\n  ShowTemporalValueLabelsVariables,\n  useShowTemporalValueLabelsVariables,\n} from \"@/charts/shared/show-values-utils\";\nimport { useChartFormatters } from \"@/charts/shared/use-chart-formatters\";\nimport { InteractionProvider } from \"@/charts/shared/use-interaction\";\nimport { useSize } from \"@/charts/shared/use-size\";\nimport { useLimits } from \"@/config-utils\";\nimport { LineConfig } from \"@/configurator\";\nimport { Observation } from \"@/domain/data\";\nimport {\n  formatNumberWithUnit,\n  useFormatNumber,\n  useTimeFormatUnit,\n} from \"@/formatters\";\nimport { getPalette } from \"@/palettes\";\nimport { sortByIndex } from \"@/utils/array\";\nimport {\n  getSortingOrders,\n  makeDimensionValueSorters,\n} from \"@/utils/sorting-values\";\nimport { useIsMobile } from \"@/utils/use-is-mobile\";\n\nimport { ChartProps } from \"../shared/chart-props\";\n\nexport type LinesState = CommonChartState &\n  LinesStateVariables &\n  InteractiveXTimeRangeState &\n  Omit<ShowTemporalValueLabelsVariables, \"yOffset\"> & {\n    chartType: \"line\";\n    segments: string[];\n    xScale: ScaleTime<number, number>;\n    yScale: ScaleLinear<number, number>;\n    colors: ScaleOrdinal<string, string>;\n    getColorLabel: (segment: string) => string;\n    grouped: Map<string, Observation[]>;\n    chartWideData: ArrayLike<Observation>;\n    xKey: string;\n    getAnnotationInfo: GetAnnotationInfo;\n    getTooltipInfo: (d: Observation) => TooltipInfo;\n    leftAxisLabelSize: AxisLabelSizeVariables;\n    leftAxisLabelOffsetTop: number;\n    bottomAxisLabelSize: AxisLabelSizeVariables;\n  };\n\nconst useLinesState = (\n  chartProps: ChartProps<LineConfig>,\n  variables: LinesStateVariables,\n  data: ChartStateData\n): LinesState => {\n  const { chartConfig, dimensions, measures } = chartProps;\n  const {\n    xDimension,\n    getX,\n    getXAsString,\n    yMeasure,\n    getY,\n    getYErrorRange,\n    getFormattedYUncertainty,\n    getMinY,\n    xAxisLabel,\n    segmentDimension,\n    segmentsByAbbreviationOrLabel,\n    getSegment,\n    getSegmentAbbreviationOrLabel,\n    getSegmentLabel,\n    yAxisLabel,\n    minLimitValue,\n    maxLimitValue,\n  } = variables;\n  const {\n    chartData,\n    scalesData,\n    segmentData,\n    timeRangeData,\n    paddingData,\n    allData,\n  } = data;\n  const { fields, interactiveFiltersConfig } = chartConfig;\n  const { y } = fields;\n\n  const { width, height } = useSize();\n  const formatNumber = useFormatNumber({ decimals: \"auto\" });\n  const timeFormatUnit = useTimeFormatUnit();\n  const formatters = useChartFormatters(chartProps);\n  const xKey = xDimension.id;\n\n  const segmentsByValue = useMemo(() => {\n    const values = segmentDimension?.values || [];\n\n    return new Map(values.map((d) => [d.value, d]));\n  }, [segmentDimension?.values]);\n\n  const preparedDataGroupedBySegment = useMemo(\n    () => group(chartData, getSegment),\n    [chartData, getSegment]\n  );\n\n  const preparedDataGroupedByX = useMemo(\n    () => group(chartData, getXAsString),\n    [chartData, getXAsString]\n  );\n\n  const chartWideData = getWideData({\n    dataGrouped: preparedDataGroupedByX,\n    key: xKey,\n    getAxisValue: getY,\n    getSegment,\n  });\n\n  // x\n  const xDomain = extent(chartData, (d) => getX(d)) as [Date, Date];\n  const xScale = scaleTime().domain(xDomain);\n\n  const xScaleTimeRangeDomain = useMemo(() => {\n    return extent(timeRangeData, (d) => getX(d)) as [Date, Date];\n  }, [timeRangeData, getX]);\n  const xScaleTimeRange = scaleTime().domain(xScaleTimeRangeDomain);\n\n  // y\n  const yScale = scaleLinear();\n  const paddingYScale = scaleLinear();\n\n  if (y.customDomain) {\n    yScale.domain(y.customDomain);\n    paddingYScale.domain(y.customDomain);\n  } else {\n    const minValue = getMinY(scalesData, (d) => {\n      return getYErrorRange?.(d)[0] ?? getY(d);\n    });\n    const maxValue =\n      max(scalesData, (d) => {\n        return getYErrorRange?.(d)[1] ?? getY(d);\n      }) ?? 0;\n    yScale\n      .domain([\n        minLimitValue !== undefined\n          ? Math.min(minLimitValue, minValue)\n          : minValue,\n        maxLimitValue !== undefined\n          ? Math.max(maxLimitValue, maxValue)\n          : maxValue,\n      ])\n      .nice();\n\n    const paddingMinValue = getMinY(paddingData, (d) => {\n      return getYErrorRange?.(d)[0] ?? getY(d);\n    });\n    const paddingMaxValue =\n      max(paddingData, (d) => {\n        return getYErrorRange?.(d)[1] ?? getY(d);\n      }) ?? 0;\n    paddingYScale\n      .domain([\n        minLimitValue !== undefined\n          ? Math.min(minLimitValue, paddingMinValue)\n          : paddingMinValue,\n        maxLimitValue !== undefined\n          ? Math.max(maxLimitValue, paddingMaxValue)\n          : paddingMaxValue,\n      ])\n      .nice();\n  }\n\n  // segments\n  const segmentFilter = segmentDimension?.id\n    ? chartConfig.cubes.find((d) => d.iri === segmentDimension.cubeIri)\n        ?.filters[segmentDimension.id]\n    : undefined;\n  const { allSegments, segments } = useMemo(() => {\n    const allUniqueSegments = Array.from(new Set(segmentData.map(getSegment)));\n    const uniqueSegments = Array.from(new Set(scalesData.map(getSegment)));\n    const sorting = fields?.segment?.sorting;\n    const sorters = makeDimensionValueSorters(segmentDimension, {\n      sorting,\n      useAbbreviations: fields.segment?.useAbbreviations,\n      dimensionFilter: segmentFilter,\n    });\n    const allSegments = orderBy(\n      allUniqueSegments,\n      sorters,\n      getSortingOrders(sorters, fields.segment?.sorting)\n    );\n\n    return {\n      allSegments,\n      segments: allSegments.filter((d) => uniqueSegments.includes(d)),\n    };\n  }, [\n    segmentDimension,\n    getSegment,\n    fields.segment?.sorting,\n    fields.segment?.useAbbreviations,\n    segmentData,\n    scalesData,\n    segmentFilter,\n  ]);\n\n  // Map ordered segments to colors\n  const colors = scaleOrdinal<string, string>();\n\n  if (fields.segment && segmentDimension && fields.color) {\n    const orderedSegmentLabelsAndColors = allSegments.map((segment) => {\n      const dvIri =\n        segmentsByAbbreviationOrLabel.get(segment)?.value ||\n        segmentsByValue.get(segment)?.value ||\n        \"\";\n\n      return {\n        label: segment,\n        color:\n          fields.color.type === \"segment\"\n            ? (fields.color.colorMapping![dvIri] ?? schemeCategory10[0])\n            : schemeCategory10[0],\n      };\n    });\n\n    colors.domain(orderedSegmentLabelsAndColors.map((s) => s.label));\n    colors.range(orderedSegmentLabelsAndColors.map((s) => s.color));\n  } else {\n    colors.domain(allSegments);\n    colors.range(\n      getPalette({\n        paletteId: fields.color?.paletteId,\n        colorField: fields.color,\n      })\n    );\n  }\n\n  // Dimensions\n  const { top, left, bottom } = useChartPadding({\n    xLabelPresent: !!xAxisLabel,\n    yScale: paddingYScale,\n    width,\n    height,\n    interactiveFiltersConfig,\n    formatNumber,\n  });\n  const right = 40;\n\n  const chartWidth = getChartWidth({ width, left, right });\n  xScale.range([0, chartWidth]);\n  xScaleTimeRange.range([0, chartWidth]);\n\n  const leftAxisLabelSize = useAxisLabelSizeVariables({\n    label: yAxisLabel,\n    width,\n  });\n  const bottomAxisLabelSize = useAxisLabelSizeVariables({\n    label: xAxisLabel,\n    width,\n  });\n  const { yOffset: yValueLabelsOffset, ...showValuesVariables } =\n    useShowTemporalValueLabelsVariables(y, {\n      dimensions,\n      measures,\n      segment: fields.segment,\n    });\n  const margins = {\n    top:\n      DEFAULT_MARGIN_TOP + top + leftAxisLabelSize.offset + yValueLabelsOffset,\n    right,\n    bottom,\n    left,\n  };\n  const bounds = useChartBounds({ width, chartWidth, height, margins });\n  const { chartHeight } = bounds;\n\n  yScale.range([chartHeight, 0]);\n\n  const isMobile = useIsMobile();\n\n  const getAnnotationInfo: GetAnnotationInfo = useCallback(\n    (observation) => {\n      const x = xScale(getX(observation));\n      const y = yScale(getY(observation) ?? 0);\n\n      return {\n        x,\n        y,\n        color: DEFAULT_ANNOTATION_CIRCLE_COLOR,\n      };\n    },\n    [getX, getY, xScale, yScale]\n  );\n\n  const getTooltipInfo = (datum: Observation): TooltipInfo => {\n    const x = getX(datum);\n    const tooltipValues = chartData.filter(\n      (d) => getX(d).getTime() === x.getTime()\n    );\n    const sortedTooltipValues = sortByIndex({\n      data: tooltipValues,\n      order: segments,\n      getCategory: getSegment,\n      sortingOrder: \"asc\",\n    });\n\n    const xAnchor = xScale(x);\n    const yValues = tooltipValues.map(getY);\n    const [yMin, yMax] = extent(yValues, (d) => d ?? 0) as [number, number];\n    const yAnchor = isMobile ? chartHeight : yScale((yMin + yMax) * 0.5);\n    const placement = isMobile\n      ? MOBILE_TOOLTIP_PLACEMENT\n      : getCenteredTooltipPlacement({\n          chartWidth,\n          xAnchor,\n          topAnchor: !fields.segment,\n        });\n\n    const yValueFormatter = (value: number | null) =>\n      formatNumberWithUnit(\n        value,\n        formatters[yMeasure.id] ?? formatNumber,\n        yMeasure.unit\n      );\n\n    return {\n      xAnchor,\n      yAnchor,\n      placement,\n      value: timeFormatUnit(getX(datum), xDimension.timeUnit),\n      datum: {\n        label: fields.segment && getSegmentAbbreviationOrLabel(datum),\n        value: yValueFormatter(getY(datum)),\n        error: getFormattedYUncertainty(datum),\n        color: colors(getSegment(datum)),\n      },\n      values: sortedTooltipValues.map((d) => {\n        const segment = getSegment(d);\n\n        return {\n          hide: getY(d) === null,\n          label: getSegmentAbbreviationOrLabel(d),\n          value: yValueFormatter(getY(d)),\n          axis: \"y\",\n          axisOffset: yScale(getY(d) ?? 0),\n          symbol: \"line\",\n          color: colors(segment),\n        } satisfies TooltipValue;\n      }),\n    };\n  };\n\n  return {\n    chartType: \"line\",\n    bounds,\n    chartData,\n    allData,\n    xScale,\n    xScaleTimeRange,\n    yScale,\n    segments,\n    colors,\n    getColorLabel: getSegmentLabel,\n    grouped: preparedDataGroupedBySegment,\n    chartWideData,\n    xKey,\n    getAnnotationInfo,\n    getTooltipInfo,\n    leftAxisLabelSize,\n    leftAxisLabelOffsetTop: top,\n    bottomAxisLabelSize,\n    ...showValuesVariables,\n    ...variables,\n  };\n};\n\nconst LineChartProvider = (\n  props: PropsWithChildren<\n    ChartProps<LineConfig> & { limits: ReturnType<typeof useLimits> }\n  >\n) => {\n  const { children, ...chartProps } = props;\n  const variables = useLinesStateVariables(chartProps);\n  const data = useLinesStateData(chartProps, variables);\n  const state = useLinesState(chartProps, variables, data);\n\n  return (\n    <ChartContext.Provider value={state}>{children}</ChartContext.Provider>\n  );\n};\n\nexport const LineChart = (\n  props: PropsWithChildren<\n    ChartProps<LineConfig> & { limits: ReturnType<typeof useLimits> }\n  >\n) => {\n  return (\n    <InteractionProvider>\n      <LineChartProvider {...props} />\n    </InteractionProvider>\n  );\n};\n","import { memo } from \"react\";\n\nimport { ChartDataWrapper } from \"@/charts/chart-data-wrapper\";\nimport { ErrorWhiskers, Lines } from \"@/charts/line/lines\";\nimport { LineChart } from \"@/charts/line/lines-state\";\nimport { useIsEditingAnnotation } from \"@/charts/shared/annotation-utils\";\nimport { Annotations } from \"@/charts/shared/annotations\";\nimport { AxisHeightLinear } from \"@/charts/shared/axis-height-linear\";\nimport { AxisHideXOverflowRect } from \"@/charts/shared/axis-hide-overflow-rect\";\nimport { AxisTime, AxisTimeDomain } from \"@/charts/shared/axis-width-time\";\nimport { BrushTime, shouldShowBrush } from \"@/charts/shared/brush\";\nimport {\n  ChartContainer,\n  ChartControlsContainer,\n  ChartSvg,\n} from \"@/charts/shared/containers\";\nimport { HoverAnnotationDot } from \"@/charts/shared/interaction/hover-annotation-dot\";\nimport { HoverDotMultiple } from \"@/charts/shared/interaction/hover-dots-multiple\";\nimport { Ruler } from \"@/charts/shared/interaction/ruler\";\nimport { Tooltip } from \"@/charts/shared/interaction/tooltip\";\nimport { LegendColor } from \"@/charts/shared/legend-color\";\nimport { VerticalLimits } from \"@/charts/shared/limits/vertical\";\nimport { InteractionHorizontal } from \"@/charts/shared/overlay-horizontal\";\nimport { InteractionVoronoi } from \"@/charts/shared/overlay-voronoi\";\nimport { LineConfig } from \"@/config-types\";\nimport { useLimits } from \"@/config-utils\";\nimport {\n  hasChartConfigs,\n  useConfiguratorState,\n} from \"@/configurator/configurator-state\";\n\nimport { ChartProps, VisualizationProps } from \"../shared/chart-props\";\n\nexport const ChartLinesVisualization = (\n  props: VisualizationProps<LineConfig>\n) => {\n  return <ChartDataWrapper {...props} Component={ChartLines} />;\n};\n\nconst ChartLines = memo((props: ChartProps<LineConfig>) => {\n  const { chartConfig, dimensions, measures, dimensionsById } = props;\n  const { fields, interactiveFiltersConfig } = chartConfig;\n  const [{ dashboardFilters }] = useConfiguratorState(hasChartConfigs);\n  const limits = useLimits({\n    chartConfig,\n    dimensions,\n    measures,\n  });\n  const isEditingAnnotation = useIsEditingAnnotation();\n\n  return (\n    <LineChart {...props} limits={limits}>\n      <ChartContainer>\n        <ChartSvg>\n          <AxisHeightLinear />\n          <AxisHideXOverflowRect />\n          <AxisTime />\n          <AxisTimeDomain />\n          <Lines\n            dotSize={\n              \"showDots\" in chartConfig.fields.y &&\n              \"showDotsSize\" in chartConfig.fields.y &&\n              chartConfig.fields.y.showDots\n                ? chartConfig.fields.y.showDotsSize\n                : undefined\n            }\n          />\n          <ErrorWhiskers />\n          <VerticalLimits {...limits} />\n          {isEditingAnnotation ? (\n            <InteractionVoronoi />\n          ) : (\n            <InteractionHorizontal />\n          )}\n          {shouldShowBrush(\n            interactiveFiltersConfig,\n            dashboardFilters?.timeRange\n          ) && <BrushTime />}\n        </ChartSvg>\n        <Ruler />\n        {isEditingAnnotation ? <HoverAnnotationDot /> : <HoverDotMultiple />}\n        <Tooltip type={fields.segment ? \"multiple\" : \"single\"} />\n      </ChartContainer>\n      <Annotations />\n      {(fields.segment || limits.limits.length > 0) && (\n        <ChartControlsContainer>\n          <LegendColor\n            dimensionsById={dimensionsById}\n            chartConfig={chartConfig}\n            symbol=\"line\"\n            interactive={interactiveFiltersConfig.legend.active}\n            showTitle={fields.segment?.showTitle}\n            limits={limits}\n          />\n        </ChartControlsContainer>\n      )}\n    </LineChart>\n  );\n});\n","import { axisBottom } from \"d3-axis\";\nimport { useEffect, useRef } from \"react\";\n\nimport { AreasState } from \"@/charts/area/areas-state\";\nimport { ComboLineDualState } from \"@/charts/combo/combo-line-dual-state\";\nimport { ComboLineSingleState } from \"@/charts/combo/combo-line-single-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useXAxisTitleOffset } from \"@/charts/shared/chart-dimensions\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport {\n  maybeTransition,\n  renderContainer,\n} from \"@/charts/shared/rendering-utils\";\nimport { useChartTheme } from \"@/charts/shared/use-chart-theme\";\nimport { OpenMetadataPanelWrapper } from \"@/components/metadata-panel\";\nimport { useFormatShortDateAuto } from \"@/formatters\";\nimport { useTransitionStore } from \"@/stores/transition\";\n\n// Approximate the longest date format we're using for.\n// Roughly equivalent to the text width of \"99.99.9999\" with 12px font size.\nconst MAX_DATE_LABEL_LENGTH = 70;\n\nexport const AxisTime = () => {\n  const ref = useRef<SVGGElement>(null);\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const formatDateAuto = useFormatShortDateAuto();\n  const {\n    xScale,\n    yScale,\n    bounds,\n    xDimension,\n    xAxisLabel,\n    bottomAxisLabelSize,\n  } = useChartState() as\n    | LinesState\n    | AreasState\n    | ComboLineSingleState\n    | ComboLineDualState;\n  const { chartHeight, chartWidth, margins } = bounds;\n  const {\n    labelColor,\n    gridColor,\n    domainColor,\n    labelFontSize,\n    fontFamily,\n    axisLabelFontSize,\n  } = useChartTheme();\n  const xAxisTitleOffset = useXAxisTitleOffset();\n  const hasNegativeValues = yScale.domain()[0] < 0;\n  const ticks = bounds.chartWidth / (MAX_DATE_LABEL_LENGTH + 20);\n\n  useEffect(() => {\n    if (ref.current) {\n      const axis = axisBottom(xScale)\n        .ticks(ticks)\n        .tickSizeInner(hasNegativeValues ? -chartHeight : 6)\n        .tickPadding(hasNegativeValues ? 6 : 3)\n        .tickFormat((x) => formatDateAuto(x as Date));\n      const g = renderContainer(ref.current, {\n        id: \"axis-width-time\",\n        transform: `translate(${margins.left} ${chartHeight + margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g) => g.call(axis),\n        renderUpdate: (g, opts) =>\n          maybeTransition(g, {\n            transition: opts.transition,\n            s: (g) => g.call(axis),\n          }),\n      });\n\n      g.select(\".domain\").remove();\n      g.selectAll(\".tick line\").attr(\n        \"stroke\",\n        hasNegativeValues ? gridColor : domainColor\n      );\n      g.selectAll(\".tick text\")\n        .attr(\"font-size\", labelFontSize)\n        .attr(\"font-family\", fontFamily)\n        .attr(\"fill\", labelColor);\n    }\n  }, [\n    chartHeight,\n    domainColor,\n    enableTransition,\n    fontFamily,\n    formatDateAuto,\n    gridColor,\n    hasNegativeValues,\n    labelColor,\n    labelFontSize,\n    margins.left,\n    margins.top,\n    ticks,\n    transitionDuration,\n    xScale,\n  ]);\n\n  return (\n    <>\n      <foreignObject\n        x={margins.left + chartWidth / 2 - bottomAxisLabelSize.width / 2}\n        y={margins.top + chartHeight + xAxisTitleOffset}\n        width={chartWidth}\n        height={bottomAxisLabelSize.height}\n        style={{ display: \"flex\" }}\n      >\n        <OpenMetadataPanelWrapper component={xDimension}>\n          <span style={{ fontSize: axisLabelFontSize, lineHeight: 1.5 }}>\n            {xAxisLabel}\n          </span>\n        </OpenMetadataPanelWrapper>\n      </foreignObject>\n      <g ref={ref} />\n    </>\n  );\n};\n\nexport const AxisTimeDomain = () => {\n  const ref = useRef<SVGGElement>(null);\n  const enableTransition = useTransitionStore((state) => state.enable);\n  const transitionDuration = useTransitionStore((state) => state.duration);\n  const { xScale, yScale, bounds } = useChartState() as\n    | LinesState\n    | AreasState\n    | ComboLineSingleState\n    | ComboLineDualState;\n  const { chartHeight, margins } = bounds;\n  const { domainColor } = useChartTheme();\n\n  useEffect(() => {\n    if (ref.current) {\n      const axis = axisBottom(xScale).tickSizeOuter(0);\n      const g = renderContainer(ref.current, {\n        id: \"axis-width-time-domain\",\n        transform: `translate(${margins.left} ${chartHeight + margins.top})`,\n        transition: { enable: enableTransition, duration: transitionDuration },\n        render: (g) => g.call(axis),\n        renderUpdate: (g, opts) =>\n          maybeTransition(g, {\n            transition: opts.transition,\n            s: (g) => g.call(axis),\n          }),\n      });\n\n      g.selectAll(\".tick line\").remove();\n      g.selectAll(\".tick text\").remove();\n      g.select(\".domain\")\n        .attr(\"transform\", `translate(0, -${bounds.chartHeight - yScale(0)})`)\n        .attr(\"stroke\", domainColor)\n        .attr(\"stroke-linecap\", \"round\");\n    }\n  });\n\n  return <g ref={ref} />;\n};\n","import { Theme } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport { ComboLineSingleState } from \"@/charts/combo/combo-line-single-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { useInteraction } from \"@/charts/shared/use-interaction\";\nimport { Observation } from \"@/domain/data\";\n\nexport const HoverDotMultiple = () => {\n  const [{ type, visible, observation }] = useInteraction();\n\n  return (\n    <>\n      {type === \"tooltip\" && visible && observation && (\n        <HoverDots d={observation} />\n      )}\n    </>\n  );\n};\n\nconst useStyles = makeStyles((theme: Theme) => ({\n  dot: {\n    position: \"absolute\",\n    width: 6,\n    height: 6,\n    borderRadius: \"50%\",\n    borderStyle: \"solid\",\n    borderWidth: 1,\n    borderColor: theme.palette.grey[100],\n    transform: \"translate3d(-50%, -50%, 0)\",\n    pointerEvents: \"none\",\n  },\n}));\n\nconst HoverDots = ({ d }: { d: Observation }) => {\n  const {\n    getTooltipInfo,\n    bounds: { margins },\n  } = useChartState() as LinesState | ComboLineSingleState;\n  const classes = useStyles();\n  const { xAnchor, values } = getTooltipInfo(d);\n\n  return (\n    <>\n      {values &&\n        values.map(\n          (value, i) =>\n            !value.hide &&\n            value.axis === \"y\" &&\n            value.axisOffset !== undefined && (\n              <div\n                key={i}\n                className={classes.dot}\n                style={{\n                  backgroundColor: value.color,\n                  left: xAnchor + margins.left,\n                  top: value.axisOffset + margins.top,\n                }}\n              />\n            )\n        )}\n    </>\n  );\n};\n","import { Theme } from \"@mui/material\";\nimport { makeStyles } from \"@mui/styles\";\n\nimport { ComboLineColumnState } from \"@/charts/combo/combo-line-column-state\";\nimport { ComboLineDualState } from \"@/charts/combo/combo-line-dual-state\";\nimport { ComboLineSingleState } from \"@/charts/combo/combo-line-single-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport {\n  TooltipPlacement,\n  TooltipValue,\n} from \"@/charts/shared/interaction/tooltip\";\nimport { useInteraction } from \"@/charts/shared/use-interaction\";\nimport { Margins } from \"@/charts/shared/use-size\";\nimport { Observation } from \"@/domain/data\";\nimport { useIsMobile } from \"@/utils/use-is-mobile\";\n\ntype RulerProps = {\n  rotate?: boolean;\n};\n\nexport const Ruler = (props: RulerProps) => {\n  const { rotate = false } = props;\n  const [{ type, visible, observation }] = useInteraction();\n\n  return (\n    <>\n      {type === \"tooltip\" && visible && observation && (\n        <RulerInner d={observation} rotate={rotate} />\n      )}\n    </>\n  );\n};\n\ntype RulerInnerProps = {\n  d: Observation;\n  rotate: boolean;\n};\n\nconst RulerInner = (props: RulerInnerProps) => {\n  const { d, rotate } = props;\n  const { getTooltipInfo, bounds } = useChartState() as\n    | LinesState\n    | ComboLineSingleState\n    | ComboLineDualState\n    | ComboLineColumnState;\n  const { xAnchor, value, datum, placement, values } = getTooltipInfo(d);\n\n  return (\n    <RulerContent\n      rotate={rotate}\n      xValue={value}\n      values={values}\n      chartHeight={bounds.chartHeight}\n      margins={bounds.margins}\n      xAnchor={xAnchor}\n      datum={datum}\n      placement={placement}\n    />\n  );\n};\n\ntype RulerContentProps = {\n  rotate: boolean;\n  xValue: string;\n  values: TooltipValue[] | undefined;\n  chartHeight: number;\n  margins: Margins;\n  xAnchor: number;\n  datum: TooltipValue;\n  placement: TooltipPlacement;\n  showXValue?: boolean;\n};\n\nconst useStyles = makeStyles<Theme, { rotate: boolean }>((theme: Theme) => ({\n  left: {\n    width: 0,\n    position: \"absolute\",\n    borderWidth: 0.5,\n    borderStyle: \"solid\",\n    borderColor: theme.palette.cobalt[50],\n    pointerEvents: \"none\",\n    transform: \"translateX(-50%)\",\n  },\n  right: {\n    position: \"absolute\",\n    fontWeight: \"bold\",\n    backgroundColor: theme.palette.background.paper,\n    transform: ({ rotate }) =>\n      rotate\n        ? \"translateX(-50%) translateY(50%) rotate(90deg)\"\n        : \"translateX(-50%)\",\n    paddingLeft: theme.spacing(1),\n    paddingRight: theme.spacing(1),\n    fontSize: \"0.875rem\",\n  },\n}));\n\nexport const RulerContent = (props: RulerContentProps) => {\n  const { rotate, xValue, chartHeight, margins, xAnchor } = props;\n  const classes = useStyles({ rotate });\n  const isMobile = useIsMobile();\n\n  return (\n    <>\n      <div\n        className={classes.left}\n        style={{\n          height: chartHeight,\n          left: xAnchor + margins.left,\n          top: margins.top,\n        }}\n      />\n      {!isMobile && (\n        <div\n          className={classes.right}\n          style={{\n            left: xAnchor + margins.left,\n            top: chartHeight + margins.top + 6,\n          }}\n        >\n          {xValue}\n        </div>\n      )}\n    </>\n  );\n};\n","import { useMemo } from \"react\";\n\nimport { AreasState } from \"@/charts/area/areas-state\";\nimport { ColumnsState } from \"@/charts/column/columns-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { createLimitsComponent } from \"@/charts/shared/limits/create-component\";\nimport { useLimits } from \"@/config-utils\";\n\nexport type VerticalChartState = AreasState | ColumnsState | LinesState;\n\nexport const VerticalLimits = (props: ReturnType<typeof useLimits>) => {\n  const chartState = useChartState() as VerticalChartState;\n  const LimitsComponent = useMemo(() => {\n    return createLimitsComponent({\n      isHorizontal: false,\n      getChartState: () => chartState,\n    });\n  }, [chartState]);\n\n  return <LimitsComponent {...props} />;\n};\nVerticalLimits.displayName = \"VerticalLimits\";\n","import { bisector } from \"d3-array\";\nimport { pointer } from \"d3-selection\";\nimport { memo, MouseEvent, useCallback, useRef } from \"react\";\n\nimport { AreasState } from \"@/charts/area/areas-state\";\nimport { ComboLineDualState } from \"@/charts/combo/combo-line-dual-state\";\nimport { ComboLineSingleState } from \"@/charts/combo/combo-line-single-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { useInteraction } from \"@/charts/shared/use-interaction\";\nimport { Observation } from \"@/domain/data\";\nimport { useEvent } from \"@/utils/use-event\";\n\nexport const InteractionHorizontal = memo(function InteractionHorizontal() {\n  const {\n    chartData,\n    chartWideData,\n    xScale,\n    getX,\n    getTooltipInfo,\n    bounds: { chartWidth, chartHeight, margins },\n  } = useChartState() as\n    | AreasState\n    | LinesState\n    | ComboLineSingleState\n    | ComboLineDualState;\n  const [interaction, dispatch] = useInteraction();\n  const ref = useRef<SVGGElement>(null);\n\n  const hideTooltip = useEvent(() => {\n    dispatch({\n      type: \"INTERACTION_HIDE\",\n    });\n  });\n\n  const showTooltip = useCallback(\n    (e: MouseEvent) => {\n      if (!ref.current) {\n        return;\n      }\n\n      const [x, y] = pointer(e, ref.current);\n      const bisectDate = bisector(\n        (d: Observation, date: Date) => getX(d).getTime() - date.getTime()\n      ).left;\n      const thisDate = xScale.invert(x);\n      const i = bisectDate(chartWideData, thisDate, 1);\n      const dLeft = chartWideData[i - 1];\n      const dRight = chartWideData[i] ?? dLeft;\n      const closestDatum =\n        thisDate.getTime() - getX(dLeft).getTime() >\n        getX(dRight).getTime() - thisDate.getTime()\n          ? dRight\n          : dLeft;\n      const yAnchor = closestDatum\n        ? getTooltipInfo(closestDatum).yAnchor\n        : undefined;\n\n      if (!closestDatum || Number.isNaN(yAnchor) || yAnchor === undefined) {\n        if (interaction.visible) {\n          hideTooltip();\n        }\n\n        return;\n      }\n\n      const closestDatumTime = getX(closestDatum).getTime();\n      const observation = chartData.find(\n        (d) => closestDatumTime === getX(d).getTime()\n      );\n\n      if (\n        !interaction.observation ||\n        closestDatumTime !== getX(interaction.observation).getTime() ||\n        !interaction.visible\n      ) {\n        dispatch({\n          type: \"INTERACTION_UPDATE\",\n          value: {\n            type: \"tooltip\",\n            visible: true,\n            observation,\n            mouse: { x, y },\n          },\n        });\n      }\n    },\n    [\n      chartData,\n      chartWideData,\n      dispatch,\n      getTooltipInfo,\n      getX,\n      hideTooltip,\n      interaction.observation,\n      interaction.visible,\n      xScale,\n    ]\n  );\n\n  return (\n    <g ref={ref} transform={`translate(${margins.left} ${margins.top})`}>\n      <rect\n        width={chartWidth}\n        height={chartHeight}\n        fillOpacity={0}\n        onMouseOut={hideTooltip}\n        onMouseOver={showTooltip}\n        onMouseMove={showTooltip}\n      />\n    </g>\n  );\n});\n","import { Delaunay } from \"d3-delaunay\";\nimport { pointer } from \"d3-selection\";\nimport { memo, MouseEvent, useCallback, useMemo, useRef } from \"react\";\n\nimport { AreasState } from \"@/charts/area/areas-state\";\nimport { LinesState } from \"@/charts/line/lines-state\";\nimport { ScatterplotState } from \"@/charts/scatterplot/scatterplot-state\";\nimport { useChartState } from \"@/charts/shared/chart-state\";\nimport { useAnnotationInteractions } from \"@/charts/shared/use-annotation-interactions\";\nimport { Observation } from \"@/domain/data\";\n\ntype InteractionVoronoiChartState = AreasState | LinesState | ScatterplotState;\n\nexport const InteractionVoronoi = memo(function InteractionVoronoi({\n  debug,\n}: {\n  debug?: boolean;\n}) {\n  const ref = useRef<SVGGElement>(null);\n  const chartState = useChartState() as InteractionVoronoiChartState;\n  const {\n    bounds: { chartWidth, chartHeight, margins },\n    getSegment,\n    colors,\n  } = chartState;\n  const { onClick, onHover, onHoverOut } = useAnnotationInteractions({\n    focusingSegment: true,\n  });\n\n  const voronoiPoints = useMemo(() => {\n    return getVoronoiPoints(chartState);\n  }, [chartState]);\n\n  const delaunay = useMemo(() => {\n    return Delaunay.from(\n      voronoiPoints,\n      (d) => d.x,\n      (d) => d.y\n    );\n  }, [voronoiPoints]);\n\n  const voronoi = useMemo(() => {\n    return delaunay.voronoi([\n      0,\n      0,\n      atLeastZero(chartWidth),\n      atLeastZero(chartHeight),\n    ]);\n  }, [chartWidth, chartHeight, delaunay]);\n\n  const findVoronoiPoint = useCallback(\n    (e: MouseEvent) => {\n      if (!ref.current) {\n        return;\n      }\n\n      const [x, y] = pointer(e, ref.current);\n      const i = delaunay.find(x, y);\n\n      return voronoiPoints[i];\n    },\n    [voronoiPoints, delaunay]\n  );\n\n  const handleHover = useCallback(\n    (e: MouseEvent) => {\n      const point = findVoronoiPoint(e);\n\n      if (point) {\n        onHover(point.observation, { segment: point.segment });\n      }\n    },\n    [findVoronoiPoint, onHover]\n  );\n\n  const handleClick = useCallback(\n    (e: MouseEvent) => {\n      const point = findVoronoiPoint(e);\n\n      if (point) {\n        onClick(point.observation, { segment: point.segment });\n      }\n    },\n    [findVoronoiPoint, onClick]\n  );\n\n  return (\n    <g ref={ref} transform={`translate(${margins.left} ${margins.top})`}>\n      {debug &&\n        voronoiPoints.map(({ observation }, i) => (\n          <path\n            key={i}\n            d={voronoi.renderCell(i)}\n            stroke=\"white\"\n            strokeOpacity={1}\n            fill={colors(getSegment(observation))}\n            fillOpacity={0.2}\n          />\n        ))}\n      <rect\n        width={chartWidth}\n        height={chartHeight}\n        fillOpacity={0}\n        onMouseOver={handleHover}\n        onMouseMove={handleHover}\n        onMouseOut={onHoverOut}\n        onClick={handleClick}\n      />\n    </g>\n  );\n});\n\ntype VoronoiDataPoint = {\n  x: number;\n  y: number;\n  observation: Observation;\n  segment?: string;\n};\n\nconst getVoronoiPoints = (chartState: InteractionVoronoiChartState) => {\n  const { chartData, xScale, getX, yScale, getY, getSegment } = chartState;\n\n  switch (chartState.chartType) {\n    case \"area\": {\n      const { series } = chartState;\n\n      return series.flatMap((s) => {\n        const segment = s.key;\n\n        return s\n          .map((d) => {\n            const observation = d.data;\n            const x = xScale(getX(observation) ?? NaN);\n            const y = yScale(series.length === 1 ? d[0] : (d[0] + d[1]) * 0.5);\n\n            return {\n              x,\n              y,\n              observation,\n              segment,\n            };\n          })\n          .filter(\n            (point) => !Number.isNaN(point.x) && !Number.isNaN(point.y)\n          ) satisfies VoronoiDataPoint[];\n      });\n    }\n    case \"line\":\n    case \"scatterplot\": {\n      return chartData\n        .map((d) => {\n          const segment = getSegment(d);\n\n          return {\n            observation: d,\n            x: xScale(getX(d) ?? NaN),\n            y: yScale(getY(d) ?? NaN),\n            segment,\n          };\n        })\n        .filter(\n          (point) => !Number.isNaN(point.x) && !Number.isNaN(point.y)\n        ) satisfies VoronoiDataPoint[];\n    }\n    default:\n      const _exhaustiveCheck: never = chartState;\n      return _exhaustiveCheck;\n  }\n};\n\nconst atLeastZero = (n: number) => (n < 0 ? 0 : n);\n","import pointer from \"./pointer.js\";\nimport sourceEvent from \"./sourceEvent.js\";\n\nexport default function(events, node) {\n  if (events.target) { // i.e., instanceof Event, not TouchList or iterable\n    events = sourceEvent(events);\n    if (node === undefined) node = events.currentTarget;\n    events = events.touches || [events];\n  }\n  return Array.from(events, event => pointer(event, node));\n}\n","export var slice = Array.prototype.slice;\n\nexport default function(x) {\n  return typeof x === \"object\" && \"length\" in x\n    ? x // Array, TypedArray, NodeList, array-like\n    : Array.from(x); // Map, Set, iterable, string, or anything else\n}\n","export default function(x) {\n  return function constant() {\n    return x;\n  };\n}\n","function Linear(context) {\n  this._context = context;\n}\n\nLinear.prototype = {\n  areaStart: function() {\n    this._line = 0;\n  },\n  areaEnd: function() {\n    this._line = NaN;\n  },\n  lineStart: function() {\n    this._point = 0;\n  },\n  lineEnd: function() {\n    if (this._line || (this._line !== 0 && this._point === 1)) this._context.closePath();\n    this._line = 1 - this._line;\n  },\n  point: function(x, y) {\n    x = +x, y = +y;\n    switch (this._point) {\n      case 0: this._point = 1; this._line ? this._context.lineTo(x, y) : this._context.moveTo(x, y); break;\n      case 1: this._point = 2; // falls through\n      default: this._context.lineTo(x, y); break;\n    }\n  }\n};\n\nexport default function(context) {\n  return new Linear(context);\n}\n","import array from \"./array.js\";\nimport constant from \"./constant.js\";\nimport curveLinear from \"./curve/linear.js\";\nimport {withPath} from \"./path.js\";\nimport {x as pointX, y as pointY} from \"./point.js\";\n\nexport default function(x, y) {\n  var defined = constant(true),\n      context = null,\n      curve = curveLinear,\n      output = null,\n      path = withPath(line);\n\n  x = typeof x === \"function\" ? x : (x === undefined) ? pointX : constant(x);\n  y = typeof y === \"function\" ? y : (y === undefined) ? pointY : constant(y);\n\n  function line(data) {\n    var i,\n        n = (data = array(data)).length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) output = curve(buffer = path());\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) output.lineStart();\n        else output.lineEnd();\n      }\n      if (defined0) output.point(+x(d, i, data), +y(d, i, data));\n    }\n\n    if (buffer) return output = null, buffer + \"\" || null;\n  }\n\n  line.x = function(_) {\n    return arguments.length ? (x = typeof _ === \"function\" ? _ : constant(+_), line) : x;\n  };\n\n  line.y = function(_) {\n    return arguments.length ? (y = typeof _ === \"function\" ? _ : constant(+_), line) : y;\n  };\n\n  line.defined = function(_) {\n    return arguments.length ? (defined = typeof _ === \"function\" ? _ : constant(!!_), line) : defined;\n  };\n\n  line.curve = function(_) {\n    return arguments.length ? (curve = _, context != null && (output = curve(context)), line) : curve;\n  };\n\n  line.context = function(_) {\n    return arguments.length ? (_ == null ? context = output = null : output = curve(context = _), line) : context;\n  };\n\n  return line;\n}\n","const pi = Math.PI,\n    tau = 2 * pi,\n    epsilon = 1e-6,\n    tauEpsilon = tau - epsilon;\n\nfunction append(strings) {\n  this._ += strings[0];\n  for (let i = 1, n = strings.length; i < n; ++i) {\n    this._ += arguments[i] + strings[i];\n  }\n}\n\nfunction appendRound(digits) {\n  let d = Math.floor(digits);\n  if (!(d >= 0)) throw new Error(`invalid digits: ${digits}`);\n  if (d > 15) return append;\n  const k = 10 ** d;\n  return function(strings) {\n    this._ += strings[0];\n    for (let i = 1, n = strings.length; i < n; ++i) {\n      this._ += Math.round(arguments[i] * k) / k + strings[i];\n    }\n  };\n}\n\nexport class Path {\n  constructor(digits) {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n    this._append = digits == null ? append : appendRound(digits);\n  }\n  moveTo(x, y) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._append`Z`;\n    }\n  }\n  lineTo(x, y) {\n    this._append`L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  quadraticCurveTo(x1, y1, x, y) {\n    this._append`Q${+x1},${+y1},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  bezierCurveTo(x1, y1, x2, y2, x, y) {\n    this._append`C${+x1},${+y1},${+x2},${+y2},${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arcTo(x1, y1, x2, y2, r) {\n    x1 = +x1, y1 = +y1, x2 = +x2, y2 = +y2, r = +r;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let x0 = this._x1,\n        y0 = this._y1,\n        x21 = x2 - x1,\n        y21 = y2 - y1,\n        x01 = x0 - x1,\n        y01 = y0 - y1,\n        l01_2 = x01 * x01 + y01 * y01;\n\n    // Is this path empty? Move to (x1,y1).\n    if (this._x1 === null) {\n      this._append`M${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Or, is (x1,y1) coincident with (x0,y0)? Do nothing.\n    else if (!(l01_2 > epsilon));\n\n    // Or, are (x0,y0), (x1,y1) and (x2,y2) collinear?\n    // Equivalently, is (x1,y1) coincident with (x2,y2)?\n    // Or, is the radius zero? Line to (x1,y1).\n    else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon) || !r) {\n      this._append`L${this._x1 = x1},${this._y1 = y1}`;\n    }\n\n    // Otherwise, draw an arc!\n    else {\n      let x20 = x2 - x0,\n          y20 = y2 - y0,\n          l21_2 = x21 * x21 + y21 * y21,\n          l20_2 = x20 * x20 + y20 * y20,\n          l21 = Math.sqrt(l21_2),\n          l01 = Math.sqrt(l01_2),\n          l = r * Math.tan((pi - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2),\n          t01 = l / l01,\n          t21 = l / l21;\n\n      // If the start tangent is not coincident with (x0,y0), line to.\n      if (Math.abs(t01 - 1) > epsilon) {\n        this._append`L${x1 + t01 * x01},${y1 + t01 * y01}`;\n      }\n\n      this._append`A${r},${r},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x1 + t21 * x21},${this._y1 = y1 + t21 * y21}`;\n    }\n  }\n  arc(x, y, r, a0, a1, ccw) {\n    x = +x, y = +y, r = +r, ccw = !!ccw;\n\n    // Is the radius negative? Error.\n    if (r < 0) throw new Error(`negative radius: ${r}`);\n\n    let dx = r * Math.cos(a0),\n        dy = r * Math.sin(a0),\n        x0 = x + dx,\n        y0 = y + dy,\n        cw = 1 ^ ccw,\n        da = ccw ? a0 - a1 : a1 - a0;\n\n    // Is this path empty? Move to (x0,y0).\n    if (this._x1 === null) {\n      this._append`M${x0},${y0}`;\n    }\n\n    // Or, is (x0,y0) not coincident with the previous point? Line to (x0,y0).\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) {\n      this._append`L${x0},${y0}`;\n    }\n\n    // Is this arc empty? Were done.\n    if (!r) return;\n\n    // Does the angle go the wrong way? Flip the direction.\n    if (da < 0) da = da % tau + tau;\n\n    // Is this a complete circle? Draw two arcs to complete the circle.\n    if (da > tauEpsilon) {\n      this._append`A${r},${r},0,1,${cw},${x - dx},${y - dy}A${r},${r},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;\n    }\n\n    // Is this arc non-empty? Draw an arc!\n    else if (da > epsilon) {\n      this._append`A${r},${r},0,${+(da >= pi)},${cw},${this._x1 = x + r * Math.cos(a1)},${this._y1 = y + r * Math.sin(a1)}`;\n    }\n  }\n  rect(x, y, w, h) {\n    this._append`M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${w = +w}v${+h}h${-w}Z`;\n  }\n  toString() {\n    return this._;\n  }\n}\n\nexport function path() {\n  return new Path;\n}\n\n// Allow instanceof d3.path\npath.prototype = Path.prototype;\n\nexport function pathRound(digits = 3) {\n  return new Path(+digits);\n}\n","import {Path} from \"d3-path\";\n\nexport function withPath(shape) {\n  let digits = 3;\n\n  shape.digits = function(_) {\n    if (!arguments.length) return digits;\n    if (_ == null) {\n      digits = null;\n    } else {\n      const d = Math.floor(_);\n      if (!(d >= 0)) throw new RangeError(`invalid digits: ${_}`);\n      digits = d;\n    }\n    return shape;\n  };\n\n  return () => new Path(digits);\n}\n","export function x(p) {\n  return p[0];\n}\n\nexport function y(p) {\n  return p[1];\n}\n"],"names":["ErrorWhiskers","getX","getY","getYErrorPresent","getYErrorRange","chartData","yScale","xScale","showYUncertainty","colors","getSegment","bounds","useChartState","margins","ref","useRef","enableTransition","useTransitionStore","state","enable","transitionDuration","duration","renderData","useMemo","filter","map","d","i","x0","segment","y","y1","y2","key","x","barWidth","width","fill","renderMiddleCircle","useEffect","current","renderContainer","id","transform","left","top","transition","render","g","opts","renderVerticalWhiskers","_jsx","Lines","_ref","dotSize","grouped","labelFontSize","fontFamily","useChartTheme","valueLabelsContainerRef","lineGenerator","line","defined","isNaN","valueLabelsData","useRenderTemporalValueLabelsData","renderTotalValueLabels","_objectSpread","rotate","fontSize","_jsxs","children","Array","from","observation","Fragment","Line","path","color","Points","memo","_ref2","stroke","getPointRadius","undefined","_ref3","chartHeight","dots","xScaled","Number","truthy","chartWidth","r","_ref4","cx","cy","useLinesStateVariables","props","chartConfig","observations","dimensions","dimensionsById","measures","measuresById","limits","fields","baseVariables","useBaseVariables","temporalXVariables","useTemporalXVariables","numericalYVariables","useNumericalYVariables","numericalYErrorVariables","useNumericalYErrorVariables","getValue","segmentVariables","useSegmentVariables","interactiveFiltersVariables","useInteractiveFiltersVariables","interactiveFiltersConfig","limitsVariables","useLimitsVariables","sortData","useCallback","data","sort","a","b","ascending","useLinesStateData","chartProps","variables","xDimension","getSegmentAbbreviationOrLabel","getTimeRangeDate","plottableData","usePlottableData","useChartData","axisDimensionId","limit","measureLimit","timeRangeDimensionId","getAxisValueAsDate","useLinesState","getXAsString","yMeasure","getFormattedYUncertainty","getMinY","xAxisLabel","segmentDimension","segmentsByAbbreviationOrLabel","getSegmentLabel","yAxisLabel","minLimitValue","maxLimitValue","scalesData","segmentData","timeRangeData","paddingData","allData","height","useSize","formatNumber","useFormatNumber","decimals","timeFormatUnit","useTimeFormatUnit","formatters","useChartFormatters","xKey","segmentsByValue","Map","values","value","preparedDataGroupedBySegment","group","preparedDataGroupedByX","chartWideData","getWideData","dataGrouped","getAxisValue","xDomain","extent","scaleTime","domain","xScaleTimeRangeDomain","xScaleTimeRange","scaleLinear","paddingYScale","customDomain","minValue","maxValue","max","Math","min","nice","paddingMinValue","paddingMaxValue","segmentFilter","cubes","find","iri","cubeIri","filters","allSegments","segments","allUniqueSegments","Set","uniqueSegments","sorting","sorters","makeDimensionValueSorters","useAbbreviations","dimensionFilter","orderBy","getSortingOrders","includes","scaleOrdinal","orderedSegmentLabelsAndColors","dvIri","get","label","type","colorMapping","schemeCategory10","s","range","getPalette","paletteId","colorField","bottom","useChartPadding","xLabelPresent","getChartWidth","right","leftAxisLabelSize","useAxisLabelSizeVariables","bottomAxisLabelSize","_useShowTemporalValue","useShowTemporalValueLabelsVariables","yOffset","yValueLabelsOffset","showValuesVariables","_objectWithoutProperties","_excluded","DEFAULT_MARGIN_TOP","offset","useChartBounds","isMobile","useIsMobile","getAnnotationInfo","DEFAULT_ANNOTATION_CIRCLE_COLOR","chartType","getColorLabel","getTooltipInfo","datum","tooltipValues","getTime","sortedTooltipValues","sortByIndex","order","getCategory","sortingOrder","xAnchor","yValues","yMin","yMax","yAnchor","placement","MOBILE_TOOLTIP_PLACEMENT","getCenteredTooltipPlacement","topAnchor","yValueFormatter","formatNumberWithUnit","unit","timeUnit","error","hide","axis","axisOffset","symbol","leftAxisLabelOffsetTop","LineChartProvider","_excluded2","ChartContext","Provider","LineChart","InteractionProvider","ChartLinesVisualization","ChartDataWrapper","Component","ChartLines","dashboardFilters","useConfiguratorState","hasChartConfigs","useLimits","isEditingAnnotation","useIsEditingAnnotation","ChartContainer","ChartSvg","AxisHeightLinear","AxisHideXOverflowRect","AxisTime","AxisTimeDomain","showDots","showDotsSize","VerticalLimits","InteractionVoronoi","InteractionHorizontal","shouldShowBrush","timeRange","BrushTime","Ruler","HoverAnnotationDot","HoverDotMultiple","Tooltip","Annotations","length","ChartControlsContainer","LegendColor","interactive","legend","active","showTitle","formatDateAuto","useFormatShortDateAuto","labelColor","gridColor","domainColor","axisLabelFontSize","xAxisTitleOffset","useXAxisTitleOffset","hasNegativeValues","ticks","MAX_DATE_LABEL_LENGTH","axisBottom","tickSizeInner","tickPadding","tickFormat","call","renderUpdate","maybeTransition","select","remove","selectAll","attr","_Fragment","style","display","OpenMetadataPanelWrapper","component","lineHeight","tickSizeOuter","visible","useInteraction","HoverDots","useStyles","makeStyles","theme","dot","position","borderRadius","borderStyle","borderWidth","borderColor","palette","grey","pointerEvents","classes","className","backgroundColor","RulerInner","RulerContent","xValue","cobalt","fontWeight","background","paper","paddingLeft","spacing","paddingRight","chartState","LimitsComponent","createLimitsComponent","isHorizontal","getChartState","displayName","interaction","dispatch","hideTooltip","useEvent","showTooltip","e","pointer","bisectDate","bisector","date","thisDate","invert","dLeft","dRight","closestDatum","closestDatumTime","mouse","fillOpacity","onMouseOut","onMouseOver","onMouseMove","debug","onClick","onHover","onHoverOut","useAnnotationInteractions","focusingSegment","voronoiPoints","getVoronoiPoints","delaunay","Delaunay","voronoi","atLeastZero","findVoronoiPoint","handleHover","point","handleClick","renderCell","strokeOpacity","series","flatMap","NaN","n","__WEBPACK_DEFAULT_EXPORT__","events","node","target","_sourceEvent_js__WEBPACK_IMPORTED_MODULE_0__","Z","currentTarget","touches","event","_pointer_js__WEBPACK_IMPORTED_MODULE_1__","prototype","slice","Linear","context","_context","areaStart","_line","areaEnd","lineStart","_point","lineEnd","closePath","lineTo","moveTo","_constant_js__WEBPACK_IMPORTED_MODULE_0__","curve","_curve_linear_js__WEBPACK_IMPORTED_MODULE_1__","output","_path_js__WEBPACK_IMPORTED_MODULE_2__","buffer","_array_js__WEBPACK_IMPORTED_MODULE_4__","defined0","_point_js__WEBPACK_IMPORTED_MODULE_3__","_","arguments","pi","PI","tau","tauEpsilon","append","strings","Path","constructor","digits","_x0","_y0","_x1","_y1","_append","appendRound","floor","k","round","quadraticCurveTo","x1","bezierCurveTo","x2","arcTo","y0","x21","y21","x01","y01","l01_2","abs","x20","y20","l21_2","l21","sqrt","l01","l","tan","acos","t01","t21","arc","a0","a1","ccw","dx","cos","dy","sin","cw","da","rect","w","h","toString","withPath","shape","p"],"sourceRoot":""}